"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateliminal_app"]("main",{

/***/ "./src/modules/kyc.ts":
/*!****************************!*\
  !*** ./src/modules/kyc.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AlpacaId\": () => (/* binding */ AlpacaId),\n/* harmony export */   \"IsValidKYC\": () => (/* binding */ IsValidKYC),\n/* harmony export */   \"KYCUserIsValid\": () => (/* binding */ KYCUserIsValid),\n/* harmony export */   \"KYCUserToSmartContract\": () => (/* binding */ KYCUserToSmartContract),\n/* harmony export */   \"initKYC\": () => (/* binding */ initKYC)\n/* harmony export */ });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main */ \"./src/main.ts\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./render */ \"./src/modules/render.ts\");\n/* harmony import */ var _buy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buy */ \"./src/modules/buy.ts\");\n/* harmony import */ var moralis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moralis */ \"./node_modules/moralis/index.js\");\n/* harmony import */ var moralis__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moralis__WEBPACK_IMPORTED_MODULE_3__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nlet AlpacaId;\r\nlet KYCInfo;\r\nconst initKYC = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        AlpacaId = (yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().fetch()).get('alpacaId');\r\n        AlpacaId = undefined;\r\n        console.log('alpacaId:', AlpacaId);\r\n        KYCInfo = yield getKYCInfo();\r\n        if (!AlpacaId) {\r\n            document.getElementById('kyc_reg').style.display = 'block';\r\n            document.getElementById('writeToBlockcahin').style.display = 'none';\r\n            document.getElementById('submitKYC').onclick = submitKYC;\r\n            loadName();\r\n        }\r\n        else {\r\n            showWriteToBlockchain();\r\n        }\r\n    });\r\n};\r\nconst loadName = function () {\r\n    var characters = [\r\n        { given_name: 'Leslie', family_name: 'Knope', email_address: 'leslie.knope' },\r\n        { given_name: 'April', family_name: 'Ludgate', email_address: 'april.ludgate' },\r\n        { given_name: 'Jerry', family_name: 'Gergich', email_address: 'jerry.gergich' },\r\n        { given_name: 'Tom', family_name: 'Haverford', email_address: 'tom.haverford' },\r\n        { given_name: 'Donna', family_name: 'Meagle', email_address: 'donna.meagle' },\r\n        { given_name: 'Andy', family_name: 'Dwyer', email_address: 'andy.dwyer' },\r\n        { given_name: 'Ann', family_name: 'Perkins', email_address: 'ann.perkins' },\r\n        { given_name: 'Ben', family_name: 'Wyatt', email_address: 'ben.wyatt' },\r\n        { given_name: 'Chris', family_name: 'Traeger', email_address: 'chris.traeger' },\r\n        { given_name: 'Jean-Ralphio', family_name: 'Saperstein', email_address: 'jean-ralphio.saperstein' },\r\n        { given_name: 'Councilman', family_name: 'Jamm', email_address: 'jamm' }\r\n    ];\r\n    let idx = Math.floor(Math.random() * characters.length) % characters.length;\r\n    var character = characters[idx];\r\n    document.getElementById('given_name').value = character.given_name;\r\n    document.getElementById('family_name').value = character.family_name;\r\n    document.getElementById('email_address').value = character.email_address + '.' + (new Date().getTime()) + '@parks-and-rec-example.com';\r\n};\r\nconst submitKYC = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        showProgressStep('Register KYC with broker', 33);\r\n        const form = document.getElementById('kyc_wizard_form');\r\n        let data = new FormData(form);\r\n        let params = serialize(data);\r\n        AlpacaId = yield moralis__WEBPACK_IMPORTED_MODULE_3___default().Cloud.run(\"kycRegistration\", params);\r\n        let user = moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n        user.set('alpacaId', AlpacaId);\r\n        user.save();\r\n        KYCUserToSmartContract(AlpacaId);\r\n        return false;\r\n    });\r\n};\r\nconst showProgressStep = function (text, perc, warning) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        document.getElementById('btnWriteToBlockchain').style.display = \"none\";\r\n        document.getElementById('submitKYC').style.display = \"none\";\r\n        document.getElementById('kyc_progress').style.display = \"block\";\r\n        var element = document.getElementById('kyc_steps');\r\n        element.innerHTML = '<div class=\"progress_text\">' + text + '</div>';\r\n        element.style.width = perc + '%';\r\n        element.classList.toggle('progress-bar-striped', (perc != 100));\r\n        element.classList.toggle('progress-bar-animated', (perc != 100));\r\n        if (warning) {\r\n            element.classList.add('bg-warning');\r\n            element.classList.add('progress_text_attn');\r\n        }\r\n        else {\r\n            element.classList.remove('bg-warning');\r\n            element.classList.remove('progress_text_attn');\r\n        }\r\n    });\r\n};\r\nconst isValidAccountId = function (str) {\r\n    const regex = new RegExp('^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$');\r\n    return regex.test(str);\r\n};\r\nconst KYCUserToSmartContract = function (accountId) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (!isValidAccountId(accountId)) {\r\n            showProgressStep('Your account id was invalid. This should not happen, <a href=\"https://discord.gg/ePs5cRceNB\" target=\"_blank\">ping us on Discord</a>', 100, true);\r\n            return;\r\n        }\r\n        const str = 'Writing to blockchain, you must confirm transaction in your wallet';\r\n        KYCInfo = yield getKYCInfo();\r\n        showProgressStep(str, 66);\r\n        setTimeout(function () { checkToShowMetamaskIcon(str); }, 10 * 1000);\r\n        const kycOptions = {\r\n            contractAddress: _main__WEBPACK_IMPORTED_MODULE_0__.Main.ContractAddressesInfo.KYC_ADDRESS,\r\n            functionName: \"validateAccount\",\r\n            abi: KYCInfo.abi,\r\n            params: {\r\n                accountId: accountId\r\n            },\r\n        };\r\n        yield moralis__WEBPACK_IMPORTED_MODULE_3___default().executeFunction(kycOptions).then((result) => __awaiter(this, void 0, void 0, function* () {\r\n            console.log('KYCUserToSmartContract result', result);\r\n            IsValidKYC = true;\r\n            showProgressStep('Done, loading buy page...', 100);\r\n            (0,_render__WEBPACK_IMPORTED_MODULE_1__.render)('buy', null, _buy__WEBPACK_IMPORTED_MODULE_2__.buyPageInit);\r\n        })).catch(function (err) {\r\n            console.log(err);\r\n            showWriteToBlockchain();\r\n        });\r\n        console.log('writing to blockcahin', kycOptions);\r\n    });\r\n};\r\nconst checkToShowMetamaskIcon = function (txt) {\r\n    //Waiting on approval to execute\r\n    if (document.getElementById('kyc_progress') && document.getElementById('kyc_progress').style.display != \"none\" && document.getElementById('kyc_steps').innerText.indexOf(txt) != -1) {\r\n        showProgressStep('Hey Ho! Is Metamask be waiting for you?<br />Check top right corner of your browser <img src=\"/img/metamask-pending.png\"/>', 99, true);\r\n        setTimeout(function () { blockshainSlowMessage(); }, 8 * 1000);\r\n    }\r\n};\r\nconst blockshainSlowMessage = function () {\r\n    if (document.getElementById('kyc_progress') && document.getElementById('kyc_progress').style.display != \"none\" && document.getElementById('kyc_steps').innerText.indexOf('Hey Ho!') != -1) {\r\n        showProgressStep('If you have already approved, maybe blockchain is slow. Lets give it a bit. Just double check for <img src=\"/img/metamask-pending.png\"/>', 99, true);\r\n    }\r\n};\r\nconst showWriteToBlockchain = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const user = yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n        document.getElementById('need_native_token').style.display = 'block';\r\n        document.getElementById('native_token_address').value = yield user.get('ethAddress');\r\n        document.getElementById('btnWriteToBlockchain').style.display = \"block\";\r\n        document.getElementById('submitKYC').style.display = \"block\";\r\n        document.getElementById('kyc_progress').style.display = 'none';\r\n        document.getElementById('kyc_reg').style.display = 'none';\r\n        document.getElementById('writeToBlockcahin').style.display = 'block';\r\n        document.getElementById('btnWriteToBlockchain').addEventListener('click', function (evt) {\r\n            evt.preventDefault();\r\n            KYCUserToSmartContract(AlpacaId);\r\n        });\r\n    });\r\n};\r\nfunction serialize(data) {\r\n    let obj = {};\r\n    for (let [key, value] of data) {\r\n        if (obj[key] !== undefined) {\r\n            if (!Array.isArray(obj[key])) {\r\n                obj[key] = [obj[key]];\r\n            }\r\n            obj[key].push(value);\r\n        }\r\n        else {\r\n            obj[key] = value;\r\n        }\r\n    }\r\n    return obj;\r\n}\r\nlet IsValidKYC = false;\r\nconst KYCUserIsValid = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (IsValidKYC)\r\n            return true;\r\n        KYCInfo = yield getKYCInfo();\r\n        const kycOptions = {\r\n            contractAddress: _main__WEBPACK_IMPORTED_MODULE_0__.Main.ContractAddressesInfo.KYC_ADDRESS,\r\n            functionName: \"isValid\",\r\n            abi: KYCInfo.abi,\r\n            params: {\r\n                userAddress: moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().get('ethAddress')\r\n            }\r\n        };\r\n        yield moralis__WEBPACK_IMPORTED_MODULE_3___default().executeFunction(kycOptions).then((result) => __awaiter(this, void 0, void 0, function* () {\r\n            console.log('kyc result:', result.toString());\r\n            //todo: make sure result.value is correct\r\n            if (isValidAccountId(result.toString())) {\r\n                IsValidKYC = true;\r\n                var user = moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n                if (!user.get('alpacaId')) {\r\n                    user.save({ alpacaId: result });\r\n                    yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().fetch();\r\n                }\r\n                return;\r\n            }\r\n        })).catch(function (err) {\r\n            console.log('Not KYC valid', err);\r\n        });\r\n    });\r\n};\r\nfunction getKYCInfo() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (KYCInfo != null)\r\n            return KYCInfo;\r\n        const response = yield fetch(\"../abi/KYC.json\");\r\n        KYCInfo = yield response.json();\r\n        return KYCInfo;\r\n    });\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2hELE9BQU8sR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQyxPQUFPLE9BQU8sQ0FBQztJQUNoQixDQUFDO0NBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9tb2R1bGVzL2t5Yy50cz83NzUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1haW4gfSAgZnJvbSAnLi4vbWFpbic7XHJcblxyXG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tIFwiLi9yZW5kZXJcIjtcclxuaW1wb3J0IHtidXlQYWdlSW5pdH0gZnJvbSAnLi9idXknO1xyXG5pbXBvcnQgTW9yYWxpcyBmcm9tICdtb3JhbGlzJztcclxuXHJcbmV4cG9ydCBsZXQgQWxwYWNhSWQ7XHJcbmxldCBLWUNJbmZvIDogYW55O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRLWUMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcblx0QWxwYWNhSWQgPSAoYXdhaXQgTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKS5mZXRjaCgpKS5nZXQoJ2FscGFjYUlkJyk7XHJcblx0QWxwYWNhSWQgPSB1bmRlZmluZWQ7XHJcblx0Y29uc29sZS5sb2coJ2FscGFjYUlkOicsIEFscGFjYUlkKTtcclxuXHRLWUNJbmZvID0gYXdhaXQgZ2V0S1lDSW5mbygpO1xyXG5cclxuXHRpZiAoIUFscGFjYUlkKSB7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3JlZycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cml0ZVRvQmxvY2tjYWhpbicpLnN0eWxlLmRpc3BsYXk9J25vbmUnO1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdEtZQycpLm9uY2xpY2sgPSBzdWJtaXRLWUM7XHJcblxyXG5cdFx0bG9hZE5hbWUoKTtcclxuXHJcblx0fSBlbHNlIHtcclxuXHRcdHNob3dXcml0ZVRvQmxvY2tjaGFpbigpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG5jb25zdCBsb2FkTmFtZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBjaGFyYWN0ZXJzID0gW1xyXG5cdFx0e2dpdmVuX25hbWUgOiAnTGVzbGllJywgZmFtaWx5X25hbWUgOiAnS25vcGUnLCBlbWFpbF9hZGRyZXNzOidsZXNsaWUua25vcGUnIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdBcHJpbCcsIGZhbWlseV9uYW1lIDogJ0x1ZGdhdGUnLCBlbWFpbF9hZGRyZXNzOidhcHJpbC5sdWRnYXRlJyB9LFxyXG5cdFx0e2dpdmVuX25hbWUgOiAnSmVycnknLCBmYW1pbHlfbmFtZSA6ICdHZXJnaWNoJywgZW1haWxfYWRkcmVzczonamVycnkuZ2VyZ2ljaCcgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ1RvbScsIGZhbWlseV9uYW1lIDogJ0hhdmVyZm9yZCcsIGVtYWlsX2FkZHJlc3M6J3RvbS5oYXZlcmZvcmQnIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdEb25uYScsIGZhbWlseV9uYW1lIDogJ01lYWdsZScsIGVtYWlsX2FkZHJlc3M6J2Rvbm5hLm1lYWdsZScgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0FuZHknLCBmYW1pbHlfbmFtZSA6ICdEd3llcicsIGVtYWlsX2FkZHJlc3M6J2FuZHkuZHd5ZXInIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdBbm4nLCBmYW1pbHlfbmFtZSA6ICdQZXJraW5zJywgZW1haWxfYWRkcmVzczonYW5uLnBlcmtpbnMnIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdCZW4nLCBmYW1pbHlfbmFtZSA6ICdXeWF0dCcsIGVtYWlsX2FkZHJlc3M6J2Jlbi53eWF0dCcgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0NocmlzJywgZmFtaWx5X25hbWUgOiAnVHJhZWdlcicsIGVtYWlsX2FkZHJlc3M6J2NocmlzLnRyYWVnZXInIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdKZWFuLVJhbHBoaW8nLCBmYW1pbHlfbmFtZSA6ICdTYXBlcnN0ZWluJywgZW1haWxfYWRkcmVzczonamVhbi1yYWxwaGlvLnNhcGVyc3RlaW4nIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdDb3VuY2lsbWFuJywgZmFtaWx5X25hbWUgOiAnSmFtbScsIGVtYWlsX2FkZHJlc3M6J2phbW0nIH1cclxuXHRdXHJcblxyXG5cdGxldCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCkgJSBjaGFyYWN0ZXJzLmxlbmd0aDtcclxuXHR2YXIgY2hhcmFjdGVyID0gY2hhcmFjdGVyc1tpZHhdO1xyXG5cdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2l2ZW5fbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gY2hhcmFjdGVyLmdpdmVuX25hbWU7XHJcblx0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYW1pbHlfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gY2hhcmFjdGVyLmZhbWlseV9uYW1lO1xyXG5cdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWxfYWRkcmVzcycpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gY2hhcmFjdGVyLmVtYWlsX2FkZHJlc3MgKyAnLicgKyAobmV3IERhdGUoKS5nZXRUaW1lKCkpICsgJ0BwYXJrcy1hbmQtcmVjLWV4YW1wbGUuY29tJztcclxuXHJcbn1cclxuXHJcblxyXG5jb25zdCBzdWJtaXRLWUMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcblx0c2hvd1Byb2dyZXNzU3RlcCgnUmVnaXN0ZXIgS1lDIHdpdGggYnJva2VyJywgMzMpO1xyXG5cdGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3dpemFyZF9mb3JtJykgYXMgSFRNTEZvcm1FbGVtZW50O1xyXG5cdGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG5cclxuXHRsZXQgcGFyYW1zID0gc2VyaWFsaXplKGRhdGEpO1xyXG5cclxuXHRBbHBhY2FJZCA9IGF3YWl0IE1vcmFsaXMuQ2xvdWQucnVuKFwia3ljUmVnaXN0cmF0aW9uXCIsIHBhcmFtcyk7XHJcblxyXG5cdGxldCB1c2VyID0gTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuXHR1c2VyLnNldCgnYWxwYWNhSWQnLCBBbHBhY2FJZCk7XHJcblx0dXNlci5zYXZlKCk7XHJcblxyXG5cdEtZQ1VzZXJUb1NtYXJ0Q29udHJhY3QoQWxwYWNhSWQpO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5jb25zdCBzaG93UHJvZ3Jlc3NTdGVwID0gYXN5bmMgZnVuY3Rpb24gKHRleHQgOiBzdHJpbmcsIHBlcmMgOiBudW1iZXIsIHdhcm5pbmc/IDogYm9vbGVhbikge1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5Xcml0ZVRvQmxvY2tjaGFpbicpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0S1lDJykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcHJvZ3Jlc3MnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19zdGVwcycpO1xyXG5cdGVsZW1lbnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJwcm9ncmVzc190ZXh0XCI+JyArIHRleHQgKyAnPC9kaXY+JztcclxuXHRlbGVtZW50LnN0eWxlLndpZHRoID0gcGVyYyArICclJztcclxuXHJcblx0ZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdwcm9ncmVzcy1iYXItc3RyaXBlZCcsIChwZXJjICE9IDEwMCkpO1xyXG5cdGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgncHJvZ3Jlc3MtYmFyLWFuaW1hdGVkJywgKHBlcmMgIT0gMTAwKSk7XHJcblx0aWYgKHdhcm5pbmcpIHtcclxuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmctd2FybmluZycpO1xyXG5cdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwcm9ncmVzc190ZXh0X2F0dG4nKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13YXJuaW5nJyk7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2dyZXNzX3RleHRfYXR0bicpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IGlzVmFsaWRBY2NvdW50SWQgPSBmdW5jdGlvbihzdHIgOiBzdHJpbmcpIHtcclxuXHRjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoJ15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC01XVswLTlhLWZdezN9LVswODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn0kJyk7XHJcblx0cmV0dXJuIHJlZ2V4LnRlc3Qoc3RyKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBLWUNVc2VyVG9TbWFydENvbnRyYWN0ID0gYXN5bmMgZnVuY3Rpb24gKGFjY291bnRJZCA6IHN0cmluZykge1xyXG5cdGlmICghaXNWYWxpZEFjY291bnRJZChhY2NvdW50SWQpKSB7XHJcblx0XHRzaG93UHJvZ3Jlc3NTdGVwKCdZb3VyIGFjY291bnQgaWQgd2FzIGludmFsaWQuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4sIDxhIGhyZWY9XCJodHRwczovL2Rpc2NvcmQuZ2cvZVBzNWNSY2VOQlwiIHRhcmdldD1cIl9ibGFua1wiPnBpbmcgdXMgb24gRGlzY29yZDwvYT4nLCAxMDAsIHRydWUpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3Qgc3RyID0gJ1dyaXRpbmcgdG8gYmxvY2tjaGFpbiwgeW91IG11c3QgY29uZmlybSB0cmFuc2FjdGlvbiBpbiB5b3VyIHdhbGxldCc7XHJcblxyXG5cdEtZQ0luZm8gPSBhd2FpdCBnZXRLWUNJbmZvKCk7XHJcblxyXG5cdHNob3dQcm9ncmVzc1N0ZXAoc3RyLCA2Nik7XHJcblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNoZWNrVG9TaG93TWV0YW1hc2tJY29uKHN0cikgfSwgMTAgKiAxMDAwKVxyXG5cdGNvbnN0IGt5Y09wdGlvbnMgPSB7XHJcblx0XHRjb250cmFjdEFkZHJlc3M6IE1haW4uQ29udHJhY3RBZGRyZXNzZXNJbmZvLktZQ19BRERSRVNTLFxyXG5cdFx0ZnVuY3Rpb25OYW1lOiBcInZhbGlkYXRlQWNjb3VudFwiLFxyXG5cdFx0YWJpOiBLWUNJbmZvLmFiaSxcclxuXHRcdHBhcmFtczoge1xyXG5cdFx0XHRhY2NvdW50SWQ6IGFjY291bnRJZFxyXG5cdFx0fSxcclxuXHR9O1xyXG5cclxuXHRhd2FpdCBNb3JhbGlzLmV4ZWN1dGVGdW5jdGlvbihreWNPcHRpb25zKS50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKCdLWUNVc2VyVG9TbWFydENvbnRyYWN0IHJlc3VsdCcsIHJlc3VsdCk7XHJcblx0XHRJc1ZhbGlkS1lDID0gdHJ1ZTtcclxuXHRcdHNob3dQcm9ncmVzc1N0ZXAoJ0RvbmUsIGxvYWRpbmcgYnV5IHBhZ2UuLi4nLCAxMDApO1xyXG5cclxuXHRcdHJlbmRlcignYnV5JywgbnVsbCwgYnV5UGFnZUluaXQpO1xyXG5cdH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHRcdHNob3dXcml0ZVRvQmxvY2tjaGFpbigpO1xyXG5cdH0pO1xyXG5cclxuXHRjb25zb2xlLmxvZygnd3JpdGluZyB0byBibG9ja2NhaGluJywga3ljT3B0aW9ucyk7XHJcbn1cclxuXHJcblxyXG5jb25zdCBjaGVja1RvU2hvd01ldGFtYXNrSWNvbiA9IGZ1bmN0aW9uKHR4dCkge1xyXG5cdC8vV2FpdGluZyBvbiBhcHByb3ZhbCB0byBleGVjdXRlXHJcblx0aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcHJvZ3Jlc3MnKSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3Byb2dyZXNzJykuc3R5bGUuZGlzcGxheSAhPSBcIm5vbmVcIiAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3N0ZXBzJykuaW5uZXJUZXh0LmluZGV4T2YodHh0KSAhPSAtMSkge1xyXG5cdFx0c2hvd1Byb2dyZXNzU3RlcCgnSGV5IEhvISBJcyBNZXRhbWFzayBiZSB3YWl0aW5nIGZvciB5b3U/PGJyIC8+Q2hlY2sgdG9wIHJpZ2h0IGNvcm5lciBvZiB5b3VyIGJyb3dzZXIgPGltZyBzcmM9XCIvaW1nL21ldGFtYXNrLXBlbmRpbmcucG5nXCIvPicsIDk5LCB0cnVlKTtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBibG9ja3NoYWluU2xvd01lc3NhZ2UoKTsgfSwgOCAqIDEwMDApO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGJsb2Nrc2hhaW5TbG93TWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19wcm9ncmVzcycpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcHJvZ3Jlc3MnKS5zdHlsZS5kaXNwbGF5ICE9IFwibm9uZVwiICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfc3RlcHMnKS5pbm5lclRleHQuaW5kZXhPZignSGV5IEhvIScpICE9IC0xKSB7XHJcblx0XHRzaG93UHJvZ3Jlc3NTdGVwKCdJZiB5b3UgaGF2ZSBhbHJlYWR5IGFwcHJvdmVkLCBtYXliZSBibG9ja2NoYWluIGlzIHNsb3cuIExldHMgZ2l2ZSBpdCBhIGJpdC4gSnVzdCBkb3VibGUgY2hlY2sgZm9yIDxpbWcgc3JjPVwiL2ltZy9tZXRhbWFzay1wZW5kaW5nLnBuZ1wiLz4nLCA5OSwgdHJ1ZSk7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBzaG93V3JpdGVUb0Jsb2NrY2hhaW4gPSBhc3luYyBmdW5jdGlvbigpIHtcclxuXHRjb25zdCB1c2VyID0gYXdhaXQgTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuXHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lZWRfbmF0aXZlX3Rva2VuJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXRpdmVfdG9rZW5fYWRkcmVzcycpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gYXdhaXQgdXNlci5nZXQoJ2V0aEFkZHJlc3MnKTtcclxuXHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bldyaXRlVG9CbG9ja2NoYWluJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0S1lDJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3Byb2dyZXNzJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3JlZycpLnN0eWxlLmRpc3BsYXk9J25vbmUnO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cml0ZVRvQmxvY2tjYWhpbicpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuV3JpdGVUb0Jsb2NrY2hhaW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG5cdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0S1lDVXNlclRvU21hcnRDb250cmFjdChBbHBhY2FJZCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlcmlhbGl6ZShkYXRhKSB7XHJcblx0bGV0IG9iaiA9IHt9O1xyXG5cdGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBkYXRhKSB7XHJcblx0XHRpZiAob2JqW2tleV0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkob2JqW2tleV0pKSB7XHJcblx0XHRcdFx0b2JqW2tleV0gPSBbb2JqW2tleV1dO1xyXG5cdFx0XHR9XHJcblx0XHRcdG9ialtrZXldLnB1c2godmFsdWUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0b2JqW2tleV0gPSB2YWx1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIG9iajtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBsZXQgSXNWYWxpZEtZQyA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGNvbnN0IEtZQ1VzZXJJc1ZhbGlkID0gYXN5bmMgZnVuY3Rpb24gKCkge1xyXG5cdGlmIChJc1ZhbGlkS1lDKSByZXR1cm4gdHJ1ZTtcclxuXHRLWUNJbmZvID0gYXdhaXQgZ2V0S1lDSW5mbygpO1xyXG5cdGNvbnN0IGt5Y09wdGlvbnMgPSB7XHJcblx0XHRjb250cmFjdEFkZHJlc3M6IE1haW4uQ29udHJhY3RBZGRyZXNzZXNJbmZvLktZQ19BRERSRVNTLFxyXG5cdFx0ZnVuY3Rpb25OYW1lOiBcImlzVmFsaWRcIixcclxuXHRcdGFiaTogS1lDSW5mby5hYmksXHJcblx0XHRwYXJhbXM6IHtcclxuXHRcdFx0dXNlckFkZHJlc3M6IE1vcmFsaXMuVXNlci5jdXJyZW50KCkuZ2V0KCdldGhBZGRyZXNzJylcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRhd2FpdCBNb3JhbGlzLmV4ZWN1dGVGdW5jdGlvbihreWNPcHRpb25zKS50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKCdreWMgcmVzdWx0OicsIHJlc3VsdC50b1N0cmluZygpKTtcclxuXHRcdC8vdG9kbzogbWFrZSBzdXJlIHJlc3VsdC52YWx1ZSBpcyBjb3JyZWN0XHJcblx0XHRpZiAoaXNWYWxpZEFjY291bnRJZChyZXN1bHQudG9TdHJpbmcoKSkpIHtcclxuXHRcdFx0SXNWYWxpZEtZQyA9IHRydWU7XHJcblxyXG5cdFx0XHR2YXIgdXNlciA9IE1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcblx0XHRcdGlmICghdXNlci5nZXQoJ2FscGFjYUlkJykpIHtcclxuXHRcdFx0XHR1c2VyLnNhdmUoe2FscGFjYUlkIDogcmVzdWx0fSk7XHJcblx0XHRcdFx0YXdhaXQgTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKS5mZXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRjb25zb2xlLmxvZygnTm90IEtZQyB2YWxpZCcsIGVycik7XHJcblx0fSk7XHJcblxyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0S1lDSW5mbygpOiBQcm9taXNlPGFueT4ge1xyXG5cdGlmIChLWUNJbmZvICE9IG51bGwpIHJldHVybiBLWUNJbmZvO1xyXG5cclxuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiLi4vYWJpL0tZQy5qc29uXCIpO1xyXG5cdEtZQ0luZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0cmV0dXJuIEtZQ0luZm87XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/modules/kyc.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("99204bbf89fa1cbe8764")
/******/ })();
/******/ 
/******/ }
);