/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/
(() => { // webpackBootstrap
    /******/
    "use strict";
    /******/
    var __webpack_modules__ = ({

        /***/ "./src/main.ts":
        /*!***********************************!*\
          !*** ./src/main.ts + 162 modules ***!
          \***********************************/
        /***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

            eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n;// CONCATENATED MODULE: ./src/networks/Network.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass Network {\r\n    constructor() {\r\n        this.ServerUrl = \"\";\r\n        this.AppId = \"\";\r\n        this.ChainId = 0;\r\n        this.Name = \"\";\r\n        this.ChainName = '';\r\n        this.NativeCurrencyName = \"\";\r\n        this.NativeSymbol = \"\";\r\n        this.NativeDecimal = 18;\r\n        this.RpcUrl = '';\r\n        this.BlockExplorer = '';\r\n        this.TestNetwork = true;\r\n        this.FaucetUrl = '';\r\n        this.BuyUrl = '';\r\n        if (window.location.host.indexOf('localhost') != -1) {\r\n            this.ServerUrl = \"https://dqet8dfymvzj.usemoralis.com:2053/server\";\r\n            this.AppId = \"TXR6YesK99VgRCxSecnySRMp1KI5rLnCfIetQuuU\";\r\n        }\r\n        //else\r\n        {\r\n            this.ServerUrl = \"https://f8t1vrrwtboa.usemoralis.com:2053/server\";\r\n            this.AppId = \"XZhp3wQobrKiCib0Bf4FPVKAUhbHM9SvTLKOKvBb\";\r\n        }\r\n    }\r\n    addNetworkToWallet(moralis) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const web3 = yield moralis.enableWeb3();\r\n            if (!web3 || !web3.provider.request)\r\n                return;\r\n            web3.provider.request({\r\n                method: 'wallet_addEthereumChain',\r\n                params: [{\r\n                        chainId: '0x' + this.ChainId.toString(16),\r\n                        chainName: this.ChainName,\r\n                        nativeCurrency: {\r\n                            name: this.NativeCurrencyName,\r\n                            symbol: this.NativeSymbol,\r\n                            decimals: this.NativeDecimal\r\n                        },\r\n                        rpcUrls: [this.RpcUrl],\r\n                        blockExplorerUrls: [this.BlockExplorer]\r\n                    }]\r\n            }).catch((error) => {\r\n                console.log(error);\r\n            });\r\n        });\r\n    }\r\n    hasEnoughNativeTokens(moralis) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //TODO: remove later, Moralis doesnt support getNativeBalance on localhost so it's always true\r\n            if (this.Name == 'localhost') {\r\n                return true;\r\n            }\r\n            else {\r\n                const options = { chain: '0x' + this.ChainId.toString(16) };\r\n                const result = yield moralis.Web3API.account.getNativeBalance(options);\r\n                const balance = parseFloat(Moralis.Units.FromWei(result.balance, 18));\r\n                if (balance < 0.005) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    ;\r\n}\r\n\n;// CONCATENATED MODULE: ./src/networks/localhost-network.ts\n\r\n//localhost\r\nclass localhostNetwork extends Network {\r\n    constructor() {\r\n        super();\r\n        this.ChainId = 31337;\r\n        this.Name = \"localhost\";\r\n        this.ChainName = 'localhost test';\r\n        this.NativeCurrencyName = \"Ethereum\";\r\n        this.NativeSymbol = \"ETH\";\r\n        this.NativeDecimal = 18;\r\n        this.RpcUrl = 'https://rinkeby.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161';\r\n        this.BlockExplorer = 'https://rinkeby.etherscan.io';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/networks/mumbai-network.ts\n\r\nclass mumbaiNetwork extends Network {\r\n    constructor() {\r\n        super();\r\n        this.ChainId = 80001;\r\n        this.Name = \"mumbai\";\r\n        this.ChainName = 'Polygon Mumbai';\r\n        this.NativeCurrencyName = \"Matic\";\r\n        this.NativeSymbol = \"MATIC\";\r\n        this.NativeDecimal = 18;\r\n        this.RpcUrl = 'https://matic-mumbai.chainstacklabs.com/';\r\n        this.BlockExplorer = 'https://mumbai.polygonscan.com/';\r\n        this.FaucetUrl = 'https://faucet.polygon.technology/';\r\n        this.BuyUrl = 'https://www.moonpay.com/buy/matic';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/util/CookieHelper.ts\nclass CookieHelper {\r\n    constructor(document) {\r\n        this.setCookieNetwork = (name) => {\r\n            this.setCookie(\"network\", name);\r\n        };\r\n        this.document = document;\r\n    }\r\n    setCookie(name, value) {\r\n        let date = new Date();\r\n        this.document.cookie = name + \"=\" + value + \"; expires=Mon, 2 Dec 2024 12:00:00 UTC;path=/;SameSite=Strict\";\r\n    }\r\n    getCookieValue(name) {\r\n        var _a;\r\n        return ((_a = this.document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)')) === null || _a === void 0 ? void 0 : _a.pop()) || '';\r\n    }\r\n    setCookieProvider(providerName) {\r\n        this.setCookie(\"provider\", providerName);\r\n    }\r\n    deleteCookie(name) {\r\n        this.document.cookie = name + \"=0; expires=Mon, 2 Dec 2020 12:00:00 UTC;path=/\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/networks/NetworkInfo.ts\n\r\n\r\n\r\nconst networkInfos = [localhostNetwork, mumbaiNetwork];\r\nclass NetworkInfo {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    static getInstance() {\r\n        if (NetworkInfo.instance)\r\n            return NetworkInfo.instance;\r\n        if (typeof ethereum != 'undefined' && ethereum && ethereum.chainId) {\r\n            let networkInfo = this.getNetworkInfoByChainId(ethereum.chainId);\r\n            if (networkInfo) {\r\n                NetworkInfo.instance = networkInfo;\r\n                return NetworkInfo.instance;\r\n            }\r\n        }\r\n        NetworkInfo.instance = this.getNetworkInfo();\r\n        return NetworkInfo.instance;\r\n    }\r\n    static loadNetwork(networkName) {\r\n        NetworkInfo.instance = this.getNetworkInfo(networkName);\r\n    }\r\n    static setNetworkByChainId(chainId) {\r\n        let network = this.getNetworkInfoByChainId(chainId);\r\n        if (network) {\r\n            NetworkInfo.instance = network;\r\n        }\r\n    }\r\n    static getNetworks() {\r\n        let networks = new Array();\r\n        let isLocalhost = window.location.host.indexOf('localhost') != -1;\r\n        networkInfos.forEach(networkInfoType => {\r\n            let tmp = new networkInfoType();\r\n            if (!isLocalhost && tmp.Name == \"localhost\")\r\n                return;\r\n            networks.push(tmp);\r\n        });\r\n        return networks;\r\n    }\r\n    static getNetworkInfoByChainId(chainId) {\r\n        let networkInfo;\r\n        networkInfos.forEach(networkInfoType => {\r\n            let tmp = new networkInfoType();\r\n            if (tmp.ChainId == chainId) {\r\n                networkInfo = tmp;\r\n            }\r\n        });\r\n        return networkInfo;\r\n    }\r\n    static getNetworkInfo(networkName) {\r\n        let cookieHelper = new CookieHelper(document);\r\n        //if (window.location.host.indexOf('localhost')) networkName = 'localhost'\r\n        if (!networkName)\r\n            networkName = cookieHelper.getCookieValue('network');\r\n        if (!networkName)\r\n            networkName = 'mumbai';\r\n        let networkInfo = null;\r\n        networkInfos.forEach(networkInfoType => {\r\n            let tmp = new networkInfoType();\r\n            if (tmp.Name == networkName) {\r\n                networkInfo = tmp;\r\n            }\r\n        });\r\n        if (networkInfo)\r\n            return networkInfo;\r\n        cookieHelper.setCookieNetwork('mumbai');\r\n        console.error(\"Network '\" + networkName + \"' could not be found. Defaulting to Mumbai network.\");\r\n        return new mumbaiNetwork();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/backend/ConnectionService.ts\nvar ConnectionService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass ConnectionService {\r\n    constructor(moralis) {\r\n        if (!moralis)\r\n            moralis = Moralis;\r\n        this.moralis = moralis;\r\n        this.options = { serverUrl: '', appId: '' };\r\n    }\r\n    getOptions() {\r\n        return this.options;\r\n    }\r\n    start() {\r\n        return ConnectionService_awaiter(this, void 0, void 0, function* () {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            this.options = { serverUrl: networkInfo.ServerUrl, appId: networkInfo.AppId };\r\n            yield this.moralis.start(this.options).catch(function (err) {\r\n                if (err.message.indexOf('Invalid session token') != -1) {\r\n                    Moralis.User.logOut();\r\n                }\r\n                ;\r\n            });\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/broker/MarketService.ts\nvar MarketService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass MarketService {\r\n    constructor(moralis) {\r\n        if (!moralis)\r\n            moralis = Moralis;\r\n        this.moralis = moralis;\r\n    }\r\n    isMarketOpen() {\r\n        return MarketService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('isOpen');\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/errors/GeneralError.ts\nclass GeneralError extends Error {\r\n    constructor(e) {\r\n        super();\r\n        this.code = 0;\r\n        this.stack = \"\";\r\n        if (!e.message) {\r\n            this.message = e.toString();\r\n        }\r\n        else if (e.message.data) {\r\n            this.code = e.message.data.code;\r\n            this.message = e.message.data.message;\r\n            this.error = e;\r\n            this.headers = e.message.headers;\r\n            this.stack = e.stack;\r\n        }\r\n        else if (typeof (e.data) == 'object') {\r\n            this.code = e.data.code;\r\n            this.message = e.data.message;\r\n            this.stack = e.stack;\r\n        }\r\n        else if (e.message) {\r\n            this.message = e.message;\r\n        }\r\n        else {\r\n            this.message = e.toString();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/WrongNetwork.html\n// Module\nvar code = \"<div id=\\\"switchNetworkInfo\\\">\\r\\n    You are using wrong network in your wallet.\\r\\n    You can choose any of these networks.\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{#each networks}}\\r\\n        <button href=\\\"\\\" class=\\\"setNetwork\\\"\\r\\n                data-chainid=\\\"{{ChainId}}\\\">{{ChainName}}\\r\\n        </button>\\r\\n        {{/each}}\\r\\n    </div>\\r\\n</div>\\r\\n<div id=\\\"jsSwitchNetworkNotWorking\\\" class=\\\"d-none\\\">\\r\\n    It seem as we can't add the network automatically for your, so you need to add it your self.\\r\\n    This is the information you need to add the network. You will need to figure out where to\\r\\n    add new network for your wallet, as it difference between wallets.\\r\\n    <form>\\r\\n        <label>ChainId:\\r\\n            <input id=\\\"switchChainId\\\"/>\\r\\n        </label>\\r\\n        <label>Chain name\\r\\n            <input id=\\\"switchChainName\\\"/>\\r\\n        </label>\\r\\n        <label>Currency name\\r\\n            <input id=\\\"switchCurrencyName\\\"/>\\r\\n        </label>\\r\\n        <label>\\r\\n            Symbol\\r\\n            <input id=\\\"switchSymbol\\\"/>\\r\\n        </label>\\r\\n        <label>Decimal\\r\\n            <input id=\\\"switchDecimal\\\"/>\\r\\n        </label>\\r\\n        <label>Rpc Url\\r\\n            <input id=\\\"switchRpcUrl\\\"/>\\r\\n        </label>\\r\\n    </form>\\r\\n</div>\";\n// Exports\n/* harmony default export */ const WrongNetwork = (code);\n;// CONCATENATED MODULE: ./src/html/modal/Modal.html\n// Module\nvar Modal_code = \"<dialog id=\\\"liminal_market_modal_div\\\" data-title=\\\"{{{title}}}\\\">\\r\\n    <article>\\r\\n        <header>\\r\\n            <span>{{title}}</span>\\r\\n            <a href=\\\"#close\\\" aria-label=\\\"Close\\\" class=\\\"close\\\" id=\\\"liminal_market_modal_close\\\"></a>\\r\\n        </header>\\r\\n        {{{content}}}\\r\\n    </article>\\r\\n\\r\\n</dialog>\";\n// Exports\n/* harmony default export */ const modal_Modal = (Modal_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Modal.ts\n\r\nclass Modal {\r\n    constructor() {\r\n        this.modalId = 'liminal_market_modal_div';\r\n    }\r\n    hideModal() {\r\n        let modalDiv = document.getElementById(this.modalId);\r\n        modalDiv.removeAttribute('open');\r\n        if (this.onHide) {\r\n            this.onHide();\r\n        }\r\n    }\r\n    showModal(title, content, reuseModalIfSameTitle = false, onHide, hideOnOutsideClick = true) {\r\n        var _a;\r\n        let modalDiv = document.getElementById(this.modalId);\r\n        if (modalDiv) {\r\n            let modalTitle = modalDiv.dataset.title;\r\n            if (reuseModalIfSameTitle && modalTitle && modalTitle === title) {\r\n                modalDiv.setAttribute('open', '');\r\n                return false;\r\n            }\r\n        }\r\n        let template = Handlebars.compile(modal_Modal);\r\n        let obj = {\r\n            title: title, content: content\r\n        };\r\n        let html = template(obj);\r\n        if (modalDiv) {\r\n            document.body.removeChild(modalDiv);\r\n        }\r\n        document.body.insertAdjacentHTML('beforeend', html);\r\n        modalDiv = document.getElementById(this.modalId);\r\n        modalDiv.setAttribute('open', '');\r\n        if (hideOnOutsideClick) {\r\n            modalDiv.addEventListener('mousedown', (evt) => {\r\n                if (evt.target && evt.target.id === 'liminal_market_modal_div') {\r\n                    this.hideModal();\r\n                }\r\n            });\r\n        }\r\n        let liminal_market_modal_close = document.getElementById('liminal_market_modal_close');\r\n        if (liminal_market_modal_close)\r\n            liminal_market_modal_close.style.display = 'block';\r\n        (_a = document.getElementById('liminal_market_modal_close')) === null || _a === void 0 ? void 0 : _a.addEventListener('click', (evt) => {\r\n            evt.preventDefault();\r\n            this.hideModal();\r\n        });\r\n        this.onHide = onHide;\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/broker/Security.ts\nclass Security {\r\n    constructor() {\r\n        this.Class = \"\";\r\n        this.Exchange = \"\";\r\n        this.Symbol = \"\";\r\n        this.Name = \"\";\r\n        this.Status = \"\";\r\n        this.Tradable = false;\r\n        this.Fractionable = false;\r\n        this.Logo = \"\";\r\n        this.Favorite = 0;\r\n        this.LogoPath = \"/img/logos/\";\r\n        this.LogoPath = \"/img/logos/\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/broker/SecuritiesService.ts\nvar SecuritiesService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass SecuritiesService {\r\n    constructor() {\r\n        this.securities = new Map();\r\n        this.symbols = [\"MSFT\", \"AAPL\", \"AMZN\", \"TSLA\", \"GOOGL\", \"GOOG\", \"GME\", \"META\", \"NVDA\", \"BRK.B\", \"JPM\", \"HD\", \"JNJ\", \"UNH\", \"PG\", \"BAC\", \"V\", \"ADBE\", \"NFLX\", \"CRM\", \"PFE\", \"DIS\", \"MA\", \"XOM\", \"TMO\", \"COST\"];\r\n        this.securities = new Map();\r\n        this.page = 1;\r\n    }\r\n    static getInstance() {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            if (!SecuritiesService.instance) {\r\n                SecuritiesService.instance = new SecuritiesService();\r\n                SecuritiesService.instance.securities = yield SecuritiesService.instance.getSecurities();\r\n            }\r\n            return SecuritiesService.instance;\r\n        });\r\n    }\r\n    getSecurities() {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            if (this.securities.size != 0)\r\n                return this.securities;\r\n            const response = yield fetch('/securities/securities.json');\r\n            const results = yield response.json();\r\n            for (let i = 0; i < results.length; i++) {\r\n                this.securities.set(results[i].Symbol, Object.assign(new Security, results[i]));\r\n            }\r\n            this.securitiesArray = Array.from(this.securities);\r\n            return this.securities;\r\n        });\r\n    }\r\n    getSecurityBySymbol(symbol) {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            let securities = yield this.getSecurities();\r\n            let security = securities.get(symbol);\r\n            return (security) ? security : new Security();\r\n        });\r\n    }\r\n    getTopSecurities() {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            let securities = yield this.getSecurities();\r\n            let topSecurities = new Array();\r\n            for (const symbol of this.symbols) {\r\n                let security = securities.get(symbol);\r\n                if (security) {\r\n                    topSecurities.push(security);\r\n                }\r\n            }\r\n            return topSecurities;\r\n        });\r\n    }\r\n    getPaginatingSecurities(page) {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            if (page == 0)\r\n                return this.getTopSecurities();\r\n            let securitiesOnPage = new Array();\r\n            let i = page * this.symbols.length;\r\n            let pageCount = i + 10;\r\n            for (; i < pageCount && i < this.securitiesArray.length; i++) {\r\n                securitiesOnPage.push(this.securitiesArray[i][1]);\r\n            }\r\n            return securitiesOnPage;\r\n        });\r\n    }\r\n    find(search) {\r\n        return SecuritiesService_awaiter(this, void 0, void 0, function* () {\r\n            let results = new Array();\r\n            search = search.toLocaleLowerCase();\r\n            this.securities.forEach(function (security) {\r\n                if (security.Symbol.toLowerCase().indexOf(search) != -1 ||\r\n                    security.Name.toLowerCase().indexOf(search) != -1) {\r\n                    results.push(security);\r\n                }\r\n            });\r\n            return results;\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/util/LoadingHelper.ts\nclass LoadingHelper {\r\n    static setLoading(element) {\r\n        if (LoadingHelper.lastElement) {\r\n            LoadingHelper.lastElement.removeAttribute('aria-busy');\r\n        }\r\n        if (!element)\r\n            return;\r\n        element.setAttribute('aria-busy', 'true');\r\n        LoadingHelper.lastElement = element;\r\n    }\r\n    static removeLoading() {\r\n        if (this.lastElement) {\r\n            this.lastElement.removeAttribute('aria-busy');\r\n        }\r\n    }\r\n}\r\nLoadingHelper.lastElement = undefined;\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/InfoBarType.ts\nvar InfoBarType;\r\n(function (InfoBarType) {\r\n    InfoBarType[\"Info\"] = \"infoBar\";\r\n    InfoBarType[\"Warning\"] = \"warningBar\";\r\n    InfoBarType[\"Error\"] = \"errorBar\";\r\n})(InfoBarType || (InfoBarType = {}));\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/InfoBar.ts\n\r\nclass InfoBar {\r\n    static show(message, type, timeoutInSeconds = 4) {\r\n        let infoBar = document.getElementById('infoBar');\r\n        if (!infoBar) {\r\n            infoBar = document.createElement('div');\r\n            infoBar.classList.add('notificationBar');\r\n            infoBar.id = 'infoBar';\r\n            document.body.insertAdjacentElement('afterbegin', infoBar);\r\n        }\r\n        ;\r\n        infoBar.innerHTML = message;\r\n        infoBar.classList.remove('hidden');\r\n        infoBar.classList.remove(InfoBarType.Info);\r\n        infoBar.classList.remove(InfoBarType.Warning);\r\n        infoBar.classList.remove(InfoBarType.Error);\r\n        infoBar.classList.add(type);\r\n        if (timeoutInSeconds > 0) {\r\n            setTimeout(() => {\r\n                infoBar === null || infoBar === void 0 ? void 0 : infoBar.classList.add('hidden');\r\n            }, timeoutInSeconds * 1000);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/WalletMissing.html\n// Module\nvar WalletMissing_code = \"\\r\\nYou need to set up a wallet in your browser before you can use liminal.market.\\r\\n<br/><br/>\\r\\nTo make it simple, we would like to suggest two options. In your browser or your phone.\\r\\n<ul>\\r\\n    <li>For the browser we recommend <a href=\\\"https://metamask.io/download/\\\"\\r\\n                                                                         target=\\\"_blank\\\">Metamask</a>.\\r\\n    </li>\\r\\n    <li>\\r\\n        For your phone, we like <a href=\\\"https://www.tokenpocket.pro/en/download/app\\\" target=\\\"_blank\\\">Token Poket</a>\\r\\n    </li>\\r\\n</ul>\\r\\n<br/>\\r\\nBut, you have <a href=\\\"https://ethereum.org/en/wallets/\\\" target=\\\"_blank\\\">many options</a> if you want to learn more.\";\n// Exports\n/* harmony default export */ const WalletMissing = (WalletMissing_code);\n;// CONCATENATED MODULE: ./src/errors/PredefinedErrorHandlers.ts\n\r\n\r\n\r\n\r\n\r\nclass PredefinedErrorHandlers {\r\n    constructor() {\r\n        this.errorMessageMapping = new Map();\r\n        this.SentLoginRequest = \"We have sent request to you wallet to login. Open your wallet to login\";\r\n        this.errorMessageMapping.set('chain not supported', () => {\r\n            let div = 'Network is not supported. <a href=\"\" id=\"switchNetworkLink\">Click me to switch to supported network</a>';\r\n            InfoBar.show(div, InfoBarType.Warning, 120);\r\n            let switchNetworkLink = document.getElementById('switchNetworkLink');\r\n            switchNetworkLink === null || switchNetworkLink === void 0 ? void 0 : switchNetworkLink.addEventListener('click', (evt) => {\r\n                evt.preventDefault();\r\n                let modal = new SwitchNetworkModal(Moralis);\r\n                modal.show();\r\n            });\r\n        });\r\n        this.errorMessageMapping.set('already processing eth_requestaccounts', this.SentLoginRequest);\r\n        this.errorMessageMapping.set('request of type \\'wallet_requestPermissions\\' already pending', this.SentLoginRequest);\r\n        this.errorMessageMapping.set('already has been called, but is not finished yet', this.SentLoginRequest);\r\n        this.errorMessageMapping.set('request is already in progress', this.SentLoginRequest);\r\n        this.errorMessageMapping.set('web3 instance', () => {\r\n            let elements = document.querySelectorAll(\".liminal_market_connect_wallet\");\r\n            if (elements.length > 0) {\r\n                elements[0].dispatchEvent(new MouseEvent('click'));\r\n                return;\r\n            }\r\n        });\r\n        this.errorMessageMapping.set('user rejected the request', () => {\r\n            Moralis.User.logOut();\r\n            window.location.reload();\r\n        });\r\n        this.errorMessageMapping.set('Non ethereum enabled browser', () => {\r\n            let modal = new Modal();\r\n            let template = Handlebars.compile(WalletMissing);\r\n            modal.showModal('New to blockchain?', template(null), false, () => {\r\n                window.location.reload();\r\n            });\r\n        });\r\n    }\r\n    handle(message) {\r\n        let handled = false;\r\n        this.errorMessageMapping.forEach((value, key) => {\r\n            if (!handled && message.toLowerCase().indexOf(key.toLowerCase()) != -1) {\r\n                if (typeof value == 'string') {\r\n                    InfoBar.show(value.toString(), InfoBarType.Warning, 10);\r\n                }\r\n                else {\r\n                    value();\r\n                }\r\n                handled = true;\r\n                return handled;\r\n            }\r\n        });\r\n        return handled;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/errors/ErrorInfo.ts\n\r\n\r\n\r\nclass ErrorInfo {\r\n    constructor(errorInfo) {\r\n        this.errorInfo = errorInfo;\r\n    }\r\n    getErrorInfo() {\r\n        return this.errorInfo;\r\n    }\r\n    static report(error) {\r\n        LoadingHelper.removeLoading();\r\n        if (!error)\r\n            return;\r\n        let errorHandler = new PredefinedErrorHandlers();\r\n        if (errorHandler.handle(error.message)) {\r\n            return;\r\n        }\r\n        if (error.callback) {\r\n            error.callback();\r\n            return;\r\n        }\r\n        if (error) {\r\n            console.error(error.toString());\r\n        }\r\n        //InfoBar.show(error.message, InfoBarType.Error);\r\n    }\r\n    static log(obj) {\r\n        ErrorInfo.report(new GeneralError(obj));\r\n    }\r\n    static info(obj) {\r\n        ErrorInfo.report(new GeneralError(obj));\r\n    }\r\n    static error(obj) {\r\n        console.log(obj);\r\n        ErrorInfo.report(new GeneralError(obj));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/util/WalletHelper.ts\nvar WalletHelper_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass WalletHelper {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    getAUsdAsset() {\r\n        return {\r\n            Logo: '../ausd.png'\r\n        };\r\n    }\r\n    addTokenToWallet(address, symbol, fallbackTimeout) {\r\n        return WalletHelper_awaiter(this, void 0, void 0, function* () {\r\n            let securitiesService = yield SecuritiesService.getInstance();\r\n            const asset = (symbol == 'aUSD') ? this.getAUsdAsset() : yield securitiesService.getSecurityBySymbol(symbol);\r\n            let web3 = this.moralis.web3;\r\n            if (!web3) {\r\n                web3 = (yield this.moralis.enableWeb3().catch(reason => {\r\n                    ErrorInfo.report(reason);\r\n                }));\r\n                if (!web3) {\r\n                    return;\r\n                }\r\n            }\r\n            if (!web3.provider.request)\r\n                return;\r\n            let timeout = (WalletHelper.addTokenFallbackLoaded === undefined) ? 2 * 1000 : 200;\r\n            setTimeout(() => {\r\n                if (WalletHelper.addTokenFallbackLoaded !== false) {\r\n                    WalletHelper.addTokenFallbackLoaded = true;\r\n                    if (fallbackTimeout)\r\n                        fallbackTimeout();\r\n                }\r\n            }, timeout);\r\n            const wasAdded = yield web3.provider.request({\r\n                method: 'wallet_watchAsset',\r\n                params: {\r\n                    type: 'ERC20',\r\n                    options: {\r\n                        address: address,\r\n                        symbol: symbol,\r\n                        decimals: 18,\r\n                        image: 'https://app.liminal.market/img/logos/' + asset.Logo,\r\n                    },\r\n                },\r\n            }).then((result) => {\r\n                return true;\r\n            }).catch((error) => {\r\n                LoadingHelper.removeLoading();\r\n                return false;\r\n            }).finally(() => {\r\n                WalletHelper.addTokenFallbackLoaded = false;\r\n            });\r\n            return wasAdded;\r\n        });\r\n    }\r\n    ;\r\n    isWebview(ua) {\r\n        // if it says it's a webview, let's go with that\r\n        let rules = ['WebView',\r\n            // iOS webview will be the same as safari but missing \"Safari\"\r\n            '(iPhone|iPod|iPad)(?!.*Safari)',\r\n            // Android Lollipop and Above: webview will be the same as native but it will contain \"wv\"\r\n            // Android KitKat to lollipop webview will put {version}.0.0.0\r\n            'Android.*(wv|.0.0.0)',\r\n            // old chrome android webview agent\r\n            'Linux; U; Android',\r\n            'SDK'\r\n        ];\r\n        let webviewRegExp = new RegExp('(' + rules.join('|') + ')', 'ig');\r\n        return !!ua.match(webviewRegExp);\r\n    }\r\n    switchNetwork(network) {\r\n        return WalletHelper_awaiter(this, void 0, void 0, function* () {\r\n            let web3 = this.moralis.web3;\r\n            return yield web3.provider.request({\r\n                method: 'wallet_switchEthereumChain',\r\n                params: [{ chainId: '0x' + network.ChainId.toString(16) }]\r\n            })\r\n                .then((result) => {\r\n                console.log('switch result:', result);\r\n                return true;\r\n            })\r\n                .catch((err) => WalletHelper_awaiter(this, void 0, void 0, function* () {\r\n                // This error code indicates that the chain has not been added to MetaMask\r\n                if (err.code === 4902) {\r\n                    return yield web3.provider.request({\r\n                        method: 'wallet_addEthereumChain',\r\n                        params: [\r\n                            {\r\n                                chainName: network.ChainName,\r\n                                chainId: '0x' + network.ChainId.toString(16),\r\n                                nativeCurrency: {\r\n                                    name: network.NativeCurrencyName,\r\n                                    decimals: network.NativeDecimal,\r\n                                    symbol: network.NativeSymbol\r\n                                },\r\n                                rpcUrls: [network.RpcUrl]\r\n                            }\r\n                        ]\r\n                    })\r\n                        .then((result) => {\r\n                        console.log('addChain result:' + result);\r\n                        return true;\r\n                    }).catch((error) => {\r\n                        console.log('error on addNetwork:', error);\r\n                        throw new GeneralError(error);\r\n                    });\r\n                }\r\n                else {\r\n                    throw new GeneralError(err);\r\n                }\r\n            }));\r\n        });\r\n    }\r\n}\r\nWalletHelper.addTokenFallbackLoaded = undefined;\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/SwitchNetworkModal.ts\nvar SwitchNetworkModal_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass SwitchNetworkModal {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    show() {\r\n        let template = Handlebars.compile(WrongNetwork);\r\n        let networks = NetworkInfo.getNetworks();\r\n        let content = template({ networks: networks });\r\n        let modal = new Modal();\r\n        modal.showModal('Switch network', content, false, () => SwitchNetworkModal_awaiter(this, void 0, void 0, function* () {\r\n            if (!this.selectedNetwork)\r\n                return;\r\n            let walletHelper = new WalletHelper(this.moralis);\r\n            yield walletHelper.switchNetwork(this.selectedNetwork);\r\n        }));\r\n        let setNetworkLinks = document.querySelectorAll('.setNetwork');\r\n        setNetworkLinks.forEach(setNetworkLink => {\r\n            setNetworkLink.addEventListener('click', (evt) => SwitchNetworkModal_awaiter(this, void 0, void 0, function* () {\r\n                evt.preventDefault();\r\n                let dataset = evt.target.dataset;\r\n                this.selectedNetwork = NetworkInfo.getNetworkInfoByChainId(parseInt(dataset.chainid));\r\n                if (!this.selectedNetwork)\r\n                    throw new GeneralError('Could not find chainId:' + dataset.chainid);\r\n                let walletHelper = new WalletHelper(this.moralis);\r\n                let successAddingNetwork = yield walletHelper.switchNetwork(this.selectedNetwork)\r\n                    .catch((error) => {\r\n                    let jsSwitchNetworkNotWorking = document.getElementById('jsSwitchNetworkNotWorking');\r\n                    if (!jsSwitchNetworkNotWorking)\r\n                        throw error;\r\n                    jsSwitchNetworkNotWorking.classList.remove('d-none');\r\n                    let switchNetworkInfo = document.getElementById('switchNetworkInfo');\r\n                    switchNetworkInfo.classList.add('d-none');\r\n                    document.getElementById('switchChainId').value = dataset.chainid + ' or it might be: ' + '0x' + parseInt(dataset.chainid).toString(16);\r\n                    document.getElementById('switchChainName').value = this.selectedNetwork.Name;\r\n                    document.getElementById('switchCurrencyName').value = this.selectedNetwork.NativeCurrencyName;\r\n                    document.getElementById('switchSymbol').value = this.selectedNetwork.NativeSymbol;\r\n                    document.getElementById('switchDecimal').value = this.selectedNetwork.NativeDecimal.toString();\r\n                    document.getElementById('switchRpcUrl').value = this.selectedNetwork.RpcUrl;\r\n                });\r\n                if (successAddingNetwork) {\r\n                    modal.hideModal();\r\n                    let elements = document.querySelectorAll(\".liminal_market_connect_wallet\");\r\n                    if (elements.length > 0) {\r\n                        elements[0].dispatchEvent(new MouseEvent('click'));\r\n                        return;\r\n                    }\r\n                }\r\n            }));\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/backend/AuthenticateService.ts\nvar AuthenticateService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass AuthenticateService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    authenticateUser(provider, enableWeb3Callback, authenticatedCallback) {\r\n        return AuthenticateService_awaiter(this, void 0, void 0, function* () {\r\n            let moralis = this.moralis;\r\n            let chainId = NetworkInfo.getInstance().ChainId;\r\n            let web3Result = yield moralis.enableWeb3({\r\n                provider: provider,\r\n                chainId: chainId, appLogo: 'https://app.liminal.market/img/logos/default_logo.png'\r\n            })\r\n                .catch((reason) => AuthenticateService_awaiter(this, void 0, void 0, function* () {\r\n                throw new GeneralError(reason);\r\n            }));\r\n            if (enableWeb3Callback) {\r\n                enableWeb3Callback(web3Result);\r\n            }\r\n            let user = this.moralis.User.current();\r\n            if (user) {\r\n                if (authenticatedCallback)\r\n                    authenticatedCallback(user);\r\n                return;\r\n            }\r\n            if (web3Result.network.chainId != chainId) {\r\n                let userNetwork = NetworkInfo.getNetworkInfoByChainId(web3Result.network.chainId);\r\n                if (userNetwork) {\r\n                    NetworkInfo.setNetworkByChainId(web3Result.network.chainId);\r\n                }\r\n                else {\r\n                    let modal = new SwitchNetworkModal(this.moralis);\r\n                    modal.show();\r\n                    return;\r\n                }\r\n            }\r\n            let result = yield moralis.authenticate({\r\n                signingMessage: \"You are logging into Liminal.market.\\n\\n\",\r\n                provider: provider,\r\n                chainId: chainId\r\n            }).catch((reason) => {\r\n                console.log(reason);\r\n                throw new GeneralError(reason);\r\n            });\r\n            if (authenticatedCallback) {\r\n                authenticatedCallback(result);\r\n            }\r\n            else {\r\n                location.reload();\r\n            }\r\n        });\r\n    }\r\n    getUser() {\r\n        return this.moralis.User.current();\r\n    }\r\n    getEthAddress() {\r\n        let user = this.getUser();\r\n        if (!user)\r\n            return '';\r\n        let ethAddress = user.get('ethAddress');\r\n        return ethAddress;\r\n    }\r\n    isWalletConnected() {\r\n        return this.moralis.isWeb3Enabled();\r\n    }\r\n    isUserLoggedIn() {\r\n        return (this.moralis.User.current() !== null);\r\n    }\r\n    getChainId() {\r\n        if (!this.moralis.chainId)\r\n            return 0;\r\n        return parseInt(this.moralis.chainId, 16);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/enums/WalletType.ts\nvar WalletType;\r\n(function (WalletType) {\r\n    WalletType[\"Metamask\"] = \"metamask\";\r\n    WalletType[\"WalletConnect\"] = \"walletConnect\";\r\n    WalletType[\"CoinbaseWallet\"] = \"coinbase\";\r\n    WalletType[\"Unknown\"] = \"unknown\";\r\n})(WalletType || (WalletType = {}));\r\n\n;// CONCATENATED MODULE: ./src/wallet/ProviderInfo.ts\n\r\nclass ProviderInfo {\r\n    constructor(walletConnectionInfo) {\r\n        this.ProviderName = 'unknown';\r\n        this.WalletName = '';\r\n        this.WalletUrl = '';\r\n        this.WalletType = WalletType.Unknown;\r\n        this.ChainId = 0;\r\n        this.UserAddress = '';\r\n        if (!walletConnectionInfo || !walletConnectionInfo.provider)\r\n            return;\r\n        this.walletConnectionInfo = walletConnectionInfo;\r\n        if (this.walletConnectionInfo.connection && this.walletConnectionInfo.connection.url == 'metamask') {\r\n            this.loadMetamask(walletConnectionInfo);\r\n        }\r\n        else if (this.walletConnectionInfo.provider.wc) {\r\n            this.loadWalletConnect(walletConnectionInfo);\r\n        }\r\n        else {\r\n            console.error('Dont have provider for this', walletConnectionInfo);\r\n        }\r\n        ProviderInfo.Instance = this;\r\n    }\r\n    loadMetamask(walletConnectionInfo) {\r\n        this.ProviderName = 'metamask';\r\n        this.WalletName = \"Metamask\";\r\n        this.WalletUrl = 'https://metamask.io/';\r\n        this.WalletType = WalletType.Metamask;\r\n        this.ChainId = walletConnectionInfo.provider.chainId;\r\n        this.UserAddress = walletConnectionInfo.provider.selectedAddress;\r\n    }\r\n    loadWalletConnect(walletConnectionInfo) {\r\n        var _a;\r\n        let wc = walletConnectionInfo.provider.wc;\r\n        this.ProviderName = \"walletConnect\";\r\n        this.WalletName = wc._peerMeta.name;\r\n        this.WalletUrl = (_a = wc._peerMeta.url) !== null && _a !== void 0 ? _a : '';\r\n        this.WalletType = WalletType.WalletConnect;\r\n        this.ChainId = walletConnectionInfo.provider.chainId;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/backend/UserService.ts\nvar UserService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass UserService {\r\n    constructor(moralis) {\r\n        if (!moralis)\r\n            moralis = Moralis;\r\n        this.moralis = moralis;\r\n    }\r\n    logIn() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this.moralis.enableWeb3();\r\n                let user = this.moralis.User.current();\r\n                if (user)\r\n                    return Promise.resolve(user);\r\n                return this.moralis.authenticate();\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n            }\r\n        });\r\n    }\r\n    logOut() {\r\n        return this.moralis.User.logOut();\r\n    }\r\n    isLoggedIn(loadingMessage) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            let user = yield this.moralis.User.currentAsync();\r\n            if (user) {\r\n                let cookieHelper = new CookieHelper(document);\r\n                let providerName = cookieHelper.getCookieValue('provider');\r\n                let walletHelper = new WalletHelper(this.moralis);\r\n                if (walletHelper.isWebview(window.navigator.userAgent))\r\n                    providerName = ' ';\r\n                if (!providerName) {\r\n                    return undefined;\r\n                }\r\n                if (!this.moralis.isWeb3Enabled()) {\r\n                    let str = 'We are sending login request to your wallet. If you cancel we will simply log you out. You can always log again in.';\r\n                    str += '<button id=\"logoutButton\">Logout</button>';\r\n                    loadingMessage.innerHTML = str;\r\n                    let logoutButton = document.getElementById('logoutButton');\r\n                    if (logoutButton) {\r\n                        logoutButton.addEventListener('click', () => {\r\n                            this.moralis.User.logOut();\r\n                        });\r\n                    }\r\n                    let result = yield this.moralis.enableWeb3({ provider: providerName })\r\n                        .catch((reason) => UserService_awaiter(this, void 0, void 0, function* () {\r\n                        ErrorInfo.report(reason);\r\n                    }));\r\n                    if (!result)\r\n                        return;\r\n                }\r\n                let providerInfo = new ProviderInfo(null);\r\n                let authenticationService = new AuthenticateService(this.moralis);\r\n                yield authenticationService.authenticateUser(providerName, (walletConnectionInfo) => {\r\n                    providerInfo = new ProviderInfo(walletConnectionInfo);\r\n                });\r\n                user.providerInfo = providerInfo;\r\n                return user;\r\n            }\r\n            return undefined;\r\n        });\r\n    }\r\n    isMarketOpenOrUserOffHours() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            let marketService = new MarketService(this.moralis);\r\n            let isOpen = yield marketService.isMarketOpen();\r\n            if (isOpen)\r\n                return true;\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            //TODO: Remove on mainnet launch\r\n            if (!networkInfo.TestNetwork)\r\n                return false;\r\n            return false;\r\n        });\r\n    }\r\n    getUser() {\r\n        return this.moralis.User.current();\r\n    }\r\n    getAlpacaId() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            let user = this.getUser();\r\n            if (!user)\r\n                return '';\r\n            return (yield user.fetch()).get('alpacaId').toString();\r\n        });\r\n    }\r\n    getAccount() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            let user = this.getUser();\r\n            if (!user)\r\n                return;\r\n            return yield this.moralis.Cloud.run('account');\r\n        });\r\n    }\r\n    getEthAddress() {\r\n        var _a;\r\n        return (_a = this.getUser()) === null || _a === void 0 ? void 0 : _a.get('ethAddress');\r\n    }\r\n    kycActionRequired() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            let kycResults = yield this.moralis.Cloud.run('kycActionRequired');\r\n            return kycResults;\r\n        });\r\n    }\r\n    updateName(given_name, middle_name, family_name) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('updateName', {\r\n                given_name: given_name,\r\n                middle_name: middle_name,\r\n                family_name: family_name\r\n            });\r\n        });\r\n    }\r\n    updateContact(data) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('updateContact', data);\r\n        });\r\n    }\r\n    updateTrustedContact(data) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('updateTrustedContact', data);\r\n        });\r\n    }\r\n    createAchRelationship(public_token, accountId) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('createAchRelationship', {\r\n                public_token: public_token,\r\n                account_id: accountId\r\n            });\r\n        });\r\n    }\r\n    getPlaidLinkToken() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('createPlaidLinkToken');\r\n        });\r\n    }\r\n    getBankRelationship() {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('getBankRelationship');\r\n        });\r\n    }\r\n    getLatestTransfers(direction) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('getTransfers', { direction: direction });\r\n        });\r\n    }\r\n    createTransfer(amount, direction) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('createTransfer', { amount: amount, direction: direction });\r\n        });\r\n    }\r\n    deleteTransfer(id) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('deleteTransfer', { id: id });\r\n        });\r\n    }\r\n    registerWireTransferRelationship(params) {\r\n        return UserService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('createWireRelationship', params);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/localhost-contract-addresses.ts\nclass localhostContractAddresses {\r\n    constructor() {\r\n        this.NetworkName = \"localhost\";\r\n        this.KYC_ADDRESS = \"0x2856a0C8034bF887928845D05179847e0ADC2209\";\r\n        this.AUSD_ADDRESS = \"0x6aCE712D412e99727aDf2272BE24f8e45aF76270\";\r\n        this.LIMINAL_MARKET_ADDRESS = \"0xbd1270f3f8175927Fe427a220b9253b360Be52Bd\";\r\n        this.MARKET_CALENDAR_ADDRESS = \"0x459239D96976440d68fd78e1401983376840d563\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/ContractAddresses.ts\nclass ContractAddresses {\r\n    constructor() {\r\n        this.KYC_ADDRESS = \"0xEBC688DaF0924D1A3b95B869717b987087A52156\";\r\n        this.AUSD_ADDRESS = \"0x8E32f274476CE23D64ae0037CE80CE8b8D670658\";\r\n        this.LIMINAL_MARKET_ADDRESS = \"0xe8C8C9Ff944c04318f43FE1479A1d51EBAf2EBD8\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/rinkeby-contract-addresses.ts\n\r\nclass rinkebyContractAddresses extends ContractAddresses {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.KYC_ADDRESS = \"0x1d8AeaC4cEaBe985e1AD73B8F09ae57284834Fd7\";\r\n        this.AUSD_ADDRESS = \"0x4925f35Db2b3fB7FF2A5F0525Da29CB4F5F12cAc\";\r\n        this.LIMINAL_MARKET_ADDRESS = \"0xFBaAb9F394F1aA80182dD6FFb5187E48cAFB9922\";\r\n        this.USDC_ADDRESS = \"0x4DBCdF9B62e891a7cec5A2568C3F4FAF9E8Abe2b\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/mumbai-contract-addresses.ts\nclass mumbaiContractAddresses {\r\n    constructor() {\r\n        this.NetworkName = \"mumbai\";\r\n        this.KYC_ADDRESS = \"0x32D664603E45370E670BbB15bb40A4918468Bc93\";\r\n        this.AUSD_ADDRESS = \"0x7e71874B5E3e0605fC57c47F9ad3444143B94176\";\r\n        this.LIMINAL_MARKET_ADDRESS = \"0xf9c4C08740Ca619feB03c14F9bE1df734CB53eca\";\r\n        this.MARKET_CALENDAR_ADDRESS = \"0x1c4e1F47Be6902ACE61E7C01C17901786B676ec8\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/fuji-contract-addresses.ts\nclass fujiContractAddresses {\r\n    constructor() {\r\n        this.NetworkName = \"fuji\";\r\n        this.KYC_ADDRESS = \"0x0594D04FDB5C98Fb7F777a799139424Ae2414AaD\";\r\n        this.AUSD_ADDRESS = \"0xbAc482aE0b0d652854df377be566445984A021ED\";\r\n        this.LIMINAL_MARKET_ADDRESS = \"0x098A512B017408008a23ECe22843788799CDebFd\";\r\n        this.MARKET_CALENDAR_ADDRESS = \"0x77E6A62Be8398B18d2dA81CDB6Eb097bD8132ccB\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/contracts/ContractInfo.ts\n\r\n\r\n\r\n\r\n\r\nclass ContractInfo {\r\n    static getContractInfo(networkName) {\r\n        let contractInfos = {\r\n            localhostContractAddresses: localhostContractAddresses, rinkebyContractAddresses: rinkebyContractAddresses,\r\n            mumbaiContractAddresses: mumbaiContractAddresses, fujiContractAddresses: fujiContractAddresses\r\n        };\r\n        if (!networkName) {\r\n            networkName = NetworkInfo.getInstance().Name;\r\n        }\r\n        const contractInfoType = contractInfos[networkName + 'ContractAddresses'];\r\n        return new contractInfoType();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/MarketIsClosed.html\n// Module\nvar MarketIsClosed_code = \"<div class=\\\"center\\\">\\r\\n    The stock market is currently closed.<br/>\\r\\nIt is usually open monday to friday between 9:30 AM and 4:00 PM EST (9:30 - 16:00 EST).\\r\\n    <br/><br/>\\r\\nToday is {{dayOfWeek}}\\r\\n<br /><br/>\\r\\nYour current time is {{currentTime}} ({{GMT}})\\r\\n    <br/><br/>\\r\\nThat means the market is open your time between\\r\\n{{openFrom}} - {{openTo}}\\r\\n</div>\";\n// Exports\n/* harmony default export */ const MarketIsClosed = (MarketIsClosed_code);\n;// CONCATENATED MODULE: ./src/util/DateHelper.ts\nclass DateHelper {\r\n    static isOlderThen(date, minutes) {\r\n        let currentTime = new Date().getTime();\r\n        return (currentTime > (date.getTime() + minutes * 60 * 1000));\r\n    }\r\n    ;\r\n    static getWeekday() {\r\n        const weekday = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n        const d = new Date();\r\n        return weekday[d.getDay()];\r\n    }\r\n    static getOpenAndCloseHours() {\r\n        const d = new Date();\r\n        let openHour = 9 + 4 + (-1 * (d.getTimezoneOffset() / 60));\r\n        let closeHour = 16 + 4 + (-1 * (d.getTimezoneOffset() / 60));\r\n        return [openHour + ':30', closeHour + ':00'];\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/errors/BlockchainError.ts\n\r\n\r\n\r\n\r\nclass BlockchainError extends GeneralError {\r\n    constructor(e) {\r\n        super(e);\r\n        this.message = e.toString();\r\n        if (this.userDeniedTransactionSignature()) {\r\n            this.code = BlockchainError.UserCancelled;\r\n        }\r\n        else if (this.addressIsNotValidKYC()) {\r\n            this.code = BlockchainError.AddressIsNotValidKYC;\r\n        }\r\n        else if (this.isMarketClosed()) {\r\n            this.code = BlockchainError.MarketIsClosed;\r\n            this.callback = this.marketIsClosedModal;\r\n        }\r\n        if (e.data && e.data.message) {\r\n            let msg = e.data.message;\r\n            let searchStr = 'reverted with reason string';\r\n            let idx = msg.indexOf(searchStr) + searchStr.length;\r\n            if (idx != -1) {\r\n                this.message = msg.substring(idx).trim().replace(/'/g, '');\r\n                this.code = BlockchainError.ErrorFromContract;\r\n            }\r\n        }\r\n    }\r\n    userDeniedTransactionSignature() {\r\n        return this.message.indexOf('denied transaction signature') !== -1;\r\n    }\r\n    addressIsNotValidKYC() {\r\n        return this.message.indexOf('address is not kyc valid') !== -1;\r\n    }\r\n    isMarketClosed() {\r\n        let searchStr = 'Market is closed';\r\n        return this.message.indexOf(searchStr) !== -1;\r\n    }\r\n    marketIsClosedModal() {\r\n        let [openHour, closeHour] = DateHelper.getOpenAndCloseHours();\r\n        let time = new Date().toTimeString().split(' ');\r\n        let obj = {\r\n            currentTime: time[0],\r\n            GMT: time[1],\r\n            dayOfWeek: DateHelper.getWeekday(),\r\n            openFrom: openHour,\r\n            openTo: closeHour\r\n        };\r\n        let modal = new Modal();\r\n        let template = Handlebars.compile(MarketIsClosed);\r\n        modal.showModal('Market is closed', template(obj));\r\n    }\r\n}\r\nBlockchainError.ErrorFromContract = -1;\r\nBlockchainError.UserCancelled = 1;\r\nBlockchainError.AddressIsNotValidKYC = 2;\r\nBlockchainError.MarketIsClosed = 3;\r\n\n;// CONCATENATED MODULE: ./src/services/blockchain/BlockchainService.ts\nvar BlockchainService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass BlockchainService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    executeFunction(options) {\r\n        return BlockchainService_awaiter(this, void 0, void 0, function* () {\r\n            if (typeof ethereum != 'undefined' && ethereum && ethereum.chainId) {\r\n                let networkInfo = NetworkInfo.getNetworkInfoByChainId(ethereum.chainId);\r\n                if (!networkInfo) {\r\n                    throw new GeneralError('chain not supported');\r\n                }\r\n            }\r\n            return yield this.moralis.executeFunction(options);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/blockchain/LiminalMarketService.ts\nvar LiminalMarketService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass LiminalMarketService extends BlockchainService {\r\n    constructor(moralis) {\r\n        super(moralis);\r\n    }\r\n    getSymbolContractAddress(symbol) {\r\n        return LiminalMarketService_awaiter(this, void 0, void 0, function* () {\r\n            const options = yield this.getOptions(\"getSecurityToken\", {\r\n                symbol: symbol\r\n            });\r\n            let result = yield this.executeFunction(options)\r\n                .then((value) => {\r\n                return value.toString();\r\n            }).catch((reason) => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                throw ErrorInfo.report(blockchainError);\r\n            });\r\n            return result;\r\n        });\r\n    }\r\n    getOptions(functionName, params) {\r\n        return LiminalMarketService_awaiter(this, void 0, void 0, function* () {\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let abi = yield this.getLiminalMarketAbi();\r\n            const options = {\r\n                contractAddress: contractInfo.LIMINAL_MARKET_ADDRESS,\r\n                functionName: functionName,\r\n                abi: abi,\r\n                params: params,\r\n            };\r\n            return options;\r\n        });\r\n    }\r\n    getLiminalMarketAbi() {\r\n        return LiminalMarketService_awaiter(this, void 0, void 0, function* () {\r\n            if (LiminalMarketService.LiminalMarketInfo)\r\n                return LiminalMarketService.LiminalMarketInfo.abi;\r\n            let response = yield fetch('../abi/LiminalMarket.json');\r\n            LiminalMarketService.LiminalMarketInfo = yield response.json();\r\n            return LiminalMarketService.LiminalMarketInfo.abi;\r\n        });\r\n    }\r\n    createToken(symbol, creatingToken) {\r\n        return LiminalMarketService_awaiter(this, void 0, void 0, function* () {\r\n            let salt = (new Date().getTime() + (Math.random() * 100000)).toString();\r\n            salt = salt.substring(0, salt.indexOf('.'));\r\n            const liminalOptions = yield this.getOptions(\"createToken\", {\r\n                symbol: symbol,\r\n                salt: salt\r\n            });\r\n            let result = yield this.executeFunction(liminalOptions)\r\n                .then(result => {\r\n                return result;\r\n            }).catch(reason => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                if (blockchainError.userDeniedTransactionSignature()) {\r\n                    return blockchainError;\r\n                }\r\n                throw ErrorInfo.report(blockchainError);\r\n            });\r\n            if (result instanceof BlockchainError)\r\n                return result;\r\n            creatingToken();\r\n            yield result.wait();\r\n            return yield this.getSymbolContractAddress(symbol);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/SecuritiesList.html\n// Module\nvar SecuritiesList_code = \"<figure>\\r\\n    <table id=\\\"liminal_market_securities_table\\\" role=\\\"grid\\\">\\r\\n    <thead>\\r\\n    <tr>\\r\\n        <th colspan=\\\"2\\\"><input autocomplete=\\\"off\\\" type=\\\"search\\\" id=\\\"search_for_symbol\\\" placeholder=\\\"Search for name or symbol in {{securitiesCount}} stocks\\\"></th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody id=\\\"{{tbodyId}}\\\">\\r\\n    {{>securities}}\\r\\n    </tbody>\\r\\n</table>\\r\\n<span id=\\\"liminal_market_load_more\\\"></span>\\r\\n</figure>\";\n// Exports\n/* harmony default export */ const elements_SecuritiesList = (SecuritiesList_code);\n;// CONCATENATED MODULE: ./src/html/elements/Securities.html\n// Module\nvar Securities_code = \"{{#each securities}}\\r\\n<tr data-symbol=\\\"{{{Symbol}}}\\\" data-logo=\\\"{{LogoPath}}{{Logo}}\\\" data-name=\\\"{{Name}}\\\">\\r\\n    <td class=\\\"symbol_logo\\\"><img src=\\\"{{LogoPath}}{{Logo}}\\\"/></td>\\r\\n    <td class=\\\"security_information\\\">\\r\\n        <strong>{{Name}}</strong><br/>\\r\\n        <nav class=\\\"security_extra\\\">\\r\\n            <ul>\\r\\n                <li>\\r\\n                    <a href=\\\"https://strike.market/stocks/{{Symbol}}\\\" target=\\\"_blank\\\">{{Symbol}}</a>\\r\\n                </li>\\r\\n            </ul>\\r\\n            <ul>\\r\\n                <li>\\r\\n                    <a href=\\\"\\\" class=\\\"getAddress\\\" data-symbol=\\\"{{Symbol}}\\\">Get address</a>\\r\\n                </li>\\r\\n            </ul>\\r\\n            <ul>\\r\\n                <li>\\r\\n                    <a href=\\\"\\\" class=\\\"addToWallet\\\" data-symbol=\\\"{{Symbol}}\\\">Add to wallet</a>\\r\\n                </li>\\r\\n            </ul>\\r\\n        </nav>\\r\\n    </td>\\r\\n</tr>\\r\\n{{/each}}\";\n// Exports\n/* harmony default export */ const Securities = (Securities_code);\n;// CONCATENATED MODULE: ./src/util/CopyHelper.ts\nvar CopyHelper_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass CopyHelper {\r\n    fallbackCopyTextToClipboard(text) {\r\n        let textArea = document.createElement(\"textarea\");\r\n        textArea.value = text;\r\n        // Avoid scrolling to bottom\r\n        textArea.style.top = \"0\";\r\n        textArea.style.left = \"0\";\r\n        textArea.style.position = \"fixed\";\r\n        document.body.appendChild(textArea);\r\n        textArea.focus();\r\n        textArea.select();\r\n        try {\r\n            let successful = document.execCommand('copy');\r\n            return successful;\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n            return false;\r\n        }\r\n        finally {\r\n            document.body.removeChild(textArea);\r\n        }\r\n    }\r\n    copyTextToClipboard(text) {\r\n        return CopyHelper_awaiter(this, void 0, void 0, function* () {\r\n            if (!navigator.clipboard) {\r\n                return this.fallbackCopyTextToClipboard(text);\r\n            }\r\n            let result = yield navigator.clipboard.writeText(text).then(ble => {\r\n                console.log('ble', ble);\r\n                return true;\r\n            }).\r\n                catch(function (err) {\r\n                console.info(err);\r\n                return false;\r\n            });\r\n            console.log(result);\r\n            return result;\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/AddressInfo.html\n// Module\nvar AddressInfo_code = \"<article id=\\\"symbolInfoToCopy\\\">\\r\\n    This is the address for the symbol {{symbol}}.\\r\\n    <br/>\\r\\n    <input value=\\\"{{address}}\\\"/>\\r\\n</article>\\r\\n\";\n// Exports\n/* harmony default export */ const AddressInfo = (AddressInfo_code);\n;// CONCATENATED MODULE: ./src/html/elements/ContractAddressNotFound.html\n// Module\nvar ContractAddressNotFound_code = \"<tr id=\\\"symbolInfoToCopy\\\">\\r\\n    <td colspan=\\\"4\\\">\\r\\n        <article>\\r\\n        This symbol has never been bought and does not exist. Buy this symbol and address will become available.\\r\\n        </article>\\r\\n    </td>\\r\\n</tr>\";\n// Exports\n/* harmony default export */ const ContractAddressNotFound = (ContractAddressNotFound_code);\n;// CONCATENATED MODULE: ./node_modules/bignumber.js/bignumber.mjs\n/*\r\n *      bignumber.js v9.1.0\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, P.lt);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, P.gt);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // THe index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return ±0 if x is ±0 or y is ±Infinity, or return ±Infinity as y is ±0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne;\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  function maxOrMin(args, method) {\r\n    var n,\r\n      i = 1,\r\n      m = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      n = new BigNumber(args[i]);\r\n\r\n      // If any number is NaN, return NaN.\r\n      if (!n.s) {\r\n        m = n;\r\n        break;\r\n      } else if (method.call(m, n)) {\r\n        m = n;\r\n      }\r\n    }\r\n\r\n    return m;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on ±Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = n / pows10[d - j - 1] % 10 | 0;\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : n / pows10[d - j - 1] % 10 | 0;\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is ±Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and ±Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, ±Infinity, ±0 or ±1, or n is ±Infinity, NaN or ±0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to ±Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? 2 - isOdd(n) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to ±Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to ±0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = ±Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return ±0, else return ±Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) t = xc, xc = yc, yc = t, y.s = -y.s;\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, ±Infinity or ±0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return ±Infinity if either is ±Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return ±0 if either is ±0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) zc = xc, xc = yc, yc = zc, i = xcL, xcL = ycL, ycL = i;\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return ±Infinity if either ±Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) t = yc, yc = xc, xc = t, b = a;\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is ±Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) i = g1, g1 = g2, g2 = i, len -= i;\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nvar BigNumber = clone();\r\n\r\n/* harmony default export */ const bignumber = (BigNumber);\r\n\n;// CONCATENATED MODULE: ./src/util/Helper.ts\n\r\nconst showContainer = function (id) {\r\n    let containers = document.querySelectorAll('.container');\r\n    for (let i = 0; i < containers.length; i++) {\r\n        let element = containers[i];\r\n        if (element.id == id) {\r\n            element.classList.remove('d-none');\r\n            element.style.display = 'block';\r\n        }\r\n        else {\r\n            element.style.display = 'none';\r\n        }\r\n    }\r\n};\r\nconst roundNumber = function (number) {\r\n    return Math.round(number * 100) / 100;\r\n};\r\nconst roundNumberDecimal = function (number, decimal) {\r\n    let hundred = parseInt('1' + '0'.repeat(decimal));\r\n    return Math.round(number * hundred) / hundred;\r\n};\r\nconst roundBigNumber = function (number) {\r\n    return new bignumber(Math.round(number.toNumber() * 100) / 100);\r\n};\r\nconst roundBigNumberDecimal = function (number, decimal) {\r\n    let hundred = parseInt('1' + '0'.repeat(decimal));\r\n    return new bignumber(Math.round(number.toNumber() * hundred) / hundred);\r\n};\r\nconst AddressZero = \"0x0000000000000000000000000000000000000000\";\r\nconst isJSON = function (str) {\r\n    try {\r\n        JSON.parse(str);\r\n        return true;\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n};\r\nconst shortEth = function (ethAddress) {\r\n    if (!ethAddress)\r\n        return '';\r\n    return ethAddress.substring(0, 6) + \"...\" + ethAddress.substring(ethAddress.length - 4);\r\n};\r\nconst upperFirstLetter = function (text) {\r\n    return text[0].toUpperCase() + text.substring(1);\r\n};\r\n\n;// CONCATENATED MODULE: ./src/html/elements/AddToWallet.html\n// Module\nvar AddToWallet_code = \"<tr id=\\\"symbolInfoToCopy\\\">\\r\\n    <td colspan=\\\"4\\\">\\r\\n        <article>\\r\\n        Some wallets detect automatically the coins that are registered to your address.\\r\\n        Those that don't do automatic detection, you need to add them manually.\\r\\n        <br /><br />\\r\\n        This is the address for the symbol {{symbol}},\\r\\n        you need to copy it and import the token in your wallet\\r\\n        <br />\\r\\n        <input value=\\\"{{address}}\\\" />\\r\\n        </article>\\r\\n    </td>\\r\\n</tr>\";\n// Exports\n/* harmony default export */ const AddToWallet = (AddToWallet_code);\n;// CONCATENATED MODULE: ./src/ui/elements/SecuritiesList.ts\nvar SecuritiesList_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass SecuritiesList {\r\n    constructor() {\r\n        this.tbodyId = 'liminal_market_securities_list';\r\n        this.onSelectSymbol = undefined;\r\n        this.page = 0;\r\n        this.loadmore = true;\r\n    }\r\n    render() {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            let securitiesService = yield SecuritiesService.getInstance();\r\n            let securitiesCount = securitiesService.securitiesArray.length;\r\n            let securities = yield securitiesService.getPaginatingSecurities(this.page++);\r\n            Handlebars.registerPartial(\"securities\", Securities);\r\n            let template = Handlebars.compile(elements_SecuritiesList);\r\n            let obj = {\r\n                tbodyId: this.tbodyId,\r\n                securities: securities,\r\n                securitiesCount: securitiesCount\r\n            };\r\n            return template(obj);\r\n        });\r\n    }\r\n    bindEvents(onSelectSymbol) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            this.bindOnClickEvent(onSelectSymbol);\r\n            yield this.bindSearchEvent();\r\n            this.bindLoadMore();\r\n        });\r\n    }\r\n    bindOnClickEvent(onSelectSymbol) {\r\n        let table = document.getElementById('liminal_market_securities_table');\r\n        if (!table) {\r\n            ErrorInfo.report(new GeneralError(\"Page could not load correctly, try reloading\"));\r\n            return;\r\n        }\r\n        this.onSelectSymbol = onSelectSymbol;\r\n        table.onclick = (evt) => SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            yield this.handleClick(evt);\r\n        });\r\n    }\r\n    handleClick(evt) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            let element = evt.target;\r\n            if (element.tagName.toLocaleLowerCase() === 'a') {\r\n                yield this.addToWalletOrGetAddress(evt, element);\r\n                return;\r\n            }\r\n            let parentTr = element.parentElement;\r\n            if (!parentTr)\r\n                return;\r\n            if (parentTr.tagName.toLocaleLowerCase() !== 'tr') {\r\n                parentTr = parentTr.parentElement;\r\n            }\r\n            let symbol = parentTr.dataset.symbol;\r\n            if (!symbol)\r\n                return;\r\n            let name = parentTr.dataset.name;\r\n            let logo = parentTr.dataset.logo;\r\n            if (this.onSelectSymbol) {\r\n                this.onSelectSymbol(symbol, name, logo);\r\n            }\r\n        });\r\n    }\r\n    bindSearchEvent() {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            let searchForSymbol = document.getElementById('search_for_symbol');\r\n            if (!searchForSymbol)\r\n                return;\r\n            let securitiesService = yield SecuritiesService.getInstance();\r\n            let timeout = null;\r\n            searchForSymbol.addEventListener('keyup', (evt) => SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n                if (timeout != null)\r\n                    clearTimeout(timeout);\r\n                timeout = setTimeout(() => SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n                    let search = evt.target.value;\r\n                    if (!search || search.length < 2) {\r\n                        this.loadmore = true;\r\n                        yield this.showTopSecurities(securitiesService);\r\n                        return;\r\n                    }\r\n                    this.loadmore = false;\r\n                    let securities = yield securitiesService.find(search);\r\n                    this.loadSecuritiesToDom(securities);\r\n                }), 500);\r\n            }));\r\n        });\r\n    }\r\n    showTopSecurities(securitiesService) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            let securities = yield securitiesService.getTopSecurities();\r\n            this.loadSecuritiesToDom(securities);\r\n        });\r\n    }\r\n    loadSecuritiesToDom(securities) {\r\n        let tbody = document.getElementById(this.tbodyId);\r\n        if (!tbody)\r\n            return;\r\n        let template = Handlebars.compile(Securities);\r\n        let obj = {\r\n            securities: securities\r\n        };\r\n        let content = template(obj);\r\n        tbody.innerHTML = content;\r\n    }\r\n    bindLoadMore() {\r\n        const el = document.querySelector('#liminal_market_load_more');\r\n        const observer = new window.IntersectionObserver(([entry]) => SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            if (entry.isIntersecting) {\r\n                yield this.loadMore();\r\n            }\r\n        }), {\r\n            root: null,\r\n            threshold: 0.1, // set offset 0.1 means trigger if atleast 10% of element in viewport\r\n        });\r\n        observer.observe(el);\r\n    }\r\n    loadMore() {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            if (!this.loadmore)\r\n                return;\r\n            let tbody = document.getElementById(this.tbodyId);\r\n            if (!tbody)\r\n                return;\r\n            let securitiesService = yield SecuritiesService.getInstance();\r\n            let securities = yield securitiesService.getPaginatingSecurities(this.page++);\r\n            let template = Handlebars.compile(Securities);\r\n            let obj = {\r\n                securities: securities\r\n            };\r\n            let content = template(obj);\r\n            tbody.insertAdjacentHTML('beforeend', content);\r\n        });\r\n    }\r\n    addToWalletOrGetAddress(event, element) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            let className = element.className;\r\n            if (className != 'getAddress' && className != 'addToWallet') {\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            let symbol = element.dataset.symbol;\r\n            if (!symbol)\r\n                return;\r\n            LoadingHelper.setLoading(element);\r\n            let liminalMarketService = new LiminalMarketService(Moralis);\r\n            let address = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n            if (className == 'getAddress') {\r\n                yield this.showGetAddress(element, symbol, address);\r\n            }\r\n            else {\r\n                yield this.showAddToWallet(element, symbol, address);\r\n            }\r\n            LoadingHelper.removeLoading();\r\n        });\r\n    }\r\n    showGetAddress(element, symbol, address) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            if (address !== AddressZero) {\r\n                let copyHelper = new CopyHelper();\r\n                let success = yield copyHelper.copyTextToClipboard(address);\r\n                if (success) {\r\n                    element.innerText = 'Copied';\r\n                    return;\r\n                }\r\n            }\r\n            this.renderContractInfoToString(element, address, symbol, AddressInfo);\r\n        });\r\n    }\r\n    showAddToWallet(element, symbol, address) {\r\n        return SecuritiesList_awaiter(this, void 0, void 0, function* () {\r\n            if (address !== AddressZero) {\r\n                let walletHelper = new WalletHelper(Moralis);\r\n                let added = yield walletHelper.addTokenToWallet(address, symbol, () => {\r\n                    LoadingHelper.removeLoading();\r\n                    this.renderContractInfoToString(element, address, symbol, AddToWallet);\r\n                });\r\n                if (added) {\r\n                    return '';\r\n                }\r\n            }\r\n            this.renderContractInfoToString(element, address, symbol, AddToWallet);\r\n        });\r\n    }\r\n    renderContractInfoToString(element, address, symbol, template) {\r\n        let symbolInfoToCopy = document.getElementById('symbolInfoToCopy');\r\n        if (symbolInfoToCopy)\r\n            symbolInfoToCopy.remove();\r\n        let content = '';\r\n        if (address === AddressZero) {\r\n            let template = Handlebars.compile(ContractAddressNotFound);\r\n            content = template(null);\r\n        }\r\n        else {\r\n            let template = Handlebars.compile(AddressInfo);\r\n            let obj = {\r\n                symbol: symbol,\r\n                address: address\r\n            };\r\n            content = template(obj);\r\n        }\r\n        element.parentElement.parentElement.parentElement.insertAdjacentHTML('afterend', content);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/UserInfo.html\n// Module\nvar UserInfo_code = \"<div id=\\\"userMenuPanel\\\">\\r\\n    <a href=\\\"#\\\" id=\\\"userInfoAction\\\" aria-expanded=\\\"false\\\">\\r\\n        <img src=\\\"https://effigy.im/a/{{ethAddress}}.png\\\" width=\\\"24\\\">\\r\\n        <span id=\\\"user_info_ethAddress\\\">{{shortEthAddress}}</span>\\r\\n    </a>\\r\\n\\r\\n    <div id=\\\"userInfoDropdown\\\" class=\\\"d-none\\\">\\r\\n        <div class=\\\"grid account_info\\\">\\r\\n            <h6>Account</h6>\\r\\n            <a id=\\\"disconnectFromNetwork\\\" href=\\\"#\\\">Disconnect</a>\\r\\n\\r\\n        </div>\\r\\n        <div class=\\\"edit_account grid\\\">\\r\\n            <a id=\\\"editName\\\" href=\\\"#\\\">Edit name</a>\\r\\n            <a id=\\\"editContact\\\" href=\\\"#\\\">Edit contact info</a>\\r\\n        </div>\\r\\n        <div class=\\\"edit_account\\\">\\r\\n            <a id=\\\"editTrustedContact\\\" href=\\\"#\\\">Edit trusted contact</a>\\r\\n        </div>\\r\\n        <hr/>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <img src=\\\"https://effigy.im/a/{{ethAddress}}.png\\\">\\r\\n            </div>\\r\\n            <div>\\r\\n                <strong class=\\\"d-block\\\"><a href=\\\"{{blockchainExplorer}}{{ethAddress}}\\\" target=\\\"_blank\\\">{{shortEthAddress}}</a></strong>\\r\\n                <small>{{walletName}}</small>\\r\\n            </div>\\r\\n        </div>\\r\\n        <hr/>\\r\\n        <div class=\\\"hidden\\\" id=\\\"userInfoAUsdBalance\\\">\\r\\n            <div class=\\\"grid\\\">\\r\\n                <div><img src=\\\"https://app.liminal.market/img/ausd.png\\\"></div>\\r\\n                <div>\\r\\n                    <strong class=\\\"d-block\\\">aUSD <span id=\\\"user_info_ausd_balance\\\"></span></strong>\\r\\n\\r\\n                    <a href=\\\"#\\\" class=\\\"fund_account\\\">Fund my account</a>\\r\\n                    <a href=\\\"#\\\" id=\\\"withdraw_from_account\\\">Withdraw from account</a>\\r\\n                </div>\\r\\n            </div>\\r\\n            <hr/>\\r\\n        </div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <strong class=\\\"d-block\\\">Network</strong>\\r\\n            <small>{{networkName}}</small>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\";\n// Exports\n/* harmony default export */ const elements_UserInfo = (UserInfo_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycEditName.html\n// Module\nvar KycEditName_code = \"<fieldset id=\\\"kycEditName\\\">\\r\\n    <div class=\\\"warningBar\\\">\\r\\n        <strong>Warning</strong><br/>\\r\\n        You can only change the name once. Be careful of what you change.\\r\\n        <br/><br/>\\r\\n        After you change this information a new KYC process will be started, and you will NOT be able to do any\\r\\n        trades\\r\\n        until it has been approved.\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"given_name\\\">Legal First name</label>\\r\\n        <input required id=\\\"given_name\\\" name=\\\"given_name\\\"\\r\\n               placeholder=\\\"Ron\\\"\\r\\n               value=\\\"{{given_name}}\\\" autocomplete=\\\"given-name\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"middle_name\\\">Legal Middle name</label>\\r\\n        <input id=\\\"middle_name\\\" name=\\\"middle_name\\\"\\r\\n               placeholder=\\\"\\\"\\r\\n               value=\\\"{{middle_name}}\\\" autocomplete=\\\"additional-name\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"family_name\\\">Legal Last name</label>\\r\\n        <input required id=\\\"family_name\\\" name=\\\"family_name\\\"\\r\\n               placeholder=\\\"Swanson\\\"\\r\\n               value=\\\"{{family_name}}\\\" autocomplete=\\\"family-name\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"buttons\\\">\\r\\n        <button id=\\\"kycEditNameConfirm\\\">Confirm</button>\\r\\n    </div>\\r\\n</fieldset>\\r\\n\\r\\n<fieldset class=\\\"hidden\\\" id=\\\"confirmNameFieldset\\\">\\r\\n    <div class=\\\"confirm_name\\\">\\r\\n        <label for=\\\"confirm_name\\\" id=\\\"label_confirm_name\\\">Please type</label>\\r\\n        <input name=\\\"confirm_name\\\" id=\\\"confirm_name\\\"/>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"input_error\\\" id=\\\"kycEditNameError\\\"></div>\\r\\n\\r\\n    <div class=\\\"buttons grid\\\">\\r\\n        <button id=\\\"kycEditNameBack\\\">Back</button>\\r\\n        <button type=\\\"submit\\\" id=\\\"kycEditNameSave\\\">Confirm</button>\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const KycEditName = (KycEditName_code);\n;// CONCATENATED MODULE: ./src/util/StringHelper.ts\nclass StringHelper {\r\n    static isNullOrEmpty(str) {\r\n        return !str || str.toString().trim().length == 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycEditNameForm.ts\nvar KycEditNameForm_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass KycEditNameForm {\r\n    constructor() {\r\n        this.modal = new Modal();\r\n    }\r\n    show() {\r\n        return KycEditNameForm_awaiter(this, void 0, void 0, function* () {\r\n            let kycEditNameError = document.getElementById('kycEditNameError');\r\n            if (kycEditNameError)\r\n                kycEditNameError.style.display = 'none';\r\n            let userService = new UserService(Moralis);\r\n            let account = yield userService.getAccount();\r\n            let given_name = account.identity.given_name;\r\n            let middle_name = account.identity.middle_name;\r\n            let family_name = account.identity.family_name;\r\n            let template = Handlebars.compile(KycEditName);\r\n            let content = template({ given_name: given_name, middle_name: middle_name, family_name: family_name });\r\n            this.modal.showModal('Edit name', content);\r\n            this.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let kycEditNameConfirm = document.getElementById('kycEditNameConfirm');\r\n        kycEditNameConfirm === null || kycEditNameConfirm === void 0 ? void 0 : kycEditNameConfirm.addEventListener('click', (evt) => KycEditNameForm_awaiter(this, void 0, void 0, function* () {\r\n            var _a, _b;\r\n            let given_name = document.getElementById('given_name');\r\n            let middle_name = document.getElementById('middle_name');\r\n            let family_name = document.getElementById('family_name');\r\n            if (StringHelper.isNullOrEmpty(given_name.value)) {\r\n                this.showError('Given name cannot be empty');\r\n                return;\r\n            }\r\n            if (StringHelper.isNullOrEmpty(family_name.value)) {\r\n                this.showError('Family name cannot be empty');\r\n                return;\r\n            }\r\n            let full_name = this.getFullName();\r\n            let label_confirm_name = document.getElementById('label_confirm_name');\r\n            if (!label_confirm_name) {\r\n                //TODO: report error in form\r\n                return;\r\n            }\r\n            label_confirm_name.innerHTML = 'Please type in the full name \"' + full_name + '\" in the box below to confirm. You WILL NOT be able to change it again.';\r\n            (_a = document.getElementById('confirmNameFieldset')) === null || _a === void 0 ? void 0 : _a.classList.remove('hidden');\r\n            (_b = document.getElementById('kycEditName')) === null || _b === void 0 ? void 0 : _b.classList.add('hidden');\r\n        }));\r\n        let kycEditNameBack = document.getElementById('kycEditNameBack');\r\n        kycEditNameBack === null || kycEditNameBack === void 0 ? void 0 : kycEditNameBack.addEventListener('click', (evt) => {\r\n            var _a, _b;\r\n            (_a = document.getElementById('confirmNameFieldset')) === null || _a === void 0 ? void 0 : _a.classList.add('hidden');\r\n            (_b = document.getElementById('kycEditName')) === null || _b === void 0 ? void 0 : _b.classList.remove('hidden');\r\n        });\r\n        let confirm_name = document.getElementById('confirm_name');\r\n        if (!confirm_name) {\r\n            //TODO: report error in form\r\n            return;\r\n        }\r\n        let kycEditNameSave = document.getElementById('kycEditNameSave');\r\n        kycEditNameSave.disabled = true;\r\n        confirm_name.setAttribute('aria-invalid', 'true');\r\n        confirm_name.addEventListener('keyup', (evt) => {\r\n            if (confirm_name.value == this.getFullName()) {\r\n                confirm_name.setAttribute('aria-invalid', 'false');\r\n                kycEditNameSave.disabled = false;\r\n            }\r\n            else {\r\n                confirm_name.setAttribute('aria-invalid', 'true');\r\n                kycEditNameSave.disabled = true;\r\n            }\r\n        });\r\n        kycEditNameSave === null || kycEditNameSave === void 0 ? void 0 : kycEditNameSave.addEventListener('click', (evt) => KycEditNameForm_awaiter(this, void 0, void 0, function* () {\r\n            let confirm_name = document.getElementById('confirm_name');\r\n            if (confirm_name && confirm_name.value != this.getFullName()) {\r\n                alert(confirm_name.value + ' is not same as ' + this.getFullName() + '. Go over the name and make sure it is identical');\r\n                return;\r\n            }\r\n            let given_name = document.getElementById('given_name');\r\n            let middle_name = document.getElementById('middle_name');\r\n            let family_name = document.getElementById('family_name');\r\n            LoadingHelper.setLoading(kycEditNameSave);\r\n            let userService = new UserService(Moralis);\r\n            yield userService.updateName(given_name.value, middle_name.value, family_name.value)\r\n                .then((response) => {\r\n                if (response.message) {\r\n                    this.showError(response.message);\r\n                    return;\r\n                }\r\n                this.modal.hideModal();\r\n            }).catch(reason => {\r\n                if (reason.message) {\r\n                    this.showError(JSON.parse(reason.message).message);\r\n                }\r\n                else {\r\n                    this.showError(reason);\r\n                }\r\n            }).finally(() => {\r\n                LoadingHelper.removeLoading();\r\n            });\r\n        }));\r\n    }\r\n    showError(message) {\r\n        let kycEditNameError = document.getElementById('kycEditNameError');\r\n        if (!kycEditNameError)\r\n            return;\r\n        kycEditNameError.innerHTML = message;\r\n        kycEditNameError.style.display = 'block';\r\n    }\r\n    getFullName() {\r\n        let given_name = document.getElementById('given_name');\r\n        let middle_name = document.getElementById('middle_name');\r\n        let family_name = document.getElementById('family_name');\r\n        return given_name.value + ' ' + (!StringHelper.isNullOrEmpty(middle_name.value) ? middle_name.value + ' ' : '') + family_name.value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycEditContactForm.html\n// Module\nvar KycEditContactForm_code = \"<fieldset id=\\\"kycEditContactFieldset\\\">\\r\\n    <div class=\\\"warningBar\\\">\\r\\n        <strong>Warning</strong><br/>\\r\\n        After you change this information a new KYC process will be started, and you will NOT be able to do any\\r\\n        trades until it has been approved.\\r\\n    </div>\\r\\n    <form id=\\\"kycEditContactForm\\\">\\r\\n        <div>\\r\\n            <label for=\\\"email_address\\\">Email</label>\\r\\n            <input type=\\\"email\\\" required class=\\\"form-control\\\" id=\\\"email_address\\\" name=\\\"email_address\\\"\\r\\n                   placeholder=\\\"name@example.com\\\" autocomplete=\\\"email\\\"\\r\\n                   value=\\\"\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"phone_number\\\">Phone</label>\\r\\n            <input type=\\\"tel\\\" class=\\\"form-control\\\" id=\\\"phone_number\\\" name=\\\"phone_number\\\"\\r\\n                   placeholder=\\\"+1-555-666-7788\\\" autocomplete=\\\"tel\\\" value=\\\"\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"street_address\\\">Permanent Residential Address</label>\\r\\n            <div class=\\\"explain\\\">It must be a physical address, not a PO box.</div>\\r\\n            <input required id=\\\"street_address\\\" name=\\\"street_address\\\"\\r\\n                   placeholder=\\\"20 N San Mateo Dr\\\" value=\\\"\\\" autocomplete=\\\"address-line1\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"unit\\\">Unit / Apt #</label>\\r\\n            <input id=\\\"unit\\\" name=\\\"unit\\\" value=\\\"\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"city\\\">City</label>\\r\\n            <input id=\\\"city\\\" name=\\\"city\\\" placeholder=\\\"Pawnee\\\"\\r\\n                   value=\\\"\\\" autocomplete=\\\"address-level2\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"postal_code\\\">Postal code</label>\\r\\n            <input required id=\\\"postal_code\\\" autocomplete=\\\"postal-code\\\" name=\\\"postal_code\\\"\\r\\n                   placeholder=\\\"94401\\\"\\r\\n                   value=\\\"\\\">\\r\\n        </div>\\r\\n        {{#if usa}}\\r\\n        <div id=\\\"state_div\\\">\\r\\n            <label for=\\\"state\\\">State (2 letters)</label>\\r\\n            <input required maxlength=\\\"2\\\" id=\\\"state\\\" name=\\\"state\\\" placeholder=\\\"NY\\\"\\r\\n                   value=\\\"\\\" autocomplete=\\\"address-level1\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"input_error\\\" id=\\\"kycEditContactError\\\"></div>\\r\\n        <div class=\\\"buttons\\\">\\r\\n            <button type=\\\"submit\\\" id=\\\"kycEditContactSave\\\">Save</button>\\r\\n        </div>\\r\\n    </form>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycEditContactForm = (KycEditContactForm_code);\n;// CONCATENATED MODULE: ./src/util/FormHelper.ts\n\r\nclass FormHelper {\r\n    static getParams(selector) {\r\n        let form = document.querySelector(selector);\r\n        if (!form)\r\n            return;\r\n        let data = new FormData(form);\r\n        return this.serialize(data);\r\n    }\r\n    static serialize(data) {\r\n        let obj = {};\r\n        for (let [key, value] of data) {\r\n            if (obj[key] !== undefined) {\r\n                if (!Array.isArray(obj[key])) {\r\n                    obj[key] = [obj[key]];\r\n                }\r\n                obj[key].push(value);\r\n            }\r\n            else {\r\n                obj[key] = value;\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    static fillInputs(properties, item) {\r\n        properties.forEach((value) => {\r\n            let input = document.querySelector('input[name=' + value + ']');\r\n            if (input) {\r\n                if (input.type == 'radio') {\r\n                    console.log('checkbox', input, item[value]);\r\n                    input.value = item[value];\r\n                }\r\n                else {\r\n                    input.value = item[value];\r\n                }\r\n                input.dispatchEvent(new Event('change'));\r\n            }\r\n            else {\r\n                let select = document.querySelector('select[name=' + value + ']');\r\n                if (select) {\r\n                    select.value = item[value];\r\n                    select.dispatchEvent(new Event('change'));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static validate(selector) {\r\n        let inputs = document.querySelectorAll(selector + ' input[required]');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            input.setAttribute('aria-invalid', 'false');\r\n            if (StringHelper.isNullOrEmpty(input.value)) {\r\n                input.setAttribute('aria-invalid', 'true');\r\n                input.focus();\r\n                input.addEventListener('change', (evt) => {\r\n                    if (!StringHelper.isNullOrEmpty(input.value)) {\r\n                        input.setAttribute('aria-invalid', 'false');\r\n                    }\r\n                });\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycEditContactForm.ts\nvar KycEditContactForm_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass KycEditContactForm {\r\n    constructor() {\r\n        this.modal = new Modal();\r\n    }\r\n    show() {\r\n        return KycEditContactForm_awaiter(this, void 0, void 0, function* () {\r\n            let userService = new UserService(Moralis);\r\n            let account = yield userService.getAccount();\r\n            let usa = account.identity.country_of_tax_residence == 'USA';\r\n            let template = Handlebars.compile(Kyc_KycEditContactForm);\r\n            this.modal.showModal('Edit contact information', template({ usa: usa }));\r\n            let contactProperties = Object.getOwnPropertyNames(account.contact);\r\n            FormHelper.fillInputs(contactProperties, account.contact);\r\n            this.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let kycEditContactSave = document.getElementById('kycEditContactSave');\r\n        kycEditContactSave === null || kycEditContactSave === void 0 ? void 0 : kycEditContactSave.addEventListener('click', (evt) => KycEditContactForm_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            if (!this.validate())\r\n                return;\r\n            LoadingHelper.setLoading(kycEditContactSave);\r\n            let data = FormHelper.getParams('#kycEditContactForm');\r\n            let userService = new UserService(Moralis);\r\n            yield userService.updateContact(data).then((response) => {\r\n                if (response.message) {\r\n                    this.showError(response.message);\r\n                    return;\r\n                }\r\n                let accountInfo = response;\r\n                let email_address = document.getElementById('email_address');\r\n                if (accountInfo.contact.email_address != (email_address === null || email_address === void 0 ? void 0 : email_address.value)) {\r\n                    this.showError('Email was not changed. The email ' + (email_address === null || email_address === void 0 ? void 0 : email_address.value) + ' is already registered under different account.');\r\n                    return;\r\n                }\r\n                this.modal.hideModal();\r\n            }).catch(reason => {\r\n                if (reason.message) {\r\n                    this.showError(JSON.parse(reason.message).message);\r\n                }\r\n                else {\r\n                    this.showError(reason);\r\n                }\r\n            }).finally(() => {\r\n                LoadingHelper.removeLoading();\r\n            });\r\n        }));\r\n    }\r\n    showError(message) {\r\n        let kycEditNameError = document.getElementById('kycEditContactError');\r\n        if (!kycEditNameError)\r\n            return;\r\n        kycEditNameError.innerHTML = message;\r\n        kycEditNameError.style.display = 'block';\r\n    }\r\n    validate() {\r\n        let inputs = document.querySelectorAll('#kycEditContactFieldset input[required]');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            if (StringHelper.isNullOrEmpty(input.value)) {\r\n                input.setAttribute('aria-invalid', 'true');\r\n                input.addEventListener('change', (evt) => {\r\n                    if (!StringHelper.isNullOrEmpty(input.value)) {\r\n                        input.setAttribute('aria-invalid', 'false');\r\n                    }\r\n                });\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycEditTrustedContact.html\n// Module\nvar KycEditTrustedContact_code = \"<fieldset class=\\\"kycTrustedContact\\\">\\r\\n    <div class=\\\"warningBar\\\">\\r\\n        <strong>Warning</strong><br/>\\r\\n        After you change this information a new KYC process will be started, and you will NOT be able to do any\\r\\n        trades until it has been approved.\\r\\n    </div>\\r\\n\\r\\n    <form id=\\\"kycTrustedContactForm\\\" method=\\\"post\\\">\\r\\n        <div class=\\\"explain\\\">\\r\\n            A trusted contact is a person you authorize your financial firm to contact in limited circumstances,\\r\\n            such as if there is a concern about activity in your account and they have been unable to get in touch with\\r\\n            you.\\r\\n            <br/><br/>\\r\\n            A trusted contact may be a family member, attorney, accountant or another third-party who you believe would\\r\\n            respect your privacy and know how to handle the responsibility.\\r\\n            The trusted person should be 18 years old or older.\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"given_name\\\">Legal given name of trusted contact</label>\\r\\n            <input required id=\\\"given_name\\\" name=\\\"given_name\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"family_name\\\">Legal family name of trusted contact</label>\\r\\n            <input required id=\\\"family_name\\\" name=\\\"family_name\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            If you fill in name, you are required to fill in one of the following, email, phone or address\\r\\n        </div>\\r\\n        <div class=\\\"input_error\\\" id=\\\"contact_missing_info\\\"></div>\\r\\n        <div>\\r\\n            <label for=\\\"email_address\\\">Email of trusted contact</label>\\r\\n            <input id=\\\"email_address\\\" type=\\\"email\\\" name=\\\"email_address\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"phone_number\\\">Phone of trusted contact</label>\\r\\n            <input id=\\\"phone_number\\\" type=\\\"tel\\\" name=\\\"phone_number\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"street_address\\\">Address of trusted contact</label>\\r\\n            <input id=\\\"street_address\\\" name=\\\"street_address\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"city\\\">City of trusted contact</label>\\r\\n            <input id=\\\"city\\\" name=\\\"city\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"state\\\">State of trusted contact</label>\\r\\n            <input id=\\\"state\\\" name=\\\"state\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"postal_code\\\">Postal code of trusted contact</label>\\r\\n            <input id=\\\"postal_code\\\" name=\\\"postal_code\\\"/>\\r\\n        </div>\\r\\n        <div>\\r\\n            <label for=\\\"country\\\">Country of trusted contact</label>\\r\\n            <select required id=\\\"country\\\" required name=\\\"country\\\">\\r\\n                <option value=\\\"\\\"></option>\\r\\n                {{#each countries}}\\r\\n                <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n                {{/each}}\\r\\n            </select>\\r\\n        </div>\\r\\n        <div class=\\\"input_error\\\" id=\\\"kycEditNameError\\\"></div>\\r\\n        <div class=\\\"buttons\\\">\\r\\n            <button type=\\\"submit\\\" id=\\\"trustedContactSubmit\\\">Submit</button>\\r\\n        </div>\\r\\n    </form>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycEditTrustedContact = (KycEditTrustedContact_code);\n;// CONCATENATED MODULE: ./src/util/CountryHelper.ts\nclass CountryHelper {\r\n}\r\nCountryHelper.Countries = [\r\n    { \"name\": \"United States of America\", \"code\": \"USA\" },\r\n    { \"name\": \"United Kingdom\", \"code\": \"GBR\" },\r\n    { \"name\": \"Afghanistan\", \"code\": \"AFG\" }, { \"name\": \"Albania\", \"code\": \"ALB\" }, {\r\n        \"name\": \"Algeria\",\r\n        \"code\": \"DZA\"\r\n    }, { \"name\": \"American Samoa\", \"code\": \"ASM\" }, { \"name\": \"Andorra\", \"code\": \"AND\" }, {\r\n        \"name\": \"Angola\",\r\n        \"code\": \"AGO\"\r\n    }, { \"name\": \"Anguilla\", \"code\": \"AIA\" }, { \"name\": \"Antarctica\", \"code\": \"ATA\" }, {\r\n        \"name\": \"Antigua and Barbuda\",\r\n        \"code\": \"ATG\"\r\n    }, { \"name\": \"Argentina\", \"code\": \"ARG\" }, { \"name\": \"Armenia\", \"code\": \"ARM\" }, {\r\n        \"name\": \"Aruba\",\r\n        \"code\": \"ABW\"\r\n    }, { \"name\": \"Australia\", \"code\": \"AUS\" }, { \"name\": \"Austria\", \"code\": \"AUT\" }, {\r\n        \"name\": \"Azerbaijan\",\r\n        \"code\": \"AZE\"\r\n    }, { \"name\": \"Åland Islands\", \"code\": \"ALA\" }, { \"name\": \"Bahamas\", \"code\": \"BHS\" }, {\r\n        \"name\": \"Bahrain\",\r\n        \"code\": \"BHR\"\r\n    }, { \"name\": \"Bangladesh\", \"code\": \"BGD\" }, { \"name\": \"Barbados\", \"code\": \"BRB\" }, {\r\n        \"name\": \"Belarus\",\r\n        \"code\": \"BLR\"\r\n    }, { \"name\": \"Belgium\", \"code\": \"BEL\" }, { \"name\": \"Belize\", \"code\": \"BLZ\" }, {\r\n        \"name\": \"Benin\",\r\n        \"code\": \"BEN\"\r\n    }, { \"name\": \"Bermuda\", \"code\": \"BMU\" }, {\r\n        \"name\": \"Bhutan\",\r\n        \"code\": \"BTN\"\r\n    }, { \"name\": \"Bolivia (Plurinational State of)\", \"code\": \"BOL\" }, {\r\n        \"name\": \"Bonaire, Sint Eustatius and Saba\",\r\n        \"code\": \"BES\"\r\n    }, { \"name\": \"Bosnia and Herzegovina\", \"code\": \"BIH\" }, {\r\n        \"name\": \"Botswana\",\r\n        \"code\": \"BWA\"\r\n    }, { \"name\": \"Bouvet Island\", \"code\": \"BVT\" }, {\r\n        \"name\": \"Brazil\",\r\n        \"code\": \"BRA\"\r\n    }, { \"name\": \"British Indian Ocean Territory\", \"code\": \"IOT\" }, {\r\n        \"name\": \"Brunei Darussalam\",\r\n        \"code\": \"BRN\"\r\n    }, { \"name\": \"Bulgaria\", \"code\": \"BGR\" }, { \"name\": \"Burkina Faso\", \"code\": \"BFA\" }, {\r\n        \"name\": \"Burundi\",\r\n        \"code\": \"BDI\"\r\n    }, { \"name\": \"Cabo Verde\", \"code\": \"CPV\" }, { \"name\": \"Cambodia\", \"code\": \"KHM\" }, {\r\n        \"name\": \"Cameroon\",\r\n        \"code\": \"CMR\"\r\n    }, { \"name\": \"Canada\", \"code\": \"CAN\" }, {\r\n        \"name\": \"Cayman Islands\",\r\n        \"code\": \"CYM\"\r\n    }, { \"name\": \"Central African Republic\", \"code\": \"CAF\" }, { \"name\": \"Chad\", \"code\": \"TCD\" }, {\r\n        \"name\": \"Chile\",\r\n        \"code\": \"CHL\"\r\n    }, { \"name\": \"China\", \"code\": \"CHN\" }, {\r\n        \"name\": \"Christmas Island\",\r\n        \"code\": \"CXR\"\r\n    }, { \"name\": \"Cocos (Keeling) Islands\", \"code\": \"CCK\" }, { \"name\": \"Colombia\", \"code\": \"COL\" }, {\r\n        \"name\": \"Comoros\",\r\n        \"code\": \"COM\"\r\n    }, { \"name\": \"Congo (the Democratic Republic of the)\", \"code\": \"COD\" }, {\r\n        \"name\": \"Congo\",\r\n        \"code\": \"COG\"\r\n    }, { \"name\": \"Cook Islands\", \"code\": \"COK\" }, { \"name\": \"Costa Rica\", \"code\": \"CRI\" }, {\r\n        \"name\": \"Croatia\",\r\n        \"code\": \"HRV\"\r\n    }, { \"name\": \"Cuba\", \"code\": \"CUB\" }, { \"name\": \"Curaçao\", \"code\": \"CUW\" }, {\r\n        \"name\": \"Cyprus\",\r\n        \"code\": \"CYP\"\r\n    }, { \"name\": \"Czechia\", \"code\": \"CZE\" }, { \"name\": \"Côte d'Ivoire\", \"code\": \"CIV\" }, {\r\n        \"name\": \"Denmark\",\r\n        \"code\": \"DNK\"\r\n    }, { \"name\": \"Djibouti\", \"code\": \"DJI\" }, { \"name\": \"Dominica\", \"code\": \"DMA\" }, {\r\n        \"name\": \"Dominican Republic\",\r\n        \"code\": \"DOM\"\r\n    }, { \"name\": \"Ecuador\", \"code\": \"ECU\" }, { \"name\": \"Egypt\", \"code\": \"EGY\" }, {\r\n        \"name\": \"El Salvador\",\r\n        \"code\": \"SLV\"\r\n    }, { \"name\": \"Equatorial Guinea\", \"code\": \"GNQ\" }, { \"name\": \"Eritrea\", \"code\": \"ERI\" }, {\r\n        \"name\": \"Estonia\",\r\n        \"code\": \"EST\"\r\n    }, { \"name\": \"Eswatini\", \"code\": \"SWZ\" }, {\r\n        \"name\": \"Ethiopia\",\r\n        \"code\": \"ETH\"\r\n    }, { \"name\": \"Falkland Islands [Malvinas]\", \"code\": \"FLK\" }, {\r\n        \"name\": \"Faroe Islands\",\r\n        \"code\": \"FRO\"\r\n    }, { \"name\": \"Fiji\", \"code\": \"FJI\" }, { \"name\": \"Finland\", \"code\": \"FIN\" }, {\r\n        \"name\": \"France\",\r\n        \"code\": \"FRA\"\r\n    }, { \"name\": \"French Guiana\", \"code\": \"GUF\" }, {\r\n        \"name\": \"French Polynesia\",\r\n        \"code\": \"PYF\"\r\n    }, { \"name\": \"French Southern Territories\", \"code\": \"ATF\" }, { \"name\": \"Gabon\", \"code\": \"GAB\" }, {\r\n        \"name\": \"Gambia\",\r\n        \"code\": \"GMB\"\r\n    }, { \"name\": \"Georgia\", \"code\": \"GEO\" }, { \"name\": \"Germany\", \"code\": \"DEU\" }, {\r\n        \"name\": \"Ghana\",\r\n        \"code\": \"GHA\"\r\n    }, { \"name\": \"Gibraltar\", \"code\": \"GIB\" }, { \"name\": \"Greece\", \"code\": \"GRC\" }, {\r\n        \"name\": \"Greenland\",\r\n        \"code\": \"GRL\"\r\n    }, { \"name\": \"Grenada\", \"code\": \"GRD\" }, { \"name\": \"Guadeloupe\", \"code\": \"GLP\" }, {\r\n        \"name\": \"Guam\",\r\n        \"code\": \"GUM\"\r\n    }, { \"name\": \"Guatemala\", \"code\": \"GTM\" }, { \"name\": \"Guernsey\", \"code\": \"GGY\" }, {\r\n        \"name\": \"Guinea\",\r\n        \"code\": \"GIN\"\r\n    }, { \"name\": \"Guinea-Bissau\", \"code\": \"GNB\" }, { \"name\": \"Guyana\", \"code\": \"GUY\" }, {\r\n        \"name\": \"Haiti\",\r\n        \"code\": \"HTI\"\r\n    }, { \"name\": \"Heard Island and McDonald Islands\", \"code\": \"HMD\" }, {\r\n        \"name\": \"Holy See\",\r\n        \"code\": \"VAT\"\r\n    }, { \"name\": \"Honduras\", \"code\": \"HND\" }, { \"name\": \"Hong Kong\", \"code\": \"HKG\" }, {\r\n        \"name\": \"Hungary\",\r\n        \"code\": \"HUN\"\r\n    }, { \"name\": \"Iceland\", \"code\": \"ISL\" }, { \"name\": \"India\", \"code\": \"IND\" }, {\r\n        \"name\": \"Indonesia\",\r\n        \"code\": \"IDN\"\r\n    }, { \"name\": \"Iran (Islamic Republic of)\", \"code\": \"IRN\" }, { \"name\": \"Iraq\", \"code\": \"IRQ\" }, {\r\n        \"name\": \"Ireland\",\r\n        \"code\": \"IRL\"\r\n    }, { \"name\": \"Isle of Man\", \"code\": \"IMN\" }, { \"name\": \"Israel\", \"code\": \"ISR\" }, {\r\n        \"name\": \"Italy\",\r\n        \"code\": \"ITA\"\r\n    }, { \"name\": \"Jamaica\", \"code\": \"JAM\" }, { \"name\": \"Japan\", \"code\": \"JPN\" }, {\r\n        \"name\": \"Jersey\",\r\n        \"code\": \"JEY\"\r\n    }, { \"name\": \"Jordan\", \"code\": \"JOR\" }, { \"name\": \"Kazakhstan\", \"code\": \"KAZ\" }, {\r\n        \"name\": \"Kenya\",\r\n        \"code\": \"KEN\"\r\n    }, { \"name\": \"Kiribati\", \"code\": \"KIR\" }, {\r\n        \"name\": \"Korea (the Democratic People's Republic of)\",\r\n        \"code\": \"PRK\"\r\n    }, { \"name\": \"Korea (the Republic of)\", \"code\": \"KOR\" }, { \"name\": \"Kuwait\", \"code\": \"KWT\" }, {\r\n        \"name\": \"Kyrgyzstan\",\r\n        \"code\": \"KGZ\"\r\n    }, { \"name\": \"Lao People's Democratic Republic\", \"code\": \"LAO\" }, {\r\n        \"name\": \"Latvia\",\r\n        \"code\": \"LVA\"\r\n    }, { \"name\": \"Lebanon\", \"code\": \"LBN\" }, { \"name\": \"Lesotho\", \"code\": \"LSO\" }, {\r\n        \"name\": \"Liberia\",\r\n        \"code\": \"LBR\"\r\n    }, { \"name\": \"Libya\", \"code\": \"LBY\" }, { \"name\": \"Liechtenstein\", \"code\": \"LIE\" }, {\r\n        \"name\": \"Lithuania\",\r\n        \"code\": \"LTU\"\r\n    }, { \"name\": \"Luxembourg\", \"code\": \"LUX\" }, { \"name\": \"Macao\", \"code\": \"MAC\" }, {\r\n        \"name\": \"Madagascar\",\r\n        \"code\": \"MDG\"\r\n    }, { \"name\": \"Malawi\", \"code\": \"MWI\" }, { \"name\": \"Malaysia\", \"code\": \"MYS\" }, {\r\n        \"name\": \"Maldives\",\r\n        \"code\": \"MDV\"\r\n    }, { \"name\": \"Mali\", \"code\": \"MLI\" }, { \"name\": \"Malta\", \"code\": \"MLT\" }, {\r\n        \"name\": \"Marshall Islands\",\r\n        \"code\": \"MHL\"\r\n    }, { \"name\": \"Martinique\", \"code\": \"MTQ\" }, { \"name\": \"Mauritania\", \"code\": \"MRT\" }, {\r\n        \"name\": \"Mauritius\",\r\n        \"code\": \"MUS\"\r\n    }, { \"name\": \"Mayotte\", \"code\": \"MYT\" }, {\r\n        \"name\": \"Mexico\",\r\n        \"code\": \"MEX\"\r\n    }, { \"name\": \"Micronesia (Federated States of)\", \"code\": \"FSM\" }, {\r\n        \"name\": \"Moldova (the Republic of)\",\r\n        \"code\": \"MDA\"\r\n    }, { \"name\": \"Monaco\", \"code\": \"MCO\" }, { \"name\": \"Mongolia\", \"code\": \"MNG\" }, {\r\n        \"name\": \"Montenegro\",\r\n        \"code\": \"MNE\"\r\n    }, { \"name\": \"Montserrat\", \"code\": \"MSR\" }, { \"name\": \"Morocco\", \"code\": \"MAR\" }, {\r\n        \"name\": \"Mozambique\",\r\n        \"code\": \"MOZ\"\r\n    }, { \"name\": \"Myanmar\", \"code\": \"MMR\" }, { \"name\": \"Namibia\", \"code\": \"NAM\" }, {\r\n        \"name\": \"Nauru\",\r\n        \"code\": \"NRU\"\r\n    }, { \"name\": \"Nepal\", \"code\": \"NPL\" }, { \"name\": \"Netherlands\", \"code\": \"NLD\" }, {\r\n        \"name\": \"New Caledonia\",\r\n        \"code\": \"NCL\"\r\n    }, { \"name\": \"New Zealand\", \"code\": \"NZL\" }, { \"name\": \"Nicaragua\", \"code\": \"NIC\" }, {\r\n        \"name\": \"Niger\",\r\n        \"code\": \"NER\"\r\n    }, { \"name\": \"Nigeria\", \"code\": \"NGA\" }, { \"name\": \"Niue\", \"code\": \"NIU\" }, {\r\n        \"name\": \"Norfolk Island\",\r\n        \"code\": \"NFK\"\r\n    }, { \"name\": \"Northern Mariana Islands\", \"code\": \"MNP\" }, { \"name\": \"Norway\", \"code\": \"NOR\" }, {\r\n        \"name\": \"Oman\",\r\n        \"code\": \"OMN\"\r\n    }, { \"name\": \"Pakistan\", \"code\": \"PAK\" }, { \"name\": \"Palau\", \"code\": \"PLW\" }, {\r\n        \"name\": \"Palestine, State of\",\r\n        \"code\": \"PSE\"\r\n    }, { \"name\": \"Panama\", \"code\": \"PAN\" }, { \"name\": \"Papua New Guinea\", \"code\": \"PNG\" }, {\r\n        \"name\": \"Paraguay\",\r\n        \"code\": \"PRY\"\r\n    }, { \"name\": \"Peru\", \"code\": \"PER\" }, { \"name\": \"Philippines\", \"code\": \"PHL\" }, {\r\n        \"name\": \"Pitcairn\",\r\n        \"code\": \"PCN\"\r\n    }, { \"name\": \"Poland\", \"code\": \"POL\" }, { \"name\": \"Portugal\", \"code\": \"PRT\" }, {\r\n        \"name\": \"Puerto Rico\",\r\n        \"code\": \"PRI\"\r\n    }, { \"name\": \"Qatar\", \"code\": \"QAT\" }, { \"name\": \"Republic of North Macedonia\", \"code\": \"MKD\" }, {\r\n        \"name\": \"Romania\",\r\n        \"code\": \"ROU\"\r\n    }, { \"name\": \"Russian Federation\", \"code\": \"RUS\" }, { \"name\": \"Rwanda\", \"code\": \"RWA\" }, {\r\n        \"name\": \"Réunion\",\r\n        \"code\": \"REU\"\r\n    }, { \"name\": \"Saint Barthélemy\", \"code\": \"BLM\" }, {\r\n        \"name\": \"Saint Helena, Ascension and Tristan da Cunha\",\r\n        \"code\": \"SHN\"\r\n    }, { \"name\": \"Saint Kitts and Nevis\", \"code\": \"KNA\" }, {\r\n        \"name\": \"Saint Lucia\",\r\n        \"code\": \"LCA\"\r\n    }, { \"name\": \"Saint Martin (French part)\", \"code\": \"MAF\" }, {\r\n        \"name\": \"Saint Pierre and Miquelon\",\r\n        \"code\": \"SPM\"\r\n    }, { \"name\": \"Saint Vincent and the Grenadines\", \"code\": \"VCT\" }, {\r\n        \"name\": \"Samoa\",\r\n        \"code\": \"WSM\"\r\n    }, { \"name\": \"San Marino\", \"code\": \"SMR\" }, {\r\n        \"name\": \"Sao Tome and Principe\",\r\n        \"code\": \"STP\"\r\n    }, { \"name\": \"Saudi Arabia\", \"code\": \"SAU\" }, { \"name\": \"Senegal\", \"code\": \"SEN\" }, {\r\n        \"name\": \"Serbia\",\r\n        \"code\": \"SRB\"\r\n    }, { \"name\": \"Seychelles\", \"code\": \"SYC\" }, { \"name\": \"Sierra Leone\", \"code\": \"SLE\" }, {\r\n        \"name\": \"Singapore\",\r\n        \"code\": \"SGP\"\r\n    }, { \"name\": \"Sint Maarten (Dutch part)\", \"code\": \"SXM\" }, {\r\n        \"name\": \"Slovakia\",\r\n        \"code\": \"SVK\"\r\n    }, { \"name\": \"Slovenia\", \"code\": \"SVN\" }, { \"name\": \"Solomon Islands\", \"code\": \"SLB\" }, {\r\n        \"name\": \"Somalia\",\r\n        \"code\": \"SOM\"\r\n    }, { \"name\": \"South Africa\", \"code\": \"ZAF\" }, {\r\n        \"name\": \"South Georgia and the South Sandwich Islands\",\r\n        \"code\": \"SGS\"\r\n    }, { \"name\": \"South Sudan\", \"code\": \"SSD\" }, { \"name\": \"Spain\", \"code\": \"ESP\" }, {\r\n        \"name\": \"Sri Lanka\",\r\n        \"code\": \"LKA\"\r\n    }, { \"name\": \"Sudan\", \"code\": \"SDN\" }, { \"name\": \"Suriname\", \"code\": \"SUR\" }, {\r\n        \"name\": \"Svalbard and Jan Mayen\",\r\n        \"code\": \"SJM\"\r\n    }, { \"name\": \"Sweden\", \"code\": \"SWE\" }, { \"name\": \"Switzerland\", \"code\": \"CHE\" }, {\r\n        \"name\": \"Syrian Arab Republic\",\r\n        \"code\": \"SYR\"\r\n    }, { \"name\": \"Taiwan (Province of China)\", \"code\": \"TWN\" }, {\r\n        \"name\": \"Tajikistan\",\r\n        \"code\": \"TJK\"\r\n    }, { \"name\": \"Tanzania, United Republic of\", \"code\": \"TZA\" }, {\r\n        \"name\": \"Thailand\",\r\n        \"code\": \"THA\"\r\n    }, { \"name\": \"Timor-Leste\", \"code\": \"TLS\" }, { \"name\": \"Togo\", \"code\": \"TGO\" }, {\r\n        \"name\": \"Tokelau\",\r\n        \"code\": \"TKL\"\r\n    }, { \"name\": \"Tonga\", \"code\": \"TON\" }, { \"name\": \"Trinidad and Tobago\", \"code\": \"TTO\" }, {\r\n        \"name\": \"Tunisia\",\r\n        \"code\": \"TUN\"\r\n    }, { \"name\": \"Turkey\", \"code\": \"TUR\" }, {\r\n        \"name\": \"Turkmenistan\",\r\n        \"code\": \"TKM\"\r\n    }, { \"name\": \"Turks and Caicos Islands\", \"code\": \"TCA\" }, { \"name\": \"Tuvalu\", \"code\": \"TUV\" }, {\r\n        \"name\": \"Uganda\",\r\n        \"code\": \"UGA\"\r\n    }, { \"name\": \"Ukraine\", \"code\": \"UKR\" }, {\r\n        \"name\": \"United Arab Emirates\",\r\n        \"code\": \"ARE\"\r\n    }, {\r\n        \"name\": \"United Kingdom of Great Britain and Northern Ireland\",\r\n        \"code\": \"GBR\"\r\n    }, { \"name\": \"United States Minor Outlying Islands\", \"code\": \"UMI\" }, {\r\n        \"name\": \"United States of America\",\r\n        \"code\": \"USA\"\r\n    }, { \"name\": \"Uruguay\", \"code\": \"URY\" }, { \"name\": \"Uzbekistan\", \"code\": \"UZB\" }, {\r\n        \"name\": \"Vanuatu\",\r\n        \"code\": \"VUT\"\r\n    }, { \"name\": \"Venezuela (Bolivarian Republic of)\", \"code\": \"VEN\" }, {\r\n        \"name\": \"Viet Nam\",\r\n        \"code\": \"VNM\"\r\n    }, { \"name\": \"Virgin Islands (British)\", \"code\": \"VGB\" }, {\r\n        \"name\": \"Virgin Islands (U.S.)\",\r\n        \"code\": \"VIR\"\r\n    }, { \"name\": \"Wallis and Futuna\", \"code\": \"WLF\" }, { \"name\": \"Western Sahara\", \"code\": \"ESH\" }, {\r\n        \"name\": \"Yemen\",\r\n        \"code\": \"YEM\"\r\n    }, { \"name\": \"Zambia\", \"code\": \"ZMB\" }, { \"name\": \"Zimbabwe\", \"code\": \"ZWE\" }\r\n];\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycEditTrustedContact.ts\nvar KycEditTrustedContact_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass KycEditTrustedContact {\r\n    constructor() {\r\n        this.modal = new Modal();\r\n    }\r\n    show() {\r\n        return KycEditTrustedContact_awaiter(this, void 0, void 0, function* () {\r\n            let userService = new UserService(Moralis);\r\n            let account = yield userService.getAccount();\r\n            let template = Handlebars.compile(Kyc_KycEditTrustedContact);\r\n            this.modal.showModal('Edit trusted contact', template({ countries: CountryHelper.Countries }));\r\n            if (account.trusted_contact) {\r\n                let contactProperties = Object.getOwnPropertyNames(account.trusted_contact);\r\n                FormHelper.fillInputs(contactProperties, account.trusted_contact);\r\n            }\r\n            this.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let trustedContactSubmit = document.getElementById('trustedContactSubmit');\r\n        trustedContactSubmit === null || trustedContactSubmit === void 0 ? void 0 : trustedContactSubmit.addEventListener('click', (evt) => KycEditTrustedContact_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            if (!FormHelper.validate('#kycTrustedContactForm'))\r\n                return;\r\n            LoadingHelper.setLoading(trustedContactSubmit);\r\n            let params = FormHelper.getParams('#kycTrustedContactForm');\r\n            let userService = new UserService(Moralis);\r\n            yield userService.updateTrustedContact(params).then((response) => {\r\n                if (response.message) {\r\n                    this.showError(response.message);\r\n                    return;\r\n                }\r\n                this.modal.hideModal();\r\n            }).catch(reason => {\r\n                if (reason.message) {\r\n                    this.showError(JSON.parse(reason.message).message);\r\n                }\r\n                else {\r\n                    this.showError(reason);\r\n                }\r\n            }).finally(() => {\r\n                LoadingHelper.removeLoading();\r\n            });\r\n        }));\r\n    }\r\n    showError(message) {\r\n        let kycEditNameError = document.getElementById('kycEditNameError');\r\n        if (!kycEditNameError)\r\n            return;\r\n        kycEditNameError.innerHTML = message;\r\n        kycEditNameError.style.display = 'block';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/blockchain/AUSDService.ts\nvar AUSDService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AUSDService extends BlockchainService {\r\n    constructor(moralis) {\r\n        super(moralis);\r\n    }\r\n    getAUSDBalanceOf(ethAddress) {\r\n        return AUSDService_awaiter(this, void 0, void 0, function* () {\r\n            if (AUSDService.lastUpdate && AUSDService.aUSDAmount &&\r\n                DateHelper.isOlderThen(AUSDService.lastUpdate, 5)) {\r\n                return AUSDService.aUSDAmount;\r\n            }\r\n            let options = yield this.getOptions(\"balanceOf\", {\r\n                account: ethAddress\r\n            });\r\n            return yield this.executeFunction(options).then(balanceOf => {\r\n                let amount = this.moralis.Units.FromWei(balanceOf.toString(), 18);\r\n                AUSDService.aUSDAmount = new bignumber(amount);\r\n                AUSDService.lastUpdate = new Date();\r\n                return AUSDService.aUSDAmount;\r\n            }).catch((reason) => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                ErrorInfo.report(blockchainError);\r\n                return new bignumber(0);\r\n            });\r\n        });\r\n    }\r\n    getAUsdAbi() {\r\n        return AUSDService_awaiter(this, void 0, void 0, function* () {\r\n            if (AUSDService.AUSDInfo)\r\n                return AUSDService.AUSDInfo.abi;\r\n            let response = yield fetch('../abi/aUSD.json');\r\n            AUSDService.AUSDInfo = yield response.json();\r\n            return AUSDService.AUSDInfo.abi;\r\n        });\r\n    }\r\n    transfer(symbolAddress, qty) {\r\n        return AUSDService_awaiter(this, void 0, void 0, function* () {\r\n            const options = yield this.getOptions('transfer', {\r\n                recipient: symbolAddress,\r\n                amount: Moralis.Units.Token(qty.toString(), 18)\r\n            });\r\n            let result = yield this.executeFunction(options)\r\n                .then(result => {\r\n                return result;\r\n            })\r\n                .catch(reason => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                throw ErrorInfo.report(blockchainError);\r\n            });\r\n            AUSDService.aUSDAmount = undefined;\r\n            AUSDService.lastUpdate = undefined;\r\n            return result;\r\n        });\r\n    }\r\n    getOptions(functionName, params) {\r\n        return AUSDService_awaiter(this, void 0, void 0, function* () {\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let abi = yield this.getAUsdAbi();\r\n            const options = {\r\n                contractAddress: contractInfo.AUSD_ADDRESS,\r\n                functionName: functionName,\r\n                abi: abi,\r\n                params: params,\r\n            };\r\n            return options;\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/funding/FakeFunding.html\n// Module\nvar FakeFunding_code = \"<article>\\r\\n    <div id=\\\"beforeFunding\\\">\\r\\n        To use liminal.market you need some aUSD. aUSD is the same value as USD.\\r\\n        We can give you some aUSD (this is all fake money), so you can play with the system.\\r\\n\\r\\n        First, you need to add aUSD to you wallet.\\r\\n\\r\\n        <button id=\\\"addTokenToWallet\\\">Add aUSD to wallet</button>\\r\\n        <blockquote id=\\\"needToCopy\\\" class=\\\"d-none\\\">\\r\\n            If the button didn't work, you can copy the address here and import it into your wallet\\r\\n            <input value=\\\"{{aUSDAddress}}\\\"/>\\r\\n        </blockquote>\\r\\n        When you have aUSD to you wallet, you can request some money to trade with.\\r\\n\\r\\n        <button id=\\\"requestFakeAUSD\\\">Request some aUSD</button>\\r\\n        <div class=\\\"warningBar notificationBar d-none\\\" id=\\\"fundingError\\\"></div>\\r\\n    </div>\\r\\n    <div id=\\\"afterFunding\\\" class=\\\"d-none center\\\">\\r\\n        We have now sending aUSD to your wallet. This usually takes few minutes, so lets wait.\\r\\n<br /><br />\\r\\n        When you have the aUSD in you wallet, we will tell you.\\r\\n        <div>\\r\\n            <h3>Current aUSD balance</h3>\\r\\n            <div id=\\\"currentAUSDBalance\\\"></div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div id=\\\"errorAfterTryFunding\\\" class=\\\"d-none\\\">\\r\\n        We had an error while trying to fund you. We'll be cracking at the issue soon to fix it.\\r\\n        Try again in few minutes. If not, try again in few hours.\\r\\n    </div>\\r\\n\\r\\n    <a href=\\\"#\\\" id=\\\"registerBankInfo\\\">Register bank information (not needed for Sandbox)</a>\\r\\n</article>\";\n// Exports\n/* harmony default export */ const FakeFunding = (FakeFunding_code);\n;// CONCATENATED MODULE: ./src/services/broker/FundingService.ts\nvar FundingService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass FundingService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    requestFakeFunding() {\r\n        return FundingService_awaiter(this, void 0, void 0, function* () {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            return yield this.moralis.Cloud.run('fundUser', { chainId: networkInfo.ChainId });\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/SelectFundingType.html\n// Module\nvar SelectFundingType_code = \"<p>Setup your bank relationship with Liminal.market. Please choose the type of transfer you want to make</p>\\r\\n<ul>\\r\\n    <li><label><input type=\\\"radio\\\" name=\\\"bank_transfer\\\" id=\\\"ach_transfer\\\" value=\\\"1\\\"/> ACH bank transfer (US)</label>\\r\\n    </li>\\r\\n    <li><label><input type=\\\"radio\\\" name=\\\"bank_transfer\\\" id=\\\"wire_transfer\\\" value=\\\"2\\\"/> Wire transfer\\r\\n        (International)</label></li>\\r\\n</ul>\\r\\n<div id=\\\"selectFundingTypeError\\\" class=\\\"input_error\\\"></div>\\r\\n<button id=\\\"next_bank_information\\\">Next: Bank information</button>\\r\\n\";\n// Exports\n/* harmony default export */ const Funding_SelectFundingType = (SelectFundingType_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/SelectFundingType.ts\n\r\nclass SelectFundingType {\r\n    constructor(aUsdFund) {\r\n        this.aUsdFund = aUsdFund;\r\n    }\r\n    show() {\r\n        let template = Handlebars.compile(Funding_SelectFundingType);\r\n        this.aUsdFund.modal.showModal('Select funding type', template({}));\r\n        this.bindEvent();\r\n    }\r\n    bindEvent() {\r\n        let next_bank_information = document.getElementById('next_bank_information');\r\n        next_bank_information === null || next_bank_information === void 0 ? void 0 : next_bank_information.addEventListener('click', (evt) => {\r\n            this.aUsdFund.hideError('selectFundingTypeError');\r\n            let ach_transfer = document.getElementById('ach_transfer');\r\n            if (ach_transfer === null || ach_transfer === void 0 ? void 0 : ach_transfer.checked) {\r\n                this.aUsdFund.achRelationship.show();\r\n            }\r\n            let wire_transfer = document.getElementById('wire_transfer');\r\n            if (wire_transfer === null || wire_transfer === void 0 ? void 0 : wire_transfer.checked) {\r\n                this.aUsdFund.wireTransfer.show();\r\n            }\r\n            this.aUsdFund.showError('selectFundingTypeError', 'Please select funding type');\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/ACHRelationship.html\n// Module\nvar ACHRelationship_code = \"<fieldset>\\r\\n    <p>Before you can transfer, you need to set up your bank information.\\r\\n        We use <a href=\\\"https://plaid.com\\\" target=\\\"_blank\\\">Plaid</a> to connect your account with the broker account\\r\\n        <br/><br/>\\r\\n        Plaid is a secure service that makes it easy for you to connect your bank account information.\\r\\n        We do not have access to transfer from you account or any other access to your bank account.\\r\\n    </p>\\r\\n    <form id=\\\"achForm\\\">\\r\\n        <div class=\\\"input_error\\\" id=\\\"achError\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <button id=\\\"ach_previous\\\">Previous: Funding type</button>\\r\\n            <button id=\\\"connectPlaid\\\">Connect using Plaid</button>\\r\\n        </div>\\r\\n\\r\\n    </form>\\r\\n\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Funding_ACHRelationship = (ACHRelationship_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/ACHRelationship.ts\nvar ACHRelationship_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass ACHRelationship {\r\n    constructor(aUsdFund) {\r\n        this.aUsdFund = aUsdFund;\r\n    }\r\n    show() {\r\n        let template = Handlebars.compile(Funding_ACHRelationship);\r\n        this.aUsdFund.modal.showModal('Bank information', template({}));\r\n        this.bindEvent();\r\n    }\r\n    bindEvent() {\r\n        let connectPlaid = document.getElementById('connectPlaid');\r\n        connectPlaid === null || connectPlaid === void 0 ? void 0 : connectPlaid.addEventListener('click', (evt) => ACHRelationship_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            yield this.connectPlaidAction();\r\n        }));\r\n        let ach_previous = document.getElementById('ach_previous');\r\n        ach_previous === null || ach_previous === void 0 ? void 0 : ach_previous.addEventListener('click', (evt) => {\r\n            evt.preventDefault();\r\n            this.aUsdFund.selectFundingType.show();\r\n        });\r\n    }\r\n    connectPlaidAction() {\r\n        return ACHRelationship_awaiter(this, void 0, void 0, function* () {\r\n            let connectPlaid = document.getElementById('connectPlaid');\r\n            LoadingHelper.setLoading(connectPlaid);\r\n            this.aUsdFund.hideError('achError');\r\n            let userService = new UserService(this.aUsdFund.moralis);\r\n            yield userService.getPlaidLinkToken()\r\n                .catch((reason) => {\r\n                this.aUsdFund.showError('achError', reason);\r\n                LoadingHelper.removeLoading();\r\n            }).then((response) => {\r\n                console.log('response', response);\r\n                let plaidToken = JSON.parse(response);\r\n                let script = document.createElement('script');\r\n                script.src = 'https://cdn.plaid.com/link/v2/stable/link-initialize.js';\r\n                script.addEventListener('load', () => {\r\n                    this.createPlaidConnection(plaidToken);\r\n                });\r\n                let achForm = document.getElementById('achForm');\r\n                achForm.append(script);\r\n            });\r\n        });\r\n    }\r\n    createPlaidConnection(plaidToken) {\r\n        let linkHandler = Plaid.create({\r\n            token: plaidToken.link_token,\r\n            onSuccess: (public_token, metadata) => ACHRelationship_awaiter(this, void 0, void 0, function* () {\r\n                if (!metadata.account) {\r\n                    LoadingHelper.removeLoading();\r\n                    this.aUsdFund.showError('achError', \"Didn't receive any information from Plaid. Please try again. If it doesn't work. Please contact us at info@liminal.market\");\r\n                }\r\n                let userService = new UserService(this.aUsdFund.moralis);\r\n                yield userService.createAchRelationship(public_token, metadata.account.id)\r\n                    .catch((reason) => ACHRelationship_awaiter(this, void 0, void 0, function* () {\r\n                    if (reason.error.indexOf('only one active ach relationship') != -1) {\r\n                        let bankRelationship = yield userService.getBankRelationship();\r\n                        yield this.aUsdFund.transfer.show(bankRelationship);\r\n                    }\r\n                    else {\r\n                        this.aUsdFund.showError('achError', reason);\r\n                        LoadingHelper.removeLoading();\r\n                    }\r\n                })).then((response) => {\r\n                    console.log('createAchRelationship', response);\r\n                    this.aUsdFund.transfer.show(response);\r\n                });\r\n            }),\r\n            onExit: (err, metadata) => {\r\n                console.log(err, metadata);\r\n                LoadingHelper.removeLoading();\r\n            },\r\n        });\r\n        linkHandler.open();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/Transfer.html\n// Module\nvar Transfer_code = \"<fieldset>\\r\\n\\r\\n    <form>\\r\\n        <p>\\r\\n            To fill up your broker account, you need to notify Liminal.market first about your transfer,\\r\\n            we can then match it with your account.\\r\\n            <br/><br/>\\r\\n            Type in the amount you would like to transfer to you broker account.\\r\\n            {{#if bank_account_number}}\\r\\n            <br/><br/>\\r\\n            The money should come from <strong>{{bank_account_number}}</strong>\\r\\n            {{/if}}\\r\\n        </p>\\r\\n        <br/>\\r\\n        <label>\\r\\n            Amount in US dollars ($)\\r\\n            <input name=\\\"amount\\\" class=\\\"amount\\\" type=\\\"tel\\\" id=\\\"amount\\\" minlength=\\\"1\\\" required/>\\r\\n        </label>\\r\\n        <input type=\\\"hidden\\\" name=\\\"transfer_type\\\" id=\\\"transfer_type\\\" value=\\\"{{transfer_type}}\\\"/>\\r\\n        <input type=\\\"hidden\\\" name=\\\"relationship_id\\\" id=\\\"relationship_id\\\" value=\\\"{{relationshipId}}\\\"/>\\r\\n        <input type=\\\"hidden\\\" name=\\\"direction\\\" id=\\\"direction\\\" value=\\\"INCOMING\\\"/>\\r\\n        <div class=\\\"input_error\\\" id=\\\"transferError\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <button id=\\\"notifyTransfer\\\">Notify Liminal.market of incoming transfer</button>\\r\\n        </div>\\r\\n    </form>\\r\\n    {{{transfers}}}\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Funding_Transfer = (Transfer_code);\n;// CONCATENATED MODULE: ./src/enums/TransferDirectionEnum.ts\nvar TransferDirectionEnum;\r\n(function (TransferDirectionEnum) {\r\n    TransferDirectionEnum[\"Incoming\"] = \"INCOMING\";\r\n    TransferDirectionEnum[\"Outgoing\"] = \"OUTGOING\";\r\n})(TransferDirectionEnum || (TransferDirectionEnum = {}));\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/TransfersList.html\n// Module\nvar TransfersList_code = \"<hr/>\\r\\n<h3>{{Direction}} transfers</h3>\\r\\n{{#if transfers.length}}\\r\\n<p>Below is a list of transfers, confirmed and not confirmed.</p>\\r\\n<table>\\r\\n    <thead>\\r\\n    <tr>\\r\\n        <th>Amount</th>\\r\\n        <th>Status</th>\\r\\n        <th>Created</th>\\r\\n        <th>Expires</th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n    {{#each transfers}}\\r\\n    <tr>\\r\\n        <td>${{amount}}</td>\\r\\n        <td id=\\\"status_{{id}}\\\">{{status}}</td>\\r\\n        <td>{{dateTimeFormat created_at}}</td>\\r\\n        <td>{{dateTimeFormat expires_at}}</td>\\r\\n        <td id=\\\"delete_{{id}}\\\" class=\\\"{{classByStatus status}}\\\"><a href=\\\"#\\\" class=\\\"deleteTransfer\\\" data-id=\\\"{{id}}\\\">Cancel</a>\\r\\n        </td>\\r\\n    </tr>\\r\\n    {{/each}}\\r\\n    </tbody>\\r\\n</table>\\r\\n{{else}}\\r\\n<p>No transfers registered</p>\\r\\n{{/if}}\";\n// Exports\n/* harmony default export */ const Funding_TransfersList = (TransfersList_code);\n;// CONCATENATED MODULE: ./src/util/HandlebarHelpers.ts\nclass HandlebarHelpers {\r\n    static registerHelpers() {\r\n        Handlebars.registerHelper('perc', function (number) {\r\n            return Math.round(parseFloat(number) * 10000) / 100 + '%';\r\n        });\r\n        Handlebars.registerHelper('round', function (number) {\r\n            return Math.round(parseFloat(number) * 100) / 100;\r\n        });\r\n        Handlebars.registerHelper('round2', function (number) {\r\n            return Math.round(parseFloat(number) * 10000) / 10000;\r\n        });\r\n        Handlebars.registerHelper('classColor', function (number) {\r\n            return (number > 0) ? \"green\" : \"red\";\r\n        });\r\n        Handlebars.registerHelper('dateTimeFormat', function (strDate) {\r\n            let date = new Date(strDate);\r\n            return date.toLocaleString();\r\n        });\r\n        Handlebars.registerHelper('classByStatus', function (status) {\r\n            return (status == 'QUEUED' || status == 'APPROVAL_PENDING') ? '' : 'hidden';\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/TransfersList.ts\nvar TransfersList_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass TransfersList {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.userService = new UserService(this.moralis);\r\n    }\r\n    render(direction) {\r\n        return TransfersList_awaiter(this, void 0, void 0, function* () {\r\n            HandlebarHelpers.registerHelpers();\r\n            let transfersTemplate = Handlebars.compile(Funding_TransfersList);\r\n            let transfers = yield this.userService.getLatestTransfers(direction);\r\n            return transfersTemplate({ Direction: direction, transfers: transfers });\r\n        });\r\n    }\r\n    bindEvents() {\r\n        var _a;\r\n        let deleteTransfers = document.querySelectorAll('.deleteTransfer');\r\n        for (let i = 0; i < deleteTransfers.length; i++) {\r\n            (_a = deleteTransfers[i]) === null || _a === void 0 ? void 0 : _a.addEventListener('click', (evt) => TransfersList_awaiter(this, void 0, void 0, function* () {\r\n                evt.preventDefault();\r\n                if (!confirm('Are you sure you want to cancel this withdraw request?')) {\r\n                    return;\r\n                }\r\n                let id = deleteTransfers[i].dataset['id'];\r\n                if (!id)\r\n                    return;\r\n                let userService = new UserService(this.moralis);\r\n                yield userService.deleteTransfer(id)\r\n                    .then(() => {\r\n                    let statusTd = document.getElementById('status_' + id);\r\n                    if (statusTd) {\r\n                        statusTd.innerText = 'CANCELED';\r\n                    }\r\n                    let deleteTd = document.getElementById('delete_' + id);\r\n                    deleteTd === null || deleteTd === void 0 ? void 0 : deleteTd.remove();\r\n                });\r\n            }));\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/Transfer.ts\nvar Transfer_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Transfer {\r\n    constructor(moralis, aUsdFund) {\r\n        this.moralis = moralis;\r\n        this.aUsdFund = aUsdFund;\r\n        this.transfersList = new TransfersList(this.moralis);\r\n    }\r\n    show(bankRelationship) {\r\n        return Transfer_awaiter(this, void 0, void 0, function* () {\r\n            if (!bankRelationship) {\r\n                this.aUsdFund.modal.showModal('No bank relationship exists', 'No bank relationship exists. You need to create this before you can transfer money. Close the window and try again.');\r\n                return;\r\n            }\r\n            this.bankRelationship = bankRelationship;\r\n            let template = Handlebars.compile(Funding_Transfer);\r\n            let transfersListHtml = yield this.transfersList.render(TransferDirectionEnum.Incoming);\r\n            let transfer_type = (StringHelper.isNullOrEmpty(bankRelationship.bank_account_number) && bankRelationship.bank_account_type != '') ? 'wire' : 'ach';\r\n            this.aUsdFund.modal.showModal('Create transfer notification', template({\r\n                transfers: transfersListHtml,\r\n                transfer_type: transfer_type,\r\n                relationshipId: bankRelationship.id\r\n            }));\r\n            this.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        this.transfersList.bindEvents();\r\n        let notifyTransfer = document.getElementById('notifyTransfer');\r\n        notifyTransfer === null || notifyTransfer === void 0 ? void 0 : notifyTransfer.addEventListener('click', (evt) => Transfer_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            this.aUsdFund.hideError('transferError');\r\n            let amount = document.getElementById('amount');\r\n            if (StringHelper.isNullOrEmpty(amount.value) || parseFloat(amount.value) < 10) {\r\n                this.aUsdFund.showError('amountError', 'Amount cannot be empty or below $10');\r\n            }\r\n            LoadingHelper.setLoading(notifyTransfer);\r\n            let userService = new UserService(this.moralis);\r\n            yield userService.createTransfer(amount.value, 'INCOMING')\r\n                .then(() => {\r\n                if (StringHelper.isNullOrEmpty(this.bankRelationship.processor_token)) {\r\n                    this.aUsdFund.wireTransferInfo.show(amount.value);\r\n                }\r\n                else {\r\n                    this.aUsdFund.achTransferInfo.show(amount.value);\r\n                }\r\n            })\r\n                .catch(reason => {\r\n                let httpError = JSON.parse(reason.message);\r\n                this.aUsdFund.showError('transferError', httpError.serverError.message);\r\n            })\r\n                .finally(() => {\r\n                LoadingHelper.removeLoading();\r\n            });\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/WireTransfer.html\n// Module\nvar WireTransfer_code = \"<fieldset>\\r\\n    <p>Before you can transfer, you need to set up your bank information</p>\\r\\n    <form id=\\\"wireTransferForm\\\">\\r\\n        <label>Name of bank\\r\\n            <input name=\\\"name\\\" required id=\\\"name\\\"/>\\r\\n        </label>\\r\\n        <div class=\\\"input_error\\\" id=\\\"swift_error\\\">BIC/SWIFT code should be 8 or 11 characters</div>\\r\\n        <label>\\r\\n            Bank code (BIC/SWIFT)\\r\\n            <input name=\\\"bank_code\\\" maxlength=\\\"11\\\" id=\\\"bank_code\\\" required/>\\r\\n        </label>\\r\\n        <label>\\r\\n            Account number (IBAN)\\r\\n            <input name=\\\"account_number\\\" id=\\\"account_number\\\" required/>\\r\\n        </label>\\r\\n        <label>\\r\\n            Street address\\r\\n            <input name=\\\"street_address\\\" id=\\\"street_address\\\" required/>\\r\\n        </label>\\r\\n        <label>\\r\\n            Postal code\\r\\n            <input name=\\\"postal_code\\\" id=\\\"postal_code\\\" required/>\\r\\n        </label>\\r\\n        <label>\\r\\n            City\\r\\n            <input name=\\\"city\\\" id=\\\"city\\\" required/>\\r\\n        </label>\\r\\n\\r\\n        <label>State\\r\\n            <input name=\\\"state_province\\\" id=\\\"state_province\\\" required/>\\r\\n        </label>\\r\\n        <label>\\r\\n            Country where bank account is located\\r\\n            <select required id=\\\"country\\\" required name=\\\"country\\\">\\r\\n                <option value=\\\"\\\"></option>\\r\\n                {{#each countries}}\\r\\n                <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n                {{/each}}\\r\\n            </select>\\r\\n        </label>\\r\\n\\r\\n        <input type=\\\"hidden\\\" name=\\\"bank_code_type\\\" value=\\\"BIC\\\"/>\\r\\n        <div id=\\\"writeTransferError\\\" class=\\\"input_error\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <button id=\\\"wire_transfer_previous\\\">Previous: Funding type</button>\\r\\n            <button id=\\\"save_international_bank_information\\\">Next: Transfer</button>\\r\\n        </div>\\r\\n    </form>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Funding_WireTransfer = (WireTransfer_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/WireTransfer.ts\nvar WireTransfer_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass WireTransfer {\r\n    constructor(aUsdFund) {\r\n        this.aUsdFund = aUsdFund;\r\n    }\r\n    show() {\r\n        return WireTransfer_awaiter(this, void 0, void 0, function* () {\r\n            let template = Handlebars.compile(Funding_WireTransfer);\r\n            this.aUsdFund.modal.showModal('Create bank information', template({ countries: CountryHelper.Countries }));\r\n            this.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let wire_transfer_previous = document.getElementById('wire_transfer_previous');\r\n        wire_transfer_previous === null || wire_transfer_previous === void 0 ? void 0 : wire_transfer_previous.addEventListener('click', (evt) => {\r\n            this.aUsdFund.selectFundingType.show();\r\n        });\r\n        let save_international_bank_information = document.getElementById('save_international_bank_information');\r\n        save_international_bank_information === null || save_international_bank_information === void 0 ? void 0 : save_international_bank_information.addEventListener('click', (evt) => WireTransfer_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            if (!this.validate())\r\n                return;\r\n            let params = FormHelper.getParams('#wireTransferForm');\r\n            let userService = new UserService(this.aUsdFund.moralis);\r\n            yield userService.registerWireTransferRelationship(params)\r\n                .then(response => {\r\n                this.aUsdFund.transfer.show(response);\r\n            })\r\n                .catch((reason) => WireTransfer_awaiter(this, void 0, void 0, function* () {\r\n                let obj = JSON.parse(reason.message);\r\n                let writeTransferError = document.getElementById('writeTransferError');\r\n                if (writeTransferError) {\r\n                    if (obj.serverError.message.indexOf('only one bank association') != -1) {\r\n                        let bankRelationship = yield userService.getBankRelationship();\r\n                        if (!bankRelationship) {\r\n                            writeTransferError.innerText = 'We cannot create the bank connection. Something is not working as it should. Please contact us at <a href=\"mailto:info@liminal.market\">info@liminal.market</a>';\r\n                            writeTransferError.style.display = 'block';\r\n                        }\r\n                        else {\r\n                            yield this.aUsdFund.transfer.show(bankRelationship);\r\n                        }\r\n                    }\r\n                    else {\r\n                        writeTransferError.innerText = obj.serverError.message;\r\n                        writeTransferError.style.display = 'block';\r\n                    }\r\n                }\r\n            }));\r\n        }));\r\n    }\r\n    validate() {\r\n        let swift_error = document.getElementById('swift_error');\r\n        if (swift_error)\r\n            swift_error.style.display = 'none';\r\n        let writeTransferError = document.getElementById('writeTransferError');\r\n        if (writeTransferError)\r\n            writeTransferError.style.display = 'none';\r\n        if (!FormHelper.validate('#wireTransferForm'))\r\n            return false;\r\n        let bank_code = document.getElementById('bank_code');\r\n        if (bank_code.value.length != 8 && bank_code.value.length != 11) {\r\n            bank_code.setAttribute('aria-invalid', 'true');\r\n            let swift_error = document.getElementById('swift_error');\r\n            if (swift_error)\r\n                swift_error.style.display = 'block';\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/ACHTransferInfo.html\n// Module\nvar ACHTransferInfo_code = \"<h2>You need to transfer now</h2>\\r\\n<p>\\r\\n    Use this information to execute the transfer.\\r\\n    Alpaca...... information is needed.\\r\\n    ${{amount}}\\r\\n</p>\";\n// Exports\n/* harmony default export */ const Funding_ACHTransferInfo = (ACHTransferInfo_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/ACHTransferInfo.ts\n\r\nclass ACHTransferInfo {\r\n    constructor(aUsdFund) {\r\n        this.aUsdFund = aUsdFund;\r\n    }\r\n    show(amount) {\r\n        let template = Handlebars.compile(Funding_ACHTransferInfo);\r\n        this.aUsdFund.modal.showModal('Transfer information', template({ amount: amount }), false, () => {\r\n        }, false);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/WireTransferInfo.html\n// Module\nvar WireTransferInfo_code = \"<h2>You need to transfer now</h2>\\r\\n<p>\\r\\n    Use this information to execute the transfer.\\r\\n    Alpaca...... information is needed.\\r\\n    ${{amount}}\\r\\n</p>\";\n// Exports\n/* harmony default export */ const Funding_WireTransferInfo = (WireTransferInfo_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/WireTransferInfo.ts\n\r\nclass WireTransferInfo {\r\n    constructor(aUsdFund) {\r\n        this.aUsdFund = aUsdFund;\r\n    }\r\n    show(amount) {\r\n        let template = Handlebars.compile(Funding_WireTransferInfo);\r\n        this.aUsdFund.modal.showModal('Transfer information', template({ amount: amount }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/AUSDFund.ts\nvar AUSDFund_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AUSDFund {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.modal = new Modal();\r\n        this.selectFundingType = new SelectFundingType(this);\r\n        this.achRelationship = new ACHRelationship(this);\r\n        this.transfer = new Transfer(moralis, this);\r\n        this.wireTransfer = new WireTransfer(this);\r\n        this.achTransferInfo = new ACHTransferInfo(this);\r\n        this.wireTransferInfo = new WireTransferInfo(this);\r\n    }\r\n    show() {\r\n        return AUSDFund_awaiter(this, void 0, void 0, function* () {\r\n            let userService = new UserService(this.moralis);\r\n            let bankRelationship = yield userService.getBankRelationship();\r\n            if (bankRelationship) {\r\n                yield this.transfer.show(bankRelationship);\r\n            }\r\n            else {\r\n                this.selectFundingType.show();\r\n            }\r\n        });\r\n    }\r\n    showError(elementId, reason) {\r\n        let element = document.getElementById(elementId);\r\n        if (element) {\r\n            element.innerText = reason;\r\n            element.style.display = 'block';\r\n        }\r\n    }\r\n    hideError(elementId) {\r\n        let element = document.getElementById(elementId);\r\n        if (element) {\r\n            element.style.display = 'none';\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/FakeAUSDFund.ts\nvar FakeAUSDFund_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass FakeAUSDFund {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.currentBalance = new bignumber(-1);\r\n        this.modal = new Modal();\r\n    }\r\n    showAUSDFund(callback) {\r\n        //this is real instruction how to transfer to broker\r\n        callback();\r\n    }\r\n    showAUSDFakeFund(callback) {\r\n        let template = Handlebars.compile(FakeFunding);\r\n        let contractInfo = ContractInfo.getContractInfo();\r\n        let content = template({ aUSDAddress: contractInfo.AUSD_ADDRESS });\r\n        this.modal.showModal('Fund my account (Fake money)', content);\r\n        let addToWallet = document.getElementById('addTokenToWallet');\r\n        if (!addToWallet)\r\n            return;\r\n        addToWallet.addEventListener('click', (evt) => FakeAUSDFund_awaiter(this, void 0, void 0, function* () {\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let walletHelper = new WalletHelper(this.moralis);\r\n            let result = yield walletHelper.addTokenToWallet(contractInfo.AUSD_ADDRESS, 'aUSD', () => {\r\n                this.showCopyField();\r\n            });\r\n            if (!result)\r\n                this.showCopyField();\r\n        }));\r\n        let registerBankInfo = document.getElementById('registerBankInfo');\r\n        registerBankInfo === null || registerBankInfo === void 0 ? void 0 : registerBankInfo.addEventListener('click', (evt) => {\r\n            this.modal.hideModal();\r\n            let aUsdFund = new AUSDFund(this.moralis);\r\n            aUsdFund.show();\r\n        });\r\n        let requestFakeAUSD = document.getElementById('requestFakeAUSD');\r\n        requestFakeAUSD === null || requestFakeAUSD === void 0 ? void 0 : requestFakeAUSD.addEventListener('click', (evt) => FakeAUSDFund_awaiter(this, void 0, void 0, function* () {\r\n            requestFakeAUSD.setAttribute('aria-busy', 'true');\r\n            let fundingService = new FundingService(this.moralis);\r\n            let result = yield fundingService.requestFakeFunding()\r\n                .catch((reason) => {\r\n                this.errorWhileFunding({});\r\n            });\r\n            console.log('success', result.success);\r\n            if (!result.success) {\r\n                console.log(result);\r\n                let fundingError = document.getElementById('fundingError');\r\n                if (fundingError) {\r\n                    requestFakeAUSD.removeAttribute('aria-busy');\r\n                    fundingError.classList.remove('d-none');\r\n                    fundingError.innerHTML = result.message;\r\n                    setTimeout(() => {\r\n                        fundingError.classList.add('d-none');\r\n                    }, 10 * 1000);\r\n                }\r\n            }\r\n            else if (result.success) {\r\n                let beforeFunding = document.getElementById('beforeFunding');\r\n                let afterFunding = document.getElementById('afterFunding');\r\n                if (!beforeFunding || !afterFunding)\r\n                    return;\r\n                yield this.loadAUSDBalance();\r\n                beforeFunding.classList.add('d-none');\r\n                afterFunding.classList.remove('d-none');\r\n            }\r\n            else {\r\n                this.errorWhileFunding(result);\r\n            }\r\n            //callback();\r\n        }));\r\n    }\r\n    loadAUSDBalance() {\r\n        return FakeAUSDFund_awaiter(this, void 0, void 0, function* () {\r\n            let currentAUSDBalance = document.getElementById('currentAUSDBalance');\r\n            if (!currentAUSDBalance)\r\n                return;\r\n            let aUSDService = new AUSDService(this.moralis);\r\n            let userService = new UserService(this.moralis);\r\n            let ethAddress = userService.getEthAddress();\r\n            let amount = new bignumber(0);\r\n            if (ethAddress) {\r\n                amount = yield aUSDService.getAUSDBalanceOf(ethAddress);\r\n            }\r\n            currentAUSDBalance.innerHTML = '$' + roundBigNumber(amount).toString();\r\n            if (this.currentBalance.eq(-1)) {\r\n                this.currentBalance = amount;\r\n            }\r\n            if (this.currentBalance.eq(amount)) {\r\n                setTimeout(() => FakeAUSDFund_awaiter(this, void 0, void 0, function* () {\r\n                    yield this.loadAUSDBalance();\r\n                }), 5 * 1000);\r\n            }\r\n            else {\r\n                window.location.reload();\r\n            }\r\n        });\r\n    }\r\n    showCopyField() {\r\n        let needToCopy = document.getElementById('needToCopy');\r\n        if (!needToCopy)\r\n            return;\r\n        needToCopy.classList.remove('d-none');\r\n    }\r\n    errorWhileFunding(result) {\r\n        let beforeFunding = document.getElementById('beforeFunding');\r\n        let errorAfterFunding = document.getElementById('errorAfterTryFunding');\r\n        if (!beforeFunding || !errorAfterFunding)\r\n            return;\r\n        if (result.message) {\r\n            errorAfterFunding.innerHTML = result.message;\r\n        }\r\n        beforeFunding.classList.add('d-none');\r\n        errorAfterFunding.classList.remove('d-none');\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Funding/WithdrawModal.html\n// Module\nvar WithdrawModal_code = \"<fieldset id=\\\"withdrawInput\\\">\\r\\n\\r\\n    {{#if bank.bank_code_type}}\\r\\n    Your money will be sent to {{bank.name}} to account number {{bank.account_number}}.\\r\\n    <br/><br/>\\r\\n    Outgoing International Wire Transfers cost is ${{transferCost}}.<br/>\\r\\n    Fees will be deducted from the amount.\\r\\n    {{/if}}\\r\\n    {{#unless bank.bank_code_type}}\\r\\n    Your money will be sent to account number {{bank.bank_account_number}}.\\r\\n    <br/><br/>\\r\\n    ACH transfer costs is ${{transferCost}}. Fees will be deducted from the amount.\\r\\n    {{/unless}}\\r\\n    <form id=\\\"withdrawForm\\\">\\r\\n        <label>Amount to withdraw\\r\\n            <input type=\\\"tel\\\" name=\\\"amount\\\" id=\\\"amount\\\"/>\\r\\n        </label>\\r\\n        <div class=\\\"input_error\\\" id=\\\"withdrawAmountError\\\">The amount is lower than the cost of transfer</div>\\r\\n        <button id=\\\"confirmWithdraw\\\">Confirm withdraw</button>\\r\\n    </form>\\r\\n    {{{Transfers}}}\\r\\n</fieldset>\\r\\n\\r\\n<fieldset id=\\\"withdrawConfirm\\\" class=\\\"hidden\\\">\\r\\n    You are about to withdraw $<span id=\\\"withdrawAmountText\\\"></span> from your account\\r\\n    <div class=\\\"warningBar\\\">\\r\\n        Warning: The fee of this transaction will be $<span id=\\\"feeWarning\\\"></span>\\r\\n        and is <span id=\\\"feePercentage\\\"></span>% of the amount.\\r\\n    </div>\\r\\n    <div class=\\\"input_error\\\" id=\\\"withdrawError\\\"></div>\\r\\n    <button id=\\\"confirmWithdrawButton\\\">Execute transfer</button>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Funding_WithdrawModal = (WithdrawModal_code);\n;// CONCATENATED MODULE: ./src/ui/modals/Funding/WithdrawModal.ts\nvar WithdrawModal_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass WithdrawModal {\r\n    constructor(moralis) {\r\n        this.wireTransferCost = 50;\r\n        this.achTransferCost = 25;\r\n        this.moralis = moralis;\r\n        this.userService = new UserService(this.moralis);\r\n        this.transferCost = this.wireTransferCost;\r\n        this.transfersList = new TransfersList(this.moralis);\r\n    }\r\n    show() {\r\n        return WithdrawModal_awaiter(this, void 0, void 0, function* () {\r\n            let modal = new Modal();\r\n            let bankRelationships = yield this.userService.getBankRelationship();\r\n            if (!bankRelationships) {\r\n                modal.showModal('Withdraw information', \"You haven't setup bank connection. You cannot withdraw from without bank connection\");\r\n                return;\r\n            }\r\n            let transfersHtml = yield this.transfersList.render(TransferDirectionEnum.Outgoing);\r\n            let ethAddress = this.userService.getEthAddress();\r\n            let ausdService = new AUSDService(this.moralis);\r\n            this.currentBalance = new bignumber(0);\r\n            if (ethAddress) {\r\n                this.currentBalance = yield ausdService.getAUSDBalanceOf(ethAddress);\r\n            }\r\n            if (this.currentBalance.eq(0)) {\r\n                let tmp = Handlebars.compile(\"Your current balance is $0. There is nothing to withdraw. {{{transfers}}}\");\r\n                modal.showModal('Withdraw information', tmp({ transfers: transfersHtml }));\r\n                return;\r\n            }\r\n            let withdrawTemplate = Handlebars.compile(Funding_WithdrawModal);\r\n            this.bankInfo = bankRelationships;\r\n            this.transferCost = (this.bankInfo.bank_code_type) ? this.wireTransferCost : this.achTransferCost;\r\n            let obj = {\r\n                amount: this.currentBalance,\r\n                transferCost: this.transferCost,\r\n                Transfers: transfersHtml,\r\n                bank: this.bankInfo\r\n            };\r\n            modal.showModal('Withdraw information', withdrawTemplate(obj));\r\n            this.bindEvents();\r\n            this.transfersList.bindEvents();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let confirmWithdraw = document.getElementById('confirmWithdraw');\r\n        confirmWithdraw === null || confirmWithdraw === void 0 ? void 0 : confirmWithdraw.addEventListener('click', (evt) => WithdrawModal_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            if (!this.bankInfo)\r\n                return;\r\n            let amount = document.getElementById('amount');\r\n            if (StringHelper.isNullOrEmpty(amount.value)) {\r\n                amount.setAttribute('aria-invalid', 'true');\r\n                return;\r\n            }\r\n            else if (parseFloat(amount.value) <= this.transferCost) {\r\n                let withdrawAmountError = document.getElementById('withdrawAmountError');\r\n                withdrawAmountError.style.display = 'block';\r\n                amount.setAttribute('aria-invalid', 'true');\r\n                return;\r\n            }\r\n            else {\r\n                amount.setAttribute('aria-invalid', 'false');\r\n            }\r\n            this.showWithdrawConfirmation();\r\n        }));\r\n    }\r\n    showWithdrawConfirmation() {\r\n        if (!this.bankInfo)\r\n            return;\r\n        let amount = document.getElementById('amount');\r\n        let withdrawInput = document.getElementById('withdrawInput');\r\n        withdrawInput === null || withdrawInput === void 0 ? void 0 : withdrawInput.classList.add('hidden');\r\n        let withdrawConfirm = document.getElementById('withdrawConfirm');\r\n        withdrawConfirm === null || withdrawConfirm === void 0 ? void 0 : withdrawConfirm.classList.remove('hidden');\r\n        let withdrawAmountText = document.getElementById('withdrawAmountText');\r\n        let feeWarning = document.getElementById('feeWarning');\r\n        let feePercentage = document.getElementById('feePercentage');\r\n        withdrawAmountText.innerText = amount.value;\r\n        feeWarning.innerText = this.transferCost.toString();\r\n        feePercentage.innerText = roundNumber((this.transferCost / parseFloat(amount.value)) * 100).toString();\r\n        let confirmWithdrawButton = document.getElementById('confirmWithdrawButton');\r\n        confirmWithdrawButton === null || confirmWithdrawButton === void 0 ? void 0 : confirmWithdrawButton.addEventListener('click', (evt) => WithdrawModal_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            yield this.userService.createTransfer(amount.value, TransferDirectionEnum.Outgoing)\r\n                .then((response) => WithdrawModal_awaiter(this, void 0, void 0, function* () {\r\n                withdrawConfirm.innerHTML = yield this.transfersList.render(TransferDirectionEnum.Outgoing);\r\n                this.transfersList.bindEvents();\r\n            }))\r\n                .catch(reason => {\r\n                let withdrawError = document.getElementById('withdrawError');\r\n                if (!withdrawError)\r\n                    return;\r\n                if (withdrawError && isJSON(reason.message)) {\r\n                    let error = JSON.parse(reason.message);\r\n                    withdrawError.innerText = error.serverError.message;\r\n                }\r\n                else {\r\n                    withdrawError.innerText = reason.toString();\r\n                }\r\n                withdrawError.style.display = 'block';\r\n            });\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/AUsdBalance.ts\nvar AUsdBalance_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass AUsdBalance {\r\n    constructor(moralis, user) {\r\n        this.user = user;\r\n        this.moralis = moralis;\r\n    }\r\n    loadAUSDBalanceUI() {\r\n        return AUsdBalance_awaiter(this, void 0, void 0, function* () {\r\n            if (!this.user)\r\n                return;\r\n            let userInfoAUsdBalance = document.getElementById('userInfoAUsdBalance');\r\n            let frontpageAUsdBalance = document.getElementById('frontpageAUsdBalance');\r\n            if (userInfoAUsdBalance && !userInfoAUsdBalance.classList.contains('hidden')) {\r\n                return;\r\n            }\r\n            if (!this.user.get('alpacaId')) {\r\n                frontpageAUsdBalance === null || frontpageAUsdBalance === void 0 ? void 0 : frontpageAUsdBalance.classList.add('hidden');\r\n                userInfoAUsdBalance === null || userInfoAUsdBalance === void 0 ? void 0 : userInfoAUsdBalance.classList.add('hidden');\r\n                return;\r\n            }\r\n            else {\r\n                frontpageAUsdBalance === null || frontpageAUsdBalance === void 0 ? void 0 : frontpageAUsdBalance.classList.remove('hidden');\r\n                userInfoAUsdBalance === null || userInfoAUsdBalance === void 0 ? void 0 : userInfoAUsdBalance.classList.remove('hidden');\r\n            }\r\n            let aUSDService = new AUSDService(this.moralis);\r\n            let aUsdValue = yield aUSDService.getAUSDBalanceOf(this.user.get('ethAddress'));\r\n            aUsdValue = roundBigNumber(aUsdValue);\r\n            let frontpageAUSDBalance = document.getElementById('front_page_aUSD_balance');\r\n            if (frontpageAUSDBalance)\r\n                frontpageAUSDBalance.innerHTML = '$' + aUsdValue;\r\n            let user_info_ausd_balance = document.getElementById('user_info_ausd_balance');\r\n            if (user_info_ausd_balance)\r\n                user_info_ausd_balance.innerHTML = '$' + aUsdValue;\r\n            this.bindEvents();\r\n            if (aUsdValue.isLessThan(10)) {\r\n                let frontpage_fund_account = document.getElementById('frontpage_fund_account');\r\n                frontpage_fund_account === null || frontpage_fund_account === void 0 ? void 0 : frontpage_fund_account.classList.remove('hidden');\r\n            }\r\n        });\r\n    }\r\n    bindEvents() {\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        let fund_accountButtons = document.querySelectorAll('.fund_account');\r\n        fund_accountButtons.forEach(element => {\r\n            let aUSDFundingModal = new FakeAUSDFund(this.moralis);\r\n            if (networkInfo.TestNetwork) {\r\n                element.innerHTML = 'Click for some aUSD';\r\n                element.addEventListener('click', (evt) => {\r\n                    evt.preventDefault();\r\n                    aUSDFundingModal.showAUSDFakeFund(() => {\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                element.addEventListener('click', (evt) => AUsdBalance_awaiter(this, void 0, void 0, function* () {\r\n                    evt.preventDefault();\r\n                    let aUsdFund = new AUSDFund(this.moralis);\r\n                    yield aUsdFund.show();\r\n                }));\r\n            }\r\n        });\r\n        let withdraw_from_account = document.getElementById('withdraw_from_account');\r\n        withdraw_from_account === null || withdraw_from_account === void 0 ? void 0 : withdraw_from_account.addEventListener('click', (evt) => AUsdBalance_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            let withdrawModal = new WithdrawModal(this.moralis);\r\n            yield withdrawModal.show();\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/UserInfo.ts\nvar UserInfo_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass UserInfo {\r\n    constructor(moralis, providerInfo, user) {\r\n        this.moralis = moralis;\r\n        this.user = user;\r\n        this.userService = new UserService(this.moralis);\r\n        this.providerInfo = providerInfo;\r\n    }\r\n    render(elementId) {\r\n        return UserInfo_awaiter(this, void 0, void 0, function* () {\r\n            if (!this.user)\r\n                return;\r\n            this.listenForWalletChanges();\r\n            this.loadUserMenuUI(elementId);\r\n            let aUsdBalance = new AUsdBalance(this.moralis, this.user);\r\n            yield aUsdBalance.loadAUSDBalanceUI();\r\n        });\r\n    }\r\n    listenForWalletChanges() {\r\n        this.moralis.onChainChanged(function () {\r\n            location.reload();\r\n        });\r\n        this.moralis.onAccountChanged(function () {\r\n            location.reload();\r\n        });\r\n        this.moralis.onDisconnect(function () {\r\n            location.reload();\r\n        });\r\n        this.moralis.onConnect(function () {\r\n            location.reload();\r\n        });\r\n    }\r\n    loadUserMenuUI(elementId) {\r\n        if (!this.user)\r\n            return;\r\n        let userInfoDiv = document.getElementById(elementId);\r\n        if (!userInfoDiv)\r\n            return;\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        let obj = {\r\n            ethAddress: this.user.get('ethAddress'),\r\n            shortEthAddress: shortEth(this.user.get('ethAddress')),\r\n            walletName: this.providerInfo.WalletName,\r\n            networkName: networkInfo.ChainName + ((networkInfo.TestNetwork) ? ' - (Test network)' : ''),\r\n            blockchainExplorer: networkInfo.BlockExplorer + '/address/',\r\n            provider: ''\r\n        };\r\n        let template = Handlebars.compile(elements_UserInfo);\r\n        let html = template(obj);\r\n        userInfoDiv.innerHTML = html;\r\n        let userInfoAction = document.getElementById('userInfoAction');\r\n        userInfoAction === null || userInfoAction === void 0 ? void 0 : userInfoAction.addEventListener('click', (evt) => {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            let userInfoDropdown = document.getElementById('userInfoDropdown');\r\n            if (!userInfoDropdown)\r\n                return;\r\n            userInfoDropdown.classList.toggle('d-none');\r\n            userInfoDropdown.addEventListener('click', (evt) => {\r\n                evt.stopPropagation();\r\n            });\r\n        });\r\n        let disconnectFromNetwork = document.getElementById('disconnectFromNetwork');\r\n        disconnectFromNetwork === null || disconnectFromNetwork === void 0 ? void 0 : disconnectFromNetwork.addEventListener('click', (evt) => {\r\n            evt.preventDefault();\r\n            this.moralis.User.logOut();\r\n            window.location.reload();\r\n        });\r\n        this.bindUserActionEvents();\r\n    }\r\n    bindUserActionEvents() {\r\n        let editName = document.getElementById('editName');\r\n        editName === null || editName === void 0 ? void 0 : editName.addEventListener('click', (evt) => UserInfo_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            let kycModal = new KycEditNameForm();\r\n            yield kycModal.show();\r\n        }));\r\n        let editContact = document.getElementById('editContact');\r\n        editContact === null || editContact === void 0 ? void 0 : editContact.addEventListener('click', (evt) => UserInfo_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            let kycModal = new KycEditContactForm();\r\n            yield kycModal.show();\r\n        }));\r\n        let editTrustedContact = document.getElementById('editTrustedContact');\r\n        editTrustedContact === null || editTrustedContact === void 0 ? void 0 : editTrustedContact.addEventListener('click', (evt) => UserInfo_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            let kycModal = new KycEditTrustedContact();\r\n            yield kycModal.show();\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/ConnectWalletButton.html\n// Module\nvar ConnectWalletButton_code = \"<button class=\\\"liminal_market_connect_wallet outline\\\">Connect wallet</button>\";\n// Exports\n/* harmony default export */ const ConnectWalletButton = (ConnectWalletButton_code);\n;// CONCATENATED MODULE: ./src/html/modal/SelectWalletProvider.html\n// Module\nvar SelectWalletProvider_code = \"\\r\\n<article id=\\\"tos_pp_cookie_panel\\\">\\r\\n    <p>\\r\\n        By connecting a wallet, I agree to liminal.market Terms of Use, Cookies Policy and Privacy Policy.\\r\\n    </p>\\r\\n    <ul>\\r\\n        <li>\\r\\n    <label>\\r\\n        <input type=\\\"checkbox\\\" name=\\\"all\\\" value=\\\"1\\\">\\r\\n\\r\\n        I accept all\\r\\n\\r\\n    </label>\\r\\n        </li>\\r\\n        <li>\\r\\n    <label>\\r\\n        <input type=\\\"checkbox\\\" name=\\\"tos\\\" value=\\\"1\\\">\\r\\n        <span>\\r\\n        I accept <a href=\\\"https://www.liminal.market/terms-of-service\\\" target=\\\"_blank\\\">Terms of service</a>\\r\\n        <small>Things to note. You are taking a risk by buying stocks. You will be asked to do KYC/AML. You are responsible for any transaction you make.</small>\\r\\n      </span>\\r\\n    </label></li>\\r\\n        <li>\\r\\n    <label>\\r\\n        <input type=\\\"checkbox\\\" name=\\\"pp\\\" value=\\\"1\\\">\\r\\n        <span>\\r\\n        I accept the <a href=\\\"https://www.liminal.market/privacy-policy\\\" target=\\\"_blank\\\">Privacy Policy</a>\\r\\n        <small>Liminal.market doesn't store any personal data. Any KYC info is stored with the broker. If you register on our mailing list, that will be the only personal info we store.</small>\\r\\n      </span>\\r\\n    </label></li>\\r\\n        <li>\\r\\n    <label>\\r\\n        <input type=\\\"checkbox\\\" name=\\\"cookie\\\" value=\\\"1\\\">\\r\\n        <span>\\r\\n        I accept <a href=\\\"https://www.liminal.market/cookie-policy\\\" target=\\\"_blank\\\">Cookie policy</a>\\r\\n        <small>We use some cookies & services to improve our service. You don't have to accept but we will then just store essential cookies.</small>\\r\\n      </span>\\r\\n    </label>\\r\\n        </li>\\r\\n    </ul>\\r\\n</article>\\r\\n\\r\\n<div class=\\\"d-none\\\" id=\\\"wallet_connector_panel\\\">\\r\\n    <article class=\\\"provider\\\" id=\\\"connect_wallet_walletConnect\\\" data-provider=\\\"walletConnect\\\">\\r\\n\\r\\n        <h3>Connect using WalletConnect</h3>\\r\\n        <p>\\r\\n            Popular option to connect your mobile wallet.\\r\\n            For mobile we like <a href=\\\"https://www.tokenpocket.pro/\\\" target=\\\"_blank onclick='event.stopProgation();'\\\">Token\\r\\n            Poket</a>\\r\\n            as is support test network</p>\\r\\n\\r\\n    </article>\\r\\n    <div class=\\\"d-none\\\" id=\\\"walletConnectConnectionInfo\\\"></div>\\r\\n    <!--\\r\\n    <article class=\\\"provider\\\" id=\\\"connect_wallet_coinbaseWallet\\\" data-provider=\\\"coinbase\\\">\\r\\n\\r\\n        <h3>Coinbase wallet</h3>\\r\\n        <p>Connect using your Coinbase app</p>\\r\\n\\r\\n    </article>\\r\\n    -->\\r\\n    <article id=\\\"connect_wallet_metamask\\\" class=\\\"provider\\\" data-provider=\\\"metamask\\\">\\r\\n\\r\\n        <h3>Metamask</h3>\\r\\n        <p>Connect using your Metamask</p>\\r\\n\\r\\n    </article>\\r\\n</div>\";\n// Exports\n/* harmony default export */ const SelectWalletProvider = (SelectWalletProvider_code);\n;// CONCATENATED MODULE: ./src/ui/modals/ConnectWallet.ts\nvar ConnectWallet_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ConnectWallet {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.modal = new Modal();\r\n        this.providerInfo = new ProviderInfo(null);\r\n    }\r\n    renderButton(elementId) {\r\n        if (!document.getElementById(elementId))\r\n            return;\r\n        document.getElementById(elementId).innerHTML = ConnectWalletButton;\r\n        let elements = document.querySelectorAll(\".liminal_market_connect_wallet\");\r\n        elements.forEach(el => {\r\n            el.removeEventListener('click', () => this.chooseWalletProvider());\r\n            el.addEventListener('click', () => this.chooseWalletProvider());\r\n        });\r\n    }\r\n    chooseWalletProvider() {\r\n        this.modal.showModal('Connect to a wallet', SelectWalletProvider);\r\n        this.setupCheckboxes();\r\n        this.setupProviders();\r\n    }\r\n    setupCheckboxes() {\r\n        let checkboxes = { all: false, tos: false, pp: false, cookie: false };\r\n        let cookieHelper = new CookieHelper(document);\r\n        let tosConfirmed = cookieHelper.getCookieValue('tos');\r\n        if (tosConfirmed) {\r\n            checkboxes = { tos: true, pp: true };\r\n            this.toggleProviders(checkboxes);\r\n            document.getElementById('tos_pp_cookie_panel').classList.add('d-none');\r\n            return;\r\n        }\r\n        let inputs = document.querySelectorAll('#tos_pp_cookie_panel input');\r\n        inputs.forEach(input => {\r\n            let checkbox = input;\r\n            checkbox.addEventListener('click', () => {\r\n                let name = checkbox.getAttribute('name');\r\n                if (name == 'all') {\r\n                    let valueToSet = checkbox.checked;\r\n                    inputs.forEach(tmp => {\r\n                        let otherInput = tmp;\r\n                        checkboxes[otherInput.name] = valueToSet;\r\n                        otherInput.checked = valueToSet;\r\n                    });\r\n                }\r\n                else {\r\n                    checkboxes[name] = checkbox.checked;\r\n                }\r\n                this.toggleProviders(checkboxes);\r\n            });\r\n        });\r\n    }\r\n    setupProviders() {\r\n        let anchors = document.querySelectorAll('#wallet_connector_panel .provider');\r\n        anchors.forEach(element => {\r\n            element.addEventListener('click', (evt) => {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                let provider = evt.currentTarget.dataset.provider;\r\n                this.connectWallet(provider);\r\n            }, { capture: true });\r\n        });\r\n    }\r\n    toggleProviders(checkboxes) {\r\n        let cookieHelper = new CookieHelper(document);\r\n        if (checkboxes.tos && checkboxes.pp) {\r\n            cookieHelper.setCookie('tos', new Date().toDateString());\r\n            let walletHelper = new WalletHelper(this.moralis);\r\n            if (walletHelper.isWebview(window.navigator.userAgent)) {\r\n                this.modal.hideModal();\r\n                this.connectWallet('');\r\n            }\r\n            else {\r\n                document.getElementById('wallet_connector_panel').classList.remove('d-none');\r\n            }\r\n        }\r\n        else {\r\n            cookieHelper.deleteCookie('tos');\r\n            document.getElementById('wallet_connector_panel').classList.add('d-none');\r\n        }\r\n    }\r\n    showUnsupportedNetworkMessage(connectionInfo) {\r\n        let str = 'The network you are connecting to is not supported.';\r\n        str += 'Following networks are supported. ';\r\n        let networks = NetworkInfo.getNetworks();\r\n        for (let i = 0; i < networks.length; i++) {\r\n            if (i != 0)\r\n                str += ', ';\r\n            str += networks[i].Name;\r\n        }\r\n        connectionInfo.innerHTML = str;\r\n    }\r\n    connectWallet(providerName) {\r\n        let authenticationService = new AuthenticateService(this.moralis);\r\n        let cookieHelper = new CookieHelper(document);\r\n        cookieHelper.setCookieProvider(providerName);\r\n        authenticationService.authenticateUser(providerName, (walletConnectionInfo) => {\r\n            this.web3EnabledResult(providerName, walletConnectionInfo);\r\n        }, (user) => ConnectWallet_awaiter(this, void 0, void 0, function* () {\r\n            this.modal.hideModal();\r\n            let userInfo = new UserInfo(this.moralis, this.providerInfo, user);\r\n            yield userInfo.render('user_header_info');\r\n            if (document.getElementById('liminal_market_execute_trade')) {\r\n                let page = new TradePage(this.moralis);\r\n                yield page.load();\r\n            }\r\n        }))\r\n            .catch((reason) => {\r\n            ErrorInfo.report(reason);\r\n        });\r\n    }\r\n    web3EnabledResult(providerName, walletConnectionInfo) {\r\n        this.providerInfo = new ProviderInfo(walletConnectionInfo);\r\n        let connectionInfo = document.getElementById(providerName + 'ConnectionInfo');\r\n        if (!connectionInfo)\r\n            return;\r\n        connectionInfo.classList.replace('alert-warning', 'alert-info');\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        if (this.providerInfo.ChainId != networkInfo.ChainId) {\r\n            let userNetwork = NetworkInfo.getNetworkInfoByChainId(this.providerInfo.ChainId);\r\n            if (!userNetwork) {\r\n                this.showUnsupportedNetworkMessage(connectionInfo);\r\n            }\r\n            else {\r\n                NetworkInfo.setNetworkByChainId(this.providerInfo.ChainId);\r\n            }\r\n        }\r\n        let str = 'Connecting to you wallet \"' + this.providerInfo.WalletName + '\" to address ' + shortEth(this.providerInfo.UserAddress);\r\n        str += '. Open ' + this.providerInfo.WalletName + ' and <strong>Confirm</strong> the sign in.';\r\n        connectionInfo.innerHTML = str;\r\n        connectionInfo.classList.remove('d-none');\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/blockchain/KYCService.ts\nvar KYCService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass KYCService extends BlockchainService {\r\n    constructor(moralis) {\r\n        super(moralis);\r\n    }\r\n    getKYCAbi() {\r\n        return KYCService_awaiter(this, void 0, void 0, function* () {\r\n            if (KYCService.KYCInfo)\r\n                return KYCService.KYCInfo.abi;\r\n            const response = yield fetch(\"../abi/KYC.json\");\r\n            KYCService.KYCInfo = yield response.json();\r\n            return KYCService.KYCInfo.abi;\r\n        });\r\n    }\r\n    hasValidKYC() {\r\n        return KYCService_awaiter(this, void 0, void 0, function* () {\r\n            if (KYCService.KycResponse && KYCService.KycResponse.isValidKyc)\r\n                return KYCService.KycResponse;\r\n            KYCService.KycResponse = (yield this.moralis.Cloud.run('isValidKyc', { chainId: this.moralis.chainId })\r\n                .catch(reason => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                if (blockchainError.addressIsNotValidKYC()) {\r\n                    return false;\r\n                }\r\n                ErrorInfo.report(blockchainError);\r\n                return false;\r\n            }));\r\n            if (KYCService.KycResponse.alpacaId) {\r\n                let user = this.moralis.User.current();\r\n                user === null || user === void 0 ? void 0 : user.set('alpacaId', KYCService.KycResponse.alpacaId);\r\n                let aUsdBalance = new AUsdBalance(this.moralis, user);\r\n                yield aUsdBalance.loadAUSDBalanceUI();\r\n            }\r\n            return KYCService.KycResponse;\r\n        });\r\n    }\r\n    saveKYCInfo(data) {\r\n        return KYCService_awaiter(this, void 0, void 0, function* () {\r\n            let user = this.moralis.User.current();\r\n            if (!user)\r\n                throw new GeneralError(\"You need to be logged in to do KYC. Please login again.\");\r\n            return yield this.moralis.Cloud.run(\"kycRegistration\", data);\r\n        });\r\n    }\r\n    updateKYCInfo(data) {\r\n        return KYCService_awaiter(this, void 0, void 0, function* () {\r\n            let user = this.moralis.User.current();\r\n            if (!user)\r\n                throw new GeneralError(\"You need to be logged in to do KYC. Please login again.\");\r\n            return yield this.moralis.Cloud.run(\"updateAccount\", data);\r\n        });\r\n    }\r\n    isValidAccountId(str) {\r\n        const regex = new RegExp('^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$');\r\n        return regex.test(str);\r\n    }\r\n    updateDocuments(params) {\r\n        return KYCService_awaiter(this, void 0, void 0, function* () {\r\n            let user = this.moralis.User.current();\r\n            if (!user)\r\n                throw new GeneralError(\"You need to be logged in to do KYC. Please login again.\");\r\n            return yield this.moralis.Cloud.run(\"kycActionRequiredUpdate\", params);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/blockchain/SecurityTokenService.ts\nvar SecurityTokenService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass SecurityTokenService extends BlockchainService {\r\n    constructor(moralis) {\r\n        super(moralis);\r\n    }\r\n    getQuantityByAddress(symbol, ethAddress) {\r\n        return SecurityTokenService_awaiter(this, void 0, void 0, function* () {\r\n            let liminalMarketService = new LiminalMarketService(this.moralis);\r\n            let symbolAddress = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n            if (symbolAddress === AddressZero)\r\n                return new bignumber(0);\r\n            let options = yield this.getOptions('balanceOf', symbolAddress, {\r\n                account: ethAddress\r\n            });\r\n            return yield this.executeFunction(options)\r\n                .then(balanceOf => {\r\n                let amount = this.moralis.Units.FromWei(balanceOf.toString(), 18);\r\n                return new bignumber(amount);\r\n            }).catch(reason => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                ErrorInfo.report(blockchainError);\r\n                return new bignumber(0);\r\n            });\r\n        });\r\n    }\r\n    transfer(symbolAddress, qty) {\r\n        return SecurityTokenService_awaiter(this, void 0, void 0, function* () {\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let options = yield this.getOptions('transfer', symbolAddress, {\r\n                recipient: contractInfo.AUSD_ADDRESS,\r\n                amount: Moralis.Units.Token(qty.toString(), 18)\r\n            });\r\n            let result = yield this.executeFunction(options)\r\n                .then(result => {\r\n                return result;\r\n            })\r\n                .catch(reason => {\r\n                let blockchainError = new BlockchainError(reason);\r\n                throw ErrorInfo.report(blockchainError);\r\n            });\r\n            return result;\r\n        });\r\n    }\r\n    getOptions(functionName, symbolAddress, params) {\r\n        return SecurityTokenService_awaiter(this, void 0, void 0, function* () {\r\n            let securitySymbolAbi = yield this.getSecurityTokenAbi();\r\n            const options = {\r\n                contractAddress: symbolAddress,\r\n                functionName: functionName,\r\n                abi: securitySymbolAbi,\r\n                params: params\r\n            };\r\n            return options;\r\n        });\r\n    }\r\n    getSecurityTokenAbi() {\r\n        return SecurityTokenService_awaiter(this, void 0, void 0, function* () {\r\n            if (SecurityTokenService.SecurityTokenInfo)\r\n                return SecurityTokenService.SecurityTokenInfo.abi;\r\n            let response = yield fetch('../abi/SecurityToken.json');\r\n            SecurityTokenService.SecurityTokenInfo = yield response.json();\r\n            return SecurityTokenService.SecurityTokenInfo.abi;\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/Progress.ts\nclass Progress {\r\n    show(message, percentage, warning, hideElements) {\r\n        let progress = document.getElementById('progress');\r\n        if (!progress)\r\n            return;\r\n        if (hideElements) {\r\n            hideElements.forEach((el) => {\r\n                let element = document.getElementById(el);\r\n                if (!element)\r\n                    return;\r\n                element.style.display = 'none';\r\n            });\r\n        }\r\n        progress.style.display = 'block';\r\n        progress.innerHTML = '<div class=\"progress_text\">' + message + '</div>';\r\n        progress.style.width = percentage + '%';\r\n        progress.classList.toggle('progress-bar-striped', (percentage != 100));\r\n        progress.classList.toggle('progress-bar-animated', (percentage != 100));\r\n        if (warning) {\r\n            progress.classList.add('bg-warning');\r\n            progress.classList.add('progress_text_attn');\r\n        }\r\n        else {\r\n            progress.classList.remove('bg-warning');\r\n            progress.classList.remove('progress_text_attn');\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/backend/Subscription.ts\nvar Subscription_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass Subscription {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    getOrderBuyTablePrefix() {\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        return networkInfo.Name;\r\n    }\r\n    ;\r\n    subscribeToTable(tradeType, onUpdateCallback) {\r\n        return Subscription_awaiter(this, void 0, void 0, function* () {\r\n            let tableName = this.getOrderBuyTablePrefix() + 'Order' + tradeType;\r\n            console.log('subscribe to table:' + tableName);\r\n            let query = new this.moralis.Query(tableName);\r\n            let subscription = yield query.subscribe();\r\n            subscription.on('update', (response) => {\r\n                const object = response.toJSON();\r\n                console.log('object updated', JSON.stringify(object), object);\r\n                let ethLink = ' <a class=\"white-link\" target=\"_blank\" href=\"https://mumbai.polygonscan.com/tx/' + object.transaction_hash + '\">View transaction</a>';\r\n                onUpdateCallback(object);\r\n                console.log('status:', object.status);\r\n                let progress = new Progress();\r\n                if ((!object.status && object.confirmed) || object.status == 'money_sent') {\r\n                    progress.show('Blockchain has confirmed, money has been sent to broker.' + ethLink, 56);\r\n                    //blockchain has confirmed, money will arrive soon to broker\r\n                }\r\n                else if (object.status == 'money_arrived') {\r\n                    progress.show('Money has arrived, will now execute your buy order.' + ethLink, 70);\r\n                    //money has arrived to broker, we will now execute your order\r\n                }\r\n                else if (object.status == 'order_requested') {\r\n                    //order has been executed, we are waiting on response from the stock exchange\r\n                    progress.show('Buy order has been executed. We will update you when it has been filled.' + ethLink, 84);\r\n                }\r\n                else if (object.status == 'order_filled') {\r\n                    //order has been filled, you got object.filledQty of shares. You will see it soon in your wallet\r\n                    progress.show('Order has been filled, you will receive ' + object.filledQty + ' ' + Symbol + ' soon into your wallet.' + ethLink, 100);\r\n                }\r\n                else {\r\n                    progress.show('Waiting for blockchain to confirm transaction.', 99);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n}\r\n\n;// CONCATENATED MODULE: ./src/enums/TradeType.ts\nvar TradeType;\r\n(function (TradeType) {\r\n    TradeType[\"Sell\"] = \"Sell\";\r\n    TradeType[\"Buy\"] = \"Buy\";\r\n})(TradeType || (TradeType = {}));\r\n\n;// CONCATENATED MODULE: ./src/html/elements/tradepanel/ExecuteTradeButton.html\n// Module\nvar ExecuteTradeButton_code = \"<button id=\\\"liminal_market_execute_trade\\\"></button>\";\n// Exports\n/* harmony default export */ const tradepanel_ExecuteTradeButton = (ExecuteTradeButton_code);\n;// CONCATENATED MODULE: ./src/html/elements/tradepanel/TradeExecuted.html\n// Module\nvar TradeExecuted_code = \"\\r\\n<article class=\\\"trade_executed\\\">\\r\\n    <nav>\\r\\n    <ul>\\r\\n        <li>\\r\\n            <img src=\\\"{{sellingLogo}}\\\"><br />\\r\\n            {{sellingSymbol}}<br />\\r\\n            {{sellingAmount}}\\r\\n        </li>\\r\\n    </ul>\\r\\n    <ul>\\r\\n        <li> ----> </li>\\r\\n    </ul>\\r\\n    <ul>\\r\\n        <li>\\r\\n            <img src=\\\"{{buyingLogo}}\\\" /><br />\\r\\n            {{buyingSymbol}}<br />\\r\\n            <abbr title=\\\"{{buyingQuantity}}\\\" data-tooltip=\\\"{{buyingQuantity}}\\\">{{buyingRoundQuantity}}</abbr>\\r\\n        </li>\\r\\n    </ul>\\r\\n    </nav>\\r\\n    <div>\\r\\n        If you haven't already, add the {{buyingSymbol}} to your wallet.\\r\\n        <br /><br />\\r\\n        <button id=\\\"addTokenToWallet\\\" data-address=\\\"{{tokenAddress}}\\\">Add {{buyingSymbol}} to wallet</button>\\r\\n        <div id=\\\"addTokenToWalletFailed\\\" class=\\\"d-none\\\">\\r\\n            You can copy the address, to import the token\\r\\n            <input value=\\\"{{tokenAddress}}\\\" />\\r\\n        </div>\\r\\n        <br />\\r\\n        Should be visible in your {{walletName}} on address {{shortEthAddress}}.\\r\\n        <br /><br />\\r\\n        <small>You can view the <a href=\\\"{{blockExplorerLink}}\\\" target=\\\"_blank\\\">block transaction here</a></small>\\r\\n    </div>\\r\\n</article>\\r\\n\";\n// Exports\n/* harmony default export */ const TradeExecuted = (TradeExecuted_code);\n;// CONCATENATED MODULE: ./src/html/modal/FakeNativeTokenNeeded.html\n// Module\nvar FakeNativeTokenNeeded_code = \"You need to have {{symbol}} currency in your wallet. You use {{symbol}} to pay for using the blockchain.\\r\\n\\r\\nTo get some {{symbol}} currency\\r\\n<ol>\\r\\n    <li>Copy your address shown below\\r\\n        <input value=\\\"{{ethAddress}}\\\" />\\r\\n    </li>\\r\\n    <li>Open <a href=\\\"{{faucetUrl}}\\\" id=\\\"getNativeTokens\\\" target=\\\"_blank\\\">{{faucetUrl}}</a></li>\\r\\n    <li>Paste in your address you just copied and click the submit button</li>\\r\\n</ol>\\r\\n\\r\\n<div class=\\\"infoBar d-none\\\" id=\\\"waitingForNativeToken\\\">Waiting for {{symbol}}. Window will close when you have some in\\r\\n    you wallet.\\r\\n    It might take few minutes after you requested it.\\r\\n    <progress></progress>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\";\n// Exports\n/* harmony default export */ const FakeNativeTokenNeeded = (FakeNativeTokenNeeded_code);\n;// CONCATENATED MODULE: ./src/html/modal/NativeTokenNeeded.html\n// Module\nvar NativeTokenNeeded_code = \"You need to have {{symbol}} currency in your wallet. You use {{symbol}} to pay for using the blockchain.\\r\\n\\r\\nTo get some {{symbol}} currency\\r\\n<ol>\\r\\n    <li>Copy your address shown below\\r\\n        <input value=\\\"{{ethAddress}}\\\" />\\r\\n    </li>\\r\\n    <li>Open <a href=\\\"{{buyUrl}}\\\" target=\\\"_blank\\\">{{buyUrl}}</a></li>\\r\\n    <li>Paste in your address you just copied and click the submit button</li>\\r\\n</ol>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\";\n// Exports\n/* harmony default export */ const modal_NativeTokenNeeded = (NativeTokenNeeded_code);\n;// CONCATENATED MODULE: ./src/ui/modals/NativeTokenNeeded.ts\nvar NativeTokenNeeded_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass NativeTokenNeeded {\r\n    constructor(moralis, onNativeTokenArrived) {\r\n        this.timeOut = undefined;\r\n        this.moralis = moralis;\r\n        this.onNativeTokenArrived = onNativeTokenArrived;\r\n        this.modal = new Modal();\r\n    }\r\n    show() {\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        let userService = new UserService();\r\n        let ethAddress = userService.getEthAddress();\r\n        if (networkInfo.TestNetwork) {\r\n            let template = Handlebars.compile(FakeNativeTokenNeeded);\r\n            let content = template({ symbol: networkInfo.NativeSymbol, faucetUrl: networkInfo.FaucetUrl, ethAddress: ethAddress });\r\n            this.modal.showModal('Get some ' + networkInfo.NativeSymbol, content, false, () => {\r\n                this.cancelTimer();\r\n            });\r\n        }\r\n        else {\r\n            let template = Handlebars.compile(modal_NativeTokenNeeded);\r\n            let content = template({ symbol: networkInfo.NativeSymbol, buyUrl: networkInfo.BuyUrl, ethAddress: ethAddress });\r\n            this.modal.showModal('Get some ' + networkInfo.NativeSymbol, content, false, () => {\r\n                this.cancelTimer();\r\n            });\r\n        }\r\n        let link = document.getElementById('getNativeTokens');\r\n        if (!link)\r\n            return;\r\n        link.addEventListener('click', () => NativeTokenNeeded_awaiter(this, void 0, void 0, function* () {\r\n            let waitingForNativeToken = document.getElementById('waitingForNativeToken');\r\n            waitingForNativeToken === null || waitingForNativeToken === void 0 ? void 0 : waitingForNativeToken.classList.remove('d-none');\r\n            yield this.checkForNativeTokens();\r\n        }));\r\n    }\r\n    cancelTimer() {\r\n        if (this.timeOut)\r\n            clearTimeout(this.timeOut);\r\n    }\r\n    checkForNativeTokens() {\r\n        return NativeTokenNeeded_awaiter(this, void 0, void 0, function* () {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            let hasEnoughNativeTokens = yield networkInfo.hasEnoughNativeTokens(this.moralis);\r\n            if (hasEnoughNativeTokens) {\r\n                this.modal.hideModal();\r\n                this.onNativeTokenArrived();\r\n            }\r\n            else {\r\n                this.timeOut = setTimeout(() => this.checkForNativeTokens(), 5 * 1000);\r\n            }\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycActionRequired.html\n// Module\nvar KycActionRequired_code = \"<div id=\\\"kycActionRequiredDiv\\\">\\r\\n\\r\\n    {{#if Other}}\\r\\n    <strong>This is the message from KYC processor we received</strong>\\r\\n    <blockquote>\\r\\n        {{Other}}\\r\\n    </blockquote>\\r\\n    {{/if}}\\r\\n    <form novalidate id=\\\"kycActionRequiredForm\\\" name=\\\"kycActionRequiredForm\\\" onsubmit=\\\"return false;\\\">\\r\\n        {{{KycInfo}}}\\r\\n        {{#if SubmitData}}\\r\\n        <div class=\\\"input_error\\\" id=\\\"kycActionRequiredError\\\"></div>\\r\\n        <div class=\\\"buttons\\\">\\r\\n            <button type=\\\"submit\\\" id=\\\"kycActionRequiredSubmit\\\">Send new information</button>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n    </form>\\r\\n</div>\\r\\n\\r\\n<div id=\\\"kycActionRequiredSubmittedDiv\\\" class=\\\"hidden center\\\">\\r\\n    <h3>You documents have been submitted.<br/>We will email you when your account is ready.</h3>\\r\\n    You can close this window.\\r\\n</div>\";\n// Exports\n/* harmony default export */ const Kyc_KycActionRequired = (KycActionRequired_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/WeDontKnowWhy.html\n// Module\nvar WeDontKnowWhy_code = \"<fieldset>\\r\\n    Your application has been rejected during KYC process.<br/><br/>\\r\\n    We don't have the information on why that happened, but you can email us at\\r\\n    <a href='mailto:info@liminal.market?subject=My application was rejected&body=Hi, can you help me to find out what the problem is? My name is _______ and I used the email _______ to register at liminal.market'>info@liminal.market</a>\\r\\n    and we can find out, and we should be able to solve it together.\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const WeDontKnowWhy = (WeDontKnowWhy_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/IDENTITY_VERIFICATION.html\n// Module\nvar IDENTITY_VERIFICATION_code = \"<fieldset>\\r\\n    <p>\\r\\n        Identity needs to be verified.\\r\\n        This means you need to upload\\r\\n        a new photo of your id. You might try another type of ID, such as\\r\\n        driver's license if you tried passport before\\r\\n    </p>\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification\\\" \\\"Photo ID Front (Front of passport)\\\"}}}\\r\\n    </div>\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification_2\\\" \\\"Photo ID Back (Passport picture of ID) \\\"}}}\\r\\n    </div>\\r\\n\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const IDENTITY_VERIFICATION = (IDENTITY_VERIFICATION_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/ADDRESS_VERIFICATION.html\n// Module\nvar ADDRESS_VERIFICATION_code = \"<fieldset>\\r\\n    <p>\\r\\n        Address needs to be verified. Please upload document that confirms your address.\\r\\n        A bill from the government or utility company in that last 30 days with your name it should work.\\r\\n    </p>\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"address_verification\\\" \\\"Picture of address verification\\\"}}}\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const ADDRESS_VERIFICATION = (ADDRESS_VERIFICATION_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/AFFILIATED.html\n// Module\nvar AFFILIATED_code = \"<fieldset>\\r\\n    Further information needs to be submitted if account owner is affiliated to finra or an exchange\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const AFFILIATED = (AFFILIATED_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/CONTROL_PERSON.html\n// Module\nvar CONTROL_PERSON_code = \"<fieldset>\\r\\n    Further information needs to be submitted if account owner is a control person\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const CONTROL_PERSON = (CONTROL_PERSON_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/COUNTRY_NOT_SUPPORTED.html\n// Module\nvar COUNTRY_NOT_SUPPORTED_code = \"<fieldset>\\r\\n    The account owner’s country of tax residence is not supported by our KYC providers.\\r\\n    In this case, we’ll manually perform KYC on the user\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const COUNTRY_NOT_SUPPORTED = (COUNTRY_NOT_SUPPORTED_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/DATE_OF_BIRTH.html\n// Module\nvar DATE_OF_BIRTH_code = \"<fieldset>\\r\\n    Date of birth needs to be verified. Please upload document that confirms your date of birth.\\r\\n\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"date_of_birth_verification\\\" \\\"Date of birth verification\\\"}}}\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const DATE_OF_BIRTH = (DATE_OF_BIRTH_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/FAMILY_MEMBER_PEP.html\n// Module\nvar FAMILY_MEMBER_PEP_code = \"<fieldset>\\r\\n    Further information needs to be submitted if family member is a politically exposed person\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const FAMILY_MEMBER_PEP = (FAMILY_MEMBER_PEP_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/INVALID_IDENTITY_PASSPORT.html\n// Module\nvar INVALID_IDENTITY_PASSPORT_code = \"<fieldset>\\r\\n    Identity needs to be verified via a government issued ID.\\r\\n\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification\\\" \\\"Photo ID Front (Front of passport)\\\"}}}\\r\\n    </div>\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification_2\\\" \\\"Photo ID Back (Passport picture of ID) \\\"}}}\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const INVALID_IDENTITY_PASSPORT = (INVALID_IDENTITY_PASSPORT_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/PEP.html\n// Module\nvar PEP_code = \"<fieldset>\\r\\n    Further information needs to be submitted if account owner is politically exposed person\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const PEP = (PEP_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/SELFIE_VERIFICATION.html\n// Module\nvar SELFIE_VERIFICATION_code = \"<fieldset>\\r\\n    Identity needs to be verified via a live selfie of the account owner\\r\\n\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification\\\" \\\"Live selfie verification\\\"}}}\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const SELFIE_VERIFICATION = (SELFIE_VERIFICATION_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/TAX_IDENTIFICATION.html\n// Module\nvar TAX_IDENTIFICATION_code = \"<fieldset>\\r\\n    Tax ID number needs to be verified. Please upload document that confirms your Tax Id\\r\\n\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"tax_id_verification\\\" \\\"Tax id verification\\\"}}}\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const TAX_IDENTIFICATION = (TAX_IDENTIFICATION_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/VISA_TYPE_OTHER.html\n// Module\nvar VISA_TYPE_OTHER_code = \"<fieldset>\\r\\n    Further information needs to be submitted about account owner’s visa\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const VISA_TYPE_OTHER = (VISA_TYPE_OTHER_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/ActionRequired/W8BEN_CORRECTION.html\n// Module\nvar W8BEN_CORRECTION_code = \"<fieldset>\\r\\n    Identifying information submitted by the user was incorrect so a new, corrected, W8BEN needs to be submitted\\r\\n    <br/>\\r\\n    Please contact us at <a href=\\\"mailto:info@liminal.market\\\">info@liminal.market</a> for further information\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const W8BEN_CORRECTION = (W8BEN_CORRECTION_code);\n;// CONCATENATED MODULE: ./src/html/elements/FileUpload.html\n// Module\nvar FileUpload_code = \"<div>\\r\\n    <label for=\\\"{{inputId}}\\\">{{label}}</label>\\r\\n    <input type=\\\"file\\\" required id=\\\"{{inputId}}\\\" accept=\\\"{{accept}}\\\" capture=\\\"{{capture}}\\\"/>\\r\\n    <input type=\\\"hidden\\\" id=\\\"{{inputId}}_base64\\\" name=\\\"{{inputId}}_base64\\\"/>\\r\\n    <div class=\\\"error hidden\\\" id=\\\"{{inputId}}_error\\\"></div>\\r\\n</div>\\r\\n<div id=\\\"{{inputId}}_preview\\\">\\r\\n\\r\\n</div>\";\n// Exports\n/* harmony default export */ const elements_FileUpload = (FileUpload_code);\n;// CONCATENATED MODULE: ./src/ui/elements/FileUpload.ts\n\r\nclass FileUpload {\r\n    constructor(inputId, label, accept = \"image/png,image/jpeg,.pdf\", capture = 'environment') {\r\n        this.maxFileSize = 8 * 1024 * 1024 * 10; //10MB\r\n        this.accept = \"image/*,.pdf\";\r\n        this.capture = 'environment';\r\n        this.inputId = inputId;\r\n        this.label = label;\r\n        this.accept = accept;\r\n        this.capture = capture;\r\n    }\r\n    render() {\r\n        let template = Handlebars.compile(elements_FileUpload);\r\n        return template(this);\r\n    }\r\n    bindEvents() {\r\n        let fileInput = document.getElementById(this.inputId);\r\n        fileInput === null || fileInput === void 0 ? void 0 : fileInput.addEventListener('change', (evt) => {\r\n            this.processFile(fileInput);\r\n        });\r\n    }\r\n    processFile(element) {\r\n        this.hideFileRelatedInfo(element.id);\r\n        let files = element.files;\r\n        if (!files)\r\n            return;\r\n        let file = files[0];\r\n        if (!file) {\r\n            this.showFileRelatedInfo(element.id, 'No file selected. Please select file.');\r\n            this.setBase64Input(element.id, '');\r\n            return;\r\n        }\r\n        if (file.size > this.maxFileSize) {\r\n            this.showFileRelatedInfo(element.id, 'File ' + file.name + ' is to large. Files cannot be larger then 10MB. You need to make it smaller before submitting your application');\r\n            this.setBase64Input(element.id, '');\r\n            return;\r\n        }\r\n        let reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            this.setBase64Input(element.id, reader.result);\r\n        });\r\n        reader.addEventListener('error', () => {\r\n            this.showFileRelatedInfo(element.id, 'Could not read file ' + file.name + '. Either the file is corrupt or your browser does not allow us to read it');\r\n        });\r\n        reader.readAsDataURL(file);\r\n    }\r\n    setBase64Input(elementId, value) {\r\n        let base64Input = document.getElementById(elementId + '_base64');\r\n        base64Input.value = value;\r\n        let previewElement = document.getElementById(elementId + '_preview');\r\n        if (!previewElement)\r\n            return;\r\n        if (value.indexOf('data:image') != -1) {\r\n            previewElement.innerHTML = '<img src=\"' + base64Input.value + '\" />';\r\n        }\r\n        else {\r\n            previewElement.innerHTML = '';\r\n        }\r\n    }\r\n    showFileRelatedInfo(elementId, text) {\r\n        let fileRelatedInfo = document.getElementById(elementId + '_error');\r\n        if (!fileRelatedInfo)\r\n            return;\r\n        fileRelatedInfo.innerHTML = text;\r\n        fileRelatedInfo.classList.remove('hidden');\r\n    }\r\n    hideFileRelatedInfo(elementId) {\r\n        let fileRelatedInfo = document.getElementById(elementId + '_error');\r\n        if (!fileRelatedInfo)\r\n            return;\r\n        fileRelatedInfo.classList.add('hidden');\r\n    }\r\n    static registerHandler() {\r\n        Handlebars.registerHelper('fileUpload', (id, label) => {\r\n            let fileUpload = new FileUpload(id, label);\r\n            FileUpload.fileUploads.push(fileUpload);\r\n            return fileUpload.render();\r\n        });\r\n    }\r\n}\r\nFileUpload.fileUploads = [];\r\n\n;// CONCATENATED MODULE: ./src/util/FormValidator.ts\n\r\nclass FormValidator {\r\n    constructor(selector) {\r\n        this.selector = selector;\r\n    }\r\n    validateRequiredFields() {\r\n        let inputs = document.querySelectorAll(this.selector + ' input[required], ' + this.selector + ' select[required]');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            if (this.isMissingInputFromUser(input)) {\r\n                let obj = {\r\n                    message: 'You must fill into this field',\r\n                    inputName: input.id,\r\n                    labelText: document.querySelector('label[for=' + input.id + ']').innerHTML,\r\n                    pattern: input.pattern\r\n                };\r\n                this.handle(obj);\r\n                return false;\r\n            }\r\n            if (input.pattern) {\r\n                let pattern = input.pattern;\r\n                let matches = input.value.match(pattern);\r\n                if (matches == null) {\r\n                    let obj = {\r\n                        message: 'This is not valid date format, please use YYYY-MM-DD (year-month-date)',\r\n                        inputName: input.id,\r\n                        labelText: document.querySelector('label[for=' + input.id + ']').innerHTML,\r\n                        pattern: input.pattern\r\n                    };\r\n                    this.handle(obj);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    isMissingInputFromUser(input) {\r\n        return ((input.type == 'checkbox' && !input.checked) || StringHelper.isNullOrEmpty(input.value));\r\n    }\r\n    removeMissingInfo(errorDivId, focusElementId) {\r\n        let element = document.getElementById(errorDivId);\r\n        if (!element)\r\n            return;\r\n        element.style.display = 'none';\r\n        if (!focusElementId)\r\n            return;\r\n        let focusElement = document.getElementById(focusElementId);\r\n        if (focusElement) {\r\n            focusElement.removeAttribute('aria-invalid');\r\n        }\r\n    }\r\n    setMissingInfo(errorDivId, text, focusElementId) {\r\n        var _a, _b;\r\n        let element = document.getElementById(errorDivId);\r\n        if (!element)\r\n            return;\r\n        element.innerHTML = text;\r\n        if (text == '') {\r\n            element.style.display = 'none';\r\n        }\r\n        else {\r\n            element.style.display = 'block';\r\n            if (focusElementId) {\r\n                (_a = document.getElementById(focusElementId)) === null || _a === void 0 ? void 0 : _a.focus();\r\n                (_b = document.getElementById(focusElementId)) === null || _b === void 0 ? void 0 : _b.setAttribute('aria-invalid', 'true');\r\n            }\r\n        }\r\n    }\r\n    handle(obj) {\r\n        let input = document.getElementById(obj.inputName);\r\n        if (!input)\r\n            return;\r\n        let inputError = input.parentElement.querySelector('.input_error');\r\n        if (inputError) {\r\n            inputError.scrollIntoView({ block: 'center' });\r\n            return;\r\n        }\r\n        input.setAttribute('aria-invalid', 'true');\r\n        input.insertAdjacentHTML(\"beforebegin\", '<div class=\"input_error\" style=\"display: block\" id=\"input_error_' + obj.inputName + '\">' + obj.message + '</div>');\r\n        input.focus();\r\n        if (obj.pattern) {\r\n            input.setAttribute('pattern', obj.pattern);\r\n        }\r\n        input.addEventListener('blur', (evt) => {\r\n            evt.preventDefault();\r\n            setTimeout(() => {\r\n                let input = evt.target;\r\n                let pattern = input.getAttribute('pattern');\r\n                if ((pattern && input.value.match(pattern)) || (input.required && input.value) || input.checked) {\r\n                    input.removeAttribute('aria-invalid');\r\n                    let errorMessage = document.getElementById('input_error_' + obj.inputName);\r\n                    if (errorMessage)\r\n                        errorMessage.remove();\r\n                }\r\n            }, 800);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycActionRequired.ts\nvar KycActionRequired_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass KycActionRequired {\r\n    constructor(executeTradeButton) {\r\n        this.modal = new Modal();\r\n        this.templates = new Map();\r\n        this.executeTradeButton = executeTradeButton;\r\n        this.templates.set('WeDontKnowWhyHtml', WeDontKnowWhy);\r\n        this.templates.set('ADDRESS_VERIFICATION', ADDRESS_VERIFICATION);\r\n        this.templates.set('AFFILIATED', AFFILIATED);\r\n        this.templates.set('CONTROL_PERSON', CONTROL_PERSON);\r\n        this.templates.set('COUNTRY_NOT_SUPPORTED', COUNTRY_NOT_SUPPORTED);\r\n        this.templates.set('DATE_OF_BIRTH', DATE_OF_BIRTH);\r\n        this.templates.set('FAMILY_MEMBER_PEP', FAMILY_MEMBER_PEP);\r\n        this.templates.set('IDENTITY_VERIFICATION', IDENTITY_VERIFICATION);\r\n        this.templates.set('INVALID_IDENTITY_PASSPORT', INVALID_IDENTITY_PASSPORT);\r\n        this.templates.set('PEP', PEP);\r\n        this.templates.set('SELFIE_VERIFICATION', SELFIE_VERIFICATION);\r\n        this.templates.set('TAX_IDENTIFICATION', TAX_IDENTIFICATION);\r\n        this.templates.set('VISA_TYPE_OTHER', VISA_TYPE_OTHER);\r\n        this.templates.set('W8BEN_CORRECTION', W8BEN_CORRECTION);\r\n        FileUpload.registerHandler();\r\n    }\r\n    show() {\r\n        return KycActionRequired_awaiter(this, void 0, void 0, function* () {\r\n            let userService = new UserService(Moralis);\r\n            let kycResult = yield userService.kycActionRequired();\r\n            if (!kycResult)\r\n                return;\r\n            let kycInfo = this.getKycMessages(kycResult.messages);\r\n            let template = Handlebars.compile(Kyc_KycActionRequired);\r\n            let content = template({\r\n                json: JSON.stringify(kycResult),\r\n                KycInfo: kycInfo,\r\n                Other: kycResult.additional_information,\r\n                SubmitData: kycInfo.indexOf('<input') != -1\r\n            });\r\n            this.modal.showModal('Action required', content, false, () => {\r\n            }, false);\r\n            let kycActionRequiredForm = document.getElementById('kycActionRequiredForm');\r\n            kycActionRequiredForm === null || kycActionRequiredForm === void 0 ? void 0 : kycActionRequiredForm.addEventListener('submit', (evt) => KycActionRequired_awaiter(this, void 0, void 0, function* () {\r\n                evt.preventDefault();\r\n                this.hideError();\r\n                let submitBtn = document.getElementById('kycActionRequiredSubmit');\r\n                LoadingHelper.setLoading(submitBtn);\r\n                let formValidator = new FormValidator('#kycActionRequiredForm');\r\n                if (!formValidator.validateRequiredFields())\r\n                    return;\r\n                let params = FormHelper.getParams('#kycActionRequiredForm');\r\n                let kycService = new KYCService(Moralis);\r\n                yield kycService.updateDocuments(params)\r\n                    .then(() => {\r\n                    let kycActionRequiredDiv = document.getElementById('kycActionRequiredDiv');\r\n                    kycActionRequiredDiv === null || kycActionRequiredDiv === void 0 ? void 0 : kycActionRequiredDiv.classList.add('hidden');\r\n                    let kycActionRequiredSubmittedDiv = document.getElementById('kycActionRequiredSubmittedDiv');\r\n                    kycActionRequiredSubmittedDiv === null || kycActionRequiredSubmittedDiv === void 0 ? void 0 : kycActionRequiredSubmittedDiv.classList.remove('hidden');\r\n                    this.executeTradeButton.checkKycIsDone();\r\n                    this.executeTradeButton.renderButton();\r\n                })\r\n                    .catch(reason => {\r\n                    this.showError(reason);\r\n                }).finally(() => {\r\n                    LoadingHelper.removeLoading();\r\n                });\r\n            }));\r\n            for (let i = 0; i < FileUpload.fileUploads.length; i++) {\r\n                FileUpload.fileUploads[i].bindEvents();\r\n            }\r\n        });\r\n    }\r\n    getKycMessages(messages) {\r\n        let kycInfo = '';\r\n        for (let i = 0; i < messages.length; i++) {\r\n            let htmlTemplate = this.templates.get(messages[i].key);\r\n            if (!htmlTemplate) {\r\n                //TODO: Here we should to logger, critical that we dont know why\r\n                continue;\r\n            }\r\n            let template = Handlebars.compile(htmlTemplate);\r\n            kycInfo += template({ message: messages[i].message });\r\n        }\r\n        if (kycInfo == '') {\r\n            let html = this.templates.get('WeDontKnowWhyHtml');\r\n            let template = Handlebars.compile(html);\r\n            kycInfo = template({});\r\n        }\r\n        return kycInfo;\r\n    }\r\n    hideError() {\r\n        let kycActionRequiredError = document.getElementById('kycActionRequiredError');\r\n        if (!kycActionRequiredError)\r\n            return;\r\n        kycActionRequiredError.style.display = 'none';\r\n    }\r\n    showError(reason) {\r\n        let kycActionRequiredError = document.getElementById('kycActionRequiredError');\r\n        if (!kycActionRequiredError)\r\n            return;\r\n        kycActionRequiredError.innerHTML = 'Error occurred while saving your documents. Reason:' + reason;\r\n        kycActionRequiredError.style.display = 'block';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/KYCModal.html\n// Module\nvar KYCModal_code = \"<div id=\\\"kyc_reg\\\">\\r\\n\\r\\n    <form id=\\\"kyc_wizard_form\\\" name=\\\"kyc_wizard_form\\\" novalidate onsubmit=\\\"return false\\\">\\r\\n        {{{KycContactHtml}}}\\r\\n        {{{KycIdentityHtml}}}\\r\\n        {{{KycTrustedContactHtml}}}\\r\\n        {{{KycDisclosureHtml}}}\\r\\n        {{{KycUploadHtml}}}\\r\\n        {{{KycAccountAgreementHtml}}}\\r\\n    </form>\\r\\n</div>\\r\\n\\r\\n<div id=\\\"waiting_for_kyc_reg\\\" class=\\\"hidden\\\">\\r\\n    KYC is being processed. This may take about 4-5 minutes. Window will close when it's done.\\r\\n    <br/><br/>\\r\\n    You can close the window, we will email you when KYC is finished.\\r\\n\\r\\n    <progress></progress>\\r\\n\\r\\n</div>\";\n// Exports\n/* harmony default export */ const KYCModal = (KYCModal_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycContact.html\n// Module\nvar KycContact_code = \"<fieldset class=\\\"kycContact hidden\\\" data-form=\\\"1\\\">\\r\\n    <div class=\\\"explain\\\">\\r\\n        To be able to trade on the stock market, we need to get your information.\\r\\n        This is a requirement from the financial regulators.\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"email_address\\\">Email</label>\\r\\n        <input type=\\\"email\\\" required class=\\\"form-control\\\" id=\\\"email_address\\\" name=\\\"email_address\\\"\\r\\n               placeholder=\\\"name@example.com\\\" autocomplete=\\\"email\\\"\\r\\n               value=\\\"\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"phone_number\\\">Phone</label>\\r\\n        <input type=\\\"tel\\\" class=\\\"form-control\\\" id=\\\"phone_number\\\" name=\\\"phone_number\\\"\\r\\n               placeholder=\\\"+1-555-666-7788\\\" autocomplete=\\\"tel\\\" value=\\\"\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"street_address\\\">Permanent Residential Address</label>\\r\\n        <div class=\\\"explain\\\">It must be a physical address, not a PO box.</div>\\r\\n        <input required id=\\\"street_address\\\" name=\\\"street_address\\\"\\r\\n               placeholder=\\\"20 N San Mateo Dr\\\" value=\\\"\\\" autocomplete=\\\"address-line1\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"unit\\\">Unit / Apt #</label>\\r\\n        <input id=\\\"unit\\\" name=\\\"unit\\\" value=\\\"\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"city\\\">City</label>\\r\\n        <input id=\\\"city\\\" name=\\\"city\\\" placeholder=\\\"Pawnee\\\"\\r\\n               value=\\\"\\\" autocomplete=\\\"address-level2\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"postal_code\\\">Postal code</label>\\r\\n        <input required id=\\\"postal_code\\\" autocomplete=\\\"postal-code\\\" name=\\\"postal_code\\\"\\r\\n               placeholder=\\\"94401\\\"\\r\\n               value=\\\"\\\">\\r\\n    </div>\\r\\n    <div id=\\\"state_div\\\">\\r\\n        <label for=\\\"state\\\">State (2 letters)</label>\\r\\n        <input maxlength=\\\"2\\\" id=\\\"state\\\" name=\\\"state\\\" placeholder=\\\"NY\\\"\\r\\n               value=\\\"\\\" autocomplete=\\\"address-level1\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"country_of_tax_residence\\\">Country of tax residence</label>\\r\\n        {{#if edit}}\\r\\n        <input name=\\\"country_of_tax_residence\\\" readonly id=\\\"country_of_tax_residence\\\"/>\\r\\n        {{/if}}\\r\\n        {{#unless edit}}\\r\\n        <select required id=\\\"country_of_tax_residence\\\" name=\\\"country_of_tax_residence\\\" autocomplete=\\\"country\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            {{#each countries}}\\r\\n            <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n            {{/each}}\\r\\n        </select>\\r\\n        {{/unless}}\\r\\n    </div>\\r\\n    <div class=\\\"buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"contact_next\\\">Next: Identity</button>\\r\\n    </div>\\r\\n</fieldset>\\r\\n\";\n// Exports\n/* harmony default export */ const Kyc_KycContact = (KycContact_code);\n;// CONCATENATED MODULE: ./src/errors/cloud/KycValidatorError.ts\nvar KycValidatorError_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass KycValidatorError {\r\n    constructor(error, kycForm) {\r\n        var _a, _b;\r\n        this.validValues = '';\r\n        this.inputName = '';\r\n        this.labelText = '';\r\n        this.pattern = '';\r\n        let obj = {};\r\n        try {\r\n            if (!error.inputName) {\r\n                obj = JSON.parse(error);\r\n            }\r\n            else {\r\n                obj = error;\r\n            }\r\n            this.message = (_a = obj.message) === null || _a === void 0 ? void 0 : _a.replace(/_/g, ' ');\r\n            this.validValues = (_b = obj.validValues) === null || _b === void 0 ? void 0 : _b.replace(/_/g, ' ');\r\n            this.inputName = obj.inputName;\r\n            this.labelText = obj.labelText;\r\n            this.pattern = obj.pattern;\r\n            this.onshow = obj.onshow;\r\n        }\r\n        catch (e) {\r\n            this.message = error.messsage;\r\n        }\r\n        this.kycForm = kycForm;\r\n    }\r\n    handle() {\r\n        if (StringHelper.isNullOrEmpty(this.inputName)) {\r\n            let activeFieldset = document.querySelector(this.kycForm.activeFieldsetSelector);\r\n            let inputError = activeFieldset.querySelector('.input_error');\r\n            if (inputError) {\r\n                if (this.validValues) {\r\n                    inputError.innerHTML = this.validValues.toString();\r\n                }\r\n                else {\r\n                    if (this.message && this.message.indexOf('Invalid function') != -1 || this.message.indexOf('Unable to connect to the Parse API') != -1) {\r\n                        inputError.innerHTML = 'We just deployed new version of our website. This can cause interruption. Please wait 30 seconds and submit again';\r\n                    }\r\n                    else {\r\n                        inputError.innerHTML = this.message;\r\n                    }\r\n                }\r\n                inputError.style.display = 'block';\r\n                inputError.scrollIntoView();\r\n            }\r\n            return;\r\n        }\r\n        let input = document.getElementById(this.inputName);\r\n        if (!input)\r\n            return;\r\n        let inputError = input.parentElement.querySelector('.input_error');\r\n        if (inputError) {\r\n            inputError.scrollIntoView({ block: 'center' });\r\n            return;\r\n        }\r\n        input.setAttribute('aria-invalid', 'true');\r\n        let errorInput = '<div class=\"input_error\" style=\"display: block\" id=\"input_error_' + this.inputName + '\">' + this.message + '</div>';\r\n        if (input.clientWidth < 300) {\r\n            let div = this.getDivToDisplayErrorMessage(input);\r\n            div.insertAdjacentHTML(\"beforebegin\", errorInput);\r\n        }\r\n        else {\r\n            input.insertAdjacentHTML(\"beforebegin\", errorInput);\r\n        }\r\n        input.focus();\r\n        if (this.pattern) {\r\n            input.setAttribute('pattern', this.pattern);\r\n        }\r\n        input.addEventListener('blur', (evt) => {\r\n            evt.preventDefault();\r\n            setTimeout(() => {\r\n                let input = evt.target;\r\n                let pattern = input.getAttribute('pattern');\r\n                if ((pattern && input.value.match(pattern)) || (input.type != 'checkbox' && input.type != 'radio' && input.required && input.value) || input.checked) {\r\n                    input.removeAttribute('aria-invalid');\r\n                    let errorMessage = document.getElementById('input_error_' + this.inputName);\r\n                    if (errorMessage)\r\n                        errorMessage.remove();\r\n                }\r\n            }, 800);\r\n        });\r\n        let fieldsetElement = input.closest('fieldset[data-form=\"1\"]');\r\n        if (fieldsetElement) {\r\n            let className = fieldsetElement.className.replace('hidden', '').trim();\r\n            this.kycForm.show(className);\r\n            input.scrollIntoView(false);\r\n        }\r\n        if (this.onshow) {\r\n            let link = document.getElementById(this.onshow.id);\r\n            if (!link)\r\n                return;\r\n            link.addEventListener('click', (evt) => KycValidatorError_awaiter(this, void 0, void 0, function* () {\r\n                evt.preventDefault();\r\n                yield Moralis.Cloud.run(this.onshow.functionName, this.onshow.params);\r\n                document.getElementById('input_error_' + this.inputName).innerHTML = 'Email has been sent to ' + this.onshow.params.email;\r\n            }));\r\n        }\r\n    }\r\n    getDivToDisplayErrorMessage(input, counter = 1) {\r\n        let div = input.parentElement.closest('div');\r\n        if (!div)\r\n            return input;\r\n        if (div.clientWidth > 300 || counter > 5) {\r\n            return div;\r\n        }\r\n        return this.getDivToDisplayErrorMessage(div, ++counter);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycBase.ts\n\r\n\r\n\r\nclass KycBase {\r\n    constructor(kycForm) {\r\n        this.kycForm = kycForm;\r\n        FileUpload.registerHandler();\r\n    }\r\n    showFieldset(selector, header) {\r\n        var _a;\r\n        this.hideFieldsets();\r\n        (_a = document.querySelector(selector)) === null || _a === void 0 ? void 0 : _a.classList.remove('hidden');\r\n        document.querySelector('#liminal_market_modal_div > article > header > span').innerHTML = header;\r\n        document.querySelector('#liminal_market_modal_div > article').scrollTop = 0;\r\n        this.kycForm.activeFieldsetSelector = selector;\r\n    }\r\n    showRequiredMarker() {\r\n        let inputs = document.querySelectorAll('input, select');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            if (!input.id)\r\n                continue;\r\n            let label = document.querySelector('label[for=' + input.id + ']');\r\n            if (!label)\r\n                continue;\r\n            if (input.required) {\r\n                if (label.innerHTML.indexOf('*') == -1) {\r\n                    label.innerHTML += '*';\r\n                }\r\n            }\r\n            else {\r\n                if (label.innerHTML.indexOf('*') != -1) {\r\n                    label.innerHTML = label.innerHTML.replace('*', '');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setRequired(inputId) {\r\n        var _a;\r\n        (_a = document.getElementById(inputId)) === null || _a === void 0 ? void 0 : _a.setAttribute('required', 'required');\r\n    }\r\n    removeRequired(inputId) {\r\n        var _a;\r\n        (_a = document.getElementById(inputId)) === null || _a === void 0 ? void 0 : _a.removeAttribute('required');\r\n    }\r\n    bind(selector, eventName, action) {\r\n        let elements = document.querySelectorAll(selector);\r\n        for (let i = 0; i < elements.length; i++) {\r\n            elements[i].addEventListener(eventName, (evt) => {\r\n                action(evt);\r\n            });\r\n        }\r\n    }\r\n    bindFileUploads() {\r\n        for (let i = 0; i < FileUpload.fileUploads.length; i++) {\r\n            FileUpload.fileUploads[i].bindEvents();\r\n        }\r\n    }\r\n    hideFieldsets() {\r\n        let fieldsets = document.querySelectorAll('#kyc_wizard_form > fieldset');\r\n        for (let i = 0; i < fieldsets.length; i++) {\r\n            fieldsets[i].classList.add('hidden');\r\n        }\r\n    }\r\n    validateRequiredFields(selector) {\r\n        let inputs = document.querySelectorAll(selector + ' input[required], ' + selector + ' select[required]');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            let input = inputs[i];\r\n            if (this.isMissingInputFromUser(input)) {\r\n                let obj = {\r\n                    message: 'You must fill into this field',\r\n                    inputName: input.id,\r\n                    labelText: document.querySelector('label[for=' + input.id + ']').innerHTML,\r\n                    pattern: input.pattern\r\n                };\r\n                let kycValidationError = new KycValidatorError(obj, this.kycForm);\r\n                kycValidationError.handle();\r\n                return false;\r\n            }\r\n            if (input.pattern) {\r\n                let pattern = input.pattern;\r\n                let matches = input.value.match(pattern);\r\n                if (matches == null) {\r\n                    let obj = {\r\n                        message: 'This is not valid date format, please use YYYY-MM-DD (year-month-date)',\r\n                        inputName: input.id,\r\n                        labelText: document.querySelector('label[for=' + input.id + ']').innerHTML,\r\n                        pattern: input.pattern\r\n                    };\r\n                    let kycValidationError = new KycValidatorError(obj, this.kycForm);\r\n                    kycValidationError.handle();\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    showElement(elementId) {\r\n        var _a;\r\n        (_a = document.getElementById(elementId)) === null || _a === void 0 ? void 0 : _a.classList.remove('hidden');\r\n    }\r\n    hideElement(elementId) {\r\n        var _a;\r\n        (_a = document.getElementById(elementId)) === null || _a === void 0 ? void 0 : _a.classList.add('hidden');\r\n    }\r\n    setLabel(elementId, text) {\r\n        let element = document.getElementById('tax_id_label');\r\n        if (!element)\r\n            return;\r\n        element.innerHTML = text;\r\n    }\r\n    isMissingInputFromUser(input) {\r\n        return ((input.type == 'checkbox' && !input.checked) || StringHelper.isNullOrEmpty(input.value));\r\n    }\r\n    removeMissingInfo(errorDivId, focusElementId) {\r\n        let element = document.getElementById(errorDivId);\r\n        if (!element)\r\n            return;\r\n        element.style.display = 'none';\r\n        if (!focusElementId)\r\n            return;\r\n        let focusElement = document.getElementById(focusElementId);\r\n        if (focusElement) {\r\n            focusElement.removeAttribute('aria-invalid');\r\n        }\r\n    }\r\n    setMissingInfo(errorDivId, text, focusElementId) {\r\n        var _a, _b;\r\n        let element = document.getElementById(errorDivId);\r\n        if (!element)\r\n            return;\r\n        element.innerHTML = text;\r\n        if (text == '') {\r\n            element.style.display = 'none';\r\n        }\r\n        else {\r\n            element.style.display = 'block';\r\n            if (focusElementId) {\r\n                (_a = document.getElementById(focusElementId)) === null || _a === void 0 ? void 0 : _a.focus();\r\n                (_b = document.getElementById(focusElementId)) === null || _b === void 0 ? void 0 : _b.setAttribute('aria-invalid', 'true');\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycContact.ts\n\r\n\r\n\r\nclass KycContact extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n        this.usTaxResidence = false;\r\n    }\r\n    render(edit = false) {\r\n        let template = Handlebars.compile(Kyc_KycContact);\r\n        return template({ edit: edit, countries: CountryHelper.Countries });\r\n    }\r\n    show() {\r\n        this.showFieldset('.kycContact', 'Contact information');\r\n    }\r\n    bindEvents() {\r\n        this.bind('#country_of_tax_residence', 'change', (evt) => {\r\n            var _a, _b;\r\n            let input = evt.target;\r\n            this.usTaxResidence = (input.value.toUpperCase() == 'USA');\r\n            if (this.usTaxResidence) {\r\n                (_a = document.getElementById('state_div')) === null || _a === void 0 ? void 0 : _a.classList.remove('hidden');\r\n                this.kycForm.setSteps(5);\r\n                this.setRequired('state');\r\n            }\r\n            else {\r\n                this.kycForm.setSteps(6);\r\n                this.removeRequired('state');\r\n                (_b = document.getElementById('state_div')) === null || _b === void 0 ? void 0 : _b.classList.add('hidden');\r\n            }\r\n        });\r\n        let showIdentityButton = document.getElementById('contact_next');\r\n        if (showIdentityButton) {\r\n            showIdentityButton.addEventListener('click', (evt) => {\r\n                if (!this.validateRequiredFields('.kycContact'))\r\n                    return;\r\n                this.kycForm.kycIdentity.show();\r\n            });\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycIdentity.html\n// Module\nvar KycIdentity_code = \"<fieldset class=\\\"kycIdentity hidden\\\" data-form=\\\"1\\\">\\r\\n    <div>\\r\\n        <label for=\\\"given_name\\\">Legal First name</label>\\r\\n        <input required id=\\\"given_name\\\" name=\\\"given_name\\\"\\r\\n               placeholder=\\\"Ron\\\"\\r\\n               value=\\\"\\\" autocomplete=\\\"given-name\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"middle_name\\\">Legal Middle name</label>\\r\\n        <input id=\\\"middle_name\\\" name=\\\"middle_name\\\"\\r\\n               placeholder=\\\"\\\"\\r\\n               value=\\\"\\\" autocomplete=\\\"additional-name\\\">\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"family_name\\\">Legal Last name</label>\\r\\n        <input required id=\\\"family_name\\\" name=\\\"family_name\\\"\\r\\n               placeholder=\\\"Swanson\\\"\\r\\n               value=\\\"\\\" autocomplete=\\\"family-name\\\">\\r\\n    </div>\\r\\n    {{#unless edit}}\\r\\n    <div>\\r\\n        <label for=\\\"date_of_birth\\\">Date of birth</label>\\r\\n        <input type=\\\"date\\\" required id=\\\"date_of_birth\\\" name=\\\"date_of_birth\\\"\\r\\n               placeholder=\\\"1978-11-24\\\" pattern=\\\"\\\\d{4}-\\\\d{2}-\\\\d{2}\\\" value=\\\"\\\" autocomplete=\\\"bday\\\">\\r\\n    </div>\\r\\n\\r\\n    <div id=\\\"citizen_of_usa_question\\\" class=\\\"hidden\\\">\\r\\n        <label for=\\\"citizen_yes\\\">Are you a citizen of the United States?</label>\\r\\n        <fieldset>\\r\\n            <label>\\r\\n                <input type=\\\"radio\\\" id=\\\"citizen_yes\\\"\\r\\n                       name=\\\"citizen\\\" value=\\\"1\\\"> Yes\\r\\n            </label>\\r\\n            <label>\\r\\n                <input type=\\\"radio\\\" id=\\\"citizen_no\\\"\\r\\n                       name=\\\"citizen\\\" value=\\\"0\\\"> No\\r\\n            </label>\\r\\n            <fieldset id=\\\"citizen_no_type_options\\\" class=\\\"hidden\\\">\\r\\n                <label>\\r\\n                    <input type=\\\"radio\\\" name=\\\"permanent_resident\\\" id=\\\"citizen_no_type_options_1\\\" value=\\\"1\\\"/> Green Card\\r\\n                    / Permanent Resident\\r\\n                </label>\\r\\n                <label><input type=\\\"radio\\\" name=\\\"permanent_resident\\\" id=\\\"citizen_no_type_options_2\\\" value=\\\"0\\\"/>\\r\\n                    Visa</label>\\r\\n            </fieldset>\\r\\n        </fieldset>\\r\\n    </div>\\r\\n    <div id=\\\"tax_id_type_options\\\">\\r\\n        <label for=\\\"tax_id_type\\\">Tax Id Type</label>\\r\\n        <select required id=\\\"tax_id_type\\\" name=\\\"tax_id_type\\\" placeholder=\\\"USA_SSN\\\">\\r\\n            <option value=\\\"USA_SSN\\\"></option>\\r\\n            <option value=\\\"ARG_AR_CUIT\\\">Argentina CUIT</option>\\r\\n            <option value=\\\"AUS_TFN\\\">Australian Tax File Number</option>\\r\\n            <option value=\\\"AUS_ABN\\\">Australian Business Number</option>\\r\\n            <option value=\\\"BOL_NIT\\\">Bolivia NIT</option>\\r\\n            <option value=\\\"BRA_CPF\\\">Brazil CPF</option>\\r\\n            <option value=\\\"CHL_RUT\\\">Chile RUT</option>\\r\\n            <option value=\\\"COL_NIT\\\">Colombia NIT</option>\\r\\n            <option value=\\\"CRI_NITE\\\">Costa Rica NITE</option>\\r\\n            <option value=\\\"DEU_TAX_ID\\\">Germany Tax ID (Identifikationsnummer)</option>\\r\\n            <option value=\\\"DOM_RNC\\\">Dominican Republic RNC</option>\\r\\n            <option value=\\\"ECU_RUC\\\">Ecuador RUC</option>\\r\\n            <option value=\\\"FRA_SPI\\\">France SPI (Reference Tax Number)</option>\\r\\n            <option value=\\\"GBR_UTR\\\">UK UTR (Unique Taxpayer Reference)</option>\\r\\n            <option value=\\\"GBR_NINO\\\">UK NINO (National Insurance Number)</option>\\r\\n            <option value=\\\"GTM_NIT\\\">Guatemala NIT</option>\\r\\n            <option value=\\\"HND_RTN\\\">Honduras RTN</option>\\r\\n            <option value=\\\"HUN_TIN\\\">Hungary TIN Number</option>\\r\\n            <option value=\\\"IDN_KTP\\\">Indonesia KTP</option>\\r\\n            <option value=\\\"IND_PAN\\\">India PAN Number</option>\\r\\n            <option value=\\\"ISR_TAX_ID\\\">Israel Tax ID (Teudat Zehut)</option>\\r\\n            <option value=\\\"ITA_TAX_ID\\\">Italy Tax ID (Codice Fiscale)</option>\\r\\n            <option value=\\\"JPN_TAX_ID\\\">Japan Tax ID (Koijin Bango)</option>\\r\\n            <option value=\\\"MEX_RFC\\\">Mexico RFC</option>\\r\\n            <option value=\\\"NIC_RUC\\\">Nicaragua RUC</option>\\r\\n            <option value=\\\"NLD_TIN\\\">Netherlands TIN Number</option>\\r\\n            <option value=\\\"PAN_RUC\\\">Panama RUC</option>\\r\\n            <option value=\\\"PER_RUC\\\">Peru RUC</option>\\r\\n            <option value=\\\"PRY_RUC\\\">Paraguay RUC</option>\\r\\n            <option value=\\\"SGP_NRIC\\\">Singapore NRIC</option>\\r\\n            <option value=\\\"SGP_FIN\\\">Singapore FIN</option>\\r\\n            <option value=\\\"SGP_ASGD\\\">Singapore ASGD</option>\\r\\n            <option value=\\\"SGP_ITR\\\">Singapore ITR</option>\\r\\n            <option value=\\\"SLV_NIT\\\">El Salvador NIT</option>\\r\\n            <option value=\\\"SWE_TAX_ID\\\">Sweden Tax ID (Personnummer)</option>\\r\\n            <option value=\\\"URY_RUT\\\">Uruguay RUT</option>\\r\\n            <option value=\\\"VEN_RIF\\\">Venezuela RIF</option>\\r\\n            <option value=\\\"NOT_SPECIFIED\\\">Other Tax IDs</option>\\r\\n        </select>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label id=\\\"tax_id_label\\\" for=\\\"tax_id\\\">Tax Id (SSN)</label>\\r\\n        <input required id=\\\"tax_id\\\" name=\\\"tax_id\\\"\\r\\n               placeholder=\\\"666-55-4321\\\"\\r\\n               value=\\\"\\\">\\r\\n    </div>\\r\\n    <div id=\\\"country_of_birth_option\\\">\\r\\n        <label for=\\\"country_of_birth\\\">Country of birth</label>\\r\\n        <select id=\\\"country_of_birth\\\" name=\\\"country_of_birth\\\">\\r\\n            {{#each countries}}\\r\\n            <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n            {{/each}}\\r\\n        </select>\\r\\n    </div>\\r\\n    <div id=\\\"country_of_citizenship_option\\\">\\r\\n        <label for=\\\"country_of_citizenship\\\">Country of citizenship</label>\\r\\n        <select required id=\\\"country_of_citizenship\\\" name=\\\"country_of_citizenship\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            {{#each countries}}\\r\\n            <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n            {{/each}}\\r\\n        </select>\\r\\n    </div>\\r\\n    <div id=\\\"visa_type_option\\\" class=\\\"hidden\\\">\\r\\n        <div>\\r\\n            <label for=\\\"visa_type\\\">Visa type - <a\\r\\n                    href=\\\"https://travel.state.gov/content/travel/en/us-visas/visa-information-resources/all-visa-categories.html\\\"\\r\\n                    target=\\\"_blank\\\">Visa\\r\\n                information</a></label>\\r\\n            <select id=\\\"visa_type\\\" name=\\\"visa_type\\\">\\r\\n                <option value=\\\"\\\"></option>\\r\\n                <option value=\\\"B1\\\" selected>USA Visa Category B-1</option>\\r\\n                <option value=\\\"B2\\\">USA Visa Category B-2</option>\\r\\n                <option value=\\\"DACA\\\">USA Visa Category DACA</option>\\r\\n                <option value=\\\"E1\\\">USA Visa Category E-1</option>\\r\\n                <option value=\\\"E2\\\">USA Visa Category E-2</option>\\r\\n                <option value=\\\"E3\\\">USA Visa Category E-3</option>\\r\\n                <option value=\\\"F1\\\">USA Visa Category F-1</option>\\r\\n                <option value=\\\"G4\\\">USA Visa Category G-4</option>\\r\\n                <option value=\\\"H1B\\\">USA Visa Category H-1B</option>\\r\\n                <option value=\\\"J1\\\">USA Visa Category J-1</option>\\r\\n                <option value=\\\"L1\\\">USA Visa Category L-1</option>\\r\\n                <option value=\\\"OTHER\\\">Any other USA Visa Category</option>\\r\\n                <option value=\\\"O1\\\">USA Visa Category O-1</option>\\r\\n                <option value=\\\"TN1\\\">USA Visa Category TN-1</option>\\r\\n            </select>\\r\\n        </div>\\r\\n        <div id=\\\"visa_expiration_date_option\\\">\\r\\n            <label for=\\\"visa_expiration_date\\\">Visa expiration date</label>\\r\\n            <input type=\\\"date\\\" id=\\\"visa_expiration_date\\\"\\r\\n                   name=\\\"visa_expiration_date\\\" placeholder=\\\"2028-05-01\\\" value=\\\"\\\">\\r\\n        </div>\\r\\n        <div id=\\\"date_of_departure_from_usa_option\\\">\\r\\n            <label for=\\\"date_of_departure_from_usa\\\">Date of departure from USA</label>\\r\\n            <input type=\\\"date\\\" id=\\\"date_of_departure_from_usa\\\"\\r\\n                   name=\\\"date_of_departure_from_usa\\\" placeholder=\\\"2028-05-01\\\" value=\\\"\\\">\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"annual_income\\\">Annual Household Income</label>\\r\\n        <div class=\\\"explain\\\">\\r\\n            Annual household income includes income from sources such as employment, alimony, social security,\\r\\n            investment income, etc.\\r\\n        </div>\\r\\n        <select name=\\\"annual_income\\\" id=\\\"annual_income\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            <option value=\\\"1\\\">0 - $20,000</option>\\r\\n            <option value=\\\"2\\\">$20,000 - $49,999</option>\\r\\n            <option value=\\\"3\\\">$50,000 - $99,999</option>\\r\\n            <option value=\\\"4\\\">$100,000 - $499,999</option>\\r\\n            <option value=\\\"5\\\">$500,000 - $999,999</option>\\r\\n            <option value=\\\"6\\\">$1,000,000 - $9,999,999</option>\\r\\n        </select>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"liquid_net_worth\\\">Liquid Assets</label>\\r\\n        <div class=\\\"explain\\\">Liquid assets is your net worth minus assets that cannot be\\r\\n            converted quickly and easily into cash, such as real estate, business equity,\\r\\n            personal property and automobiles, expected inheritances, assets earmarked for\\r\\n            other purposes, and investments or accounts subject to substantial penalties\\r\\n            if they were sold or if assets were withdrawn from them.\\r\\n        </div>\\r\\n        <select name=\\\"liquid_net_worth\\\" required id=\\\"liquid_net_worth\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            <option value=\\\"1\\\">0 - $20,000</option>\\r\\n            <option value=\\\"2\\\">$20,000 - $49,999</option>\\r\\n            <option value=\\\"3\\\">$50,000 - $99,999</option>\\r\\n            <option value=\\\"4\\\">$100,000 - $499,999</option>\\r\\n            <option value=\\\"5\\\">$500,000 - $999,999</option>\\r\\n            <option value=\\\"1\\\">$1,000,000 - $9,999,999</option>\\r\\n        </select>\\r\\n    </div>\\r\\n\\r\\n    <div>\\r\\n        <label for=\\\"funding_source\\\">Funding source</label>\\r\\n        <select required id=\\\"funding_source\\\" name=\\\"funding_source\\\"\\r\\n                multiple size=\\\"4\\\" aria-label=\\\"size 3 select\\\">\\r\\n            <option value=\\\"employment_income\\\">Employment income</option>\\r\\n            <option value=\\\"investments\\\">Investments</option>\\r\\n            <option value=\\\"inheritance\\\">Inheritance</option>\\r\\n            <option value=\\\"business_income\\\">Business income</option>\\r\\n            <option value=\\\"savings\\\">Savings</option>\\r\\n            <option value=\\\"family\\\">Family</option>\\r\\n        </select>\\r\\n    </div>\\r\\n    {{/unless}}\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"identity_prev\\\">Previous: Contact</button>\\r\\n        <button type=\\\"button\\\" id=\\\"identity_next\\\">Next: Trusted contacts</button>\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycIdentity = (KycIdentity_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycIdentity.ts\n\r\n\r\n\r\n\r\nclass KycIdentity extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n        this.edit = false;\r\n    }\r\n    render(edit = false) {\r\n        this.edit = edit;\r\n        let template = Handlebars.compile(Kyc_KycIdentity);\r\n        return template({ edit: edit, countries: CountryHelper.Countries });\r\n    }\r\n    show() {\r\n        if (this.kycForm.kycContact.usTaxResidence) {\r\n            this.showElement('citizen_of_usa_question');\r\n            this.hideElement('tax_id_type_options');\r\n            this.setLabel('tax_id_label', 'SSN');\r\n        }\r\n        else {\r\n            this.hideElement('citizen_of_usa_question');\r\n            this.setLabel('tax_id_label', 'National Tax Id (SSN)');\r\n            this.showElement('tax_id_type_options');\r\n        }\r\n        this.showFieldset('.kycIdentity', 'Identity');\r\n        this.showElement('country_of_citizenship_option');\r\n        let country_of_citizenship = document.getElementById('country_of_citizenship');\r\n        if (country_of_citizenship) {\r\n            country_of_citizenship.options[1].disabled = false;\r\n        }\r\n    }\r\n    bindEvents() {\r\n        this.bind('#citizen_yes', 'click', (evt) => {\r\n            let input = evt.target;\r\n            if (input.checked) {\r\n                let taxIdType = document.getElementById('tax_id_type');\r\n                if (taxIdType)\r\n                    taxIdType.value = 'USA_SSN';\r\n                let country_of_citizenship = document.getElementById('country_of_citizenship');\r\n                country_of_citizenship.options[1].disabled = false;\r\n                country_of_citizenship.value = 'USA';\r\n                this.hideElement('citizen_no_type_options');\r\n                this.hideElement('visa_type_option');\r\n                this.hideElement('country_of_citizenship_option');\r\n                this.removeRequired('country_of_birth');\r\n                this.removeRequired('visa_type');\r\n                this.removeRequired('visa_expiration_date');\r\n                this.removeRequired('date_of_departure_from_usa');\r\n                document.getElementById('tax_id_label').innerHTML = 'SSN';\r\n                this.hideCitizenErrorMessage();\r\n            }\r\n        });\r\n        this.bind('#citizen_no', 'click', (evt) => {\r\n            let input = evt.target;\r\n            if (input.checked) {\r\n                this.showElement('citizen_no_type_options');\r\n                this.showElement('country_of_citizenship_option');\r\n                this.setRequired('country_of_birth');\r\n                document.getElementById('tax_id_label').innerHTML = 'SSN';\r\n                let country_of_citizenship = document.getElementById('country_of_citizenship');\r\n                country_of_citizenship.options[0].selected = true;\r\n                country_of_citizenship.options[1].disabled = true;\r\n                this.hideCitizenErrorMessage();\r\n            }\r\n        });\r\n        this.bind('#citizen_no_type_options_1', 'click', (evt) => {\r\n            let input = evt.target;\r\n            if (input.checked) {\r\n                this.showElement('country_of_citizenship_option');\r\n                this.hideElement('visa_type_option');\r\n                this.setRequired('country_of_birth');\r\n                this.removeRequired('visa_type');\r\n                this.removeRequired('visa_expiration_date');\r\n                this.removeRequired('date_of_departure_from_usa');\r\n            }\r\n        });\r\n        this.bind('#citizen_no_type_options_2', 'click', (evt) => {\r\n            let input = evt.target;\r\n            if (input.checked) {\r\n                this.showElement('visa_type_option');\r\n                this.showElement('country_of_citizenship_option');\r\n                this.setRequired('country_of_birth');\r\n                this.setRequired('country_of_citizenship');\r\n                this.setRequired('visa_type');\r\n                this.setRequired('visa_expiration_date');\r\n                this.setRequired('date_of_departure_from_usa');\r\n            }\r\n        });\r\n        this.bind('#visa_type', 'change', (evt) => {\r\n            let input = evt.target;\r\n            if (input.value == 'B1' || input.value == 'B2') {\r\n                this.showElement('date_of_departure_from_usa_option');\r\n            }\r\n            else {\r\n                this.hideElement('date_of_departure_from_usa_option');\r\n            }\r\n        });\r\n        this.bindButtons();\r\n    }\r\n    hideCitizenErrorMessage() {\r\n        document.getElementById('citizen_yes').removeAttribute('aria-invalid');\r\n        let errorMessage = document.getElementById('input_error_citizen_yes');\r\n        if (errorMessage)\r\n            errorMessage.remove();\r\n    }\r\n    bindButtons() {\r\n        let showContactButton = document.getElementById('identity_prev');\r\n        showContactButton === null || showContactButton === void 0 ? void 0 : showContactButton.addEventListener('click', (evt) => {\r\n            this.kycForm.kycContact.show();\r\n        });\r\n        let showDisclosuresButton = document.getElementById('identity_next');\r\n        showDisclosuresButton === null || showDisclosuresButton === void 0 ? void 0 : showDisclosuresButton.addEventListener('click', (evt) => {\r\n            if (!this.validateInputs())\r\n                return;\r\n            if (!this.validateRequiredFields('.kycIdentity'))\r\n                return;\r\n            this.kycForm.kycTrustedContact.show();\r\n        });\r\n    }\r\n    validateInputs() {\r\n        if (this.edit)\r\n            return true;\r\n        let citizen_yes = document.getElementById('citizen_yes');\r\n        let citizen_no = document.getElementById('citizen_no');\r\n        if (!this.kycForm.kycContact.usTaxResidence) {\r\n            citizen_yes.checked = false;\r\n            citizen_no.checked = false;\r\n            return true;\r\n        }\r\n        if (!citizen_yes.checked && !citizen_no.checked) {\r\n            let obj = {\r\n                message: 'You must select either option',\r\n                inputName: 'citizen_yes',\r\n                labelText: document.querySelector('label[for=citizen_yes]').innerHTML\r\n            };\r\n            let kycValidationError = new KycValidatorError(obj, this.kycForm);\r\n            kycValidationError.handle();\r\n            return false;\r\n        }\r\n        let greenCardOption = document.getElementById('citizen_no_type_options_1');\r\n        let visaOption = document.getElementById('citizen_no_type_options_2');\r\n        if (citizen_no.checked && !greenCardOption.checked && !visaOption.checked) {\r\n            let obj = {\r\n                message: 'You must select either option, \"Green Card / Permanent Resident\" or \"Visa\"',\r\n                inputName: 'citizen_no',\r\n                labelText: ''\r\n            };\r\n            let kycValidationError = new KycValidatorError(obj, this.kycForm);\r\n            kycValidationError.handle();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycDisclosures.html\n// Module\nvar KycDisclosures_code = \"<fieldset class=\\\"kycDisclosures hidden\\\" data-form=\\\"1\\\">\\r\\n    {{#unless edit}}\\r\\n    <div>\\r\\n        <label for=\\\"employment_status\\\">Employment status</label>\\r\\n        <select id=\\\"employment_status\\\" required name=\\\"employment_status\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            <option value=\\\"employed\\\">Employed</option>\\r\\n            <option value=\\\"unemployed\\\">Unemployed</option>\\r\\n            <option value=\\\"retired\\\">Retired</option>\\r\\n            <option value=\\\"student\\\">Student</option>\\r\\n        </select>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"employer_name\\\">Employer name</label>\\r\\n        <input name=\\\"employer_name\\\" id=\\\"employer_name\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"employer_address\\\">Employer address</label>\\r\\n        <input name=\\\"employer_address\\\" id=\\\"employer_address\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"employment_position\\\">Occupation / Job title</label>\\r\\n        <input name=\\\"employment_position\\\" id=\\\"employment_position\\\" autocomplete=\\\"organization-title\\\"/>\\r\\n    </div>\\r\\n    {{/unless}}\\r\\n    <div class=\\\"disclosure_selections\\\">\\r\\n        Do any of the following apply to you or a member of your immediate family?\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"is_affiliated_exchange_or_finra\\\">\\r\\n                    <input type=\\\"checkbox\\\" id=\\\"is_affiliated_exchange_or_finra\\\" name=\\\"is_affiliated_exchange_or_finra\\\"\\r\\n                           role=\\\"switch\\\">\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                Affiliated or work with a US registered broker-dealer or\\r\\n                FINRA.\\r\\n                <small class=\\\"explain\\\">Are you or an immediate family member affiliated with or employed by a stock\\r\\n                    exchange, regulatory body, member firm of an exchange, FINRA or a municipal securities\\r\\n                    broker-dealer?</small>\\r\\n\\r\\n                <div id=\\\"is_affiliated_exchange_or_finra_extra\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"is_control_person\\\">\\r\\n                    <input type=\\\"checkbox\\\" id=\\\"is_control_person\\\" name=\\\"is_control_person\\\" role=\\\"switch\\\">\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n\\r\\n                Senior executive at or a 10% or greater shareholder of a publicly traded company.\\r\\n                <small class=\\\"explain\\\">Are you or an immediate family member an officer or 10% or greater shareholder of\\r\\n                    a publicly traded company, subject to the US Securities Exchange Act 1934?</small>\\r\\n                <div id=\\\"is_control_person_extra\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"is_politically_exposed\\\">\\r\\n                    <input type=\\\"checkbox\\\" id=\\\"is_politically_exposed\\\" name=\\\"is_politically_exposed\\\" role=\\\"switch\\\">\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                I am a senior political figure.\\r\\n                <small class=\\\"explain\\\">Are you currently or formerly a Politically Exposed Person or Public Official\\r\\n                    (PEP)? <a href=\\\"https://www.google.com/search?q=%E2%80%9CPolitically+Exposed+Person%E2%80%9D+(PEP)\\\"\\r\\n                              target=\\\"_blank\\\">What is PEP?</a> </a></small>\\r\\n                <div id=\\\"is_politically_exposed_extra\\\"></div>\\r\\n            </div>\\r\\n            </label>\\r\\n        </div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"immediate_family_exposed\\\">\\r\\n                    <input type=\\\"checkbox\\\" id=\\\"immediate_family_exposed\\\" name=\\\"immediate_family_exposed\\\" role=\\\"switch\\\">\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                I am a family member or relative of a senior political figure.\\r\\n                <small class=\\\"explain\\\">Are you an immediate family member currently or formerly a Politically Exposed\\r\\n                    Person or Public Official (PEP)? <a\\r\\n                            href=\\\"https://www.google.com/search?q=%E2%80%9CPolitically+Exposed+Person%E2%80%9D+(PEP)\\\"\\r\\n                            target=\\\"_blank\\\">What is PEP?</a></small>\\r\\n                <div id=\\\"immediate_family_exposed_extra\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"none_above\\\">\\r\\n                    <input type=\\\"checkbox\\\" id=\\\"none_above\\\" name=\\\"none_above\\\" role=\\\"switch\\\"></label>\\r\\n            </div>\\r\\n            <div>\\r\\n                None of the above apply to me or my family.\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"input_error\\\" id=\\\"none_above_error\\\"></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"disclosures_prev\\\">Previous: Trusted contact</button>\\r\\n        <button type=\\\"button\\\" id=\\\"disclosures_next\\\">Next: Agreements</button>\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycDisclosures = (KycDisclosures_code);\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycAffiliateOrControlled.html\n// Module\nvar KycAffiliateOrControlled_code = \"<fieldset id=\\\"affiliate_or_controlled\\\">\\r\\n    <div>You need to fill in the following information</div>\\r\\n    <div>\\r\\n        <label for=\\\"company_name\\\">Company name</label>\\r\\n        <input name=\\\"company_name\\\" required id=\\\"company_name\\\" autocomplete=\\\"organization\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"company_street_address\\\">Company street address</label>\\r\\n        <input name=\\\"company_street_address\\\" required id=\\\"company_street_address\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"company_city\\\">Company city</label>\\r\\n        <input name=\\\"company_city\\\" required id=\\\"company_city\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"company_state\\\">Company state</label>\\r\\n        <input name=\\\"company_state\\\" required id=\\\"company_state\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"company_country\\\">Company country</label>\\r\\n        <select required id=\\\"company_country\\\" required name=\\\"company_country\\\">\\r\\n            {{#each countries}}\\r\\n            <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n            {{/each}}\\r\\n        </select>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"company_compliance_email\\\">Company compliance officer email</label>\\r\\n        <input name=\\\"company_compliance_email\\\" required id=\\\"company_compliance_email\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <div class=\\\"explain\\\">\\r\\n            In accordance with applicable FINRA rules, user will need to obtain a letter written\\r\\n            and signed by a compliance officer on company letterhead explicitly granting permission for\\r\\n            the applicant to carry the account and explicitly stating whether or not the firm requires\\r\\n            access to duplicate account statements and/or trade confirmations.\\r\\n\\r\\n            If the firm would like online access your duplicate account statements and/or trade confirmations,\\r\\n            include in the letter the applicant's full name and the following information for the interested\\r\\n            party: First and last name, title, email address, telephone number.\\r\\n\\r\\n        </div>\\r\\n        {{{fileUpload \\\"account_approval_letter\\\" \\\"Account approval letter\\\"}}}\\r\\n\\r\\n    </div>\\r\\n</fieldset>\\r\\n\";\n// Exports\n/* harmony default export */ const Kyc_KycAffiliateOrControlled = (KycAffiliateOrControlled_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycAffiliateOrControlled.ts\n\r\n\r\n\r\nclass KycAffiliateOrControlled extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n    }\r\n    render() {\r\n        let kycAffiliateOrControlledTemplate = Handlebars.compile(Kyc_KycAffiliateOrControlled);\r\n        return kycAffiliateOrControlledTemplate({ countries: CountryHelper.Countries });\r\n    }\r\n    bindEvents() {\r\n        this.bindFileUploads();\r\n        let company_country = document.getElementById('company_country');\r\n        company_country === null || company_country === void 0 ? void 0 : company_country.addEventListener('change', (evt) => {\r\n            let select = evt.target;\r\n            if (select.value === 'USA') {\r\n                this.setRequired('company_state');\r\n            }\r\n            else {\r\n                this.removeRequired('company_state');\r\n            }\r\n        });\r\n    }\r\n    validate() {\r\n        let company_name = document.getElementById('company_name');\r\n        if (!company_name)\r\n            return true;\r\n        return this.validateRequiredFields('#affiliate_or_controlled');\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycImmediateFamily.html\n// Module\nvar KycImmediateFamily_code = \"<fieldset id=\\\"immediate_family\\\">\\r\\n    <div>Since you chose that your immediate family member, you need to fill in the following information</div>\\r\\n    <div>\\r\\n        <label for=\\\"disclosure_given_name\\\">Given name of political person</label>\\r\\n        <input name=\\\"disclosure_given_name\\\" id=\\\"disclosure_given_name\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"disclosure_family_name\\\">Family name of political person</label>\\r\\n        <input name=\\\"disclosure_family_name\\\" id=\\\"disclosure_family_name\\\"/>\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycImmediateFamily = (KycImmediateFamily_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycImmediateFamily.ts\n\r\n\r\nclass KycImmediateFamily extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n    }\r\n    render() {\r\n        let kycImmediateFamilyTemplate = Handlebars.compile(Kyc_KycImmediateFamily);\r\n        return kycImmediateFamilyTemplate({});\r\n    }\r\n    bindEvents() {\r\n    }\r\n    validate() {\r\n        let disclosure_given_name = document.getElementById('disclosure_given_name');\r\n        if (!disclosure_given_name)\r\n            return true;\r\n        return this.validateRequiredFields('#immediate_family');\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycDisclosures.ts\n\r\n\r\n\r\n\r\nclass KycDisclosures extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n        this.kycAffiliatedOrControlled = new KycAffiliateOrControlled(this.kycForm);\r\n        this.kycImmediateFamily = new KycImmediateFamily(this.kycForm);\r\n    }\r\n    render(edit = false) {\r\n        let template = Handlebars.compile(Kyc_KycDisclosures);\r\n        return template({ edit: edit });\r\n    }\r\n    show() {\r\n        if (this.kycForm.steps == 5) {\r\n            document.getElementById('disclosures_next').innerText = 'Next: Agreements';\r\n        }\r\n        else {\r\n            document.getElementById('disclosures_next').innerText = 'Next: Upload documents';\r\n        }\r\n        this.showFieldset('.kycDisclosures', 'Disclosures');\r\n    }\r\n    bindEvents() {\r\n        let is_affiliated_exchange_or_finra = document.getElementById('is_affiliated_exchange_or_finra');\r\n        is_affiliated_exchange_or_finra === null || is_affiliated_exchange_or_finra === void 0 ? void 0 : is_affiliated_exchange_or_finra.addEventListener('click', (evt) => {\r\n            this.loadAffiliatedOrControlComponent('is_affiliated_exchange_or_finra');\r\n        });\r\n        let is_control_person = document.getElementById('is_control_person');\r\n        is_control_person === null || is_control_person === void 0 ? void 0 : is_control_person.addEventListener('click', (evt) => {\r\n            this.loadAffiliatedOrControlComponent('is_control_person');\r\n        });\r\n        let immediate_family_exposed = document.getElementById('immediate_family_exposed');\r\n        immediate_family_exposed === null || immediate_family_exposed === void 0 ? void 0 : immediate_family_exposed.addEventListener('click', (evt) => {\r\n            this.loadPep('immediate_family_exposed');\r\n        });\r\n        let is_politically_exposed = document.getElementById('is_politically_exposed');\r\n        is_politically_exposed === null || is_politically_exposed === void 0 ? void 0 : is_politically_exposed.addEventListener('click', (evt) => {\r\n            this.uncheck('immediate_family_exposed');\r\n        });\r\n        let none_above = document.getElementById('none_above');\r\n        none_above === null || none_above === void 0 ? void 0 : none_above.addEventListener('click', (evt) => {\r\n            this.removeMissingInfo('none_above_error');\r\n            none_above.removeAttribute('aria-invalid');\r\n        });\r\n        let prev = document.getElementById('disclosures_prev');\r\n        prev === null || prev === void 0 ? void 0 : prev.addEventListener('click', (evt) => {\r\n            this.kycForm.kycTrustedContact.show();\r\n        });\r\n        let next = document.getElementById('disclosures_next');\r\n        next === null || next === void 0 ? void 0 : next.addEventListener('click', (evt) => {\r\n            if (!this.validateFields())\r\n                return;\r\n            if (this.kycForm.steps == 5) {\r\n                this.kycForm.kycAccountAgreement.show();\r\n            }\r\n            else {\r\n                this.kycForm.kycUpload.show();\r\n            }\r\n        });\r\n    }\r\n    loadAffiliatedOrControlComponent(elementId) {\r\n        if (elementId == 'is_affiliated_exchange_or_finra') {\r\n            this.uncheck('is_control_person');\r\n        }\r\n        else {\r\n            this.uncheck('is_affiliated_exchange_or_finra');\r\n        }\r\n        let element = document.getElementById(elementId);\r\n        let extra = document.getElementById(elementId + '_extra');\r\n        if (!extra)\r\n            return;\r\n        if (element.checked) {\r\n            extra.innerHTML = this.kycAffiliatedOrControlled.render();\r\n            this.kycAffiliatedOrControlled.bindEvents();\r\n        }\r\n        else {\r\n            extra.innerHTML = '';\r\n        }\r\n    }\r\n    loadPep(elementId) {\r\n        if (elementId == 'immediate_family_exposed') {\r\n            this.uncheck('is_politically_exposed');\r\n        }\r\n        else {\r\n            this.uncheck('immediate_family_exposed');\r\n        }\r\n        let element = document.getElementById(elementId);\r\n        let extra = document.getElementById(elementId + '_extra');\r\n        if (!extra)\r\n            return;\r\n        if (element.checked) {\r\n            extra.innerHTML = this.kycImmediateFamily.render();\r\n            this.kycImmediateFamily.bindEvents();\r\n        }\r\n        else {\r\n            extra.innerHTML = '';\r\n        }\r\n    }\r\n    uncheck(elementId) {\r\n        let element = document.getElementById(elementId);\r\n        element.checked = false;\r\n        let extra = document.getElementById(elementId + '_extra');\r\n        extra.innerHTML = '';\r\n    }\r\n    validateFields() {\r\n        if (!this.validateRequiredFields('.kycDisclosures'))\r\n            return false;\r\n        if (!this.kycImmediateFamily.validate())\r\n            return false;\r\n        if (!this.kycAffiliatedOrControlled.validate())\r\n            return false;\r\n        let is_affiliated_exchange_or_finra = document.getElementById('is_affiliated_exchange_or_finra');\r\n        let is_control_person = document.getElementById('is_control_person');\r\n        let is_politically_exposed = document.getElementById('is_politically_exposed');\r\n        let immediate_family_exposed = document.getElementById('immediate_family_exposed');\r\n        let none_above = document.getElementById('none_above');\r\n        if (!none_above.checked && !is_affiliated_exchange_or_finra.checked && !is_control_person.checked\r\n            && !is_politically_exposed.checked && !immediate_family_exposed.checked) {\r\n            this.setMissingInfo('none_above_error', 'You must select, \"None of the above apply to me or my family.\" if nothing is selected', 'none_above');\r\n            return false;\r\n        }\r\n        if (none_above.checked && (is_affiliated_exchange_or_finra.checked || is_control_person.checked\r\n            || is_politically_exposed.checked || immediate_family_exposed.checked)) {\r\n            this.setMissingInfo('none_above_error', 'You cannot have \"None of the above apply to me or my family.\" selected and other options selected. Please select only one', 'none_above');\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycAccountAgreement.html\n// Module\nvar KycAccountAgreement_code = \"<fieldset class=\\\"kycAccountAgreement hidden\\\" data-form=\\\"1\\\">\\r\\n    <div class=\\\"kycAccountAgreementGrid\\\">\\r\\n        <div id=\\\"account_agreement_error\\\" class=\\\"input_error\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"account_agreement\\\">\\r\\n                    <input required type=\\\"checkbox\\\" name=\\\"account_agreement\\\" id=\\\"account_agreement\\\" value=\\\"1\\\"/>\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                <label for=\\\"account_agreement\\\">\\r\\n                    I agree to <a href=\\\"https://files.alpaca.markets/disclosures/library/AcctAppMarginAndCustAgmt.pdf\\\"\\r\\n                                  target=\\\"_blank\\\">Alpaca Customer Agreement</a>\\r\\n                </label>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div id=\\\"customer_agreement_error\\\" class=\\\"input_error\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"customer_agreement\\\">\\r\\n                    <input required type=\\\"checkbox\\\" name=\\\"customer_agreement\\\" id=\\\"customer_agreement\\\" value=\\\"1\\\"/>\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                <label for=\\\"customer_agreement\\\">\\r\\n                    Customer Agreement Acknowledgement</label>\\r\\n                <div class=\\\"explain\\\">\\r\\n                    I have read, understood, and agree to be bound by Alpaca Securities LLC and Liminal.market Inc.\\r\\n                    account\\r\\n                    terms,\\r\\n                    and all other terms, disclosures and disclaimers applicable to me, as referenced in the Alpaca\\r\\n                    Customer\\r\\n                    Agreement.\\r\\n                    I also acknowledge that the Alpaca Customer Agreement contains a pre-dispute arbitration clause\\r\\n                    in\\r\\n                    Section\\r\\n                    43.\\r\\n                </div>\\r\\n\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <div id=\\\"digital_signature_error\\\" class=\\\"input_error\\\"></div>\\r\\n        <div class=\\\"grid\\\">\\r\\n            <div>\\r\\n                <label for=\\\"digital_signature\\\">\\r\\n                    <input required type=\\\"checkbox\\\" name=\\\"digital_signature\\\" id=\\\"digital_signature\\\" value=\\\"1\\\"/>\\r\\n                </label>\\r\\n            </div>\\r\\n            <div>\\r\\n                <label for=\\\"digital_signature\\\">\\r\\n                    Digital Signature Acknowledgement</label>\\r\\n                <div class=\\\"explain\\\">\\r\\n                    I understand I am signing this agreement electronically,\\r\\n                    and that my electronic signature will have the same effect as physically signing and returning\\r\\n                    the\\r\\n                    Application Agreement.\\r\\n                </div>\\r\\n\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"grid hidden\\\" id=\\\"w8disclosure_div\\\">\\r\\n            <div>\\r\\n                <label for=\\\"w8disclosure\\\">\\r\\n                    <input required type=\\\"checkbox\\\" name=\\\"w8disclosure\\\" id=\\\"w8disclosure\\\" value=\\\"1\\\"/>\\r\\n                </label>\\r\\n            </div>\\r\\n            <div><label for=\\\"w8disclosure\\\">\\r\\n                I certify that I am not a US citizen, US resident alien or other US person for US tax purposes,\\r\\n                and I am submitting the applicable Form W-8 BEN with this form to certify my foreign status and,\\r\\n                if applicable, claim tax treaty benefits. </label>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"account_agreement_prev\\\">Previous: Upload documents</button>\\r\\n        <button type=\\\"submit\\\" id=\\\"submitKYC\\\">Confirm identity</button>\\r\\n    </div>\\r\\n    <div class=\\\"alert alert-danger\\\" id=\\\"kycError\\\" role=\\\"alert\\\"></div>\\r\\n</fieldset>\\r\\n\";\n// Exports\n/* harmony default export */ const Kyc_KycAccountAgreement = (KycAccountAgreement_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycAccountAgreement.ts\nvar KycAccountAgreement_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass KycAccountAgreement extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n    }\r\n    render(edit = false) {\r\n        let template = Handlebars.compile(Kyc_KycAccountAgreement);\r\n        return template({ edit: edit });\r\n    }\r\n    show() {\r\n        var _a, _b;\r\n        this.showFieldset('.kycAccountAgreement', 'Agreements');\r\n        if (this.kycForm.steps == 5) {\r\n            document.getElementById('account_agreement_prev').innerText = 'Previous: Disclosure';\r\n        }\r\n        else {\r\n            document.getElementById('account_agreement_prev').innerText = 'Previous: Upload documents';\r\n        }\r\n        if (this.kycForm.kycContact.usTaxResidence) {\r\n            (_a = document.getElementById('w8disclosure_div')) === null || _a === void 0 ? void 0 : _a.classList.add('hidden');\r\n        }\r\n        else {\r\n            (_b = document.getElementById('w8disclosure_div')) === null || _b === void 0 ? void 0 : _b.classList.remove('hidden');\r\n        }\r\n    }\r\n    bindEvents() {\r\n        let account_agreement_prev = document.getElementById('account_agreement_prev');\r\n        account_agreement_prev === null || account_agreement_prev === void 0 ? void 0 : account_agreement_prev.addEventListener('click', (evt) => {\r\n            if (this.kycForm.steps == 5) {\r\n                this.kycForm.kycDisclosures.show();\r\n            }\r\n            else {\r\n                this.kycForm.kycUpload.show();\r\n            }\r\n        });\r\n        this.bindSubmitKyc();\r\n    }\r\n    bindSubmitKyc(edit = false) {\r\n        let submitKYC = document.getElementById('submitKYC');\r\n        if (!submitKYC)\r\n            return;\r\n        submitKYC.addEventListener('click', (evt) => KycAccountAgreement_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            if (!edit && !this.validate())\r\n                return;\r\n            let account_agreement_prev = document.getElementById('account_agreement_prev');\r\n            //if (account_agreement_prev) account_agreement_prev.classList.add('hidden');\r\n            let liminal_market_modal_close = document.getElementById('liminal_market_modal_close');\r\n            // if (liminal_market_modal_close) liminal_market_modal_close.style.display = 'none';\r\n            let submitBtn = evt.target;\r\n            LoadingHelper.setLoading(submitBtn);\r\n            let params = FormHelper.getParams('#kyc_wizard_form');\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            params.chainId = networkInfo.ChainId;\r\n            let kycService = new KYCService(Moralis);\r\n            let result = yield kycService.saveKYCInfo(params)\r\n                .catch((reason) => {\r\n                if (account_agreement_prev)\r\n                    account_agreement_prev.classList.remove('hidden');\r\n                LoadingHelper.removeLoading();\r\n                if (reason.message) {\r\n                    let kycError = new KycValidatorError(reason.message, this.kycForm);\r\n                    kycError.handle();\r\n                }\r\n                else {\r\n                    console.log(reason);\r\n                }\r\n            });\r\n            if (result) {\r\n                this.kycForm.kycWaiting.show();\r\n                ExecuteTradeButton.Instance.renderButton();\r\n            }\r\n            else {\r\n                if (account_agreement_prev)\r\n                    account_agreement_prev.classList.remove('hidden');\r\n                LoadingHelper.removeLoading();\r\n            }\r\n        }));\r\n    }\r\n    validate() {\r\n        let account_agreement = document.getElementById('account_agreement');\r\n        if (!(account_agreement === null || account_agreement === void 0 ? void 0 : account_agreement.checked)) {\r\n            this.setMissingInfo('account_agreement_error', 'You need to agree to agreements', 'account_agreement');\r\n            return false;\r\n        }\r\n        else {\r\n            this.removeMissingInfo('account_agreement_error', 'account_agreement');\r\n        }\r\n        let customer_agreement = document.getElementById('customer_agreement');\r\n        if (!(customer_agreement === null || customer_agreement === void 0 ? void 0 : customer_agreement.checked)) {\r\n            this.setMissingInfo('customer_agreement_error', 'You need to agree to customer agrement', 'customer_agreement');\r\n            return false;\r\n        }\r\n        else {\r\n            this.removeMissingInfo('customer_agreement_error', 'customer_agreement');\r\n        }\r\n        let digital_signature = document.getElementById('digital_signature');\r\n        if (!(digital_signature === null || digital_signature === void 0 ? void 0 : digital_signature.checked)) {\r\n            this.setMissingInfo('digital_signature_error', 'You need to sign', 'digital_signature');\r\n            return false;\r\n        }\r\n        else {\r\n            this.removeMissingInfo('digital_signature_error', 'digital_signature');\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycTrustedContact.html\n// Module\nvar KycTrustedContact_code = \"<fieldset class=\\\"kycTrustedContact hidden\\\" data-form=\\\"1\\\">\\r\\n    <div class=\\\"explain\\\">\\r\\n        A trusted contact is a person you authorize your financial firm to contact in limited circumstances,\\r\\n        such as if there is a concern about activity in your account and they have been unable to get in touch with you.\\r\\n        <br/><br/>\\r\\n        A trusted contact may be a family member, attorney, accountant or another third-party who you believe would\\r\\n        respect your privacy and know how to handle the responsibility.\\r\\n        The trusted person should be 18 years old or older.\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_first_name\\\">Legal first name of trusted contact</label>\\r\\n        <input id=\\\"trusted_first_name\\\" name=\\\"trusted_first_name\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_last_name\\\">Legal last name of trusted contact</label>\\r\\n        <input id=\\\"trusted_last_name\\\" name=\\\"trusted_last_name\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        If you fill in name, you are required to fill in one of the following, email, phone or address\\r\\n    </div>\\r\\n    <div class=\\\"input_error\\\" id=\\\"trusted_contact_missing_info\\\"></div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_email\\\">Email of trusted contact</label>\\r\\n        <input id=\\\"trusted_email\\\" type=\\\"email\\\" name=\\\"trusted_email\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_phone\\\">Phone of trusted contact</label>\\r\\n        <input id=\\\"trusted_phone\\\" type=\\\"tel\\\" name=\\\"trusted_phone\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_street_address\\\">Address of trusted contact</label>\\r\\n        <input id=\\\"trusted_street_address\\\" name=\\\"trusted_street_address\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_city\\\">City of trusted contact</label>\\r\\n        <input id=\\\"trusted_city\\\" name=\\\"trusted_city\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_state\\\">State of trusted contact</label>\\r\\n        <input id=\\\"trusted_state\\\" name=\\\"trusted_state\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_postal_code\\\">Postal code of trusted contact</label>\\r\\n        <input id=\\\"trusted_postal_code\\\" name=\\\"trusted_postal_code\\\"/>\\r\\n    </div>\\r\\n    <div>\\r\\n        <label for=\\\"trusted_country\\\">Country of trusted contact</label>\\r\\n        <select required id=\\\"trusted_country\\\" required name=\\\"trusted_country\\\">\\r\\n            <option value=\\\"\\\"></option>\\r\\n            {{#each countries}}\\r\\n            <option value=\\\"{{code}}\\\">{{name}}</option>\\r\\n            {{/each}}\\r\\n        </select>\\r\\n    </div>\\r\\n    {{#unless edit}}\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"trustedContact_prev\\\">Previous: Identity</button>\\r\\n        <button type=\\\"button\\\" id=\\\"trustedContact_next\\\">Next: Disclosures</button>\\r\\n    </div>\\r\\n    {{/unless}}\\r\\n    {{#if edit}}\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"trustedContact_prev\\\">Previous: Identity</button>\\r\\n        <button type=\\\"submit\\\" id=\\\"submitKYC\\\">Update account</button>\\r\\n    </div>\\r\\n    <div class=\\\"alert alert-danger\\\" id=\\\"kycError\\\" role=\\\"alert\\\"></div>\\r\\n    {{/if}}\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycTrustedContact = (KycTrustedContact_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycTrustedContact.ts\n\r\n\r\n\r\n\r\n\r\nclass KycTrustedContact extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n        this.edit = false;\r\n    }\r\n    render(edit = false) {\r\n        this.edit = edit;\r\n        let template = Handlebars.compile(Kyc_KycTrustedContact);\r\n        return template({ edit: edit, countries: CountryHelper.Countries });\r\n    }\r\n    show() {\r\n        this.showFieldset('.kycTrustedContact', 'Trusted contact');\r\n    }\r\n    bindEvents() {\r\n        let showPrev = document.getElementById('trustedContact_prev');\r\n        showPrev === null || showPrev === void 0 ? void 0 : showPrev.addEventListener('click', (evt) => {\r\n            this.kycForm.kycIdentity.show();\r\n        });\r\n        let showNext = document.getElementById('trustedContact_next');\r\n        showNext === null || showNext === void 0 ? void 0 : showNext.addEventListener('click', (evt) => {\r\n            if (!this.validate())\r\n                return;\r\n            this.kycForm.kycDisclosures.show();\r\n        });\r\n        if (this.edit) {\r\n            let kycAccount = new KycAccountAgreement(this.kycForm);\r\n            if (!this.validate())\r\n                return;\r\n            kycAccount.bindSubmitKyc(this.edit);\r\n        }\r\n    }\r\n    validate() {\r\n        this.setMissingInfo('trusted_contact_missing_info', '');\r\n        let trusted_first_name = document.getElementById('trusted_first_name');\r\n        if (trusted_first_name && !StringHelper.isNullOrEmpty(trusted_first_name.value)) {\r\n            let trusted_email = document.getElementById('trusted_email');\r\n            let trusted_phone = document.getElementById('trusted_phone');\r\n            let trusted_street_address = document.getElementById('trusted_street_address');\r\n            let trusted_city = document.getElementById('trusted_city');\r\n            let trusted_postal_code = document.getElementById('trusted_postal_code');\r\n            let trusted_country = document.getElementById('trusted_country');\r\n            if (StringHelper.isNullOrEmpty(trusted_email.value) && StringHelper.isNullOrEmpty(trusted_phone.value)\r\n                && StringHelper.isNullOrEmpty(trusted_street_address.value)) {\r\n                this.setMissingInfo('trusted_contact_missing_info', 'You need to fill in either email, phone or address');\r\n                return;\r\n            }\r\n            if (!StringHelper.isNullOrEmpty(trusted_email.value) && trusted_email.value.indexOf('@') == -1) {\r\n                this.setMissingInfo('trusted_contact_missing_info', 'Email is not valid. It must contain @ sign');\r\n                return;\r\n            }\r\n            if (!StringHelper.isNullOrEmpty(trusted_street_address.value) &&\r\n                (StringHelper.isNullOrEmpty(trusted_city.value) ||\r\n                    StringHelper.isNullOrEmpty(trusted_postal_code.value) ||\r\n                    StringHelper.isNullOrEmpty(trusted_country.value))) {\r\n                this.setMissingInfo('trusted_contact_missing_info', 'You need fill inn into City, Postal code and Country when filling the street address');\r\n                return;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycUpload.html\n// Module\nvar KycUpload_code = \"<fieldset class=\\\"kycUpload hidden\\\" data-form=\\\"1\\\">\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification\\\" \\\"Photo ID Front (Front of passport)\\\"}}}\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"identity_verification_2\\\" \\\"Photo ID Back (Passport picture of ID) \\\"}}}\\r\\n    </div>\\r\\n    <div class=\\\"grid\\\">\\r\\n        {{{fileUpload \\\"address_verification\\\" \\\"Picture of address verification\\\"}}}\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"grid buttons\\\">\\r\\n        <button type=\\\"button\\\" id=\\\"upload_prev\\\">Previous: Disclosures</button>\\r\\n        <button type=\\\"button\\\" id=\\\"upload_next\\\">Next: Agreements</button>\\r\\n    </div>\\r\\n</fieldset>\";\n// Exports\n/* harmony default export */ const Kyc_KycUpload = (KycUpload_code);\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycUpload.ts\n\r\n\r\nclass KycUpload extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n    }\r\n    render() {\r\n        let template = Handlebars.compile(Kyc_KycUpload);\r\n        return template({});\r\n    }\r\n    show() {\r\n        this.showFieldset('.kycUpload', 'Upload documents');\r\n    }\r\n    bindEvents() {\r\n        this.bindFileUploads();\r\n        let upload_prev = document.getElementById('upload_prev');\r\n        upload_prev === null || upload_prev === void 0 ? void 0 : upload_prev.addEventListener('click', (evt) => {\r\n            this.kycForm.kycDisclosures.show();\r\n        });\r\n        let upload_next = document.getElementById('upload_next');\r\n        upload_next === null || upload_next === void 0 ? void 0 : upload_next.addEventListener('click', (evt) => {\r\n            if (!this.validateRequiredFields('.kycUpload'))\r\n                return;\r\n            this.kycForm.kycAccountAgreement.show();\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycWaiting.ts\nvar KycWaiting_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass KycWaiting extends KycBase {\r\n    constructor(kycForm) {\r\n        super(kycForm);\r\n    }\r\n    show() {\r\n        var _a, _b;\r\n        (_a = document.getElementById('kyc_reg')) === null || _a === void 0 ? void 0 : _a.classList.add('hidden');\r\n        (_b = document.getElementById('waiting_for_kyc_reg')) === null || _b === void 0 ? void 0 : _b.classList.remove('hidden');\r\n        document.querySelector('#liminal_market_modal_div > article > header > span').innerHTML = 'Waiting for KYC to be approved';\r\n        this.kycForm.timeout = setTimeout(() => KycWaiting_awaiter(this, void 0, void 0, function* () {\r\n            yield this.checkKycStatus();\r\n        }), 5 * 1000);\r\n    }\r\n    checkKycStatus() {\r\n        return KycWaiting_awaiter(this, void 0, void 0, function* () {\r\n            let kycService = new KYCService(Moralis);\r\n            let kycResponse = yield kycService.hasValidKYC();\r\n            if (kycResponse.isValidKyc) {\r\n                clearTimeout(this.kycForm.timeout);\r\n                this.kycForm.modal.hideModal();\r\n            }\r\n            else {\r\n                this.kycForm.timeout = setTimeout(() => {\r\n                    this.checkKycStatus();\r\n                }, 5 * 1000);\r\n            }\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYCForm.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass KYCForm {\r\n    constructor(onHide) {\r\n        this.steps = 5;\r\n        this.timeout = undefined;\r\n        this.activeFieldsetSelector = '.kycContact';\r\n        this.modal = new Modal();\r\n        this.onHide = onHide;\r\n        this.kycContact = new KycContact(this);\r\n        this.kycIdentity = new KycIdentity(this);\r\n        this.kycTrustedContact = new KycTrustedContact(this);\r\n        this.kycDisclosures = new KycDisclosures(this);\r\n        this.kycAccountAgreement = new KycAccountAgreement(this);\r\n        this.kycUpload = new KycUpload(this);\r\n        this.kycWaiting = new KycWaiting(this);\r\n    }\r\n    show(className) {\r\n        let kycForm = new KYCForm(() => {\r\n        });\r\n        const ble = className;\r\n        this[ble].show();\r\n        this.activeFieldsetSelector = className;\r\n    }\r\n    showKYCForm(edit = false) {\r\n        let template = Handlebars.compile(KYCModal);\r\n        let obj = {\r\n            KycContactHtml: this.kycContact.render(),\r\n            KycIdentityHtml: this.kycIdentity.render(),\r\n            KycDisclosureHtml: this.kycDisclosures.render(),\r\n            KycTrustedContactHtml: this.kycTrustedContact.render(),\r\n            KycAccountAgreementHtml: this.kycAccountAgreement.render(),\r\n            KycUploadHtml: this.kycUpload.render()\r\n        };\r\n        let content = template(obj);\r\n        let newModal = this.modal.showModal('KYC & AML', content, true, () => {\r\n            this.clearTimeout();\r\n            this.onHide();\r\n        }, false);\r\n        let taxResidence = document.getElementById('country_of_tax_residence');\r\n        if (taxResidence) {\r\n            this.steps = (taxResidence.value == 'USA') ? 5 : 6;\r\n        }\r\n        if (newModal) {\r\n            this.kycContact.bindEvents();\r\n            this.kycIdentity.bindEvents();\r\n            this.kycTrustedContact.bindEvents();\r\n            this.kycDisclosures.bindEvents();\r\n            this.kycUpload.bindEvents();\r\n            this.kycAccountAgreement.bindEvents();\r\n            document.getElementById('kyc_wizard_form').addEventListener('keyup', (evt) => {\r\n                if (evt.key == 'Enter') {\r\n                    evt.preventDefault();\r\n                    evt.stopPropagation();\r\n                }\r\n            });\r\n        }\r\n        this.kycContact.show();\r\n    }\r\n    setSteps(steps) {\r\n        this.steps = steps;\r\n    }\r\n    clearTimeout() {\r\n        if (this.timeout)\r\n            clearTimeout(this.timeout);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/modals/KYC/KycStatusHandler.ts\nvar KycStatusHandler_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass KycStatusHandler {\r\n    constructor(kycResponse, executeTradeButton) {\r\n        this.kycResponse = kycResponse;\r\n        this.executeTradeButton = executeTradeButton;\r\n    }\r\n    getButtonText() {\r\n        let txt = 'Finish KYC';\r\n        switch (this.kycResponse.status) {\r\n            case 'SUBMITTED':\r\n            case 'ONBOARDING':\r\n            case 'INACTIVE':\r\n            case 'APPROVED':\r\n            case 'EDITED':\r\n            case 'APPROVAL_PENDING':\r\n                txt = 'Submitted to KYC processor';\r\n                break;\r\n            case 'ACTION_REQUIRED':\r\n                txt = 'Action required. Click to continue';\r\n                break;\r\n            case 'REJECTED':\r\n                txt = 'Your application was rejected';\r\n                break;\r\n            case 'DISABLED':\r\n                txt = 'Your account has been disabled';\r\n                break;\r\n            case 'ACTIVE':\r\n            case 'ACCOUNT_UPDATED':\r\n                txt = 'You are approved. KYC is being sent to blockchain. Give it few minutes';\r\n                break;\r\n            case 'ACCOUNT_CLOSED':\r\n                txt = 'Your account has been closed';\r\n                break;\r\n        }\r\n        return txt + '<small>Click for more info</small>';\r\n    }\r\n    getButtonClickEvent(executeTradeButton) {\r\n        switch (this.kycResponse.status) {\r\n            case 'SUBMITTED':\r\n            case 'ONBOARDING':\r\n            case 'INACTIVE':\r\n            case 'APPROVED':\r\n            case 'EDITED':\r\n            case 'APPROVAL_PENDING':\r\n                return this.showModal('Application is being processed', \"You need to wait for KYC to be approved. Then you'll be able to do trades. \" +\r\n                    \"This usually takes few minutes. We will email you when you are approved or if there are problems<br /><br />\" +\r\n                    \"If this status has been for more than 1 day, and you haven't gotten any email from us. Please email us at \" +\r\n                    \"<a target='_blank' href='mailto:info@liminal.market?subject=My application is being processed for to long&body=Hi, can you help me to find out what the problem is, the KYC process has not changed for some time? My name is _______ and I used the email _______ to register at liminal.market'>info@liminal.market</a>\");\r\n            case 'ACTION_REQUIRED':\r\n                return () => KycStatusHandler_awaiter(this, void 0, void 0, function* () {\r\n                    let kycActionRequired = new KycActionRequired(executeTradeButton);\r\n                    yield kycActionRequired.show();\r\n                });\r\n            case 'REJECTED':\r\n                return this.showModal('Application was rejected', \"Your application has been rejected during KYC process.<br /><br />\" +\r\n                    \"We don't have the information on why that happened, but you can email us at \" +\r\n                    \"<a target='_blank' href='mailto:info@liminal.market?subject=My application was rejected&body=Hi, can you help me to find out what the problem is? My name is _______ and I used the email _______ to register at liminal.market'>info@liminal.market</a>\" +\r\n                    \" and we can find out, and we should be able to solve it together.\");\r\n            case 'DISABLED':\r\n                return this.showModal('Application was disabled', \"Your account has been disabled.<br /><br />\" +\r\n                    \"We don't have the information on why that happened, but you can email us at \" +\r\n                    \"<a target='_blank' href='mailto:info@liminal.market?subject=My application was disabled&body=Hi, can you help me to find out what the problem is? My name is _______ and I used the email _______ to register at liminal.market'>info@liminal.market</a>\" +\r\n                    \" and we can find out, and we should be able to solve it together.\");\r\n            case 'ACCOUNT_CLOSED':\r\n                return this.showModal('Application was closed', \"Your account has been closed.<br /><br />\" +\r\n                    \"We don't have the information on why that happened, but you can email us at \" +\r\n                    \"<a target='_blank' href='mailto:info@liminal.market?subject=My application was closed&body=Hi, can you help me to find out what the problem is? My name is _______ and I used the email _______ to register at liminal.market'>info@liminal.market</a>\" +\r\n                    \" and we can find out, and we should be able to solve it together.\");\r\n            case 'ACCOUNT_UPDATED':\r\n            case 'ACTIVE':\r\n                return this.showModal('Account soon ready', 'Your account has been approved...<br /><br/>' +\r\n                    '..but, after we approve your account, we write the information to the blockchain.' +\r\n                    ' This usually takes just few(2-3) minutes.<br /><br/> If this is taking longer, ' +\r\n                    'please email us at <a target=\"_blank\" href=\"mailto:info@liminal.market?subject=KYC is being written to blockchain&body=Hi, can you help me to find out what the problem is? My name is _______ and I used the email _______ to register at liminal.market\">info@liminal.market</a>');\r\n        }\r\n        return () => {\r\n            let kycForm = new KYCForm(() => KycStatusHandler_awaiter(this, void 0, void 0, function* () {\r\n                yield this.executeTradeButton.renderButton();\r\n            }));\r\n            kycForm.showKYCForm();\r\n        };\r\n    }\r\n    showModal(title, content) {\r\n        return () => {\r\n            let modal = new Modal();\r\n            modal.showModal(title, content);\r\n        };\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/Kyc/KycApproved.html\n// Module\nvar KycApproved_code = \"<h2>You are account has been approved</h2>\\r\\n<p>We have approved your account. You can now fund your account and start to trade.\\r\\n\\r\\n    <button id=\\\"kycApprovedFund\\\">Fund account</button>\\r\\n</p>\";\n// Exports\n/* harmony default export */ const KycApproved = (KycApproved_code);\n;// CONCATENATED MODULE: ./src/ui/elements/tradepanel/ExecuteTradeButton.ts\nvar ExecuteTradeButton_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ExecuteTradeButton {\r\n    constructor(moralis, sellTradeInput, buyTradeInput) {\r\n        this.moralis = moralis;\r\n        this.sellTradeInput = sellTradeInput;\r\n        this.buyTradeInput = buyTradeInput;\r\n        this.authenticateService = new AuthenticateService(this.moralis);\r\n        this.template = Handlebars.compile(tradepanel_ExecuteTradeButton);\r\n        this.button = document.getElementById('liminal_market_execute_trade');\r\n        ExecuteTradeButton.Instance = this;\r\n    }\r\n    renderButton() {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            this.button = document.getElementById('liminal_market_execute_trade');\r\n            this.loadingButton(this.button);\r\n            //wallet connected\r\n            if (!this.walletIsConnected(this.button)) {\r\n                return;\r\n            }\r\n            //user logged in\r\n            if (!this.userIsLoggedIn(this.button)) {\r\n                return;\r\n            }\r\n            //chain id correct\r\n            if (!this.chainIdIsCorrect(this.button)) {\r\n                return;\r\n            }\r\n            //native token is available\r\n            if (!(yield this.userHasNativeToken(this.button))) {\r\n                return;\r\n            }\r\n            //kyc is done\r\n            if (!(yield this.kycIsDone(this.button))) {\r\n                return;\r\n            }\r\n            //ausd is setup\r\n            if (!(yield this.userHasAUSD(this.button))) {\r\n                return;\r\n            }\r\n            //ausd > buy amount\r\n            if (!(yield this.userHasEnoughQty(this.button))) {\r\n                return;\r\n            }\r\n            if (!this.hasQuantityAndSymbol(this.button)) {\r\n                return;\r\n            }\r\n            if (!(yield this.isMarketOpen(this.button))) {\r\n                return;\r\n            }\r\n            this.enableExecuteTrade(this.button);\r\n        });\r\n    }\r\n    enableExecuteTrade(button) {\r\n        //if (this.sellTradeInput.quantity.eq(0)) return;\r\n        //execute trade can be done\r\n        button.innerHTML = 'Execute trade';\r\n        button.classList.replace('disabled', 'enabled');\r\n        this.stopLoadingButton(button);\r\n        button.addEventListener('click', () => ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            this.loadingButton(button);\r\n            let providerInfo = ProviderInfo.Instance;\r\n            button.innerHTML = 'Confirm transaction in your ' + providerInfo.WalletName + ' wallet';\r\n            if (this.sellTradeInput.symbol == 'aUSD') {\r\n                let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                let symbolAddress = yield liminalMarketService.getSymbolContractAddress(this.buyTradeInput.symbol);\r\n                if (symbolAddress === AddressZero) {\r\n                    let result = yield liminalMarketService.createToken(this.buyTradeInput.symbol, () => {\r\n                        button.innerHTML = 'Creating token. Give it few seconds';\r\n                    }).finally(() => {\r\n                        this.stopLoadingButton(button);\r\n                        button.innerHTML = 'Execute trade';\r\n                    });\r\n                    if (result instanceof BlockchainError)\r\n                        return;\r\n                    symbolAddress = result;\r\n                }\r\n                yield this.executeTransfer(symbolAddress, button);\r\n            }\r\n            else {\r\n                let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                let symbolAddress = yield liminalMarketService.getSymbolContractAddress(this.sellTradeInput.symbol);\r\n                let securityTokenService = new SecurityTokenService(this.moralis);\r\n                yield securityTokenService.transfer(symbolAddress, this.sellTradeInput.quantity)\r\n                    .catch(reason => {\r\n                    console.log('CATCH - securityTokenService.transfer', reason);\r\n                })\r\n                    .then(transaction => {\r\n                    console.log('THEN - securityTokenService.transfer', transaction);\r\n                    if (!transaction)\r\n                        return;\r\n                    this.monitorExecuteTrade(transaction, TradeType.Sell);\r\n                }).finally(() => {\r\n                    this.stopLoadingButton(button);\r\n                    button.innerHTML = 'Execute trade';\r\n                });\r\n            }\r\n        }));\r\n    }\r\n    executeTransfer(symbolAddress, button) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let aUsdService = new AUSDService(this.moralis);\r\n            yield aUsdService.transfer(symbolAddress, this.sellTradeInput.quantity)\r\n                .catch(reason => {\r\n                console.log('CATCH - aUsdService.transfer', reason);\r\n            }).then(transaction => {\r\n                if (!transaction)\r\n                    return;\r\n                this.monitorExecuteTrade(transaction, TradeType.Buy);\r\n                this.setProgressText('Sending to blockchain', transaction.hash);\r\n            }).finally(() => {\r\n                this.stopLoadingButton(button);\r\n                button.innerHTML = 'Execute trade';\r\n            });\r\n        });\r\n    }\r\n    getBuyingSharesObj(object) {\r\n        let ethAddress = object.userAddress;\r\n        let tokenAddress = object.tokenAddress;\r\n        let buyingQuantity = object.filled_qty;\r\n        let sellingAmount = '$' + new bignumber(object.amount).div(Math.pow(10, 18)).toFixed();\r\n        return {\r\n            sellingLogo: '/img/logos/aUSD.png',\r\n            sellingSymbol: 'aUSD',\r\n            sellingAmount: sellingAmount,\r\n            buyingLogo: '/img/logos/' + object.symbol + '.png',\r\n            buyingSymbol: object.symbol,\r\n            buyingQuantity: buyingQuantity,\r\n            buyingRoundQuantity: roundNumberDecimal(buyingQuantity, 6) + ' shares',\r\n            shortEthAddress: shortEth(ethAddress),\r\n            tokenAddress: tokenAddress\r\n        };\r\n    }\r\n    getSellSharesObj(object) {\r\n        let ethAddress = object.sender;\r\n        let tokenAddress = object.recipient;\r\n        let buyingQuantity = new bignumber(object.filled_avg_price).multipliedBy(new bignumber(object.filled_qty));\r\n        let sellingAmount = object.filled_qty;\r\n        return {\r\n            sellingLogo: '/img/logos/' + object.symbol + '.png',\r\n            sellingSymbol: object.symbol,\r\n            sellingAmount: sellingAmount + ' shares',\r\n            buyingLogo: '/img/logos/aUSD.png',\r\n            buyingSymbol: 'aUSD',\r\n            buyingQuantity: buyingQuantity.toFixed(),\r\n            buyingRoundQuantity: '$' + roundBigNumberDecimal(buyingQuantity, 6).toFixed(),\r\n            shortEthAddress: shortEth(ethAddress),\r\n            tokenAddress: tokenAddress\r\n        };\r\n    }\r\n    showTradeExecuted(object) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let providerInfo = ProviderInfo.Instance;\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            let isBuy = (object.side == 'buy');\r\n            let obj = (isBuy) ? this.getBuyingSharesObj(object) : this.getSellSharesObj(object);\r\n            obj.walletName = providerInfo.WalletName;\r\n            obj.blockExplorerLink = networkInfo.BlockExplorer + '/tx/' + object.transaction_hash;\r\n            let template = Handlebars.compile(TradeExecuted);\r\n            let content = template(obj);\r\n            let modal = new Modal();\r\n            modal.showModal('Trade executed', content);\r\n            let addTokenToWallet = document.getElementById('addTokenToWallet');\r\n            if (!addTokenToWallet)\r\n                return;\r\n            addTokenToWallet.addEventListener('click', (evt) => {\r\n                let address = evt.target.dataset.address;\r\n                let walletHelper = new WalletHelper(this.moralis);\r\n                walletHelper.addTokenToWallet(address, this.buyTradeInput.symbol, () => {\r\n                    let addTokenToWalletFailed = document.getElementById('addTokenToWalletFailed');\r\n                    if (!addTokenToWalletFailed)\r\n                        return;\r\n                    addTokenToWalletFailed.classList.remove('d-none');\r\n                });\r\n            });\r\n        });\r\n    }\r\n    monitorExecuteTrade(transaction, tradeType) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let subscription = new Subscription(this.moralis);\r\n            yield subscription.subscribeToTable(tradeType, (object) => {\r\n                let user = this.moralis.User.current();\r\n                if (!user)\r\n                    return;\r\n                if (object.userAddress != user.get('ethAddress')) {\r\n                    console.log('obj.userAddress:' + object.userAddress + ' user:' + user.get('ethAddress'));\r\n                    return;\r\n                }\r\n                if (object.status == 'order_filled') {\r\n                    this.showTradeExecuted(object);\r\n                    let executingTrade = document.getElementById('executing-trade-progress');\r\n                    if (!executingTrade)\r\n                        return;\r\n                    executingTrade.classList.add('d-none');\r\n                }\r\n                else if (object.status == 'order_failed') {\r\n                    let modal = new Modal();\r\n                    modal.showModal('Order failed', 'We could not finish your order.');\r\n                }\r\n                else if (!object.status) {\r\n                    this.setProgressText('Received order sending to stock exchange', object.transaction_hash);\r\n                }\r\n                else if (object.status == 'order_requested') {\r\n                    this.setProgressText('Sent to stock exchange', object.transaction_hash);\r\n                }\r\n            });\r\n            let executingTrade = document.getElementById('executing-trade-progress');\r\n            if (!executingTrade)\r\n                return;\r\n            executingTrade.classList.remove('d-none');\r\n        });\r\n    }\r\n    loadingButton(button) {\r\n        button.setAttribute('aria-busy', 'true');\r\n    }\r\n    stopLoadingButton(button) {\r\n        button.removeAttribute('aria-busy');\r\n    }\r\n    walletIsConnected(button) {\r\n        let walletConnected = this.authenticateService.isWalletConnected();\r\n        if (walletConnected)\r\n            return true;\r\n        this.removeClickEvent(button);\r\n        button.innerHTML = 'Connect wallet';\r\n        button.addEventListener('click', () => {\r\n            let connectWallet = new ConnectWallet(this.moralis);\r\n            connectWallet.chooseWalletProvider();\r\n        });\r\n        this.stopLoadingButton(button);\r\n        return false;\r\n    }\r\n    userIsLoggedIn(button) {\r\n        let userLoggedIn = this.authenticateService.isUserLoggedIn();\r\n        if (userLoggedIn)\r\n            return true;\r\n        button.innerHTML = 'Login';\r\n        button.addEventListener('click', () => ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            yield this.authenticateService.authenticateUser(ConnectWallet.Provider);\r\n        }));\r\n        this.stopLoadingButton(button);\r\n        return false;\r\n    }\r\n    chainIdIsCorrect(button) {\r\n        let chainId = this.authenticateService.getChainId();\r\n        let networkInfo = NetworkInfo.getInstance();\r\n        if (chainId === networkInfo.ChainId)\r\n            return true;\r\n        let usersWalletNetwork = NetworkInfo.getNetworkInfoByChainId(chainId);\r\n        if (usersWalletNetwork) {\r\n            NetworkInfo.setNetworkByChainId(chainId);\r\n            return true;\r\n        }\r\n        button.innerHTML = 'Switch Network';\r\n        button.addEventListener('click', () => ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            yield networkInfo.addNetworkToWallet(this.moralis);\r\n        }));\r\n        this.stopLoadingButton(button);\r\n        return false;\r\n    }\r\n    userHasNativeToken(button) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            let hasEnoughNativeTokens = yield networkInfo.hasEnoughNativeTokens(this.moralis);\r\n            if (hasEnoughNativeTokens)\r\n                return true;\r\n            button.classList.replace('enabled', 'disabled');\r\n            button.innerHTML = 'You need ' + networkInfo.NativeCurrencyName + ' tokens. Click me for some tokens';\r\n            button.addEventListener('click', () => {\r\n                let nativeTokenNeededModal = new NativeTokenNeeded(this.moralis, () => {\r\n                    this.renderButton();\r\n                });\r\n                nativeTokenNeededModal.show();\r\n            });\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        });\r\n    }\r\n    kycIsDone(button, intervalCheck = false) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let kycService = new KYCService(this.moralis);\r\n            let ethAddress = this.authenticateService.getEthAddress();\r\n            if (ethAddress === '') {\r\n                console.log('no ETH address, kyc check failed');\r\n                return false;\r\n            }\r\n            let kycResponse = yield kycService.hasValidKYC();\r\n            if (!kycResponse.isValidKyc && kycResponse.status == 'ACTIVE') {\r\n                this.kycIdDoneTimeout = setInterval(() => ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n                    kycResponse = yield kycService.hasValidKYC();\r\n                    if (kycResponse.isValidKyc) {\r\n                        clearInterval(this.kycIdDoneTimeout);\r\n                        yield this.renderButton();\r\n                    }\r\n                }), 10 * 1000);\r\n            }\r\n            if (kycResponse.isValidKyc) {\r\n                if (intervalCheck) {\r\n                    clearInterval(this.kycIdDoneTimeout);\r\n                    let template = Handlebars.compile(KycApproved);\r\n                    let modal = new Modal();\r\n                    modal.showModal('Account approved', template({}));\r\n                    let fundAccount = document.getElementById('kycApprovedFund');\r\n                    fundAccount === null || fundAccount === void 0 ? void 0 : fundAccount.addEventListener('click', (evt) => {\r\n                        modal.hideModal();\r\n                        let ausdFund = new FakeAUSDFund(this.moralis);\r\n                        ausdFund.showAUSDFakeFund(() => {\r\n                            this.renderButton();\r\n                        });\r\n                    });\r\n                }\r\n                return true;\r\n            }\r\n            let kycStatusHandler = new KycStatusHandler(kycResponse, this);\r\n            button.innerHTML = kycStatusHandler.getButtonText();\r\n            button.addEventListener('click', kycStatusHandler.getButtonClickEvent(this));\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        });\r\n    }\r\n    checkKycIsDone() {\r\n        if (this.kycIdDoneTimeout)\r\n            return;\r\n        this.kycIdDoneTimeout = setInterval(() => ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            yield this.kycIsDone(this.button, true);\r\n        }), 10 * 1000);\r\n    }\r\n    userHasAUSD(button) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let ausdService = new AUSDService(this.moralis);\r\n            let balance = yield ausdService.getAUSDBalanceOf(this.authenticateService.getEthAddress());\r\n            if (balance.isGreaterThan(0))\r\n                return true;\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            if (networkInfo.TestNetwork) {\r\n                button.innerHTML = 'You need aUSD. Click here to get some';\r\n                button.addEventListener('click', () => {\r\n                    let ausdFund = new FakeAUSDFund(this.moralis);\r\n                    ausdFund.showAUSDFakeFund(() => {\r\n                        this.renderButton();\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                button.innerHTML = 'You need aUSD. Click here for instructions';\r\n                button.addEventListener('click', () => {\r\n                    let ausdFund = new FakeAUSDFund(this.moralis);\r\n                    ausdFund.showAUSDFund(() => {\r\n                        this.renderButton();\r\n                    });\r\n                });\r\n            }\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        });\r\n    }\r\n    userHasEnoughQty(button) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let ausdService = new AUSDService(this.moralis);\r\n            if (this.sellTradeInput.symbol == 'aUSD') {\r\n                let balance = yield ausdService.getAUSDBalanceOf(this.authenticateService.getEthAddress());\r\n                if (balance.isGreaterThanOrEqualTo(this.sellTradeInput.quantity))\r\n                    return true;\r\n                button.innerHTML = \"You don't have enough aUSD. Click for more funding\";\r\n                button.addEventListener('click', () => {\r\n                    let networkInfo = NetworkInfo.getInstance();\r\n                    let ausdFund = new FakeAUSDFund(this.moralis);\r\n                    if (networkInfo.TestNetwork) {\r\n                        ausdFund.showAUSDFakeFund(() => {\r\n                            this.renderButton();\r\n                        });\r\n                    }\r\n                    else {\r\n                        ausdFund.showAUSDFund(() => {\r\n                            this.renderButton();\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                let securityTokenService = new SecurityTokenService(this.moralis);\r\n                let authenticateService = new AuthenticateService(this.moralis);\r\n                let ethAddress = authenticateService.getEthAddress();\r\n                let userQuantity = yield securityTokenService.getQuantityByAddress(this.sellTradeInput.symbol, ethAddress);\r\n                if (this.sellTradeInput.quantity <= userQuantity)\r\n                    return true;\r\n                button.innerHTML = \"You don't have enough \" + this.sellTradeInput.symbol;\r\n                button.classList.replace('disable', 'enable');\r\n            }\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        });\r\n    }\r\n    isMarketOpen(button) {\r\n        return ExecuteTradeButton_awaiter(this, void 0, void 0, function* () {\r\n            let userService = new UserService(this.moralis);\r\n            let isMarketOpen = yield userService.isMarketOpenOrUserOffHours();\r\n            if (isMarketOpen)\r\n                return true;\r\n            button.innerHTML = 'Market is closed';\r\n            button.classList.replace('enabled', 'disabled');\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        });\r\n    }\r\n    removeClickEvent(button) {\r\n        let f = (event) => button.onclick ? (event) : undefined;\r\n        if (f) {\r\n            button.removeEventListener('click', f);\r\n        }\r\n    }\r\n    hasQuantityAndSymbol(button) {\r\n        if (this.sellTradeInput.quantity.eq(0)) {\r\n            button.innerHTML = 'Type in quantity';\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        }\r\n        if (this.buyTradeInput.name == '') {\r\n            button.innerHTML = 'Select stock to buy';\r\n            this.stopLoadingButton(button);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    setProgressText(text, hash) {\r\n        let progressText = document.getElementById('progress-text');\r\n        if (progressText) {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            progressText.innerHTML = text + '<br /><a href=\"' + networkInfo.BlockExplorer + '/tx/' + hash + '\" target=\"_blank\" style=\"font-size:10px\">View</a>';\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/tradepanel/TradeInput.html\n// Module\nvar TradeInput_code = \"<article class=\\\"{{tradeType}}Inputs tradeInputArticle\\\">\\r\\n    <div class=\\\"grid tradeInput\\\">\\r\\n        <div class=\\\"select_token\\\">\\r\\n            <a id=\\\"{{tradeType}}SelectStock\\\" href=\\\"#\\\" role=\\\"button\\\">\\r\\n                <img src=\\\"{{logo}}\\\"/>\\r\\n                {{symbol}}\\r\\n            </a>\\r\\n        </div>\\r\\n        <div class=\\\"trade_input\\\"><input autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" type=\\\"tel\\\" spellcheck=\\\"false\\\"\\r\\n                                        value=\\\"{{strQuantity}}\\\" placeholder=\\\"0.0\\\"/></div>\\r\\n        <div class=\\\"balance\\\">Balance : <abbr title=\\\"{{balance}}\\\" data-tooltip=\\\"{{balance}}\\\" class=\\\"balance_value\\\">{{abbrBalance}}</abbr>\\r\\n            <a href=\\\"\\\" class=\\\"balance_max\\\">Max</a></div>\\r\\n        <div class=\\\"price_per_share\\\"></div>\\r\\n    </div>\\r\\n    <progress class=\\\"progress d-none\\\" value=\\\"0\\\" max=\\\"1\\\"></progress>\\r\\n    <div class=\\\"exceeds_wallet_balance d-none\\\">Exceeds wallet balance</div>\\r\\n</article>\\r\\n\";\n// Exports\n/* harmony default export */ const TradeInput = (TradeInput_code);\n;// CONCATENATED MODULE: ./src/ui/modals/SecuritiesListModal.ts\nvar SecuritiesListModal_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass SecuritiesListModal {\r\n    constructor() {\r\n        this.tbodyId = 'liminal_market_securities_list';\r\n        this.page = 0;\r\n        this.loadmore = true;\r\n        this.modal = new Modal();\r\n    }\r\n    showModal(onSelectSymbol) {\r\n        return SecuritiesListModal_awaiter(this, void 0, void 0, function* () {\r\n            let securitiesList = new SecuritiesList();\r\n            let content = yield securitiesList.render();\r\n            let newInstance = this.modal.showModal('Select stock to buy', content, true);\r\n            //if (newInstance)\r\n            {\r\n                yield securitiesList.bindEvents(onSelectSymbol);\r\n            }\r\n        });\r\n    }\r\n    hideModal() {\r\n        this.modal.hideModal();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/services/backend/TradeInfo.ts\nclass TradeInfo {\r\n    constructor(price, lastTrade) {\r\n        this.price = price;\r\n        this.lastTrade = lastTrade;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/errors/cloud/HttpError.ts\n\r\n\r\nclass HttpError {\r\n    constructor(obj) {\r\n        this.method = obj.method;\r\n        this.url = obj.url;\r\n        this.body = obj.body;\r\n        this.serverError = obj.serverError;\r\n    }\r\n    handle() {\r\n        console.log(this);\r\n        ErrorInfo.report(new GeneralError('Error doing request. Server response was:' + this.serverError.data.message));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/errors/CloudError.ts\n\r\n\r\n\r\nclass CloudError extends GeneralError {\r\n    constructor(e) {\r\n        super(e);\r\n        try {\r\n            let obj = JSON.parse(e.message);\r\n            if (obj.name) {\r\n                let errorHandler = CloudError.getActionInstance(obj.name, obj);\r\n                if (errorHandler) {\r\n                    errorHandler.handle();\r\n                    return;\r\n                }\r\n            }\r\n            ErrorInfo.error(obj);\r\n        }\r\n        catch (jsonError) {\r\n            ErrorInfo.error(e);\r\n        }\r\n    }\r\n    static getActionInstance(action, obj) {\r\n        let tmp = undefined;\r\n        for (let i = 0; i < CloudError.Errors.length; i++) {\r\n            if (CloudError.Errors[i].name === action) {\r\n                let errorHandler = CloudError.Errors[i];\r\n                return new errorHandler(obj);\r\n            }\r\n        }\r\n        return tmp;\r\n    }\r\n}\r\nCloudError.Errors = [\r\n    HttpError\r\n];\r\n\n;// CONCATENATED MODULE: ./src/services/backend/StockPriceService.ts\nvar StockPriceService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nclass StockPriceService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    getSymbolPrice(symbol, tradeType) {\r\n        return StockPriceService_awaiter(this, void 0, void 0, function* () {\r\n            const params = {\r\n                symbol: symbol\r\n            };\r\n            let result = yield this.moralis.Cloud.run(\"getSymbolPrice\", params)\r\n                .catch((e) => {\r\n                throw new CloudError(e);\r\n            });\r\n            let quote = result.quote;\r\n            let price = (tradeType == TradeType.Sell) ? quote.ap : quote.bp;\r\n            let tradeInfo = new TradeInfo(price, quote.t);\r\n            return tradeInfo;\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/tradepanel/PricePerShare.html\n// Module\nvar PricePerShare_code = \"<abbr title=\\\"Last trade was {{lastTraded}}\\\" data-tooltip=\\\"Last trade was {{lastTraded}}\\\">{{text}}</abbr>\";\n// Exports\n/* harmony default export */ const PricePerShare = (PricePerShare_code);\n;// CONCATENATED MODULE: ./src/ui/elements/tradepanel/TradePanelInput.ts\nvar TradePanelInput_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass TradePanelInput {\r\n    constructor(moralis, symbol, name, logo, address, tradeType) {\r\n        this.isDirty = false;\r\n        this.moralis = moralis;\r\n        this.symbol = symbol;\r\n        this.name = name;\r\n        this.logo = logo;\r\n        this.address = address;\r\n        this.tradeType = tradeType;\r\n        this.quantity = new bignumber(0);\r\n        this.strQuantity = '';\r\n        this.balance = new bignumber(0);\r\n        this.lastPrice = 0;\r\n        this.qtyPerDollar = 0;\r\n        this.lastTraded = '';\r\n        this.template = Handlebars.compile(TradeInput);\r\n        this.pricePerShareTemplate = Handlebars.compile(PricePerShare);\r\n    }\r\n    setOtherTradePanelInput(tradePanelInput) {\r\n        this.otherTradePanelInput = tradePanelInput;\r\n    }\r\n    renderToString() {\r\n        return this.template(this);\r\n    }\r\n    render(bindEvents = true) {\r\n        let element = document.querySelector('.' + this.tradeType + 'Inputs');\r\n        element.outerHTML = this.renderToString();\r\n        if (bindEvents) {\r\n            this.bindEvents();\r\n        }\r\n    }\r\n    bindEvents() {\r\n        this.bindQuantityListener();\r\n        this.bindSelectStockButton();\r\n        this.bindMaxLink();\r\n    }\r\n    setSymbol(symbol, name, logo) {\r\n        this.symbol = symbol;\r\n        this.name = name;\r\n        this.logo = logo;\r\n        this.isDirty = true;\r\n    }\r\n    bindSelectStockButton() {\r\n        let selectStock = document.querySelector('#' + this.tradeType + 'SelectStock');\r\n        if (!selectStock)\r\n            return;\r\n        selectStock.addEventListener('click', (evt) => TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            let securityList = new SecuritiesListModal();\r\n            yield securityList.showModal((symbol, name, logo) => TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n                securityList.hideModal();\r\n                if (this.otherTradePanelInput && this.symbol == 'aUSD' && symbol != this.symbol) {\r\n                    this.otherTradePanelInput.setSymbol(this.symbol, this.name, this.logo);\r\n                }\r\n                this.symbol = symbol;\r\n                this.name = name;\r\n                this.logo = logo;\r\n                let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                this.address = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n                this.render();\r\n                this.loadBalance().then();\r\n                yield this.loadLastTrade();\r\n                if (this.onUpdate)\r\n                    this.onUpdate();\r\n            }));\r\n        }));\r\n    }\r\n    bindQuantityListener() {\r\n        let qtyInput = document.querySelector('.' + this.tradeType + 'Inputs .trade_input input');\r\n        if (!qtyInput)\r\n            return;\r\n        let inputTimer;\r\n        qtyInput.addEventListener('keyup', (evt) => {\r\n            if (inputTimer)\r\n                clearTimeout(inputTimer);\r\n            inputTimer = setTimeout(() => {\r\n                let inputValue = evt.target.value;\r\n                this.setQuantity(inputValue);\r\n                this.loadProgressbar();\r\n                if (this.otherTradePanelInput)\r\n                    this.otherTradePanelInput.updateQuantity();\r\n                if (this.onUpdate)\r\n                    this.onUpdate();\r\n            }, 300);\r\n        });\r\n    }\r\n    bindMaxLink() {\r\n        let maxBalanceDom = document.querySelector('.' + this.tradeType + 'Inputs .balance_max');\r\n        if (!maxBalanceDom)\r\n            return;\r\n        maxBalanceDom.addEventListener('click', (evt) => {\r\n            evt.preventDefault();\r\n            let qtyInput = document.querySelector('.' + this.tradeType + 'Inputs .trade_input input');\r\n            if (!qtyInput)\r\n                return;\r\n            qtyInput.value = this.balance.toFixed();\r\n            this.setQuantity(qtyInput.value);\r\n            this.loadProgressbar();\r\n            if (this.otherTradePanelInput)\r\n                this.otherTradePanelInput.updateQuantity();\r\n            if (this.onUpdate)\r\n                this.onUpdate();\r\n        });\r\n    }\r\n    loadBalance() {\r\n        return TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n            this.balance = new bignumber(0);\r\n            let userService = new UserService(this.moralis);\r\n            let ethAddress = userService.getEthAddress();\r\n            let balanceDom = document.querySelector('.' + this.tradeType + 'Inputs .balance_value');\r\n            if (!balanceDom)\r\n                return;\r\n            if (this.symbol === 'aUSD') {\r\n                if (ethAddress) {\r\n                    let aUsdService = new AUSDService(this.moralis);\r\n                    this.balance = yield aUsdService.getAUSDBalanceOf(ethAddress);\r\n                }\r\n                balanceDom.innerHTML = '$' + roundBigNumber(this.balance).toString();\r\n            }\r\n            else if (this.name !== '') {\r\n                this.balance = new bignumber(0);\r\n                if (ethAddress) {\r\n                    let securityTokenService = new SecurityTokenService(this.moralis);\r\n                    this.balance = yield securityTokenService.getQuantityByAddress(this.symbol, ethAddress);\r\n                }\r\n                balanceDom.innerHTML = roundBigNumberDecimal(this.balance, 6).toString();\r\n            }\r\n            balanceDom.dataset.tooltip = this.balance.toString();\r\n            balanceDom.title = this.balance.toString();\r\n            this.loadProgressbar();\r\n            this.toggleMaxBalanceLink();\r\n        });\r\n    }\r\n    loadLastTrade() {\r\n        return TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n            if (this.symbol === 'aUSD') {\r\n                this.lastPrice = 1;\r\n                this.qtyPerDollar = 1;\r\n                return;\r\n            }\r\n            if (!this.otherTradePanelInput || this.name == '')\r\n                return;\r\n            let aUsdPricePerShare = document.querySelector('.' + this.otherTradePanelInput.tradeType + 'Inputs .price_per_share');\r\n            if (!aUsdPricePerShare)\r\n                return;\r\n            let pricePerShare = document.querySelector('.' + this.tradeType + 'Inputs .price_per_share');\r\n            if (!pricePerShare)\r\n                return;\r\n            aUsdPricePerShare.setAttribute('aria-busy', 'true');\r\n            pricePerShare.setAttribute('aria-busy', 'true');\r\n            let stockPriceService = new StockPriceService(this.moralis);\r\n            let tradeInfo = yield stockPriceService.getSymbolPrice(this.symbol, this.otherTradePanelInput.tradeType);\r\n            this.lastPrice = tradeInfo.price;\r\n            this.lastTraded = tradeInfo.lastTrade.toString();\r\n            this.qtyPerDollar = 1 / this.lastPrice;\r\n            let pricePerShareHtml = {\r\n                lastTraded: this.lastTraded,\r\n                text: '≈ $' + this.lastPrice + ' per share'\r\n            };\r\n            pricePerShare.innerHTML = this.pricePerShareTemplate(pricePerShareHtml);\r\n            let pricePerAUsdHtml = {\r\n                lastTraded: this.lastTraded,\r\n                text: '1 aUSD ≈ ' + roundNumberDecimal(this.qtyPerDollar, 6) + ' ' + this.symbol\r\n            };\r\n            aUsdPricePerShare.innerHTML = this.pricePerShareTemplate(pricePerAUsdHtml);\r\n            this.updateQuantity();\r\n            aUsdPricePerShare.removeAttribute('aria-busy');\r\n            pricePerShare.removeAttribute('aria-busy');\r\n        });\r\n    }\r\n    updateQuantity() {\r\n        if (!this.otherTradePanelInput)\r\n            return;\r\n        let qtyInput = document.querySelector('.' + this.tradeType + 'Inputs .trade_input input');\r\n        if (!qtyInput)\r\n            return;\r\n        if (this.symbol === 'aUSD') {\r\n            qtyInput.value = this.otherTradePanelInput.quantity.div(this.otherTradePanelInput.qtyPerDollar).toString();\r\n        }\r\n        else {\r\n            qtyInput.value = this.otherTradePanelInput.quantity.multipliedBy(this.qtyPerDollar).toString();\r\n        }\r\n        this.setQuantity(qtyInput.value);\r\n        this.loadProgressbar();\r\n    }\r\n    loadProgressbar() {\r\n        if (this.quantity.eq(0) || this.balance.eq(0) || this.tradeType == TradeType.Buy)\r\n            return;\r\n        let progressDom = document.querySelector('.' + this.tradeType + 'Inputs .progress');\r\n        if (!progressDom)\r\n            return;\r\n        let percentage = this.quantity.div(this.balance).toNumber();\r\n        progressDom.value = percentage;\r\n        progressDom.classList.remove('d-none');\r\n        let exceedsBalance = document.querySelector('.' + this.tradeType + 'Inputs .exceeds_wallet_balance');\r\n        if (percentage > 1) {\r\n            exceedsBalance.classList.remove('d-none');\r\n            progressDom.setAttribute('aria-invalid', 'true');\r\n        }\r\n        else {\r\n            exceedsBalance.classList.add('d-none');\r\n        }\r\n    }\r\n    static switchPanels(sellTradePanelInput, buyTradePanelInput) {\r\n        return TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n            let sellSymbol = sellTradePanelInput.symbol;\r\n            let sellName = sellTradePanelInput.name;\r\n            let sellLogo = sellTradePanelInput.logo;\r\n            let sellQuantity = sellTradePanelInput.quantity;\r\n            sellTradePanelInput.setSymbol(buyTradePanelInput.symbol, buyTradePanelInput.name, buyTradePanelInput.logo);\r\n            sellTradePanelInput.quantity = buyTradePanelInput.quantity;\r\n            buyTradePanelInput.setSymbol(sellSymbol, sellName, sellLogo);\r\n            buyTradePanelInput.quantity = sellQuantity;\r\n            yield sellTradePanelInput.updatePanel();\r\n            yield buyTradePanelInput.updatePanel();\r\n            return [sellTradePanelInput, buyTradePanelInput];\r\n        });\r\n    }\r\n    setQuantity(value) {\r\n        if (value == '' || value == '0')\r\n            return;\r\n        this.quantity = new bignumber(value);\r\n        this.strQuantity = value;\r\n    }\r\n    quantityFormatted() {\r\n        return (this.symbol === 'aUSD') ? '$' + this.quantity : this.quantity;\r\n    }\r\n    updatePanel() {\r\n        return TradePanelInput_awaiter(this, void 0, void 0, function* () {\r\n            this.updateQuantity();\r\n            this.render(true);\r\n            yield this.loadBalance();\r\n            yield this.loadLastTrade();\r\n        });\r\n    }\r\n    toggleMaxBalanceLink() {\r\n        let maxBalanceDom = document.querySelector('.' + this.tradeType + 'Inputs .balance_max');\r\n        if (!maxBalanceDom)\r\n            return;\r\n        if (this.balance.eq(0)) {\r\n            maxBalanceDom.classList.add('d-none');\r\n        }\r\n        else {\r\n            maxBalanceDom.classList.remove('d-none');\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/tradepanel/TradeSwitch.html\n// Module\nvar TradeSwitch_code = \"<div class=\\\"grid tradeSwitch\\\">\\r\\n    <a title=\\\"Switch the trade\\\" href=\\\"\\\" class=\\\"switchBtn\\\" class=\\\"outline\\\"></a>\\r\\n</div>\";\n// Exports\n/* harmony default export */ const tradepanel_TradeSwitch = (TradeSwitch_code);\n;// CONCATENATED MODULE: ./src/ui/elements/tradepanel/TradeSwitch.ts\nvar TradeSwitch_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nclass TradeSwitch {\r\n    constructor() {\r\n        this.template = undefined;\r\n        this.template = Handlebars.compile(tradepanel_TradeSwitch);\r\n    }\r\n    renderToString() {\r\n        return this.template();\r\n    }\r\n    render() {\r\n        let dom = document.querySelector('.tradeSwitch');\r\n        if (!dom)\r\n            return;\r\n        dom.outerHTML = this.renderToString();\r\n    }\r\n    bindEvents(sellTradePanelInput, buyTradePanelInput, executeTradeButton) {\r\n        let dom = document.querySelector('.switchBtn');\r\n        if (!dom)\r\n            return;\r\n        dom.addEventListener('click', (evt) => TradeSwitch_awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            [sellTradePanelInput, buyTradePanelInput] = yield TradePanelInput.switchPanels(sellTradePanelInput, buyTradePanelInput);\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/TradePanel.ts\nvar TradePanel_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass TradePanel {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.quantity = 0;\r\n    }\r\n    render(elementId, symbol, name, logo, address) {\r\n        return TradePanel_awaiter(this, void 0, void 0, function* () {\r\n            let element = document.getElementById(elementId);\r\n            if (!element)\r\n                return;\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let sellTradeInput = new TradePanelInput(this.moralis, \"aUSD\", \"aUSD at Broker\", \"/img/ausd.png\", contractInfo.AUSD_ADDRESS, TradeType.Sell);\r\n            let buyTradeInput;\r\n            if (!symbol) {\r\n                buyTradeInput = new TradePanelInput(this.moralis, \"Select stock\", \"\", \"\", \"\", TradeType.Buy);\r\n            }\r\n            else {\r\n                buyTradeInput = new TradePanelInput(this.moralis, symbol, name, logo, address, TradeType.Buy);\r\n            }\r\n            sellTradeInput.setOtherTradePanelInput(buyTradeInput);\r\n            buyTradeInput.setOtherTradePanelInput(sellTradeInput);\r\n            let tradeSwitch = new TradeSwitch();\r\n            let sellInput = sellTradeInput.renderToString();\r\n            let buyInput = buyTradeInput.renderToString();\r\n            let switchHtml = tradeSwitch.renderToString();\r\n            element.innerHTML = sellInput + switchHtml + buyInput;\r\n            yield sellTradeInput.loadBalance();\r\n            yield buyTradeInput.loadBalance();\r\n            if (symbol) {\r\n                yield buyTradeInput.loadLastTrade();\r\n            }\r\n            sellTradeInput.bindEvents();\r\n            buyTradeInput.bindEvents();\r\n            let executeTradeButton = new ExecuteTradeButton(this.moralis, sellTradeInput, buyTradeInput);\r\n            yield executeTradeButton.renderButton();\r\n            tradeSwitch.bindEvents(sellTradeInput, buyTradeInput, executeTradeButton);\r\n            sellTradeInput.onUpdate = () => {\r\n                if (buyTradeInput.isDirty)\r\n                    buyTradeInput.updatePanel();\r\n                executeTradeButton.renderButton();\r\n            };\r\n            buyTradeInput.onUpdate = () => {\r\n                if (sellTradeInput.isDirty)\r\n                    sellTradeInput.updatePanel();\r\n                executeTradeButton.renderButton();\r\n            };\r\n        });\r\n    }\r\n    formatBuyPanel(symbol, name, logo, tradeType, contractAddress) {\r\n        document.getElementById('liminal_market_select_symbol').innerHTML = symbol;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/pages/trade.html\n// Module\nvar trade_code = \"<div id=\\\"tradingPanel\\\">\\r\\n    <a href=\\\"#use_wallet_for_orders\\\" id=\\\"use_wallet_for_orders_link\\\" class=\\\"not_visible\\\">Trade in your wallet instead of\\r\\n        here</a>\\r\\n    <article id=\\\"liminal_market_trade_panel\\\"></article>\\r\\n    <div id=\\\"executing-trade-progress\\\" class=\\\"d-none\\\">\\r\\n        <div id=\\\"progress-text\\\"></div>\\r\\n        <progress></progress>\\r\\n    </div>\\r\\n    <button id=\\\"liminal_market_execute_trade\\\"></button>\\r\\n\\r\\n    <article id=\\\"use_wallet_for_orders\\\">\\r\\n\\r\\n        <h3>How to buy in wallet</h3>\\r\\n        <ul>\\r\\n            <li>If you haven't added aUSD to your wallet, now is the time - <small><a href=\\\"\\\" id=\\\"addAUSDToWallet\\\">Click\\r\\n                here to add aUSD to wallet</a></small></li>\\r\\n            <li><a href=\\\"\\\" class=\\\"findSymbol\\\">Find symbol</a> you want to buy & click \\\"Get address\\\"</li>\\r\\n            <li>Go to your wallet and find the aUSD token, click \\\"Send\\\"</li>\\r\\n            <li>Paste in the address you just copied for the Receiver.\\r\\n                <ul>\\r\\n                    <li><em>Note: If you can, save the address to your contact list for easy access next time</em></li>\\r\\n                </ul>\\r\\n            </li>\\r\\n\\r\\n            <li>Type in the amount & click Confirm</li>\\r\\n            <li>You have now bought the shares, don't forget to <a href=\\\"\\\" class=\\\"findSymbol\\\">add the token to wallet</a>. &#127881;</li>\\r\\n        </ul>\\r\\n        <div style=\\\"text-align: center;\\\">\\r\\n            <!--\\r\\n                        <iframe width=\\\"380\\\" height=\\\"500\\\" src=\\\"https://www.youtube.com/embed/m1iNotgaic4?autoplay=1&cc_load_policy=1&playlist=m1iNotgaic4&loop=1\\\" title=\\\"YouTube video player\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\\\" allowfullscreen></iframe>\\r\\n            -->\\r\\n        </div>\\r\\n\\r\\n\\r\\n        <h3>Sell your securities</h3>\\r\\n\\r\\n        <ul>\\r\\n            <li>Find the token you want so sell in you wallet and click Send</li>\\r\\n            <li>Put the in the aUSD address<br/><input id=\\\"aUsdAddress\\\" value=\\\"{{AUSDAddress}}\\\">\\r\\n                <ul>\\r\\n                    <li><em>Note: If you can, save the address to your contact list for easy access next time</em></li>\\r\\n                </ul>\\r\\n            </li>\\r\\n            <li>Type in the quantity of shares you want to sell & click Confirm</li>\\r\\n            <li>You have now sold the shares &#127881;</li>\\r\\n        </ul>\\r\\n\\r\\n    </article>\\r\\n</div>\";\n// Exports\n/* harmony default export */ const trade = (trade_code);\n;// CONCATENATED MODULE: ./src/html/modal/CopyTokenAddressToAddToWallet.html\n// Module\nvar CopyTokenAddressToAddToWallet_code = \"\\r\\n\\r\\n    You can copy the address of {{symbol}} and import it into your wallet\\r\\n    <input id=\\\"tokenAddress\\\" value=\\\"{{tokenAddress}}\\\" />\\r\\n\\r\\n\";\n// Exports\n/* harmony default export */ const CopyTokenAddressToAddToWallet = (CopyTokenAddressToAddToWallet_code);\n;// CONCATENATED MODULE: ./src/ui/pages/TradePage.ts\nvar TradePage_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass TradePage {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    load(symbol, name, logo, address) {\r\n        return TradePage_awaiter(this, void 0, void 0, function* () {\r\n            let mainContainer = document.getElementById('main_container');\r\n            if (!mainContainer)\r\n                return;\r\n            let contractInfo = ContractInfo.getContractInfo();\r\n            let template = Handlebars.compile(trade);\r\n            mainContainer.innerHTML = template({ AUSDAddress: contractInfo.AUSD_ADDRESS });\r\n            let tradePanel = new TradePanel(this.moralis);\r\n            yield tradePanel.render('liminal_market_trade_panel');\r\n            if (symbol) {\r\n                yield this.selectSymbol(symbol, name, logo, address);\r\n            }\r\n            let user = new UserService(this.moralis);\r\n            let ethAddress = user.getEthAddress();\r\n            let aUSDService = new AUSDService(this.moralis);\r\n            let ausdAmount = new bignumber(0);\r\n            if (ethAddress) {\r\n                ausdAmount = yield aUSDService.getAUSDBalanceOf(ethAddress);\r\n            }\r\n            let userWallet = document.getElementById('use_wallet_for_orders');\r\n            let userWalletLink = document.getElementById('use_wallet_for_orders_link');\r\n            if (ausdAmount.eq(0)) {\r\n                userWallet === null || userWallet === void 0 ? void 0 : userWallet.classList.add('hidden');\r\n                userWalletLink === null || userWalletLink === void 0 ? void 0 : userWalletLink.classList.add('not_visible');\r\n            }\r\n            else {\r\n                userWallet === null || userWallet === void 0 ? void 0 : userWallet.classList.remove('hidden');\r\n                userWalletLink === null || userWalletLink === void 0 ? void 0 : userWalletLink.classList.remove('not_visible');\r\n            }\r\n            let findSymbols = document.querySelectorAll('.findSymbol');\r\n            findSymbols === null || findSymbols === void 0 ? void 0 : findSymbols.forEach(findSymbol => {\r\n                findSymbol.addEventListener('click', (evt) => {\r\n                    evt.preventDefault();\r\n                    let securitiesModal = new SecuritiesListModal();\r\n                    securitiesModal.showModal(() => {\r\n                        securitiesModal.hideModal();\r\n                    });\r\n                });\r\n            });\r\n            let addAUSDToWallet = document.getElementById('addAUSDToWallet');\r\n            addAUSDToWallet === null || addAUSDToWallet === void 0 ? void 0 : addAUSDToWallet.addEventListener('click', (evt) => {\r\n                evt.preventDefault();\r\n                let walletHelper = new WalletHelper(this.moralis);\r\n                walletHelper.addTokenToWallet(contractInfo.AUSD_ADDRESS, 'aUSD', () => {\r\n                    let modal = new Modal();\r\n                    let template = Handlebars.compile(CopyTokenAddressToAddToWallet);\r\n                    let content = template({ symbol: 'aUSD', tokenAddress: contractInfo.AUSD_ADDRESS });\r\n                    modal.showModal('Add aUSD to wallet', content);\r\n                });\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    selectSymbol(symbol, name, logo, address) {\r\n        return TradePage_awaiter(this, void 0, void 0, function* () {\r\n            let tradePanel = new TradePanel(this.moralis);\r\n            yield tradePanel.render('liminal_market_trade_panel', symbol, name, logo, address);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/pages/stockspage.html\n// Module\nvar stockspage_code = \"\\r\\n<article id=\\\"stockList\\\">\\r\\n <div id=\\\"ua\\\"></div>\\r\\n <div id=\\\"list_of_securities\\\">{{{securities}}}</div>\\r\\n\\r\\n</article>\";\n// Exports\n/* harmony default export */ const stockspage = (stockspage_code);\n;// CONCATENATED MODULE: ./src/ui/pages/StocksPage.ts\nvar StocksPage_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nclass StocksPage {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    load() {\r\n        return StocksPage_awaiter(this, void 0, void 0, function* () {\r\n            let mainContainer = document.getElementById('main_container');\r\n            if (!mainContainer)\r\n                return;\r\n            let securitiesList = new SecuritiesList();\r\n            let securities = yield securitiesList.render();\r\n            let template = Handlebars.compile(stockspage);\r\n            mainContainer.innerHTML = template({ securities: securities });\r\n            yield securitiesList.loadMore();\r\n            yield securitiesList.bindEvents((symbol, name, logo) => StocksPage_awaiter(this, void 0, void 0, function* () {\r\n                let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                let address = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n                let tradePage = new TradePage(this.moralis);\r\n                window.scrollTo(0, 0);\r\n                history.pushState(null, 'Buy stocks', '#/trade');\r\n                yield tradePage.load(symbol, name, logo, address);\r\n            }));\r\n        });\r\n    }\r\n    ;\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/elements/documents.html\n// Module\nvar documents_code = \"<h3>Documents</h3>\\r\\n<p>These are your documents for your trades, generated by the broker. These documents are trade confirmation & monthly statements.\\r\\n\\tThey are generated at the end of the day, between 06:30PM-07:30PM EST.\\r\\n</p>\\r\\n{{#if result}}\\r\\n<table class=\\\"table table-hover\\\">\\r\\n\\t<thead>\\r\\n\\t\\t<tr>\\r\\n\\t\\t\\t<th>Type</th>\\r\\n\\t\\t\\t<th>Date</th>\\r\\n\\t\\t\\t<th>Download</th>\\r\\n\\t\\t</tr>\\r\\n\\t</thead>\\r\\n\\t<tbody>\\r\\n\\t\\t{{#each result}}\\r\\n\\t\\t<tr>\\r\\n\\t\\t\\t<td title=\\\"{{id}}\\\">{{type}}</a></td>\\r\\n\\t\\t\\t<td>{{date}}</td>\\r\\n\\t\\t\\t<td><a href=\\\"\\\" class=\\\"downloadDoc\\\" data-docid=\\\"{{id}}\\\">Download</a></td>\\r\\n\\t\\t</tr>\\r\\n\\t\\t{{/each}}\\r\\n\\t</tbody>\\r\\n</table>\\r\\n{{/if}}\";\n// Exports\n/* harmony default export */ const elements_documents = (documents_code);\n;// CONCATENATED MODULE: ./src/services/backend/DocumentService.ts\nvar DocumentService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass DocumentService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    getDocuments() {\r\n        return DocumentService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('documents');\r\n        });\r\n    }\r\n    getDocument(documentId) {\r\n        return DocumentService_awaiter(this, void 0, void 0, function* () {\r\n            const params = {\r\n                documentId: documentId\r\n            };\r\n            return yield this.moralis.Cloud.run(\"download\", params);\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/modal/CreateToken.html\n// Module\nvar CreateToken_code = \"Token for {{symbol}} does not exist. You can click the button below to create the token. This will cost a bit of gas.\\r\\n<br /><br />\\r\\nAfter the token has been created we will try to add it to your wallet.\\r\\n<br /><br />\\r\\n<button id=\\\"createTokenBtn\\\">Create token</button>\\r\\n\\r\\n<div class=\\\"d-none\\\" id=\\\"copyAddressInfo\\\">\\r\\n    You can copy the address of the token and import it into your wallet\\r\\n    <input id=\\\"tokenAddress\\\" />\\r\\n\\r\\n</div>\";\n// Exports\n/* harmony default export */ const modal_CreateToken = (CreateToken_code);\n;// CONCATENATED MODULE: ./src/ui/modals/CreateToken.ts\nvar CreateToken_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CreateToken {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    show(symbol) {\r\n        let modal = new Modal();\r\n        let template = Handlebars.compile(modal_CreateToken);\r\n        modal.showModal(\"Token \" + symbol + \" doesn't exist\", template({ symbol: symbol }));\r\n        let btn = document.getElementById('createTokenBtn');\r\n        if (!btn)\r\n            return;\r\n        btn.addEventListener('click', () => CreateToken_awaiter(this, void 0, void 0, function* () {\r\n            LoadingHelper.setLoading(btn);\r\n            let liminalMarketService = new LiminalMarketService(this.moralis);\r\n            let address = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n            if (address === AddressZero) {\r\n                let result = yield liminalMarketService.createToken(symbol, () => {\r\n                    btn.innerHTML = 'Creating token. Give it few seconds';\r\n                });\r\n                if (result instanceof BlockchainError && result.code == BlockchainError.UserCancelled) {\r\n                    LoadingHelper.removeLoading();\r\n                    return;\r\n                }\r\n                address = result;\r\n            }\r\n            LoadingHelper.removeLoading();\r\n            btn.innerHTML = 'Add token to wallet';\r\n            let walletHelper = new WalletHelper(this.moralis);\r\n            yield walletHelper.addTokenToWallet(address, symbol, () => {\r\n                let tokenAddressInput = document.getElementById('tokenAddress');\r\n                if (!tokenAddressInput)\r\n                    return;\r\n                tokenAddressInput.innerHTML = address;\r\n                document.getElementById('copyAddressInfo').classList.remove('d-none');\r\n            });\r\n        }));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/html/pages/positions.html\n// Module\nvar positions_code = \"<article class=\\\"loaded-content2\\\">\\r\\n\\t<h3>Positions<!-- <a href=\\\"\\\" role=\\\"button\\\" id=\\\"syncWallet\\\">Sync wallet</a>--></h3>\\r\\n\\t<p>These are your positions registered with the broker. These would be registered to you on the stock exchange if we weren't running on\\r\\n\\t\\ta sandbox at the broker. Want to know when we open for live trading? <a href=\\\"https://liminal.market\\\" target=\\\"_blank\\\">Register your email with us</a>\\r\\n\\r\\n\\t</p>\\r\\n\\t<figure>\\r\\n\\t<table>\\r\\n\\t\\t<thead>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<th></th>\\r\\n\\t\\t\\t\\t<th>Symbol</th>\\r\\n\\t\\t\\t\\t<th>Current price</th>\\r\\n\\t\\t\\t\\t<th>Avg. entry value</th>\\r\\n\\t\\t\\t\\t<th>Quantity</th>\\r\\n\\t\\t\\t\\t<th>Market value</th>\\r\\n\\t\\t\\t\\t<th>Unrealize PL</th>\\r\\n\\t\\t\\t\\t<th>Trade</th>\\r\\n\\t\\t\\t\\t<th>Add to wallet</th>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</thead>\\r\\n\\t\\t<tbody>\\r\\n\\t\\t\\t{{#if result}}\\r\\n\\t\\t\\t{{#each result}}\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td class=\\\"symbol_logo\\\"><img id=\\\"symbol_logo_{{symbol}}\\\" src=\\\"/img/logos/default_logo.png\\\" /></td>\\r\\n\\t\\t\\t\\t<td><a href=\\\"https://strike.market/stocks/{{symbol}}\\\" target=\\\"_blank\\\">{{symbol}}</a></td>\\r\\n\\t\\t\\t\\t<td>{{current_price}}</td>\\r\\n\\t\\t\\t\\t<td>{{round2 avg_entry_price}}</td>\\r\\n\\t\\t\\t\\t<td>{{round2 qty}}</td>\\r\\n\\t\\t\\t\\t<td>${{round market_value}}</td>\\r\\n\\t\\t\\t\\t<td class=\\\"{{classColor unrealized_pl}}\\\">${{round unrealized_pl}} ({{perc unrealized_plpc}})</td>\\r\\n\\t\\t\\t\\t<td><a href=\\\"#\\\" class=\\\"tradeSecurity\\\" data-symbol=\\\"{{symbol}}\\\" data-qty={{qty}}>Trade</a></td>\\r\\n\\t\\t\\t\\t<td><a href=\\\"\\\" class=\\\"addToWallet\\\" data-symbol=\\\"{{symbol}}\\\">Add</a></td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t\\t{{/each}}\\r\\n\\t\\t\\t{{/if}}\\r\\n\\t\\t</tbody>\\r\\n\\t</table>\\r\\n\\t</figure>\\r\\n\\t<div id=\\\"documents\\\"></div>\\r\\n\\r\\n</article>\";\n// Exports\n/* harmony default export */ const pages_positions = (positions_code);\n;// CONCATENATED MODULE: ./src/html/modal/SyncStock.html\n// Module\nvar SyncStock_code = \"<article>\\r\\n    If your wallet is out of sync with your position you can sync it here. This happens when you move from\\r\\n    one chain to another. If you like to switch to new chain click the button below.\\r\\n    <br/><br/>\\r\\n    You will be asked to confirm a transaction of {{totalCost}} {{NativeSymbol}} (${{priceInNativeToken}}).\\r\\n    Each stock costs {{costPerShare}} {{NativeSymbol}} to sync. You have total of {{shareCount}} share.\\r\\n    <br/><br/>\\r\\n    <button id=\\\"syncAllPositions\\\">Sync stock to my wallet</button>\\r\\n</article>\";\n// Exports\n/* harmony default export */ const SyncStock = (SyncStock_code);\n;// CONCATENATED MODULE: ./src/services/backend/PositionsService.ts\nvar PositionsService_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass PositionsService {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n    }\r\n    getPositions() {\r\n        return PositionsService_awaiter(this, void 0, void 0, function* () {\r\n            return yield this.moralis.Cloud.run('positions');\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/pages/PositionsPage.ts\nvar PositionsPage_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass PositionsPage {\r\n    constructor(moralis) {\r\n        this.moralis = moralis;\r\n        this.documentService = new DocumentService(this.moralis);\r\n    }\r\n    load() {\r\n        return PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n            let mainContainer = document.getElementById('main_container');\r\n            if (!mainContainer)\r\n                return;\r\n            let positionService = new PositionsService(this.moralis);\r\n            let positions = yield positionService.getPositions();\r\n            HandlebarHelpers.registerHelpers();\r\n            let template = Handlebars.compile(pages_positions);\r\n            mainContainer.innerHTML = template({ result: positions });\r\n            let syncWalletBtn = document.getElementById('syncWallet');\r\n            if (syncWalletBtn) {\r\n                syncWalletBtn.addEventListener('click', (evt) => {\r\n                    evt.preventDefault();\r\n                    this.syncAllTokens();\r\n                });\r\n            }\r\n            let symbols = new Array();\r\n            const sellLinks = document.getElementsByClassName('tradeSecurity');\r\n            for (let i = 0; i < sellLinks.length; i++) {\r\n                let element = sellLinks[i];\r\n                let symbol = element.dataset.symbol;\r\n                if (!symbol)\r\n                    continue;\r\n                symbols.push(symbol);\r\n                sellLinks[i].addEventListener('click', (evt) => PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n                    evt.preventDefault();\r\n                    let element = evt.target;\r\n                    let symbol = element.dataset.symbol;\r\n                    if (!symbol)\r\n                        return;\r\n                    let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                    let contractAddress = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n                    let securitiesService = yield SecuritiesService.getInstance();\r\n                    let security = yield securitiesService.getSecurityBySymbol(symbol);\r\n                    let tradePage = new TradePage(this.moralis);\r\n                    yield tradePage.load(symbol, security.Name, security.LogoPath + security.Logo, contractAddress);\r\n                    window.scrollTo(0, 0);\r\n                }));\r\n            }\r\n            const addToWalletLinks = document.getElementsByClassName('addToWallet');\r\n            for (let i = 0; i < addToWalletLinks.length; i++) {\r\n                addToWalletLinks[i].addEventListener('click', (evt) => PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n                    evt.preventDefault();\r\n                    console.log(evt.target);\r\n                    let element = addToWalletLinks[i];\r\n                    let symbol = element.dataset.symbol;\r\n                    let liminalMarketService = new LiminalMarketService(this.moralis);\r\n                    let contractAddress = yield liminalMarketService.getSymbolContractAddress(symbol);\r\n                    if (contractAddress.toString() == AddressZero) {\r\n                        let createToken = new CreateToken(this.moralis);\r\n                        createToken.show(symbol);\r\n                        return;\r\n                    }\r\n                    let walletHelper = new WalletHelper(this.moralis);\r\n                    yield walletHelper.addTokenToWallet(contractAddress.toString(), symbol, () => {\r\n                        let modal = new Modal();\r\n                        let template = Handlebars.compile(AddressInfo);\r\n                        let content = template({ symbol: symbol, address: contractAddress });\r\n                        modal.showModal('Import token to wallet', content);\r\n                    });\r\n                }));\r\n            }\r\n            yield this.renderSymbolLogos(symbols);\r\n            let docTemplate = Handlebars.compile(elements_documents);\r\n            let documents = yield this.documentService.getDocuments();\r\n            let documentDom = document.getElementById('documents');\r\n            if (!documentDom)\r\n                return;\r\n            documentDom.innerHTML = docTemplate({ result: documents });\r\n            yield this.initDocuments();\r\n        });\r\n    }\r\n    renderSymbolLogos(symbols) {\r\n        return PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n            let securitiesService = yield SecuritiesService.getInstance();\r\n            const assets = yield securitiesService.getSecurities();\r\n            let asset;\r\n            for (let i = 0; i < symbols.length; i++) {\r\n                asset = assets.get(symbols[i]);\r\n                if (asset) {\r\n                    document.getElementById('symbol_logo_' + symbols[i]).setAttribute('src', '/img/logos/' + asset.Logo);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    syncAllTokens() {\r\n        return PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            let costOfSync = yield this.moralis.Cloud.run('costOfSync');\r\n            let template = Handlebars.compile(SyncStock);\r\n            let content = template({\r\n                shareCount: costOfSync.shareCount,\r\n                costPerShare: Moralis.Units.FromWei(costOfSync.costPerShare, 18),\r\n                priceInNativeToken: costOfSync.priceInNativeToken,\r\n                totalCost: Moralis.Units.FromWei(costOfSync.cost, 18),\r\n                NativeSymbol: networkInfo.NativeSymbol\r\n            });\r\n            let modal = new Modal();\r\n            modal.showModal('Sync all stock to wallet', content);\r\n            let syncAllPositions = document.getElementById('syncAllPositions');\r\n            if (syncAllPositions) {\r\n                syncAllPositions.addEventListener('click', (evt) => PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n                    evt.preventDefault();\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    initDocuments() {\r\n        return PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n            const links = document.getElementsByClassName('downloadDoc');\r\n            const user = this.moralis.User.current();\r\n            if (!user)\r\n                return;\r\n            for (let i = 0; i < links.length; i++) {\r\n                links[i].addEventListener('click', (evt) => PositionsPage_awaiter(this, void 0, void 0, function* () {\r\n                    evt.preventDefault();\r\n                    let documentId = links[i].dataset.docid;\r\n                    if (!documentId)\r\n                        return;\r\n                    let locationUrl = yield this.documentService.getDocument(documentId);\r\n                    if (locationUrl == '') {\r\n                        alert('Could not find document. Please contact us if you should have gotten a document');\r\n                        return;\r\n                    }\r\n                    window.location = locationUrl;\r\n                }));\r\n            }\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/routing/Routing.ts\nvar Routing_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\nclass Routing {\r\n    constructor(moralis) {\r\n        this.settings = {\r\n            show_trade: this.showTrade,\r\n            show_positions: this.showPositions,\r\n            show_stocks: this.showStocks,\r\n            show_kyc_action_required: this.showKycActionRequired,\r\n            show_funding: this.showFunding,\r\n            show_kyc: this.showKyc\r\n        };\r\n        this.moralis = moralis;\r\n    }\r\n    loadRoutes() {\r\n        var _a;\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            let path = window.location.hash.replace('#', '').replace('/', '');\r\n            if (window.location.search !== '')\r\n                path = window.location.search.replace('?', '');\r\n            if (path === '')\r\n                path = 'stocks';\r\n            this.attachNavLinks();\r\n            let fn = (_a = this.settings['show_' + path]) !== null && _a !== void 0 ? _a : this.settings['show_stocks'];\r\n            if (typeof fn === 'function') {\r\n                yield fn(this);\r\n            }\r\n        });\r\n    }\r\n    showKycActionRequired(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new TradePage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Buy stocks', '#/kyc_action_required');\r\n            let button = document.getElementById('liminal_market_execute_trade');\r\n            button === null || button === void 0 ? void 0 : button.dispatchEvent(new MouseEvent('click'));\r\n        });\r\n    }\r\n    showKyc(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new TradePage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Buy stocks', '#/kyc');\r\n            let button = document.getElementById('liminal_market_execute_trade');\r\n            button === null || button === void 0 ? void 0 : button.dispatchEvent(new MouseEvent('click'));\r\n        });\r\n    }\r\n    showFunding(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new TradePage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Buy stocks', '#/funding');\r\n            let aUSDFundingModal = new FakeAUSDFund(this.moralis);\r\n            let networkInfo = NetworkInfo.getInstance();\r\n            if (networkInfo.TestNetwork) {\r\n                aUSDFundingModal.showAUSDFakeFund(() => {\r\n                });\r\n            }\r\n            else {\r\n                aUSDFundingModal.showAUSDFund(() => {\r\n                });\r\n            }\r\n        });\r\n    }\r\n    showTrade(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new TradePage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Buy stocks', '#/trade');\r\n        });\r\n    }\r\n    showStocks(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new StocksPage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Stocks', '#/stocks');\r\n        });\r\n    }\r\n    showPositions(routing, evt) {\r\n        return Routing_awaiter(this, void 0, void 0, function* () {\r\n            if (evt)\r\n                evt.preventDefault();\r\n            let page = new PositionsPage(routing.moralis);\r\n            yield page.load();\r\n            history.pushState(null, 'Positions', '#/positions');\r\n        });\r\n    }\r\n    attachNavLinks() {\r\n        let router = this;\r\n        let tradeNavLinks = document.querySelectorAll('.tradeNavLink');\r\n        tradeNavLinks.forEach(link => {\r\n            link.addEventListener('click', function (evt) {\r\n                return Routing_awaiter(this, void 0, void 0, function* () {\r\n                    yield router.showTrade(router, evt);\r\n                    link.parentElement.parentElement.parentElement.removeAttribute('open');\r\n                });\r\n            });\r\n        });\r\n        let investLinks = document.querySelectorAll('.investNavLink');\r\n        investLinks.forEach(link => {\r\n            link.addEventListener('click', function (evt) {\r\n                return Routing_awaiter(this, void 0, void 0, function* () {\r\n                    yield router.showStocks(router, evt);\r\n                    link.parentElement.parentElement.parentElement.removeAttribute('open');\r\n                });\r\n            });\r\n        });\r\n        let positionLinks = document.querySelectorAll('.positionNavLink');\r\n        positionLinks.forEach(link => {\r\n            link.addEventListener('click', function (evt) {\r\n                return Routing_awaiter(this, void 0, void 0, function* () {\r\n                    yield router.showPositions(router, evt);\r\n                    link.parentElement.parentElement.parentElement.removeAttribute('open');\r\n                });\r\n            });\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/ui/elements/Header.ts\nclass Header {\r\n    static loadImage() {\r\n        let header = document.querySelector('body > header');\r\n        if (!header)\r\n            return;\r\n        let random = Math.floor(Math.random() * 10);\r\n        header.style.backgroundImage = \"url(/img/header/\" + random + \".jpg)\";\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/main.ts\nvar main_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst start = function () {\r\n    return main_awaiter(this, void 0, void 0, function* () {\r\n        let slowServerTimer = setTimeout(slowServer, 5 * 1000);\r\n        let connectionService = new ConnectionService();\r\n        connectionService.start().then(function () {\r\n            return main_awaiter(this, void 0, void 0, function* () {\r\n                clearTimeout(slowServerTimer);\r\n                let loadingMessage = document.querySelector('.loading');\r\n                let userService = new UserService(Moralis);\r\n                let loggedInUser = yield userService.isLoggedIn(loadingMessage);\r\n                console.log('loggedInUser', loggedInUser);\r\n                if (loggedInUser) {\r\n                    let userInfo = new UserInfo(Moralis, loggedInUser.providerInfo, loggedInUser);\r\n                    yield userInfo.render('user_header_info');\r\n                }\r\n                else {\r\n                    //show Connect Wallet button\r\n                    let connectWallet = new ConnectWallet(Moralis);\r\n                    connectWallet.renderButton('user_header_info');\r\n                }\r\n                let routing = new Routing(Moralis);\r\n                yield routing.loadRoutes();\r\n            });\r\n        }).catch((reason) => {\r\n            ErrorInfo.report(new GeneralError(\"Server is down. Please try again later.<br /><br />\" + reason));\r\n        });\r\n        document.body.addEventListener('click', (evt) => {\r\n            let userInfoDropdown = document.getElementById('userInfoDropdown');\r\n            if (userInfoDropdown && !userInfoDropdown.classList.contains('d-none')) {\r\n                userInfoDropdown.classList.add('d-none');\r\n                evt.stopPropagation();\r\n                evt.preventDefault();\r\n            }\r\n        });\r\n        let walletHelper = new WalletHelper(Moralis);\r\n        if (walletHelper.isWebview(window.navigator.userAgent)) {\r\n            //console = ErrorInfo as any;\r\n        }\r\n        function slowServer() {\r\n            let loading = document.querySelector('.loading');\r\n            if (!loading) {\r\n                clearTimeout(slowServerTimer);\r\n                return;\r\n            }\r\n            loading.innerHTML = 'Hmmm.... our servers are slow and might be down. Give it few minutes.';\r\n        }\r\n        Header.loadImage();\r\n    });\r\n};\r\nstart().then();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsV0FBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsU0FBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLEtBQUs7QUFDN0MsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixLQUFLO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLEVBQUU7QUFDL0MsMENBQTBDLEdBQUcsU0FBUyxFQUFFO0FBQ3hEO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixLQUFLO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQjtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLE1BQU07QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFD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LE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQzFFLE1BQU0sRUFBRSxNQUFNO1FBQ2QsTUFBTSxFQUFFLEtBQUs7S0FDaEIsRUFBRSxFQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDMUUsTUFBTSxFQUFFLFFBQVE7UUFDaEIsTUFBTSxFQUFFLEtBQUs7S0FDaEIsRUFBRSxFQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDNUUsTUFBTSxFQUFFLE9BQU87UUFDZixNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLG1DQUFtQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRTtRQUM3RCxNQUFNLEVBQUUsVUFBVTtRQUNsQixNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRTtRQUMxRSxNQUFNLEVBQUUsU0FBUztRQUNqQixNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRTtRQUNyRSxNQUFNLEVBQUUsV0FBVztRQUNuQixNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ3ZGLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQzFFLE1BQU0sRUFBRSxPQUFPO1FBQ2YsTUFBTSxFQUFFLEtBQUs7S0FDaEIsRUFBRSxFQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDckUsTUFBTSxFQUFFLFFBQVE7UUFDaEIsTUFBTSxFQUFFLEtBQUs7S0FDaEIsRUFBRSxFQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDekUsTUFBTSxFQUFFLE9BQU87UUFDZixNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDcEMsTUFBTSxFQUFFLDZDQUE2QztRQUNyRCxNQUFNLEVBQUUsS0FBSztLQUNoQixFQUFFLEVBQUMsTUFBTSxFQUFFLHlCQUF5QixFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ3RGLE1BQU0sRUFBRSxZQUFZO1FBQ3BCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsa0NBQWtDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQzVELE1BQU0sRUFBRSxRQUFRO1FBQ2hCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ3ZFLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQzNFLE1BQU0sRUFBRSxXQUFXO1FBQ25CLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ3hFLE1BQU0sRUFBRSxZQUFZO1FBQ3BCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ3ZFLE1BQU0sRUFBRSxVQUFVO1FBQ2xCLE1BQU0sRUFBRSxLQUFLO0tBQ2hCLEVBQUUsRUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFO1FBQ2xFLE1BQU0sRUFBRSxrQkFBa0I7UUFDMUIsTUFBTSxFQUFFLEtBQUs7S0FDaEIsRUFBRSxFQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDLEVBQUU7UUFDN0UsTUFBTSxF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Q2pELElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQ1YsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUM5QixPQUFPO2FBQ1Y7WUFFRCxPQUFPLENBQUMsU0FBUyxHQUFHLHVFQUF1RTtRQUUvRixDQUFDO1FBQ0QsZ0JBQWdCLEVBQUUsQ0FBQztJQUV2QixDQUFDO0NBQUE7QUFFRCxLQUFLLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL25ldHdvcmtzL05ldHdvcmsudHM/YmNkYyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9uZXR3b3Jrcy9sb2NhbGhvc3QtbmV0d29yay50cz85M2NiIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL25ldHdvcmtzL211bWJhaS1uZXR3b3JrLnRzPzUyN2QiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9Db29raWVIZWxwZXIudHM/ZDhkNiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9uZXR3b3Jrcy9OZXR3b3JrSW5mby50cz9hMWM2Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3NlcnZpY2VzL2JhY2tlbmQvQ29ubmVjdGlvblNlcnZpY2UudHM/NDMwMyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9icm9rZXIvTWFya2V0U2VydmljZS50cz9iNjE4Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2Vycm9ycy9HZW5lcmFsRXJyb3IudHM/MWQ2NyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL1dyb25nTmV0d29yay5odG1sPzFiODEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9Nb2RhbC5odG1sPzMwZGEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL01vZGFsLnRzP2I5ZTYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvc2VydmljZXMvYnJva2VyL1NlY3VyaXR5LnRzPzAxMzEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvc2VydmljZXMvYnJva2VyL1NlY3VyaXRpZXNTZXJ2aWNlLnRzPzE4YzIiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9Mb2FkaW5nSGVscGVyLnRzPzY1MmEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvSW5mb0JhclR5cGUudHM/ODgwNyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9lbGVtZW50cy9JbmZvQmFyLnRzPzYxMzciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9XYWxsZXRNaXNzaW5nLmh0bWw/ZmYyNSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9lcnJvcnMvUHJlZGVmaW5lZEVycm9ySGFuZGxlcnMudHM/N2Q4ZiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9lcnJvcnMvRXJyb3JJbmZvLnRzPzM3ZmEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9XYWxsZXRIZWxwZXIudHM/YTMxNiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvU3dpdGNoTmV0d29ya01vZGFsLnRzP2MzZDUiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvc2VydmljZXMvYmFja2VuZC9BdXRoZW50aWNhdGVTZXJ2aWNlLnRzP2UyNTAiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvZW51bXMvV2FsbGV0VHlwZS50cz81OWNhIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3dhbGxldC9Qcm92aWRlckluZm8udHM/NDg0YyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9iYWNrZW5kL1VzZXJTZXJ2aWNlLnRzP2JiYWEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvY29udHJhY3RzL2xvY2FsaG9zdC1jb250cmFjdC1hZGRyZXNzZXMudHM/M2M1MiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9jb250cmFjdHMvQ29udHJhY3RBZGRyZXNzZXMudHM/MTRjZSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9jb250cmFjdHMvcmlua2VieS1jb250cmFjdC1hZGRyZXNzZXMudHM/ZTg2MSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9jb250cmFjdHMvbXVtYmFpLWNvbnRyYWN0LWFkZHJlc3Nlcy50cz9iMDc5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2NvbnRyYWN0cy9mdWppLWNvbnRyYWN0LWFkZHJlc3Nlcy50cz9lNTY2Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2NvbnRyYWN0cy9Db250cmFjdEluZm8udHM/YjIwYSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL01hcmtldElzQ2xvc2VkLmh0bWw/YzBiNCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91dGlsL0RhdGVIZWxwZXIudHM/MzQ0ZiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9lcnJvcnMvQmxvY2tjaGFpbkVycm9yLnRzP2ZkNWEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvc2VydmljZXMvYmxvY2tjaGFpbi9CbG9ja2NoYWluU2VydmljZS50cz8yZDQzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3NlcnZpY2VzL2Jsb2NrY2hhaW4vTGltaW5hbE1hcmtldFNlcnZpY2UudHM/N2I4MiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL1NlY3VyaXRpZXNMaXN0Lmh0bWw/N2ZkMyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL1NlY3VyaXRpZXMuaHRtbD84ZTg1Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3V0aWwvQ29weUhlbHBlci50cz8yY2IzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvQWRkcmVzc0luZm8uaHRtbD9mYjc1Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvQ29udHJhY3RBZGRyZXNzTm90Rm91bmQuaHRtbD9iN2U0Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vbm9kZV9tb2R1bGVzL2JpZ251bWJlci5qcy9iaWdudW1iZXIubWpzP2Y4Y2MiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9IZWxwZXIudHM/ZGFlNyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL0FkZFRvV2FsbGV0Lmh0bWw/NTZkNiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9lbGVtZW50cy9TZWN1cml0aWVzTGlzdC50cz9mNjEyIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvVXNlckluZm8uaHRtbD8zNTA5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0t5Y0VkaXROYW1lLmh0bWw/NDlhMyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91dGlsL1N0cmluZ0hlbHBlci50cz80YjE1Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9LWUMvS3ljRWRpdE5hbWVGb3JtLnRzPzhhYjciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljRWRpdENvbnRhY3RGb3JtLmh0bWw/NDEzMCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91dGlsL0Zvcm1IZWxwZXIudHM/YTE3MSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvS1lDL0t5Y0VkaXRDb250YWN0Rm9ybS50cz9kNzQzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0t5Y0VkaXRUcnVzdGVkQ29udGFjdC5odG1sPzZjNmIiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9Db3VudHJ5SGVscGVyLnRzPzE4YjYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNFZGl0VHJ1c3RlZENvbnRhY3QudHM/OTQ5OSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9ibG9ja2NoYWluL0FVU0RTZXJ2aWNlLnRzP2QwYzQiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9mdW5kaW5nL0Zha2VGdW5kaW5nLmh0bWw/OTNlNiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9icm9rZXIvRnVuZGluZ1NlcnZpY2UudHM/ZTY5YyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0Z1bmRpbmcvU2VsZWN0RnVuZGluZ1R5cGUuaHRtbD9lZTYyIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9GdW5kaW5nL1NlbGVjdEZ1bmRpbmdUeXBlLnRzPzBhYTAiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9GdW5kaW5nL0FDSFJlbGF0aW9uc2hpcC5odG1sPzU3Y2EiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0Z1bmRpbmcvQUNIUmVsYXRpb25zaGlwLnRzP2RhMjgiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9GdW5kaW5nL1RyYW5zZmVyLmh0bWw/MDc3ZSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9lbnVtcy9UcmFuc2ZlckRpcmVjdGlvbkVudW0udHM/NTUxMSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0Z1bmRpbmcvVHJhbnNmZXJzTGlzdC5odG1sPzI2ODMiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdXRpbC9IYW5kbGViYXJIZWxwZXJzLnRzP2M5YzMiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0Z1bmRpbmcvVHJhbnNmZXJzTGlzdC50cz8wZGNiIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9GdW5kaW5nL1RyYW5zZmVyLnRzP2Q2NWYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9GdW5kaW5nL1dpcmVUcmFuc2Zlci5odG1sP2Y1OWEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0Z1bmRpbmcvV2lyZVRyYW5zZmVyLnRzPzVhM2QiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9GdW5kaW5nL0FDSFRyYW5zZmVySW5mby5odG1sPzQ2Y2QiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0Z1bmRpbmcvQUNIVHJhbnNmZXJJbmZvLnRzPzg4ZjYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9GdW5kaW5nL1dpcmVUcmFuc2ZlckluZm8uaHRtbD8zOTk5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9GdW5kaW5nL1dpcmVUcmFuc2ZlckluZm8udHM/YWJlMSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvRnVuZGluZy9BVVNERnVuZC50cz9mOTBjIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9GdW5kaW5nL0Zha2VBVVNERnVuZC50cz9lMzlhIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvRnVuZGluZy9XaXRoZHJhd01vZGFsLmh0bWw/NWU3OCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvRnVuZGluZy9XaXRoZHJhd01vZGFsLnRzP2NmZWQiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvQVVzZEJhbGFuY2UudHM/NWIzYiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9lbGVtZW50cy9Vc2VySW5mby50cz8yZjA3Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvQ29ubmVjdFdhbGxldEJ1dHRvbi5odG1sPzlmOTMiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9TZWxlY3RXYWxsZXRQcm92aWRlci5odG1sP2MxNDUiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0Nvbm5lY3RXYWxsZXQudHM/MGZiYyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9ibG9ja2NoYWluL0tZQ1NlcnZpY2UudHM/YWM5OCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9ibG9ja2NoYWluL1NlY3VyaXR5VG9rZW5TZXJ2aWNlLnRzP2MyY2QiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvUHJvZ3Jlc3MudHM/NGMyYiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9iYWNrZW5kL1N1YnNjcmlwdGlvbi50cz8xZTY0Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2VudW1zL1RyYWRlVHlwZS50cz85MDIzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvdHJhZGVwYW5lbC9FeGVjdXRlVHJhZGVCdXR0b24uaHRtbD9mMTllIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvZWxlbWVudHMvdHJhZGVwYW5lbC9UcmFkZUV4ZWN1dGVkLmh0bWw/YjYyMCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0Zha2VOYXRpdmVUb2tlbk5lZWRlZC5odG1sP2FkMTciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9OYXRpdmVUb2tlbk5lZWRlZC5odG1sP2ExYjEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL05hdGl2ZVRva2VuTmVlZGVkLnRzPzRmODciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljQWN0aW9uUmVxdWlyZWQuaHRtbD9kMmFiIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1dlRG9udEtub3dXaHkuaHRtbD8wMTdiIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0lERU5USVRZX1ZFUklGSUNBVElPTi5odG1sPzA1NmEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvQWN0aW9uUmVxdWlyZWQvQUREUkVTU19WRVJJRklDQVRJT04uaHRtbD8xY2UzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0FGRklMSUFURUQuaHRtbD85MjM5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0NPTlRST0xfUEVSU09OLmh0bWw/ZWExNSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9DT1VOVFJZX05PVF9TVVBQT1JURUQuaHRtbD8zNjljIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0RBVEVfT0ZfQklSVEguaHRtbD8yNjg1Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0ZBTUlMWV9NRU1CRVJfUEVQLmh0bWw/N2E3YiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9JTlZBTElEX0lERU5USVRZX1BBU1NQT1JULmh0bWw/YTkwNCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9QRVAuaHRtbD82NDU3Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1NFTEZJRV9WRVJJRklDQVRJT04uaHRtbD8yYmZjIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1RBWF9JREVOVElGSUNBVElPTi5odG1sPzkwNzYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvQWN0aW9uUmVxdWlyZWQvVklTQV9UWVBFX09USEVSLmh0bWw/NTE5NCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9XOEJFTl9DT1JSRUNUSU9OLmh0bWw/OGQ4MCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL0ZpbGVVcGxvYWQuaHRtbD8zNTg2Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL2VsZW1lbnRzL0ZpbGVVcGxvYWQudHM/NjI4YyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91dGlsL0Zvcm1WYWxpZGF0b3IudHM/N2M4ZCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvS1lDL0t5Y0FjdGlvblJlcXVpcmVkLnRzPzNiMGUiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LWUNNb2RhbC5odG1sPzUwYjkiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljQ29udGFjdC5odG1sPzAzMzciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvZXJyb3JzL2Nsb3VkL0t5Y1ZhbGlkYXRvckVycm9yLnRzPzM1NzkiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNCYXNlLnRzPzZiN2QiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNDb250YWN0LnRzPzg2MTciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljSWRlbnRpdHkuaHRtbD8zZDk5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9LWUMvS3ljSWRlbnRpdHkudHM/ZGU2OCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9LeWNEaXNjbG9zdXJlcy5odG1sPzMwYTgiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljQWZmaWxpYXRlT3JDb250cm9sbGVkLmh0bWw/NzIxMyIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvS1lDL0t5Y0FmZmlsaWF0ZU9yQ29udHJvbGxlZC50cz8zODcxIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvS3ljL0t5Y0ltbWVkaWF0ZUZhbWlseS5odG1sPzE1MmEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNJbW1lZGlhdGVGYW1pbHkudHM/NjFhNSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvS1lDL0t5Y0Rpc2Nsb3N1cmVzLnRzP2RmMDIiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljQWNjb3VudEFncmVlbWVudC5odG1sPzQxM2IiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNBY2NvdW50QWdyZWVtZW50LnRzPzMyMDAiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9LeWMvS3ljVHJ1c3RlZENvbnRhY3QuaHRtbD9hNTFjIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9LWUMvS3ljVHJ1c3RlZENvbnRhY3QudHM/MGY4YSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9LeWNVcGxvYWQuaHRtbD83MjE2Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL21vZGFscy9LWUMvS3ljVXBsb2FkLnRzP2JmZTciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQy9LeWNXYWl0aW5nLnRzP2VjZGEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0tZQ0Zvcm0udHM/Yzk4NiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9tb2RhbHMvS1lDL0t5Y1N0YXR1c0hhbmRsZXIudHM/NGY1MiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL21vZGFsL0t5Yy9LeWNBcHByb3ZlZC5odG1sP2UyYjEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvdHJhZGVwYW5lbC9FeGVjdXRlVHJhZGVCdXR0b24udHM/NTA3YiIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVJbnB1dC5odG1sP2UwMzYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL1NlY3VyaXRpZXNMaXN0TW9kYWwudHM/YTc2OSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9iYWNrZW5kL1RyYWRlSW5mby50cz8wNTkzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2Vycm9ycy9jbG91ZC9IdHRwRXJyb3IudHM/MzNkNSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9lcnJvcnMvQ2xvdWRFcnJvci50cz85YjYzIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3NlcnZpY2VzL2JhY2tlbmQvU3RvY2tQcmljZVNlcnZpY2UudHM/YWU5NCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvUHJpY2VQZXJTaGFyZS5odG1sPzYzYTAiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvdHJhZGVwYW5lbC9UcmFkZVBhbmVsSW5wdXQudHM/NjhjYSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVTd2l0Y2guaHRtbD8wNjJjIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3VpL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVTd2l0Y2gudHM/YzQyMSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9lbGVtZW50cy9UcmFkZVBhbmVsLnRzP2ZhNDQiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9wYWdlcy90cmFkZS5odG1sP2Y2ZjYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9Db3B5VG9rZW5BZGRyZXNzVG9BZGRUb1dhbGxldC5odG1sP2RkYzMiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvcGFnZXMvVHJhZGVQYWdlLnRzPzBmOTQiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9wYWdlcy9zdG9ja3NwYWdlLmh0bWw/YTJjNCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9wYWdlcy9TdG9ja3NQYWdlLnRzPzM4MzciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9lbGVtZW50cy9kb2N1bWVudHMuaHRtbD8zOWNiIiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL3NlcnZpY2VzL2JhY2tlbmQvRG9jdW1lbnRTZXJ2aWNlLnRzPzgwYjciLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9tb2RhbC9DcmVhdGVUb2tlbi5odG1sPzQ5NmEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvbW9kYWxzL0NyZWF0ZVRva2VuLnRzPzI0ZDYiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvaHRtbC9wYWdlcy9wb3NpdGlvbnMuaHRtbD82ZmE5Iiwid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL2h0bWwvbW9kYWwvU3luY1N0b2NrLmh0bWw/MGMxNSIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy9zZXJ2aWNlcy9iYWNrZW5kL1Bvc2l0aW9uc1NlcnZpY2UudHM/OGEzOCIsIndlYnBhY2s6Ly9saW1pbmFsLWFwcC8uL3NyYy91aS9wYWdlcy9Qb3NpdGlvbnNQYWdlLnRzP2JhZGEiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvcm91dGluZy9Sb3V0aW5nLnRzP2Q2NjQiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvdWkvZWxlbWVudHMvSGVhZGVyLnRzP2UyMzAiLCJ3ZWJwYWNrOi8vbGltaW5hbC1hcHAvLi9zcmMvbWFpbi50cz9jZDQ5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ldHdvcmsge1xyXG5cdFNlcnZlclVybCA9IFwiXCI7XHJcblx0QXBwSWQgPSBcIlwiO1xyXG5cdENoYWluSWQgPSAwO1xyXG5cdE5hbWUgPSBcIlwiO1xyXG5cdENoYWluTmFtZSA9ICcnO1xyXG5cdE5hdGl2ZUN1cnJlbmN5TmFtZSA9IFwiXCI7XHJcblx0TmF0aXZlU3ltYm9sID0gXCJcIjtcclxuXHROYXRpdmVEZWNpbWFsID0gMTg7XHJcblx0UnBjVXJsID0gJyc7XHJcblx0QmxvY2tFeHBsb3JlciA9ICcnO1xyXG5cdFRlc3ROZXR3b3JrID0gdHJ1ZTtcclxuXHRGYXVjZXRVcmwgPSAnJztcclxuXHRCdXlVcmwgPScnO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdGlmICh3aW5kb3cubG9jYXRpb24uaG9zdC5pbmRleE9mKCdsb2NhbGhvc3QnKSAhPSAtMSkge1xyXG5cdFx0XHR0aGlzLlNlcnZlclVybCA9IFwiaHR0cHM6Ly9kcWV0OGRmeW12emoudXNlbW9yYWxpcy5jb206MjA1My9zZXJ2ZXJcIjtcclxuXHRcdFx0dGhpcy5BcHBJZCA9IFwiVFhSNlllc0s5OVZnUkN4U2VjbnlTUk1wMUtJNXJMbkNmSWV0UXV1VVwiO1xyXG5cdFx0fVxyXG5cdFx0Ly9lbHNlXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuU2VydmVyVXJsID0gXCJodHRwczovL2Y4dDF2cnJ3dGJvYS51c2Vtb3JhbGlzLmNvbToyMDUzL3NlcnZlclwiO1xyXG5cdFx0XHR0aGlzLkFwcElkID0gXCJYWmhwM3dRb2JyS2lDaWIwQmY0RlBWS0FVaGJITTlTdlRMS09LdkJiXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgYWRkTmV0d29ya1RvV2FsbGV0KG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG5cdFx0Y29uc3Qgd2ViMyA9IGF3YWl0IG1vcmFsaXMuZW5hYmxlV2ViMygpO1xyXG5cdFx0aWYgKCF3ZWIzIHx8ICF3ZWIzLnByb3ZpZGVyLnJlcXVlc3QpIHJldHVybjtcclxuXHJcblx0XHR3ZWIzLnByb3ZpZGVyLnJlcXVlc3Qoe1xyXG5cdFx0XHRtZXRob2Q6ICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbicsXHJcblx0XHRcdHBhcmFtczogW3tcclxuXHRcdFx0XHRjaGFpbklkOiAnMHgnICsgdGhpcy5DaGFpbklkLnRvU3RyaW5nKDE2KSxcclxuXHRcdFx0XHRjaGFpbk5hbWU6IHRoaXMuQ2hhaW5OYW1lLFxyXG5cdFx0XHRcdG5hdGl2ZUN1cnJlbmN5OiB7XHJcblx0XHRcdFx0XHRuYW1lOiB0aGlzLk5hdGl2ZUN1cnJlbmN5TmFtZSxcclxuXHRcdFx0XHRcdHN5bWJvbDogdGhpcy5OYXRpdmVTeW1ib2wsXHJcblx0XHRcdFx0XHRkZWNpbWFsczogdGhpcy5OYXRpdmVEZWNpbWFsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRycGNVcmxzOiBbdGhpcy5ScGNVcmxdLFxyXG5cdFx0XHRcdGJsb2NrRXhwbG9yZXJVcmxzOiBbdGhpcy5CbG9ja0V4cGxvcmVyXVxyXG5cdFx0XHR9XVxyXG5cdFx0fSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKVxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyBoYXNFbm91Z2hOYXRpdmVUb2tlbnMobW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzKSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Ly9UT0RPOiByZW1vdmUgbGF0ZXIsIE1vcmFsaXMgZG9lc250IHN1cHBvcnQgZ2V0TmF0aXZlQmFsYW5jZSBvbiBsb2NhbGhvc3Qgc28gaXQncyBhbHdheXMgdHJ1ZVxyXG5cdFx0aWYgKHRoaXMuTmFtZSA9PSAnbG9jYWxob3N0Jykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnN0IG9wdGlvbnM6IGFueSA9IHtjaGFpbjogJzB4JyArIHRoaXMuQ2hhaW5JZC50b1N0cmluZygxNil9O1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBtb3JhbGlzLldlYjNBUEkuYWNjb3VudC5nZXROYXRpdmVCYWxhbmNlKG9wdGlvbnMpO1xyXG5cclxuXHRcdFx0Y29uc3QgYmFsYW5jZSA9IHBhcnNlRmxvYXQoTW9yYWxpcy5Vbml0cy5Gcm9tV2VpKHJlc3VsdC5iYWxhbmNlLCAxOCkpO1xyXG5cdFx0XHRpZiAoYmFsYW5jZSA8IDAuMDA1KSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fTtcclxufVxyXG5cclxuIiwiaW1wb3J0IE5ldHdvcmsgZnJvbSAnLi9OZXR3b3JrJztcclxuLy9sb2NhbGhvc3RcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbG9jYWxob3N0TmV0d29yayBleHRlbmRzIE5ldHdvcmsge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHR0aGlzLkNoYWluSWQgPSAzMTMzNztcclxuXHRcdHRoaXMuTmFtZSA9IFwibG9jYWxob3N0XCI7XHJcblx0XHR0aGlzLkNoYWluTmFtZSA9ICdsb2NhbGhvc3QgdGVzdCc7XHJcblx0XHR0aGlzLk5hdGl2ZUN1cnJlbmN5TmFtZSA9IFwiRXRoZXJldW1cIjtcclxuXHRcdHRoaXMuTmF0aXZlU3ltYm9sID0gXCJFVEhcIjtcclxuXHRcdHRoaXMuTmF0aXZlRGVjaW1hbCA9IDE4O1xyXG5cdFx0dGhpcy5ScGNVcmwgPSAnaHR0cHM6Ly9yaW5rZWJ5LmluZnVyYS5pby92My85YWEzZDk1YjNiYzQ0MGZhODhlYTEyZWFhNDQ1NjE2MSc7XHJcblx0XHR0aGlzLkJsb2NrRXhwbG9yZXIgPSAnaHR0cHM6Ly9yaW5rZWJ5LmV0aGVyc2Nhbi5pbyc7XHJcblxyXG5cdH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuIiwiXHJcblxyXG5pbXBvcnQgTmV0d29yayBmcm9tICcuL05ldHdvcmsnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbXVtYmFpTmV0d29yayBleHRlbmRzIE5ldHdvcmsge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5DaGFpbklkID0gODAwMDE7XHJcbiAgICAgICAgICAgIHRoaXMuTmFtZSA9IFwibXVtYmFpXCI7XHJcbiAgICAgICAgICAgIHRoaXMuQ2hhaW5OYW1lID0gJ1BvbHlnb24gTXVtYmFpJztcclxuICAgICAgICAgICAgdGhpcy5OYXRpdmVDdXJyZW5jeU5hbWUgPSBcIk1hdGljXCI7XHJcbiAgICAgICAgICAgIHRoaXMuTmF0aXZlU3ltYm9sID0gXCJNQVRJQ1wiO1xyXG4gICAgICAgICAgICB0aGlzLk5hdGl2ZURlY2ltYWwgPSAxODtcclxuICAgICAgICAgICAgdGhpcy5ScGNVcmwgPSAnaHR0cHM6Ly9tYXRpYy1tdW1iYWkuY2hhaW5zdGFja2xhYnMuY29tLyc7XHJcbiAgICAgICAgICAgIHRoaXMuQmxvY2tFeHBsb3JlciA9ICdodHRwczovL211bWJhaS5wb2x5Z29uc2Nhbi5jb20vJztcclxuICAgICAgICAgICAgdGhpcy5GYXVjZXRVcmwgPSAnaHR0cHM6Ly9mYXVjZXQucG9seWdvbi50ZWNobm9sb2d5Lyc7XHJcbiAgICAgICAgICAgIHRoaXMuQnV5VXJsID0gJ2h0dHBzOi8vd3d3Lm1vb25wYXkuY29tL2J1eS9tYXRpYyc7XHJcblx0fVxyXG5cclxuXHJcblxyXG59XHJcblxyXG4iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb2tpZUhlbHBlciB7XHJcbiAgICBkb2N1bWVudDogRG9jdW1lbnRcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENvb2tpZShuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlICsgXCI7IGV4cGlyZXM9TW9uLCAyIERlYyAyMDI0IDEyOjAwOjAwIFVUQztwYXRoPS87U2FtZVNpdGU9U3RyaWN0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENvb2tpZU5ldHdvcmsgPSAobmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRDb29raWUoXCJuZXR3b3JrXCIsIG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb29raWVWYWx1ZShuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5jb29raWUubWF0Y2goJyhefDspXFxcXHMqJyArIG5hbWUgKyAnXFxcXHMqPVxcXFxzKihbXjtdKyknKT8ucG9wKCkgfHwgJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENvb2tpZVByb3ZpZGVyKHByb3ZpZGVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICB0aGlzLnNldENvb2tpZShcInByb3ZpZGVyXCIsIHByb3ZpZGVyTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlbGV0ZUNvb2tpZShuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj0wOyBleHBpcmVzPU1vbiwgMiBEZWMgMjAyMCAxMjowMDowMCBVVEM7cGF0aD0vXCI7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgbG9jYWxob3N0TmV0d29yayBmcm9tICcuL2xvY2FsaG9zdC1uZXR3b3JrJztcclxuaW1wb3J0IG11bWJhaU5ldHdvcmsgZnJvbSAnLi9tdW1iYWktbmV0d29yayc7XHJcbmltcG9ydCBOZXR3b3JrIGZyb20gXCIuL05ldHdvcmtcIjtcclxuaW1wb3J0IENvb2tpZUhlbHBlciBmcm9tIFwiLi4vdXRpbC9Db29raWVIZWxwZXJcIjtcclxuaW1wb3J0IGZ1amlOZXR3b3JrIGZyb20gXCIuL2Z1amktbmV0d29ya1wiO1xyXG5pbXBvcnQgTW9yYWxpcyBmcm9tIFwibW9yYWxpc1wiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuLi9lcnJvcnMvR2VuZXJhbEVycm9yXCI7XHJcblxyXG5cclxuY29uc3QgbmV0d29ya0luZm9zID0gW2xvY2FsaG9zdE5ldHdvcmssIG11bWJhaU5ldHdvcmtdO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ldHdvcmtJbmZvIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBOZXR3b3JrO1xyXG4gICAgbW9yYWxpczogdHlwZW9mIE1vcmFsaXM7XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBOZXR3b3JrIHtcclxuICAgICAgICBpZiAoTmV0d29ya0luZm8uaW5zdGFuY2UpIHJldHVybiBOZXR3b3JrSW5mby5pbnN0YW5jZTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldGhlcmV1bSAhPSAndW5kZWZpbmVkJyAmJiBldGhlcmV1bSAmJiBldGhlcmV1bS5jaGFpbklkKSB7XHJcbiAgICAgICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IHRoaXMuZ2V0TmV0d29ya0luZm9CeUNoYWluSWQoZXRoZXJldW0uY2hhaW5JZCk7XHJcbiAgICAgICAgICAgIGlmIChuZXR3b3JrSW5mbykge1xyXG4gICAgICAgICAgICAgICAgTmV0d29ya0luZm8uaW5zdGFuY2UgPSBuZXR3b3JrSW5mbztcclxuICAgICAgICAgICAgICAgIHJldHVybiBOZXR3b3JrSW5mby5pbnN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTmV0d29ya0luZm8uaW5zdGFuY2UgPSB0aGlzLmdldE5ldHdvcmtJbmZvKCk7XHJcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtJbmZvLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZE5ldHdvcmsobmV0d29ya05hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIE5ldHdvcmtJbmZvLmluc3RhbmNlID0gdGhpcy5nZXROZXR3b3JrSW5mbyhuZXR3b3JrTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXROZXR3b3JrQnlDaGFpbklkKGNoYWluSWQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGxldCBuZXR3b3JrID0gdGhpcy5nZXROZXR3b3JrSW5mb0J5Q2hhaW5JZChjaGFpbklkKTtcclxuICAgICAgICBpZiAobmV0d29yaykge1xyXG4gICAgICAgICAgICBOZXR3b3JrSW5mby5pbnN0YW5jZSA9IG5ldHdvcms7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmV0d29ya3MoKTogQXJyYXk8TmV0d29yaz4ge1xyXG4gICAgICAgIGxldCBuZXR3b3JrcyA9IG5ldyBBcnJheTxOZXR3b3JrPigpO1xyXG4gICAgICAgIGxldCBpc0xvY2FsaG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0LmluZGV4T2YoJ2xvY2FsaG9zdCcpICE9IC0xO1xyXG4gICAgICAgIG5ldHdvcmtJbmZvcy5mb3JFYWNoKG5ldHdvcmtJbmZvVHlwZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBuZXcgbmV0d29ya0luZm9UeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICghaXNMb2NhbGhvc3QgJiYgdG1wLk5hbWUgPT0gXCJsb2NhbGhvc3RcIikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbmV0d29ya3MucHVzaCh0bXApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXR3b3JrcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldE5ldHdvcmtJbmZvQnlDaGFpbklkKGNoYWluSWQ6IG51bWJlcik6IE5ldHdvcmsgfCB1bmRlZmluZWQge1xyXG5cclxuICAgICAgICBsZXQgbmV0d29ya0luZm86IE5ldHdvcmsgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIG5ldHdvcmtJbmZvcy5mb3JFYWNoKG5ldHdvcmtJbmZvVHlwZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0bXAgPSBuZXcgbmV0d29ya0luZm9UeXBlKCk7XHJcbiAgICAgICAgICAgIGlmICh0bXAuQ2hhaW5JZCA9PSBjaGFpbklkKSB7XHJcbiAgICAgICAgICAgICAgICBuZXR3b3JrSW5mbyA9IHRtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBuZXR3b3JrSW5mbztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0TmV0d29ya0luZm8obmV0d29ya05hbWU/OiBzdHJpbmcpOiBOZXR3b3JrIHtcclxuICAgICAgICBsZXQgY29va2llSGVscGVyID0gbmV3IENvb2tpZUhlbHBlcihkb2N1bWVudCk7XHJcbiAgICAgICAgLy9pZiAod2luZG93LmxvY2F0aW9uLmhvc3QuaW5kZXhPZignbG9jYWxob3N0JykpIG5ldHdvcmtOYW1lID0gJ2xvY2FsaG9zdCdcclxuICAgICAgICBpZiAoIW5ldHdvcmtOYW1lKSBuZXR3b3JrTmFtZSA9IGNvb2tpZUhlbHBlci5nZXRDb29raWVWYWx1ZSgnbmV0d29yaycpO1xyXG4gICAgICAgIGlmICghbmV0d29ya05hbWUpIG5ldHdvcmtOYW1lID0gJ211bWJhaSc7XHJcblxyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IG51bGw7XHJcbiAgICAgICAgbmV0d29ya0luZm9zLmZvckVhY2gobmV0d29ya0luZm9UeXBlID0+IHtcclxuICAgICAgICAgICAgbGV0IHRtcCA9IG5ldyBuZXR3b3JrSW5mb1R5cGUoKTtcclxuICAgICAgICAgICAgaWYgKHRtcC5OYW1lID09IG5ldHdvcmtOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBuZXR3b3JrSW5mbyA9IHRtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChuZXR3b3JrSW5mbykgcmV0dXJuIG5ldHdvcmtJbmZvO1xyXG5cclxuICAgICAgICBjb29raWVIZWxwZXIuc2V0Q29va2llTmV0d29yaygnbXVtYmFpJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5ldHdvcmsgJ1wiICsgbmV0d29ya05hbWUgKyBcIicgY291bGQgbm90IGJlIGZvdW5kLiBEZWZhdWx0aW5nIHRvIE11bWJhaSBuZXR3b3JrLlwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBtdW1iYWlOZXR3b3JrKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IE5ldHdvcmtJbmZvIGZyb20gXCIuLi8uLi9uZXR3b3Jrcy9OZXR3b3JrSW5mb1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29ubmVjdGlvblNlcnZpY2Uge1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgb3B0aW9ucyA6IHtzZXJ2ZXJVcmw6c3RyaW5nLCBhcHBJZDpzdHJpbmd9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM/IDogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICBpZighbW9yYWxpcykgbW9yYWxpcyA9IE1vcmFsaXM7XHJcblxyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge3NlcnZlclVybDonJywgYXBwSWQ6Jyd9O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgZ2V0T3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzdGFydCgpIHtcclxuICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtzZXJ2ZXJVcmw6bmV0d29ya0luZm8uU2VydmVyVXJsLCBhcHBJZDpuZXR3b3JrSW5mby5BcHBJZH07XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMubW9yYWxpcy5zdGFydCh0aGlzLm9wdGlvbnMpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoJ0ludmFsaWQgc2Vzc2lvbiB0b2tlbicpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBNb3JhbGlzLlVzZXIubG9nT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcmtldFNlcnZpY2Uge1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICBpZiAoIW1vcmFsaXMpIG1vcmFsaXMgPSBNb3JhbGlzO1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGlzTWFya2V0T3BlbigpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubW9yYWxpcy5DbG91ZC5ydW4oJ2lzT3BlbicpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2VuZXJhbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29kZSA6IG51bWJlcjtcclxuICAgIG1lc3NhZ2UgOiBzdHJpbmc7XHJcbiAgICBoZWFkZXJzIDogYW55O1xyXG4gICAgZXJyb3IgOiBhbnk7XHJcbiAgICBzdGFjayA6IHN0cmluZztcclxuICAgIGNhbGxiYWNrPyA6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZSA6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gMDtcclxuICAgICAgICB0aGlzLnN0YWNrID0gXCJcIjtcclxuICAgICAgICBpZiAoIWUubWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLm1lc3NhZ2UuZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvZGUgPSBlLm1lc3NhZ2UuZGF0YS5jb2RlO1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlLm1lc3NhZ2UuZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gZTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzID0gZS5tZXNzYWdlLmhlYWRlcnM7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBlLnN0YWNrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGUuZGF0YSkgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2RlID0gZS5kYXRhLmNvZGU7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGUuZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjaztcclxuICAgICAgICB9IGVsc2UgaWYgKGUubWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgaWQ9XFxcInN3aXRjaE5ldHdvcmtJbmZvXFxcIj5cXHJcXG4gICAgWW91IGFyZSB1c2luZyB3cm9uZyBuZXR3b3JrIGluIHlvdXIgd2FsbGV0LlxcclxcbiAgICBZb3UgY2FuIGNob29zZSBhbnkgb2YgdGhlc2UgbmV0d29ya3MuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAge3sjZWFjaCBuZXR3b3Jrc319XFxyXFxuICAgICAgICA8YnV0dG9uIGhyZWY9XFxcIlxcXCIgY2xhc3M9XFxcInNldE5ldHdvcmtcXFwiXFxyXFxuICAgICAgICAgICAgICAgIGRhdGEtY2hhaW5pZD1cXFwie3tDaGFpbklkfX1cXFwiPnt7Q2hhaW5OYW1lfX1cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgICAge3svZWFjaH19XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgaWQ9XFxcImpzU3dpdGNoTmV0d29ya05vdFdvcmtpbmdcXFwiIGNsYXNzPVxcXCJkLW5vbmVcXFwiPlxcclxcbiAgICBJdCBzZWVtIGFzIHdlIGNhbid0IGFkZCB0aGUgbmV0d29yayBhdXRvbWF0aWNhbGx5IGZvciB5b3VyLCBzbyB5b3UgbmVlZCB0byBhZGQgaXQgeW91ciBzZWxmLlxcclxcbiAgICBUaGlzIGlzIHRoZSBpbmZvcm1hdGlvbiB5b3UgbmVlZCB0byBhZGQgdGhlIG5ldHdvcmsuIFlvdSB3aWxsIG5lZWQgdG8gZmlndXJlIG91dCB3aGVyZSB0b1xcclxcbiAgICBhZGQgbmV3IG5ldHdvcmsgZm9yIHlvdXIgd2FsbGV0LCBhcyBpdCBkaWZmZXJlbmNlIGJldHdlZW4gd2FsbGV0cy5cXHJcXG4gICAgPGZvcm0+XFxyXFxuICAgICAgICA8bGFiZWw+Q2hhaW5JZDpcXHJcXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XFxcInN3aXRjaENoYWluSWRcXFwiLz5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICA8bGFiZWw+Q2hhaW4gbmFtZVxcclxcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cXFwic3dpdGNoQ2hhaW5OYW1lXFxcIi8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPGxhYmVsPkN1cnJlbmN5IG5hbWVcXHJcXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XFxcInN3aXRjaEN1cnJlbmN5TmFtZVxcXCIvPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICBTeW1ib2xcXHJcXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XFxcInN3aXRjaFN5bWJvbFxcXCIvPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgIDxsYWJlbD5EZWNpbWFsXFxyXFxuICAgICAgICAgICAgPGlucHV0IGlkPVxcXCJzd2l0Y2hEZWNpbWFsXFxcIi8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPGxhYmVsPlJwYyBVcmxcXHJcXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XFxcInN3aXRjaFJwY1VybFxcXCIvPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgPC9mb3JtPlxcclxcbjwvZGl2PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZGlhbG9nIGlkPVxcXCJsaW1pbmFsX21hcmtldF9tb2RhbF9kaXZcXFwiIGRhdGEtdGl0bGU9XFxcInt7e3RpdGxlfX19XFxcIj5cXHJcXG4gICAgPGFydGljbGU+XFxyXFxuICAgICAgICA8aGVhZGVyPlxcclxcbiAgICAgICAgICAgIDxzcGFuPnt7dGl0bGV9fTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICA8YSBocmVmPVxcXCIjY2xvc2VcXFwiIGFyaWEtbGFiZWw9XFxcIkNsb3NlXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiIGlkPVxcXCJsaW1pbmFsX21hcmtldF9tb2RhbF9jbG9zZVxcXCI+PC9hPlxcclxcbiAgICAgICAgPC9oZWFkZXI+XFxyXFxuICAgICAgICB7e3tjb250ZW50fX19XFxyXFxuICAgIDwvYXJ0aWNsZT5cXHJcXG5cXHJcXG48L2RpYWxvZz5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IE1vZGFsSHRtbCBmcm9tICcuLi8uLi9odG1sL21vZGFsL01vZGFsLmh0bWwnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xyXG4gICAgbW9kYWxJZCA9ICdsaW1pbmFsX21hcmtldF9tb2RhbF9kaXYnO1xyXG4gICAgb25IaWRlPyA6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGhpZGVNb2RhbCgpIHtcclxuICAgICAgICBsZXQgbW9kYWxEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm1vZGFsSWQpITtcclxuICAgICAgICBtb2RhbERpdi5yZW1vdmVBdHRyaWJ1dGUoJ29wZW4nKTtcclxuICAgICAgICBpZiAodGhpcy5vbkhpZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dNb2RhbCh0aXRsZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHJldXNlTW9kYWxJZlNhbWVUaXRsZTogYm9vbGVhbiA9IGZhbHNlLCBvbkhpZGU/OiAoKSA9PiB2b2lkLCBoaWRlT25PdXRzaWRlQ2xpY2sgPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IG1vZGFsRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb2RhbElkKTtcclxuICAgICAgICBpZiAobW9kYWxEaXYpIHtcclxuICAgICAgICAgICAgbGV0IG1vZGFsVGl0bGUgPSBtb2RhbERpdi5kYXRhc2V0LnRpdGxlO1xyXG4gICAgICAgICAgICBpZiAocmV1c2VNb2RhbElmU2FtZVRpdGxlICYmIG1vZGFsVGl0bGUgJiYgbW9kYWxUaXRsZSA9PT0gdGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsRGl2LnNldEF0dHJpYnV0ZSgnb3BlbicsICcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKE1vZGFsSHRtbCk7XHJcblxyXG4gICAgICAgIGxldCBvYmo6IGFueSA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBodG1sID0gdGVtcGxhdGUob2JqKTtcclxuXHJcbiAgICAgICAgaWYgKG1vZGFsRGl2KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWxEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbCk7XHJcblxyXG4gICAgICAgIG1vZGFsRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb2RhbElkKSE7XHJcbiAgICAgICAgbW9kYWxEaXYuc2V0QXR0cmlidXRlKCdvcGVuJywgJycpO1xyXG5cclxuICAgICAgICBpZiAoaGlkZU9uT3V0c2lkZUNsaWNrKSB7XHJcbiAgICAgICAgICAgIG1vZGFsRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ICYmIChldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5pZCA9PT0gJ2xpbWluYWxfbWFya2V0X21vZGFsX2RpdicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGxpbWluYWxfbWFya2V0X21vZGFsX2Nsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X21vZGFsX2Nsb3NlJylcclxuICAgICAgICBpZiAobGltaW5hbF9tYXJrZXRfbW9kYWxfY2xvc2UpIGxpbWluYWxfbWFya2V0X21vZGFsX2Nsb3NlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGltaW5hbF9tYXJrZXRfbW9kYWxfY2xvc2UnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5vbkhpZGUgPSBvbkhpZGU7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3VyaXR5IHtcclxuICAgIENsYXNzIDogc3RyaW5nID0gXCJcIjtcclxuICAgIEV4Y2hhbmdlIDogc3RyaW5nID0gXCJcIjtcclxuICAgIFN5bWJvbCA6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBOYW1lIDogc3RyaW5nID0gXCJcIjtcclxuICAgIFN0YXR1cyA6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBUcmFkYWJsZSA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIEZyYWN0aW9uYWJsZSA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIExvZ28gOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgRmF2b3JpdGUgOiBudW1iZXIgPSAwO1xyXG4gICAgTG9nb1BhdGggOiBzdHJpbmcgPSBcIi9pbWcvbG9nb3MvXCIgO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5Mb2dvUGF0aCA9IFwiL2ltZy9sb2dvcy9cIiA7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBTZWN1cml0eSBmcm9tIFwiLi9TZWN1cml0eVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdXJpdGllc1NlcnZpY2Uge1xyXG5cclxuICAgIHNlY3VyaXRpZXMgPSBuZXcgTWFwPHN0cmluZywgU2VjdXJpdHk+KCk7XHJcbiAgICBzZWN1cml0aWVzQXJyYXkgOiBhbnk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZSA6IFNlY3VyaXRpZXNTZXJ2aWNlO1xyXG4gICAgcGFnZTogbnVtYmVyO1xyXG4gICAgc3ltYm9scyA9IFtcIk1TRlRcIiwgXCJBQVBMXCIsIFwiQU1aTlwiLCBcIlRTTEFcIiwgXCJHT09HTFwiLCBcIkdPT0dcIiwgXCJHTUVcIiwgXCJNRVRBXCIsIFwiTlZEQVwiLCBcIkJSSy5CXCIsIFwiSlBNXCIsIFwiSERcIiwgXCJKTkpcIiwgXCJVTkhcIiwgXCJQR1wiLCBcIkJBQ1wiLCBcIlZcIiwgXCJBREJFXCIsIFwiTkZMWFwiLCBcIkNSTVwiLCBcIlBGRVwiLCBcIkRJU1wiLCBcIk1BXCIsIFwiWE9NXCIsIFwiVE1PXCIsIFwiQ09TVFwiXVxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zZWN1cml0aWVzID0gbmV3IE1hcDxzdHJpbmcsIFNlY3VyaXR5PigpO1xyXG4gICAgICAgIHRoaXMucGFnZSA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRJbnN0YW5jZSgpOiBQcm9taXNlPFNlY3VyaXRpZXNTZXJ2aWNlPiB7XHJcbiAgICAgICAgaWYgKCFTZWN1cml0aWVzU2VydmljZS5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBTZWN1cml0aWVzU2VydmljZS5pbnN0YW5jZSA9IG5ldyBTZWN1cml0aWVzU2VydmljZSgpO1xyXG4gICAgICAgICAgICBTZWN1cml0aWVzU2VydmljZS5pbnN0YW5jZS5zZWN1cml0aWVzID0gYXdhaXQgU2VjdXJpdGllc1NlcnZpY2UuaW5zdGFuY2UuZ2V0U2VjdXJpdGllcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gU2VjdXJpdGllc1NlcnZpY2UuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFNlY3VyaXRpZXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VjdXJpdGllcy5zaXplICE9IDApIHJldHVybiB0aGlzLnNlY3VyaXRpZXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9zZWN1cml0aWVzL3NlY3VyaXRpZXMuanNvbicpO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlY3VyaXRpZXMuc2V0KHJlc3VsdHNbaV0uU3ltYm9sLCBPYmplY3QuYXNzaWduKG5ldyBTZWN1cml0eSwgcmVzdWx0c1tpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlY3VyaXRpZXNBcnJheSA9IEFycmF5LmZyb20odGhpcy5zZWN1cml0aWVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VjdXJpdGllcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2VjdXJpdHlCeVN5bWJvbChzeW1ib2wgOiBzdHJpbmcpIDogUHJvbWlzZTxTZWN1cml0eT4ge1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzID0gYXdhaXQgdGhpcy5nZXRTZWN1cml0aWVzKCk7XHJcblxyXG4gICAgICAgIGxldCBzZWN1cml0eSA9IHNlY3VyaXRpZXMuZ2V0KHN5bWJvbCk7XHJcbiAgICAgICAgcmV0dXJuIChzZWN1cml0eSkgPyBzZWN1cml0eSA6IG5ldyBTZWN1cml0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRUb3BTZWN1cml0aWVzKCkge1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzID0gYXdhaXQgdGhpcy5nZXRTZWN1cml0aWVzKCk7XHJcbiAgICAgICAgbGV0IHRvcFNlY3VyaXRpZXMgPSBuZXcgQXJyYXk8U2VjdXJpdHk+KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qgc3ltYm9sIG9mIHRoaXMuc3ltYm9scykge1xyXG4gICAgICAgICAgICBsZXQgc2VjdXJpdHkgPSBzZWN1cml0aWVzLmdldChzeW1ib2wpO1xyXG4gICAgICAgICAgICBpZiAoc2VjdXJpdHkpIHtcclxuICAgICAgICAgICAgICAgIHRvcFNlY3VyaXRpZXMucHVzaChzZWN1cml0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvcFNlY3VyaXRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFBhZ2luYXRpbmdTZWN1cml0aWVzKHBhZ2UgOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAocGFnZSA9PSAwKSByZXR1cm4gdGhpcy5nZXRUb3BTZWN1cml0aWVzKCk7XHJcblxyXG4gICAgICAgIGxldCBzZWN1cml0aWVzT25QYWdlID0gbmV3IEFycmF5PFNlY3VyaXR5PigpO1xyXG4gICAgICAgIGxldCBpID0gcGFnZSAqIHRoaXMuc3ltYm9scy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHBhZ2VDb3VudCA9IGkgKyAxMDtcclxuICAgICAgICBmb3IgKDtpPHBhZ2VDb3VudCAmJiBpPHRoaXMuc2VjdXJpdGllc0FycmF5Lmxlbmd0aDtpKyspIHtcclxuICAgICAgICAgICAgc2VjdXJpdGllc09uUGFnZS5wdXNoKHRoaXMuc2VjdXJpdGllc0FycmF5W2ldWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlY3VyaXRpZXNPblBhZ2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBmaW5kKHNlYXJjaDogc3RyaW5nKSA6IFByb21pc2U8QXJyYXk8U2VjdXJpdHk+PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBuZXcgQXJyYXk8U2VjdXJpdHk+KCk7XHJcbiAgICAgICAgc2VhcmNoID0gc2VhcmNoLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VjdXJpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChzZWN1cml0eSkge1xyXG4gICAgICAgICAgICBpZiAoc2VjdXJpdHkuU3ltYm9sLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpICE9IC0xIHx8XHJcbiAgICAgICAgICAgICAgICBzZWN1cml0eS5OYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goc2VjdXJpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nSGVscGVyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxhc3RFbGVtZW50PyA6IEhUTUxFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0TG9hZGluZyhlbGVtZW50PzogSFRNTEVsZW1lbnQgfCBudWxsKSB7XHJcbiAgICAgICAgaWYgKExvYWRpbmdIZWxwZXIubGFzdEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5sYXN0RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtYnVzeScsICd0cnVlJyk7XHJcbiAgICAgICAgTG9hZGluZ0hlbHBlci5sYXN0RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByZW1vdmVMb2FkaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWJ1c3knKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGVudW0gSW5mb0JhclR5cGUge1xyXG4gICAgSW5mbyA9ICdpbmZvQmFyJyxcclxuICAgIFdhcm5pbmcgPSAnd2FybmluZ0JhcicsXHJcbiAgICBFcnJvciA9ICdlcnJvckJhcidcclxufSIsImltcG9ydCB7SW5mb0JhclR5cGV9IGZyb20gXCIuL0luZm9CYXJUeXBlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbmZvQmFyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHNob3cobWVzc2FnZSA6IHN0cmluZywgdHlwZSA6IEluZm9CYXJUeXBlLCB0aW1lb3V0SW5TZWNvbmRzIDogbnVtYmVyID0gNCkge1xyXG4gICAgICAgIGxldCBpbmZvQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9CYXInKTtcclxuICAgICAgICBpZiAoIWluZm9CYXIpIHtcclxuICAgICAgICAgICAgaW5mb0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBpbmZvQmFyLmNsYXNzTGlzdC5hZGQoJ25vdGlmaWNhdGlvbkJhcicpO1xyXG4gICAgICAgICAgICBpbmZvQmFyLmlkID0gJ2luZm9CYXInO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIGluZm9CYXIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluZm9CYXIuaW5uZXJIVE1MID0gbWVzc2FnZTtcclxuICAgICAgICBpbmZvQmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIGluZm9CYXIuY2xhc3NMaXN0LnJlbW92ZShJbmZvQmFyVHlwZS5JbmZvKTtcclxuICAgICAgICBpbmZvQmFyLmNsYXNzTGlzdC5yZW1vdmUoSW5mb0JhclR5cGUuV2FybmluZyk7XHJcbiAgICAgICAgaW5mb0Jhci5jbGFzc0xpc3QucmVtb3ZlKEluZm9CYXJUeXBlLkVycm9yKTtcclxuICAgICAgICBpbmZvQmFyLmNsYXNzTGlzdC5hZGQodHlwZSlcclxuICAgICAgICBpZiAodGltZW91dEluU2Vjb25kcyA+IDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbmZvQmFyPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfSwgdGltZW91dEluU2Vjb25kcyAqIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIlxcclxcbllvdSBuZWVkIHRvIHNldCB1cCBhIHdhbGxldCBpbiB5b3VyIGJyb3dzZXIgYmVmb3JlIHlvdSBjYW4gdXNlIGxpbWluYWwubWFya2V0Llxcclxcbjxici8+PGJyLz5cXHJcXG5UbyBtYWtlIGl0IHNpbXBsZSwgd2Ugd291bGQgbGlrZSB0byBzdWdnZXN0IHR3byBvcHRpb25zLiBJbiB5b3VyIGJyb3dzZXIgb3IgeW91ciBwaG9uZS5cXHJcXG48dWw+XFxyXFxuICAgIDxsaT5Gb3IgdGhlIGJyb3dzZXIgd2UgcmVjb21tZW5kIDxhIGhyZWY9XFxcImh0dHBzOi8vbWV0YW1hc2suaW8vZG93bmxvYWQvXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+TWV0YW1hc2s8L2E+LlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+XFxyXFxuICAgICAgICBGb3IgeW91ciBwaG9uZSwgd2UgbGlrZSA8YSBocmVmPVxcXCJodHRwczovL3d3dy50b2tlbnBvY2tldC5wcm8vZW4vZG93bmxvYWQvYXBwXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+VG9rZW4gUG9rZXQ8L2E+XFxyXFxuICAgIDwvbGk+XFxyXFxuPC91bD5cXHJcXG48YnIvPlxcclxcbkJ1dCwgeW91IGhhdmUgPGEgaHJlZj1cXFwiaHR0cHM6Ly9ldGhlcmV1bS5vcmcvZW4vd2FsbGV0cy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5tYW55IG9wdGlvbnM8L2E+IGlmIHlvdSB3YW50IHRvIGxlYXJuIG1vcmUuXCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBJbmZvQmFyIGZyb20gXCIuLi91aS9lbGVtZW50cy9JbmZvQmFyXCI7XHJcbmltcG9ydCB7SW5mb0JhclR5cGV9IGZyb20gXCIuLi91aS9lbGVtZW50cy9JbmZvQmFyVHlwZVwiO1xyXG5pbXBvcnQgV2FsbGV0TWlzc2luZ0h0bWwgZnJvbSAnLi4vaHRtbC9tb2RhbC9XYWxsZXRNaXNzaW5nLmh0bWwnO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uL3VpL21vZGFscy9Nb2RhbFwiO1xyXG5pbXBvcnQgU3dpdGNoTmV0d29ya01vZGFsIGZyb20gXCIuLi91aS9tb2RhbHMvU3dpdGNoTmV0d29ya01vZGFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVkZWZpbmVkRXJyb3JIYW5kbGVycyB7XHJcblxyXG4gICAgZXJyb3JNZXNzYWdlTWFwcGluZyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XHJcbiAgICBTZW50TG9naW5SZXF1ZXN0ID0gXCJXZSBoYXZlIHNlbnQgcmVxdWVzdCB0byB5b3Ugd2FsbGV0IHRvIGxvZ2luLiBPcGVuIHlvdXIgd2FsbGV0IHRvIGxvZ2luXCI7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlTWFwcGluZy5zZXQoJ2NoYWluIG5vdCBzdXBwb3J0ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkaXYgPSAnTmV0d29yayBpcyBub3Qgc3VwcG9ydGVkLiA8YSBocmVmPVwiXCIgaWQ9XCJzd2l0Y2hOZXR3b3JrTGlua1wiPkNsaWNrIG1lIHRvIHN3aXRjaCB0byBzdXBwb3J0ZWQgbmV0d29yazwvYT4nO1xyXG5cclxuICAgICAgICAgICAgSW5mb0Jhci5zaG93KGRpdiwgSW5mb0JhclR5cGUuV2FybmluZywgMTIwKVxyXG5cclxuICAgICAgICAgICAgbGV0IHN3aXRjaE5ldHdvcmtMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3aXRjaE5ldHdvcmtMaW5rJyk7XHJcbiAgICAgICAgICAgIHN3aXRjaE5ldHdvcmtMaW5rPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IFN3aXRjaE5ldHdvcmtNb2RhbChNb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsLnNob3coKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZU1hcHBpbmcuc2V0KCdhbHJlYWR5IHByb2Nlc3NpbmcgZXRoX3JlcXVlc3RhY2NvdW50cycsIHRoaXMuU2VudExvZ2luUmVxdWVzdCk7XHJcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VNYXBwaW5nLnNldCgncmVxdWVzdCBvZiB0eXBlIFxcJ3dhbGxldF9yZXF1ZXN0UGVybWlzc2lvbnNcXCcgYWxyZWFkeSBwZW5kaW5nJywgdGhpcy5TZW50TG9naW5SZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZU1hcHBpbmcuc2V0KCdhbHJlYWR5IGhhcyBiZWVuIGNhbGxlZCwgYnV0IGlzIG5vdCBmaW5pc2hlZCB5ZXQnLCB0aGlzLlNlbnRMb2dpblJlcXVlc3QpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlTWFwcGluZy5zZXQoJ3JlcXVlc3QgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcycsIHRoaXMuU2VudExvZ2luUmVxdWVzdCk7XHJcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VNYXBwaW5nLnNldCgnd2ViMyBpbnN0YW5jZScsICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5saW1pbmFsX21hcmtldF9jb25uZWN0X3dhbGxldFwiKTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzWzBdLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZU1hcHBpbmcuc2V0KCd1c2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBNb3JhbGlzLlVzZXIubG9nT3V0KCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZU1hcHBpbmcuc2V0KCdOb24gZXRoZXJldW0gZW5hYmxlZCBicm93c2VyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFdhbGxldE1pc3NpbmdIdG1sKTtcclxuICAgICAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdOZXcgdG8gYmxvY2tjaGFpbj8nLCB0ZW1wbGF0ZShudWxsKSwgZmFsc2UsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlKG1lc3NhZ2UgOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlTWFwcGluZy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCAmJiBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihrZXkudG9Mb3dlckNhc2UoKSkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBJbmZvQmFyLnNob3codmFsdWUudG9TdHJpbmcoKSwgSW5mb0JhclR5cGUuV2FybmluZywgMTApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4uL3V0aWwvTG9hZGluZ0hlbHBlclwiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuL0dlbmVyYWxFcnJvclwiO1xyXG5pbXBvcnQgUHJlZGVmaW5lZEVycm9ySGFuZGxlcnMgZnJvbSBcIi4vUHJlZGVmaW5lZEVycm9ySGFuZGxlcnNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVycm9ySW5mbyB7XHJcblxyXG4gICAgZXJyb3JJbmZvOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXJyb3JJbmZvOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmVycm9ySW5mbyA9IGVycm9ySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXJyb3JJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVycm9ySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlcG9ydChlcnJvcjogR2VuZXJhbEVycm9yKSB7XHJcbiAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgaWYgKCFlcnJvcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgZXJyb3JIYW5kbGVyID0gbmV3IFByZWRlZmluZWRFcnJvckhhbmRsZXJzKCk7XHJcbiAgICAgICAgaWYgKGVycm9ySGFuZGxlci5oYW5kbGUoZXJyb3IubWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVycm9yLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGVycm9yLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vSW5mb0Jhci5zaG93KGVycm9yLm1lc3NhZ2UsIEluZm9CYXJUeXBlLkVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGxvZyhvYmo6IGFueSkge1xyXG4gICAgICAgIEVycm9ySW5mby5yZXBvcnQobmV3IEdlbmVyYWxFcnJvcihvYmopKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGluZm8ob2JqOiBhbnkpIHtcclxuICAgICAgICBFcnJvckluZm8ucmVwb3J0KG5ldyBHZW5lcmFsRXJyb3Iob2JqKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBlcnJvcihvYmo6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG9iaik7XHJcbiAgICAgICAgRXJyb3JJbmZvLnJlcG9ydChuZXcgR2VuZXJhbEVycm9yKG9iaikpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNlY3VyaXRpZXNTZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy9icm9rZXIvU2VjdXJpdGllc1NlcnZpY2VcIjtcclxuaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4vTG9hZGluZ0hlbHBlclwiO1xyXG5pbXBvcnQgRXJyb3JJbmZvIGZyb20gXCIuLi9lcnJvcnMvRXJyb3JJbmZvXCI7XHJcbmltcG9ydCBHZW5lcmFsRXJyb3IgZnJvbSBcIi4uL2Vycm9ycy9HZW5lcmFsRXJyb3JcIjtcclxuaW1wb3J0IE5ldHdvcmsgZnJvbSBcIi4uL25ldHdvcmtzL05ldHdvcmtcIjtcclxuaW1wb3J0ICogYXMgbmV0IGZyb20gXCJuZXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhbGxldEhlbHBlciB7XHJcbiAgICBzdGF0aWMgYWRkVG9rZW5GYWxsYmFja0xvYWRlZD86IGJvb2xlYW4gPSB1bmRlZmluZWQ7XHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFVc2RBc3NldCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBMb2dvOiAnLi4vYXVzZC5wbmcnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgYWRkVG9rZW5Ub1dhbGxldChhZGRyZXNzOiBzdHJpbmcsIHN5bWJvbDogc3RyaW5nLCBmYWxsYmFja1RpbWVvdXQ6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBsZXQgc2VjdXJpdGllc1NlcnZpY2UgPSBhd2FpdCBTZWN1cml0aWVzU2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBhc3NldCA9IChzeW1ib2wgPT0gJ2FVU0QnKSA/IHRoaXMuZ2V0QVVzZEFzc2V0KCkgOiBhd2FpdCBzZWN1cml0aWVzU2VydmljZS5nZXRTZWN1cml0eUJ5U3ltYm9sKHN5bWJvbCk7XHJcbiAgICAgICAgbGV0IHdlYjMgPSB0aGlzLm1vcmFsaXMud2ViMyBhcyBhbnk7XHJcbiAgICAgICAgaWYgKCF3ZWIzKSB7XHJcbiAgICAgICAgICAgIHdlYjMgPSBhd2FpdCB0aGlzLm1vcmFsaXMuZW5hYmxlV2ViMygpLmNhdGNoKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBFcnJvckluZm8ucmVwb3J0KHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pIGFzIGFueTtcclxuICAgICAgICAgICAgaWYgKCF3ZWIzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF3ZWIzLnByb3ZpZGVyLnJlcXVlc3QpIHJldHVybjtcclxuICAgICAgICBsZXQgdGltZW91dCA9IChXYWxsZXRIZWxwZXIuYWRkVG9rZW5GYWxsYmFja0xvYWRlZCA9PT0gdW5kZWZpbmVkKSA/IDIgKiAxMDAwIDogMjAwO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoV2FsbGV0SGVscGVyLmFkZFRva2VuRmFsbGJhY2tMb2FkZWQgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBXYWxsZXRIZWxwZXIuYWRkVG9rZW5GYWxsYmFja0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tUaW1lb3V0KSBmYWxsYmFja1RpbWVvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgY29uc3Qgd2FzQWRkZWQgPSBhd2FpdCB3ZWIzLnByb3ZpZGVyLnJlcXVlc3Qoe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfd2F0Y2hBc3NldCcsXHJcbiAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0VSQzIwJyxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogJ2h0dHBzOi8vYXBwLmxpbWluYWwubWFya2V0L2ltZy9sb2dvcy8nICsgYXNzZXQuTG9nbyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgV2FsbGV0SGVscGVyLmFkZFRva2VuRmFsbGJhY2tMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdhc0FkZGVkO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgaXNXZWJ2aWV3KHVhOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBpZiBpdCBzYXlzIGl0J3MgYSB3ZWJ2aWV3LCBsZXQncyBnbyB3aXRoIHRoYXRcclxuICAgICAgICBsZXQgcnVsZXMgPSBbJ1dlYlZpZXcnLFxyXG4gICAgICAgICAgICAvLyBpT1Mgd2VidmlldyB3aWxsIGJlIHRoZSBzYW1lIGFzIHNhZmFyaSBidXQgbWlzc2luZyBcIlNhZmFyaVwiXHJcbiAgICAgICAgICAgICcoaVBob25lfGlQb2R8aVBhZCkoPyEuKlNhZmFyaSknLFxyXG4gICAgICAgICAgICAvLyBBbmRyb2lkIExvbGxpcG9wIGFuZCBBYm92ZTogd2VidmlldyB3aWxsIGJlIHRoZSBzYW1lIGFzIG5hdGl2ZSBidXQgaXQgd2lsbCBjb250YWluIFwid3ZcIlxyXG4gICAgICAgICAgICAvLyBBbmRyb2lkIEtpdEthdCB0byBsb2xsaXBvcCB3ZWJ2aWV3IHdpbGwgcHV0IHt2ZXJzaW9ufS4wLjAuMFxyXG4gICAgICAgICAgICAnQW5kcm9pZC4qKHd2fC4wLjAuMCknLFxyXG4gICAgICAgICAgICAvLyBvbGQgY2hyb21lIGFuZHJvaWQgd2VidmlldyBhZ2VudFxyXG4gICAgICAgICAgICAnTGludXg7IFU7IEFuZHJvaWQnLFxyXG4gICAgICAgICAgICAnU0RLJ1xyXG4gICAgICAgIF1cclxuICAgICAgICBsZXQgd2Vidmlld1JlZ0V4cCA9IG5ldyBSZWdFeHAoJygnICsgcnVsZXMuam9pbignfCcpICsgJyknLCAnaWcnKTtcclxuICAgICAgICByZXR1cm4gISF1YS5tYXRjaCh3ZWJ2aWV3UmVnRXhwKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzd2l0Y2hOZXR3b3JrKG5ldHdvcms6IE5ldHdvcmspIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IHdlYjMgPSB0aGlzLm1vcmFsaXMud2ViMyBhcyBhbnk7XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB3ZWIzLnByb3ZpZGVyLnJlcXVlc3Qoe1xyXG4gICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsXHJcbiAgICAgICAgICAgIHBhcmFtczogW3tjaGFpbklkOiAnMHgnICsgbmV0d29yay5DaGFpbklkLnRvU3RyaW5nKDE2KX1dXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3dpdGNoIHJlc3VsdDonLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChhc3luYyAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3IgY29kZSBpbmRpY2F0ZXMgdGhhdCB0aGUgY2hhaW4gaGFzIG5vdCBiZWVuIGFkZGVkIHRvIE1ldGFNYXNrXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNvZGUgPT09IDQ5MDIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgd2ViMy5wcm92aWRlci5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnd2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWU6IG5ldHdvcmsuQ2hhaW5OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcweCcgKyBuZXR3b3JrLkNoYWluSWQudG9TdHJpbmcoMTYpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZUN1cnJlbmN5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5ldHdvcmsuTmF0aXZlQ3VycmVuY3lOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogbmV0d29yay5OYXRpdmVEZWNpbWFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IG5ldHdvcmsuTmF0aXZlU3ltYm9sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycGNVcmxzOiBbbmV0d29yay5ScGNVcmxdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGRDaGFpbiByZXN1bHQ6JyArIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBvbiBhZGROZXR3b3JrOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFdyb25nTmV0d29ya0h0bWwgZnJvbSAnLi4vLi4vaHRtbC9tb2RhbC9Xcm9uZ05ldHdvcmsuaHRtbCc7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsXCI7XHJcbmltcG9ydCBXYWxsZXRIZWxwZXIgZnJvbSBcIi4uLy4uL3V0aWwvV2FsbGV0SGVscGVyXCI7XHJcbmltcG9ydCBHZW5lcmFsRXJyb3IgZnJvbSBcIi4uLy4uL2Vycm9ycy9HZW5lcmFsRXJyb3JcIjtcclxuaW1wb3J0IEVycm9ySW5mbyBmcm9tIFwiLi4vLi4vZXJyb3JzL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgTmV0d29yayBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXRjaE5ldHdvcmtNb2RhbCB7XHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcztcclxuICAgIHNlbGVjdGVkTmV0d29yaz8gOiBOZXR3b3JrO1xyXG4gICAgY29uc3RydWN0b3IobW9yYWxpczogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShXcm9uZ05ldHdvcmtIdG1sKTtcclxuICAgICAgICBsZXQgbmV0d29ya3MgPSBOZXR3b3JrSW5mby5nZXROZXR3b3JrcygpO1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGUoe25ldHdvcmtzOiBuZXR3b3Jrc30pO1xyXG5cclxuICAgICAgICBsZXQgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICBtb2RhbC5zaG93TW9kYWwoJ1N3aXRjaCBuZXR3b3JrJywgY29udGVudCwgZmFsc2UsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkTmV0d29yaykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgYXdhaXQgd2FsbGV0SGVscGVyLnN3aXRjaE5ldHdvcmsodGhpcy5zZWxlY3RlZE5ldHdvcmspXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBzZXROZXR3b3JrTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0TmV0d29yaycpO1xyXG4gICAgICAgIHNldE5ldHdvcmtMaW5rcy5mb3JFYWNoKHNldE5ldHdvcmtMaW5rID0+IHtcclxuICAgICAgICAgICAgc2V0TmV0d29ya0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YXNldCA9IChldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE5ldHdvcmsgPSBOZXR3b3JrSW5mby5nZXROZXR3b3JrSW5mb0J5Q2hhaW5JZChwYXJzZUludChkYXRhc2V0LmNoYWluaWQhKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWROZXR3b3JrKSB0aHJvdyBuZXcgR2VuZXJhbEVycm9yKCdDb3VsZCBub3QgZmluZCBjaGFpbklkOicgKyBkYXRhc2V0LmNoYWluaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB3YWxsZXRIZWxwZXIgPSBuZXcgV2FsbGV0SGVscGVyKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VjY2Vzc0FkZGluZ05ldHdvcmsgPSBhd2FpdCB3YWxsZXRIZWxwZXIuc3dpdGNoTmV0d29yayh0aGlzLnNlbGVjdGVkTmV0d29yaylcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yIDogR2VuZXJhbEVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqc1N3aXRjaE5ldHdvcmtOb3RXb3JraW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzU3dpdGNoTmV0d29ya05vdFdvcmtpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFqc1N3aXRjaE5ldHdvcmtOb3RXb3JraW5nKSB0aHJvdyBlcnJvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzU3dpdGNoTmV0d29ya05vdFdvcmtpbmcuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzd2l0Y2hOZXR3b3JrSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd2l0Y2hOZXR3b3JrSW5mbycpITtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoTmV0d29ya0luZm8uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3aXRjaENoYWluSWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IGRhdGFzZXQuY2hhaW5pZCEgKyAnIG9yIGl0IG1pZ2h0IGJlOiAnICsgJzB4JyArIHBhcnNlSW50KGRhdGFzZXQuY2hhaW5pZCEpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd2l0Y2hDaGFpbk5hbWUnKSEgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnNlbGVjdGVkTmV0d29yayEuTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd2l0Y2hDdXJyZW5jeU5hbWUnKSEgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnNlbGVjdGVkTmV0d29yayEuTmF0aXZlQ3VycmVuY3lOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3aXRjaFN5bWJvbCcpISBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMuc2VsZWN0ZWROZXR3b3JrIS5OYXRpdmVTeW1ib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3dpdGNoRGVjaW1hbCcpICEgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnNlbGVjdGVkTmV0d29yayEuTmF0aXZlRGVjaW1hbC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3aXRjaFJwY1VybCcpISBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMuc2VsZWN0ZWROZXR3b3JrIS5ScGNVcmw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzQWRkaW5nTmV0d29yaykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmhpZGVNb2RhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxpbWluYWxfbWFya2V0X2Nvbm5lY3Rfd2FsbGV0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzWzBdLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCBNb3JhbGlzIGZyb20gXCJtb3JhbGlzXCI7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IEdlbmVyYWxFcnJvciBmcm9tIFwiLi4vLi4vZXJyb3JzL0dlbmVyYWxFcnJvclwiO1xyXG5pbXBvcnQgU3dpdGNoTmV0d29ya01vZGFsIGZyb20gXCIuLi8uLi91aS9tb2RhbHMvU3dpdGNoTmV0d29ya01vZGFsXCI7XHJcbmltcG9ydCBNb3JhbGlzV2ViM1Byb3ZpZGVyID0gTW9yYWxpcy5Nb3JhbGlzV2ViM1Byb3ZpZGVyO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0aGVudGljYXRlU2VydmljZSB7XHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpc1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGF1dGhlbnRpY2F0ZVVzZXIocHJvdmlkZXI6IGFueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZVdlYjNDYWxsYmFjaz86ICh3YWxsZXRDb25uZWN0aW9uSW5mbzogTW9yYWxpc1dlYjNQcm92aWRlcikgPT4gdm9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWRDYWxsYmFjaz86ICh1c2VyOiBNb3JhbGlzLkF0dHJpYnV0ZXMpID0+IHZvaWRcclxuICAgICkge1xyXG4gICAgICAgIGxldCBtb3JhbGlzID0gdGhpcy5tb3JhbGlzO1xyXG4gICAgICAgIGxldCBjaGFpbklkID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKS5DaGFpbklkO1xyXG5cclxuICAgICAgICBsZXQgd2ViM1Jlc3VsdCA9IGF3YWl0IG1vcmFsaXMuZW5hYmxlV2ViMyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcclxuICAgICAgICAgICAgY2hhaW5JZDogY2hhaW5JZCwgYXBwTG9nbzogJ2h0dHBzOi8vYXBwLmxpbWluYWwubWFya2V0L2ltZy9sb2dvcy9kZWZhdWx0X2xvZ28ucG5nJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChhc3luYyAocmVhc29uKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZVdlYjNDYWxsYmFjaykge1xyXG4gICAgICAgICAgICBlbmFibGVXZWIzQ2FsbGJhY2sod2ViM1Jlc3VsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdXNlciA9IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBpZiAoYXV0aGVudGljYXRlZENhbGxiYWNrKSBhdXRoZW50aWNhdGVkQ2FsbGJhY2sodXNlcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3ZWIzUmVzdWx0Lm5ldHdvcmsuY2hhaW5JZCAhPSBjaGFpbklkKSB7XHJcbiAgICAgICAgICAgIGxldCB1c2VyTmV0d29yayA9IE5ldHdvcmtJbmZvLmdldE5ldHdvcmtJbmZvQnlDaGFpbklkKHdlYjNSZXN1bHQubmV0d29yay5jaGFpbklkKTtcclxuICAgICAgICAgICAgaWYgKHVzZXJOZXR3b3JrKSB7XHJcbiAgICAgICAgICAgICAgICBOZXR3b3JrSW5mby5zZXROZXR3b3JrQnlDaGFpbklkKHdlYjNSZXN1bHQubmV0d29yay5jaGFpbklkKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IFN3aXRjaE5ldHdvcmtNb2RhbCh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbW9yYWxpcy5hdXRoZW50aWNhdGUoe1xyXG4gICAgICAgICAgICBzaWduaW5nTWVzc2FnZTogXCJZb3UgYXJlIGxvZ2dpbmcgaW50byBMaW1pbmFsLm1hcmtldC5cXG5cXG5cIixcclxuICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxyXG4gICAgICAgICAgICBjaGFpbklkOiBjaGFpbklkXHJcbiAgICAgICAgfSkuY2F0Y2goKHJlYXNvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXJyb3IocmVhc29uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0ZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVkQ2FsbGJhY2socmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXRoQWRkcmVzcygpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB1c2VyID0gdGhpcy5nZXRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm4gJyc7XHJcblxyXG4gICAgICAgIGxldCBldGhBZGRyZXNzID0gdXNlci5nZXQoJ2V0aEFkZHJlc3MnKTtcclxuICAgICAgICByZXR1cm4gZXRoQWRkcmVzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNXYWxsZXRDb25uZWN0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9yYWxpcy5pc1dlYjNFbmFibGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVXNlckxvZ2dlZEluKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5tb3JhbGlzLlVzZXIuY3VycmVudCgpICE9PSBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2hhaW5JZCgpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICghdGhpcy5tb3JhbGlzLmNoYWluSWQpIHJldHVybiAwO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5tb3JhbGlzLmNoYWluSWQsIDE2KTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZW51bSBXYWxsZXRUeXBlIHtcclxuICAgIE1ldGFtYXNrID0gJ21ldGFtYXNrJyxcclxuICAgIFdhbGxldENvbm5lY3QgPSAnd2FsbGV0Q29ubmVjdCcsXHJcbiAgICBDb2luYmFzZVdhbGxldCA9ICdjb2luYmFzZScsXHJcbiAgICBVbmtub3duID0gJ3Vua25vd24nXHJcbn0iLCJpbXBvcnQge1dhbGxldFR5cGV9IGZyb20gXCIuLi9lbnVtcy9XYWxsZXRUeXBlXCI7XHJcbmltcG9ydCBNb3JhbGlzIGZyb20gXCJtb3JhbGlzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm92aWRlckluZm8ge1xyXG5cclxuICAgIHdhbGxldENvbm5lY3Rpb25JbmZvIDogYW55O1xyXG5cclxuICAgIFByb3ZpZGVyTmFtZSA6IHN0cmluZyA9ICd1bmtub3duJztcclxuICAgIFdhbGxldE5hbWUgOiBzdHJpbmcgPSAnJztcclxuICAgIFdhbGxldFVybCA6IHN0cmluZyA9ICcnO1xyXG4gICAgV2FsbGV0VHlwZSA6IFdhbGxldFR5cGUgPSBXYWxsZXRUeXBlLlVua25vd247XHJcbiAgICBDaGFpbklkIDogbnVtYmVyID0gMDtcclxuICAgIFVzZXJBZGRyZXNzIDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgc3RhdGljIEluc3RhbmNlIDogUHJvdmlkZXJJbmZvO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdhbGxldENvbm5lY3Rpb25JbmZvIDogYW55KSB7XHJcbiAgICAgICAgaWYgKCF3YWxsZXRDb25uZWN0aW9uSW5mbyB8fCAhd2FsbGV0Q29ubmVjdGlvbkluZm8ucHJvdmlkZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy53YWxsZXRDb25uZWN0aW9uSW5mbyA9IHdhbGxldENvbm5lY3Rpb25JbmZvO1xyXG5cclxuICAgICAgICBpZiAodGhpcy53YWxsZXRDb25uZWN0aW9uSW5mby5jb25uZWN0aW9uICYmIHRoaXMud2FsbGV0Q29ubmVjdGlvbkluZm8uY29ubmVjdGlvbi51cmwgPT0gJ21ldGFtYXNrJykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRNZXRhbWFzayh3YWxsZXRDb25uZWN0aW9uSW5mbyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndhbGxldENvbm5lY3Rpb25JbmZvLnByb3ZpZGVyLndjKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFdhbGxldENvbm5lY3Qod2FsbGV0Q29ubmVjdGlvbkluZm8pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RvbnQgaGF2ZSBwcm92aWRlciBmb3IgdGhpcycsIHdhbGxldENvbm5lY3Rpb25JbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUHJvdmlkZXJJbmZvLkluc3RhbmNlID0gdGhpcztcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgbG9hZE1ldGFtYXNrKHdhbGxldENvbm5lY3Rpb25JbmZvIDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5Qcm92aWRlck5hbWUgPSAnbWV0YW1hc2snO1xyXG4gICAgICAgIHRoaXMuV2FsbGV0TmFtZSA9IFwiTWV0YW1hc2tcIjtcclxuICAgICAgICB0aGlzLldhbGxldFVybCA9ICdodHRwczovL21ldGFtYXNrLmlvLyc7XHJcbiAgICAgICAgdGhpcy5XYWxsZXRUeXBlID0gV2FsbGV0VHlwZS5NZXRhbWFzaztcclxuICAgICAgICB0aGlzLkNoYWluSWQgPSB3YWxsZXRDb25uZWN0aW9uSW5mby5wcm92aWRlci5jaGFpbklkO1xyXG4gICAgICAgIHRoaXMuVXNlckFkZHJlc3MgPSB3YWxsZXRDb25uZWN0aW9uSW5mby5wcm92aWRlci5zZWxlY3RlZEFkZHJlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkV2FsbGV0Q29ubmVjdCh3YWxsZXRDb25uZWN0aW9uSW5mbyA6IGFueSkge1xyXG4gICAgICAgIGxldCB3YyA9IHdhbGxldENvbm5lY3Rpb25JbmZvLnByb3ZpZGVyLndjO1xyXG5cclxuICAgICAgICB0aGlzLlByb3ZpZGVyTmFtZSA9IFwid2FsbGV0Q29ubmVjdFwiO1xyXG4gICAgICAgIHRoaXMuV2FsbGV0TmFtZSA9IHdjLl9wZWVyTWV0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuV2FsbGV0VXJsID0gd2MuX3BlZXJNZXRhLnVybCA/PyAnJztcclxuICAgICAgICB0aGlzLldhbGxldFR5cGUgPSBXYWxsZXRUeXBlLldhbGxldENvbm5lY3Q7XHJcbiAgICAgICAgdGhpcy5DaGFpbklkID0gd2FsbGV0Q29ubmVjdGlvbkluZm8ucHJvdmlkZXIuY2hhaW5JZDtcclxuICAgIH1cclxufSIsImltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IE1hcmtldFNlcnZpY2UgZnJvbSBcIi4uL2Jyb2tlci9NYXJrZXRTZXJ2aWNlXCI7XHJcbmltcG9ydCBDb29raWVIZWxwZXIgZnJvbSBcIi4uLy4uL3V0aWwvQ29va2llSGVscGVyXCI7XHJcbmltcG9ydCBBdXRoZW50aWNhdGVTZXJ2aWNlIGZyb20gXCIuL0F1dGhlbnRpY2F0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IFByb3ZpZGVySW5mbyBmcm9tIFwiLi4vLi4vd2FsbGV0L1Byb3ZpZGVySW5mb1wiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgRXJyb3JJbmZvIGZyb20gXCIuLi8uLi9lcnJvcnMvRXJyb3JJbmZvXCI7XHJcbmltcG9ydCBLeWNSZXN1bHQgZnJvbSBcIi4uLy4uL2R0by9LeWNSZXN1bHRcIjtcclxuaW1wb3J0IHtCYW5rUmVsYXRpb25zaGlwfSBmcm9tIFwiLi4vLi4vZHRvL2FscGFjYS9CYW5rUmVsYXRpb25zaGlwXCI7XHJcbmltcG9ydCB7VHJhbnNmZXJ9IGZyb20gXCIuLi8uLi9kdG8vYWxwYWNhL1RyYW5zZmVyXCI7XHJcbmltcG9ydCB7VHJhbnNmZXJEaXJlY3Rpb25FbnVtfSBmcm9tIFwiLi4vLi4vZW51bXMvVHJhbnNmZXJEaXJlY3Rpb25FbnVtXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlclNlcnZpY2Uge1xyXG4gICAgbW9yYWxpczogdHlwZW9mIE1vcmFsaXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9yYWxpcz86IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgaWYgKCFtb3JhbGlzKSBtb3JhbGlzID0gTW9yYWxpc1xyXG5cclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvZ0luKCkge1xyXG4gICAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vcmFsaXMuZW5hYmxlV2ViMygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHVzZXIgPSB0aGlzLm1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVzZXIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9yYWxpcy5hdXRoZW50aWNhdGUoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9nT3V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vcmFsaXMuVXNlci5sb2dPdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaXNMb2dnZWRJbihsb2FkaW5nTWVzc2FnZTogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgdXNlciA9IGF3YWl0IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnRBc3luYygpO1xyXG5cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBsZXQgY29va2llSGVscGVyID0gbmV3IENvb2tpZUhlbHBlcihkb2N1bWVudCk7XHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlck5hbWUgPSBjb29raWVIZWxwZXIuZ2V0Q29va2llVmFsdWUoJ3Byb3ZpZGVyJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBpZiAod2FsbGV0SGVscGVyLmlzV2Vidmlldyh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHByb3ZpZGVyTmFtZSA9ICcgJztcclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvdmlkZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMubW9yYWxpcy5pc1dlYjNFbmFibGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHIgPSAnV2UgYXJlIHNlbmRpbmcgbG9naW4gcmVxdWVzdCB0byB5b3VyIHdhbGxldC4gSWYgeW91IGNhbmNlbCB3ZSB3aWxsIHNpbXBseSBsb2cgeW91IG91dC4gWW91IGNhbiBhbHdheXMgbG9nIGFnYWluIGluLic7XHJcbiAgICAgICAgICAgICAgICBzdHIgKz0gJzxidXR0b24gaWQ9XCJsb2dvdXRCdXR0b25cIj5Mb2dvdXQ8L2J1dHRvbj4nXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nTWVzc2FnZS5pbm5lckhUTUwgPSBzdHI7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGxvZ291dEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvdXRCdXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChsb2dvdXRCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dvdXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9yYWxpcy5Vc2VyLmxvZ091dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9yYWxpcy5lbmFibGVXZWIzKHtwcm92aWRlcjogcHJvdmlkZXJOYW1lIGFzIGFueX0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGFzeW5jIHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVycm9ySW5mby5yZXBvcnQocmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlckluZm86IFByb3ZpZGVySW5mbyA9IG5ldyBQcm92aWRlckluZm8obnVsbCk7XHJcbiAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvblNlcnZpY2UgPSBuZXcgQXV0aGVudGljYXRlU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBhd2FpdCBhdXRoZW50aWNhdGlvblNlcnZpY2UuYXV0aGVudGljYXRlVXNlcihwcm92aWRlck5hbWUsICh3YWxsZXRDb25uZWN0aW9uSW5mbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJJbmZvID0gbmV3IFByb3ZpZGVySW5mbyh3YWxsZXRDb25uZWN0aW9uSW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAodXNlciBhcyBhbnkpLnByb3ZpZGVySW5mbyA9IHByb3ZpZGVySW5mbztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGFzeW5jIGlzTWFya2V0T3Blbk9yVXNlck9mZkhvdXJzKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGxldCBtYXJrZXRTZXJ2aWNlID0gbmV3IE1hcmtldFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgaXNPcGVuID0gYXdhaXQgbWFya2V0U2VydmljZS5pc01hcmtldE9wZW4oKTtcclxuICAgICAgICBpZiAoaXNPcGVuKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICAvL1RPRE86IFJlbW92ZSBvbiBtYWlubmV0IGxhdW5jaFxyXG4gICAgICAgIGlmICghbmV0d29ya0luZm8uVGVzdE5ldHdvcmspIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldEFscGFjYUlkKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IHVzZXIgPSB0aGlzLmdldFVzZXIoKTtcclxuICAgICAgICBpZiAoIXVzZXIpIHJldHVybiAnJztcclxuXHJcbiAgICAgICAgcmV0dXJuIChhd2FpdCB1c2VyLmZldGNoKCkpLmdldCgnYWxwYWNhSWQnKS50b1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBY2NvdW50KCkge1xyXG4gICAgICAgIGxldCB1c2VyID0gdGhpcy5nZXRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm47XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdhY2NvdW50Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXRoQWRkcmVzcygpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXIoKT8uZ2V0KCdldGhBZGRyZXNzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGt5Y0FjdGlvblJlcXVpcmVkKCk6IFByb21pc2U8S3ljUmVzdWx0PiB7XHJcbiAgICAgICAgbGV0IGt5Y1Jlc3VsdHMgPSBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdreWNBY3Rpb25SZXF1aXJlZCcpIGFzIEt5Y1Jlc3VsdDtcclxuICAgICAgICByZXR1cm4ga3ljUmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlTmFtZShnaXZlbl9uYW1lOiBzdHJpbmcsIG1pZGRsZV9uYW1lOiBzdHJpbmcsIGZhbWlseV9uYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bigndXBkYXRlTmFtZScsIHtcclxuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogZ2l2ZW5fbmFtZSxcclxuICAgICAgICAgICAgbWlkZGxlX25hbWU6IG1pZGRsZV9uYW1lLFxyXG4gICAgICAgICAgICBmYW1pbHlfbmFtZTogZmFtaWx5X25hbWVcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVDb250YWN0KGRhdGE6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCd1cGRhdGVDb250YWN0JywgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZVRydXN0ZWRDb250YWN0KGRhdGE6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCd1cGRhdGVUcnVzdGVkQ29udGFjdCcsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGVBY2hSZWxhdGlvbnNoaXAocHVibGljX3Rva2VuOiBzdHJpbmcsIGFjY291bnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubW9yYWxpcy5DbG91ZC5ydW4oJ2NyZWF0ZUFjaFJlbGF0aW9uc2hpcCcsIHtcclxuICAgICAgICAgICAgcHVibGljX3Rva2VuOiBwdWJsaWNfdG9rZW4sXHJcbiAgICAgICAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFBsYWlkTGlua1Rva2VuKCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdjcmVhdGVQbGFpZExpbmtUb2tlbicpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldEJhbmtSZWxhdGlvbnNoaXAoKTogUHJvbWlzZTxCYW5rUmVsYXRpb25zaGlwPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubW9yYWxpcy5DbG91ZC5ydW4oJ2dldEJhbmtSZWxhdGlvbnNoaXAnKSBhcyBCYW5rUmVsYXRpb25zaGlwXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldExhdGVzdFRyYW5zZmVycyhkaXJlY3Rpb246IFRyYW5zZmVyRGlyZWN0aW9uRW51bSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdnZXRUcmFuc2ZlcnMnLCB7ZGlyZWN0aW9uOiBkaXJlY3Rpb259KSBhcyBUcmFuc2ZlcltdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGVUcmFuc2ZlcihhbW91bnQ6IHN0cmluZywgZGlyZWN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bignY3JlYXRlVHJhbnNmZXInLFxyXG4gICAgICAgICAgICB7YW1vdW50OiBhbW91bnQsIGRpcmVjdGlvbjogZGlyZWN0aW9ufSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVUcmFuc2ZlcihpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubW9yYWxpcy5DbG91ZC5ydW4oJ2RlbGV0ZVRyYW5zZmVyJywge2lkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZWdpc3RlcldpcmVUcmFuc2ZlclJlbGF0aW9uc2hpcChwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdjcmVhdGVXaXJlUmVsYXRpb25zaGlwJywgcGFyYW1zKTtcclxuICAgIH1cclxufSIsImltcG9ydCBDb250cmFjdEFkZHJlc3NlcyBmcm9tIFwiLi9Db250cmFjdEFkZHJlc3Nlc1wiO1xyXG5pbXBvcnQgbXVtYmFpQ29udHJhY3RBZGRyZXNzZXMgZnJvbSBcIi4vbXVtYmFpLWNvbnRyYWN0LWFkZHJlc3Nlc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbG9jYWxob3N0Q29udHJhY3RBZGRyZXNzZXMgaW1wbGVtZW50cyBtdW1iYWlDb250cmFjdEFkZHJlc3NlcyB7XHJcblxyXG4gICAgTmV0d29ya05hbWUgPSBcImxvY2FsaG9zdFwiXHJcbiAgICBLWUNfQUREUkVTUyA9IFwiMHgyODU2YTBDODAzNGJGODg3OTI4ODQ1RDA1MTc5ODQ3ZTBBREMyMjA5XCI7XHJcbiAgICBBVVNEX0FERFJFU1MgPSBcIjB4NmFDRTcxMkQ0MTJlOTk3MjdhRGYyMjcyQkUyNGY4ZTQ1YUY3NjI3MFwiO1xyXG4gICAgTElNSU5BTF9NQVJLRVRfQUREUkVTUyA9IFwiMHhiZDEyNzBmM2Y4MTc1OTI3RmU0MjdhMjIwYjkyNTNiMzYwQmU1MkJkXCI7XHJcbiAgICBNQVJLRVRfQ0FMRU5EQVJfQUREUkVTUyA9IFwiMHg0NTkyMzlEOTY5NzY0NDBkNjhmZDc4ZTE0MDE5ODMzNzY4NDBkNTYzXCI7XHJcblxyXG59IiwiXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIENvbnRyYWN0QWRkcmVzc2VzIHtcclxuXHJcbiAgICBLWUNfQUREUkVTUyA9IFwiMHhFQkM2ODhEYUYwOTI0RDFBM2I5NUI4Njk3MTdiOTg3MDg3QTUyMTU2XCI7XHJcbiAgICBBVVNEX0FERFJFU1MgPSBcIjB4OEUzMmYyNzQ0NzZDRTIzRDY0YWUwMDM3Q0U4MENFOGI4RDY3MDY1OFwiO1xyXG4gICAgTElNSU5BTF9NQVJLRVRfQUREUkVTUyA9IFwiMHhlOEM4QzlGZjk0NGMwNDMxOGY0M0ZFMTQ3OUExZDUxRUJBZjJFQkQ4XCI7XHJcbn0iLCJpbXBvcnQgQ29udHJhY3RBZGRyZXNzZXMgZnJvbSBcIi4vQ29udHJhY3RBZGRyZXNzZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHJpbmtlYnlDb250cmFjdEFkZHJlc3NlcyBleHRlbmRzIENvbnRyYWN0QWRkcmVzc2Vze1xyXG5cclxuXHRLWUNfQUREUkVTUyA9IFwiMHgxZDhBZWFDNGNFYUJlOTg1ZTFBRDczQjhGMDlhZTU3Mjg0ODM0RmQ3XCI7XHJcblx0QVVTRF9BRERSRVNTID0gXCIweDQ5MjVmMzVEYjJiM2ZCN0ZGMkE1RjA1MjVEYTI5Q0I0RjVGMTJjQWNcIjtcclxuXHRMSU1JTkFMX01BUktFVF9BRERSRVNTID0gXCIweEZCYUFiOUYzOTRGMWFBODAxODJkRDZGRmI1MTg3RTQ4Y0FGQjk5MjJcIjtcclxuXHRVU0RDX0FERFJFU1MgPSBcIjB4NERCQ2RGOUI2MmU4OTFhN2NlYzVBMjU2OEMzRjRGQUY5RThBYmUyYlwiO1xyXG59IiwiaW1wb3J0IENvbnRyYWN0QWRkcmVzc2VzIGZyb20gXCIuL0NvbnRyYWN0QWRkcmVzc2VzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBtdW1iYWlDb250cmFjdEFkZHJlc3NlcyBpbXBsZW1lbnRzIENvbnRyYWN0QWRkcmVzc2VzIHtcclxuXHJcbiAgICBOZXR3b3JrTmFtZSA9IFwibXVtYmFpXCJcclxuICAgIEtZQ19BRERSRVNTID0gXCIweDMyRDY2NDYwM0U0NTM3MEU2NzBCYkIxNWJiNDBBNDkxODQ2OEJjOTNcIjtcclxuICAgIEFVU0RfQUREUkVTUyA9IFwiMHg3ZTcxODc0QjVFM2UwNjA1ZkM1N2M0N0Y5YWQzNDQ0MTQzQjk0MTc2XCI7XHJcbiAgICBMSU1JTkFMX01BUktFVF9BRERSRVNTID0gXCIweGY5YzRDMDg3NDBDYTYxOWZlQjAzYzE0RjliRTFkZjczNENCNTNlY2FcIjtcclxuICAgIE1BUktFVF9DQUxFTkRBUl9BRERSRVNTID0gXCIweDFjNGUxRjQ3QmU2OTAyQUNFNjFFN0MwMUMxNzkwMTc4NkI2NzZlYzhcIjtcclxuXHJcbn0iLCJpbXBvcnQgQ29udHJhY3RBZGRyZXNzZXMgZnJvbSBcIi4vQ29udHJhY3RBZGRyZXNzZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGZ1amlDb250cmFjdEFkZHJlc3NlcyBpbXBsZW1lbnRzIENvbnRyYWN0QWRkcmVzc2VzIHtcclxuXHJcbiAgICBOZXR3b3JrTmFtZSA9IFwiZnVqaVwiXHJcbiAgICBLWUNfQUREUkVTUyA9IFwiMHgwNTk0RDA0RkRCNUM5OEZiN0Y3NzdhNzk5MTM5NDI0QWUyNDE0QWFEXCI7XHJcbiAgICBBVVNEX0FERFJFU1MgPSBcIjB4YkFjNDgyYUUwYjBkNjUyODU0ZGYzNzdiZTU2NjQ0NTk4NEEwMjFFRFwiO1xyXG4gICAgTElNSU5BTF9NQVJLRVRfQUREUkVTUyA9IFwiMHgwOThBNTEyQjAxNzQwODAwOGEyM0VDZTIyODQzNzg4Nzk5Q0RlYkZkXCI7XHJcbiAgICBNQVJLRVRfQ0FMRU5EQVJfQUREUkVTUyA9IFwiMHg3N0U2QTYyQmU4Mzk4QjE4ZDJkQTgxQ0RCNkViMDk3YkQ4MTMyY2NCXCI7XHJcblxyXG59IiwiaW1wb3J0IGxvY2FsaG9zdENvbnRyYWN0QWRkcmVzc2VzIGZyb20gJy4vbG9jYWxob3N0LWNvbnRyYWN0LWFkZHJlc3Nlcyc7XHJcbmltcG9ydCByaW5rZWJ5Q29udHJhY3RBZGRyZXNzZXMgZnJvbSAnLi9yaW5rZWJ5LWNvbnRyYWN0LWFkZHJlc3Nlcyc7XHJcbmltcG9ydCBtdW1iYWlDb250cmFjdEFkZHJlc3NlcyBmcm9tICcuL211bWJhaS1jb250cmFjdC1hZGRyZXNzZXMnO1xyXG5pbXBvcnQgZnVqaUNvbnRyYWN0QWRkcmVzc2VzIGZyb20gJy4vZnVqaS1jb250cmFjdC1hZGRyZXNzZXMnO1xyXG5pbXBvcnQgQ29udHJhY3RBZGRyZXNzZXMgZnJvbSBcIi4vQ29udHJhY3RBZGRyZXNzZXNcIjtcclxuaW1wb3J0IE5ldHdvcmtJbmZvIGZyb20gXCIuLi9uZXR3b3Jrcy9OZXR3b3JrSW5mb1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyYWN0SW5mbyB7XHJcblxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29udHJhY3RJbmZvKG5ldHdvcmtOYW1lPzogc3RyaW5nKTogQ29udHJhY3RBZGRyZXNzZXMge1xyXG4gICAgICAgIGxldCBjb250cmFjdEluZm9zOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIGxvY2FsaG9zdENvbnRyYWN0QWRkcmVzc2VzLCByaW5rZWJ5Q29udHJhY3RBZGRyZXNzZXMsXHJcbiAgICAgICAgICAgIG11bWJhaUNvbnRyYWN0QWRkcmVzc2VzLCBmdWppQ29udHJhY3RBZGRyZXNzZXNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoIW5ldHdvcmtOYW1lKSB7XHJcbiAgICAgICAgICAgIG5ldHdvcmtOYW1lID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKS5OYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb250cmFjdEluZm9UeXBlID0gY29udHJhY3RJbmZvc1tuZXR3b3JrTmFtZSArICdDb250cmFjdEFkZHJlc3NlcyddO1xyXG4gICAgICAgIHJldHVybiBuZXcgY29udHJhY3RJbmZvVHlwZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBjbGFzcz1cXFwiY2VudGVyXFxcIj5cXHJcXG4gICAgVGhlIHN0b2NrIG1hcmtldCBpcyBjdXJyZW50bHkgY2xvc2VkLjxici8+XFxyXFxuSXQgaXMgdXN1YWxseSBvcGVuIG1vbmRheSB0byBmcmlkYXkgYmV0d2VlbiA5OjMwIEFNIGFuZCA0OjAwIFBNIEVTVCAoOTozMCAtIDE2OjAwIEVTVCkuXFxyXFxuICAgIDxici8+PGJyLz5cXHJcXG5Ub2RheSBpcyB7e2RheU9mV2Vla319XFxyXFxuPGJyIC8+PGJyLz5cXHJcXG5Zb3VyIGN1cnJlbnQgdGltZSBpcyB7e2N1cnJlbnRUaW1lfX0gKHt7R01UfX0pXFxyXFxuICAgIDxici8+PGJyLz5cXHJcXG5UaGF0IG1lYW5zIHRoZSBtYXJrZXQgaXMgb3BlbiB5b3VyIHRpbWUgYmV0d2Vlblxcclxcbnt7b3BlbkZyb219fSAtIHt7b3BlblRvfX1cXHJcXG48L2Rpdj5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZUhlbHBlciB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpc09sZGVyVGhlbihkYXRlIDogRGF0ZSwgbWludXRlcyA6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHJldHVybiAoY3VycmVudFRpbWUgPiAoZGF0ZS5nZXRUaW1lKCkgKyBtaW51dGVzICogNjAgKiAxMDAwKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0V2Vla2RheSgpIHtcclxuICAgICAgICBjb25zdCB3ZWVrZGF5ID0gW1wiU3VuZGF5XCIsXCJNb25kYXlcIixcIlR1ZXNkYXlcIixcIldlZG5lc2RheVwiLFwiVGh1cnNkYXlcIixcIkZyaWRheVwiLFwiU2F0dXJkYXlcIl07XHJcblxyXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiB3ZWVrZGF5W2QuZ2V0RGF5KCldO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0T3BlbkFuZENsb3NlSG91cnMoKSB7XHJcbiAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgICAgIGxldCBvcGVuSG91ciA9IDkgKyA0ICsgKC0xICogKGQuZ2V0VGltZXpvbmVPZmZzZXQoKS82MCkpO1xyXG4gICAgICAgIGxldCBjbG9zZUhvdXIgPSAxNiArIDQgKyAoLTEgKiAoZC5nZXRUaW1lem9uZU9mZnNldCgpLzYwKSk7XHJcbiAgICAgICAgcmV0dXJuIFtvcGVuSG91ciArICc6MzAnLCBjbG9zZUhvdXIgKyAnOjAwJ11cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuL0dlbmVyYWxFcnJvclwiO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uL3VpL21vZGFscy9Nb2RhbFwiO1xyXG5pbXBvcnQgTWFya2V0SXNDbG9zZWRIdG1sIGZyb20gXCIuLi9odG1sL21vZGFsL01hcmtldElzQ2xvc2VkLmh0bWxcIjtcclxuaW1wb3J0IERhdGVIZWxwZXIgZnJvbSBcIi4uL3V0aWwvRGF0ZUhlbHBlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvY2tjaGFpbkVycm9yIGV4dGVuZHMgR2VuZXJhbEVycm9yIHtcclxuICAgIHN0YXRpYyBFcnJvckZyb21Db250cmFjdCA9IC0xO1xyXG4gICAgc3RhdGljIFVzZXJDYW5jZWxsZWQgPSAxO1xyXG4gICAgc3RhdGljIEFkZHJlc3NJc05vdFZhbGlkS1lDID0gMjtcclxuICAgIHN0YXRpYyBNYXJrZXRJc0Nsb3NlZCA9IDM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZSA6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKGUpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlckRlbmllZFRyYW5zYWN0aW9uU2lnbmF0dXJlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2RlID0gQmxvY2tjaGFpbkVycm9yLlVzZXJDYW5jZWxsZWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFkZHJlc3NJc05vdFZhbGlkS1lDKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2RlID0gQmxvY2tjaGFpbkVycm9yLkFkZHJlc3NJc05vdFZhbGlkS1lDO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01hcmtldENsb3NlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29kZSA9IEJsb2NrY2hhaW5FcnJvci5NYXJrZXRJc0Nsb3NlZDtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjayA9IHRoaXMubWFya2V0SXNDbG9zZWRNb2RhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgbGV0IG1zZyA6IHN0cmluZyA9IGUuZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICBsZXQgc2VhcmNoU3RyID0gJ3JldmVydGVkIHdpdGggcmVhc29uIHN0cmluZyc7XHJcbiAgICAgICAgICAgIGxldCBpZHggPSBtc2cuaW5kZXhPZihzZWFyY2hTdHIpICsgc2VhcmNoU3RyLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGlkeCAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnLnN1YnN0cmluZyhpZHgpLnRyaW0oKS5yZXBsYWNlKC8nL2csICcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29kZSA9IEJsb2NrY2hhaW5FcnJvci5FcnJvckZyb21Db250cmFjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXNlckRlbmllZFRyYW5zYWN0aW9uU2lnbmF0dXJlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2UuaW5kZXhPZignZGVuaWVkIHRyYW5zYWN0aW9uIHNpZ25hdHVyZScpICE9PSAtMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkcmVzc0lzTm90VmFsaWRLWUMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZS5pbmRleE9mKCdhZGRyZXNzIGlzIG5vdCBreWMgdmFsaWQnKSAhPT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzTWFya2V0Q2xvc2VkKCkge1xyXG4gICAgICAgIGxldCBzZWFyY2hTdHIgPSAnTWFya2V0IGlzIGNsb3NlZCc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZS5pbmRleE9mKHNlYXJjaFN0cikgIT09IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYXJrZXRJc0Nsb3NlZE1vZGFsKCkge1xyXG4gICAgICAgIGxldCBbb3BlbkhvdXIsIGNsb3NlSG91cl0gPSBEYXRlSGVscGVyLmdldE9wZW5BbmRDbG9zZUhvdXJzKCk7XHJcbiAgICAgICAgbGV0IHRpbWUgPSBuZXcgRGF0ZSgpLnRvVGltZVN0cmluZygpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgY3VycmVudFRpbWU6IHRpbWVbMF0sXHJcbiAgICAgICAgICAgIEdNVDogdGltZVsxXSxcclxuICAgICAgICAgICAgZGF5T2ZXZWVrIDogRGF0ZUhlbHBlci5nZXRXZWVrZGF5KCksXHJcbiAgICAgICAgICAgIG9wZW5Gcm9tIDogb3BlbkhvdXIsXHJcbiAgICAgICAgICAgIG9wZW5UbyA6IGNsb3NlSG91clxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKE1hcmtldElzQ2xvc2VkSHRtbCk7XHJcbiAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdNYXJrZXQgaXMgY2xvc2VkJywgdGVtcGxhdGUob2JqKSlcclxuICAgIH1cclxufSIsImltcG9ydCBFcnJvckluZm8gZnJvbSBcIi4uLy4uL2Vycm9ycy9FcnJvckluZm9cIjtcclxuaW1wb3J0IEdlbmVyYWxFcnJvciBmcm9tIFwiLi4vLi4vZXJyb3JzL0dlbmVyYWxFcnJvclwiO1xyXG5pbXBvcnQgTmV0d29ya0luZm8gZnJvbSBcIi4uLy4uL25ldHdvcmtzL05ldHdvcmtJbmZvXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbG9ja2NoYWluU2VydmljZSB7XHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGV4ZWN1dGVGdW5jdGlvbihvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGV0aGVyZXVtICE9ICd1bmRlZmluZWQnICYmIGV0aGVyZXVtICYmIGV0aGVyZXVtLmNoYWluSWQpIHtcclxuICAgICAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0TmV0d29ya0luZm9CeUNoYWluSWQoZXRoZXJldW0uY2hhaW5JZCk7XHJcbiAgICAgICAgICAgIGlmICghbmV0d29ya0luZm8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXJyb3IoJ2NoYWluIG5vdCBzdXBwb3J0ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubW9yYWxpcy5leGVjdXRlRnVuY3Rpb24ob3B0aW9ucylcclxuICAgIH1cclxufSIsImltcG9ydCBDb250cmFjdEluZm8gZnJvbSBcIi4uLy4uL2NvbnRyYWN0cy9Db250cmFjdEluZm9cIjtcclxuaW1wb3J0IEVycm9ySW5mbyBmcm9tIFwiLi4vLi4vZXJyb3JzL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgQmxvY2tjaGFpbkVycm9yIGZyb20gXCIuLi8uLi9lcnJvcnMvQmxvY2tjaGFpbkVycm9yXCI7XHJcbmltcG9ydCBCbG9ja2NoYWluU2VydmljZSBmcm9tIFwiLi9CbG9ja2NoYWluU2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGltaW5hbE1hcmtldFNlcnZpY2UgZXh0ZW5kcyBCbG9ja2NoYWluU2VydmljZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgTGltaW5hbE1hcmtldEluZm86IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHN1cGVyKG1vcmFsaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRTeW1ib2xDb250cmFjdEFkZHJlc3Moc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCB0aGlzLmdldE9wdGlvbnMoXCJnZXRTZWN1cml0eVRva2VuXCIsIHtcclxuICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2xcclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVGdW5jdGlvbihvcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tjaGFpbkVycm9yID0gbmV3IEJsb2NrY2hhaW5FcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3JJbmZvLnJlcG9ydChibG9ja2NoYWluRXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldE9wdGlvbnMoZnVuY3Rpb25OYW1lOiBzdHJpbmcsIHBhcmFtczogYW55KSB7XHJcbiAgICAgICAgbGV0IGNvbnRyYWN0SW5mbyA9IENvbnRyYWN0SW5mby5nZXRDb250cmFjdEluZm8oKTtcclxuICAgICAgICBsZXQgYWJpID0gYXdhaXQgdGhpcy5nZXRMaW1pbmFsTWFya2V0QWJpKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogY29udHJhY3RJbmZvLkxJTUlOQUxfTUFSS0VUX0FERFJFU1MsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uTmFtZTogZnVuY3Rpb25OYW1lLFxyXG4gICAgICAgICAgICBhYmk6IGFiaSxcclxuICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TGltaW5hbE1hcmtldEFiaSgpIHtcclxuICAgICAgICBpZiAoTGltaW5hbE1hcmtldFNlcnZpY2UuTGltaW5hbE1hcmtldEluZm8pIHJldHVybiBMaW1pbmFsTWFya2V0U2VydmljZS5MaW1pbmFsTWFya2V0SW5mby5hYmk7XHJcblxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcuLi9hYmkvTGltaW5hbE1hcmtldC5qc29uJyk7XHJcbiAgICAgICAgTGltaW5hbE1hcmtldFNlcnZpY2UuTGltaW5hbE1hcmtldEluZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgcmV0dXJuIExpbWluYWxNYXJrZXRTZXJ2aWNlLkxpbWluYWxNYXJrZXRJbmZvLmFiaTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlVG9rZW4oc3ltYm9sOiBzdHJpbmcsIGNyZWF0aW5nVG9rZW4gOiAoKSA9PiB2b2lkKTogUHJvbWlzZTxzdHJpbmcgfCBCbG9ja2NoYWluRXJyb3I+IHtcclxuICAgICAgICBsZXQgc2FsdCA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSArIChNYXRoLnJhbmRvbSgpICogMTAwMDAwKSkudG9TdHJpbmcoKTtcclxuICAgICAgICBzYWx0ID0gc2FsdC5zdWJzdHJpbmcoMCwgc2FsdC5pbmRleE9mKCcuJykpO1xyXG4gICAgICAgIGNvbnN0IGxpbWluYWxPcHRpb25zID0gYXdhaXQgdGhpcy5nZXRPcHRpb25zKFwiY3JlYXRlVG9rZW5cIiwge1xyXG4gICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcclxuICAgICAgICAgICAgc2FsdCA6IHNhbHRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUZ1bmN0aW9uKGxpbWluYWxPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCBhcyB0eXBlb2YgRXhlY3V0ZUZ1bmN0aW9uQ2FsbFJlc3VsdDtcclxuICAgICAgICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBibG9ja2NoYWluRXJyb3IgPSBuZXcgQmxvY2tjaGFpbkVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tjaGFpbkVycm9yLnVzZXJEZW5pZWRUcmFuc2FjdGlvblNpZ25hdHVyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrY2hhaW5FcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9ySW5mby5yZXBvcnQoYmxvY2tjaGFpbkVycm9yKTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQmxvY2tjaGFpbkVycm9yKSByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgICAgICBjcmVhdGluZ1Rva2VuKCk7XHJcbiAgICAgICAgYXdhaXQgKHJlc3VsdCBhcyB0eXBlb2YgRXhlY3V0ZUZ1bmN0aW9uQ2FsbFJlc3VsdCkud2FpdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRTeW1ib2xDb250cmFjdEFkZHJlc3Moc3ltYm9sKTtcclxuICAgIH1cclxuXHJcblxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZ3VyZT5cXHJcXG4gICAgPHRhYmxlIGlkPVxcXCJsaW1pbmFsX21hcmtldF9zZWN1cml0aWVzX3RhYmxlXFxcIiByb2xlPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgPHRoZWFkPlxcclxcbiAgICA8dHI+XFxyXFxuICAgICAgICA8dGggY29sc3Bhbj1cXFwiMlxcXCI+PGlucHV0IGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiB0eXBlPVxcXCJzZWFyY2hcXFwiIGlkPVxcXCJzZWFyY2hfZm9yX3N5bWJvbFxcXCIgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaCBmb3IgbmFtZSBvciBzeW1ib2wgaW4ge3tzZWN1cml0aWVzQ291bnR9fSBzdG9ja3NcXFwiPjwvdGg+XFxyXFxuICAgIDwvdHI+XFxyXFxuICAgIDwvdGhlYWQ+XFxyXFxuICAgIDx0Ym9keSBpZD1cXFwie3t0Ym9keUlkfX1cXFwiPlxcclxcbiAgICB7ez5zZWN1cml0aWVzfX1cXHJcXG4gICAgPC90Ym9keT5cXHJcXG48L3RhYmxlPlxcclxcbjxzcGFuIGlkPVxcXCJsaW1pbmFsX21hcmtldF9sb2FkX21vcmVcXFwiPjwvc3Bhbj5cXHJcXG48L2ZpZ3VyZT5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwie3sjZWFjaCBzZWN1cml0aWVzfX1cXHJcXG48dHIgZGF0YS1zeW1ib2w9XFxcInt7e1N5bWJvbH19fVxcXCIgZGF0YS1sb2dvPVxcXCJ7e0xvZ29QYXRofX17e0xvZ299fVxcXCIgZGF0YS1uYW1lPVxcXCJ7e05hbWV9fVxcXCI+XFxyXFxuICAgIDx0ZCBjbGFzcz1cXFwic3ltYm9sX2xvZ29cXFwiPjxpbWcgc3JjPVxcXCJ7e0xvZ29QYXRofX17e0xvZ299fVxcXCIvPjwvdGQ+XFxyXFxuICAgIDx0ZCBjbGFzcz1cXFwic2VjdXJpdHlfaW5mb3JtYXRpb25cXFwiPlxcclxcbiAgICAgICAgPHN0cm9uZz57e05hbWV9fTwvc3Ryb25nPjxici8+XFxyXFxuICAgICAgICA8bmF2IGNsYXNzPVxcXCJzZWN1cml0eV9leHRyYVxcXCI+XFxyXFxuICAgICAgICAgICAgPHVsPlxcclxcbiAgICAgICAgICAgICAgICA8bGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwczovL3N0cmlrZS5tYXJrZXQvc3RvY2tzL3t7U3ltYm9sfX1cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj57e1N5bWJvbH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2xpPlxcclxcbiAgICAgICAgICAgIDwvdWw+XFxyXFxuICAgICAgICAgICAgPHVsPlxcclxcbiAgICAgICAgICAgICAgICA8bGk+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJcXFwiIGNsYXNzPVxcXCJnZXRBZGRyZXNzXFxcIiBkYXRhLXN5bWJvbD1cXFwie3tTeW1ib2x9fVxcXCI+R2V0IGFkZHJlc3M8L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICAgICAgPC91bD5cXHJcXG4gICAgICAgICAgICA8dWw+XFxyXFxuICAgICAgICAgICAgICAgIDxsaT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIlxcXCIgY2xhc3M9XFxcImFkZFRvV2FsbGV0XFxcIiBkYXRhLXN5bWJvbD1cXFwie3tTeW1ib2x9fVxcXCI+QWRkIHRvIHdhbGxldDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgPC9uYXY+XFxyXFxuICAgIDwvdGQ+XFxyXFxuPC90cj5cXHJcXG57ey9lYWNofX1cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29weUhlbHBlciB7XHJcblxyXG4gICAgcHVibGljIGZhbGxiYWNrQ29weVRleHRUb0NsaXBib2FyZCh0ZXh0IDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dDtcclxuXHJcbiAgICAgICAgLy8gQXZvaWQgc2Nyb2xsaW5nIHRvIGJvdHRvbVxyXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSBcIjBcIjtcclxuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7XHJcbiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKTtcclxuICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHN1Y2Nlc3NmdWwgPSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3VjY2Vzc2Z1bDtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNvcHlUZXh0VG9DbGlwYm9hcmQodGV4dCA6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghbmF2aWdhdG9yLmNsaXBib2FyZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWxsYmFja0NvcHlUZXh0VG9DbGlwYm9hcmQodGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbihibGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYmxlJywgYmxlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9KS5cclxuICAgICAgICBjYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGFydGljbGUgaWQ9XFxcInN5bWJvbEluZm9Ub0NvcHlcXFwiPlxcclxcbiAgICBUaGlzIGlzIHRoZSBhZGRyZXNzIGZvciB0aGUgc3ltYm9sIHt7c3ltYm9sfX0uXFxyXFxuICAgIDxici8+XFxyXFxuICAgIDxpbnB1dCB2YWx1ZT1cXFwie3thZGRyZXNzfX1cXFwiLz5cXHJcXG48L2FydGljbGU+XFxyXFxuXCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjx0ciBpZD1cXFwic3ltYm9sSW5mb1RvQ29weVxcXCI+XFxyXFxuICAgIDx0ZCBjb2xzcGFuPVxcXCI0XFxcIj5cXHJcXG4gICAgICAgIDxhcnRpY2xlPlxcclxcbiAgICAgICAgVGhpcyBzeW1ib2wgaGFzIG5ldmVyIGJlZW4gYm91Z2h0IGFuZCBkb2VzIG5vdCBleGlzdC4gQnV5IHRoaXMgc3ltYm9sIGFuZCBhZGRyZXNzIHdpbGwgYmVjb21lIGF2YWlsYWJsZS5cXHJcXG4gICAgICAgIDwvYXJ0aWNsZT5cXHJcXG4gICAgPC90ZD5cXHJcXG48L3RyPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvKlxyXG4gKiAgICAgIGJpZ251bWJlci5qcyB2OS4xLjBcclxuICogICAgICBBIEphdmFTY3JpcHQgbGlicmFyeSBmb3IgYXJiaXRyYXJ5LXByZWNpc2lvbiBhcml0aG1ldGljLlxyXG4gKiAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWtlTWNsL2JpZ251bWJlci5qc1xyXG4gKiAgICAgIENvcHlyaWdodCAoYykgMjAyMiBNaWNoYWVsIE1jbGF1Z2hsaW4gPE04Y2g4OGxAZ21haWwuY29tPlxyXG4gKiAgICAgIE1JVCBMaWNlbnNlZC5cclxuICpcclxuICogICAgICBCaWdOdW1iZXIucHJvdG90eXBlIG1ldGhvZHMgICAgIHwgIEJpZ051bWJlciBtZXRob2RzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgYWJzb2x1dGVWYWx1ZSAgICAgICAgICAgIGFicyAgICB8ICBjbG9uZVxyXG4gKiAgICAgIGNvbXBhcmVkVG8gICAgICAgICAgICAgICAgICAgICAgfCAgY29uZmlnICAgICAgICAgICAgICAgc2V0XHJcbiAqICAgICAgZGVjaW1hbFBsYWNlcyAgICAgICAgICAgIGRwICAgICB8ICAgICAgREVDSU1BTF9QTEFDRVNcclxuICogICAgICBkaXZpZGVkQnkgICAgICAgICAgICAgICAgZGl2ICAgIHwgICAgICBST1VORElOR19NT0RFXHJcbiAqICAgICAgZGl2aWRlZFRvSW50ZWdlckJ5ICAgICAgIGlkaXYgICB8ICAgICAgRVhQT05FTlRJQUxfQVRcclxuICogICAgICBleHBvbmVudGlhdGVkQnkgICAgICAgICAgcG93ICAgIHwgICAgICBSQU5HRVxyXG4gKiAgICAgIGludGVnZXJWYWx1ZSAgICAgICAgICAgICAgICAgICAgfCAgICAgIENSWVBUT1xyXG4gKiAgICAgIGlzRXF1YWxUbyAgICAgICAgICAgICAgICBlcSAgICAgfCAgICAgIE1PRFVMT19NT0RFXHJcbiAqICAgICAgaXNGaW5pdGUgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgUE9XX1BSRUNJU0lPTlxyXG4gKiAgICAgIGlzR3JlYXRlclRoYW4gICAgICAgICAgICBndCAgICAgfCAgICAgIEZPUk1BVFxyXG4gKiAgICAgIGlzR3JlYXRlclRoYW5PckVxdWFsVG8gICBndGUgICAgfCAgICAgIEFMUEhBQkVUXHJcbiAqICAgICAgaXNJbnRlZ2VyICAgICAgICAgICAgICAgICAgICAgICB8ICBpc0JpZ051bWJlclxyXG4gKiAgICAgIGlzTGVzc1RoYW4gICAgICAgICAgICAgICBsdCAgICAgfCAgbWF4aW11bSAgICAgICAgICAgICAgbWF4XHJcbiAqICAgICAgaXNMZXNzVGhhbk9yRXF1YWxUbyAgICAgIGx0ZSAgICB8ICBtaW5pbXVtICAgICAgICAgICAgICBtaW5cclxuICogICAgICBpc05hTiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIHJhbmRvbVxyXG4gKiAgICAgIGlzTmVnYXRpdmUgICAgICAgICAgICAgICAgICAgICAgfCAgc3VtXHJcbiAqICAgICAgaXNQb3NpdGl2ZSAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgaXNaZXJvICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgbWludXMgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgbW9kdWxvICAgICAgICAgICAgICAgICAgIG1vZCAgICB8XHJcbiAqICAgICAgbXVsdGlwbGllZEJ5ICAgICAgICAgICAgIHRpbWVzICB8XHJcbiAqICAgICAgbmVnYXRlZCAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgcGx1cyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgcHJlY2lzaW9uICAgICAgICAgICAgICAgIHNkICAgICB8XHJcbiAqICAgICAgc2hpZnRlZEJ5ICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgc3F1YXJlUm9vdCAgICAgICAgICAgICAgIHNxcnQgICB8XHJcbiAqICAgICAgdG9FeHBvbmVudGlhbCAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9GaXhlZCAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9Gb3JtYXQgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9GcmFjdGlvbiAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9KU09OICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9OdW1iZXIgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9QcmVjaXNpb24gICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdG9TdHJpbmcgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgdmFsdWVPZiAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqXHJcbiAqL1xyXG5cclxuXHJcbnZhclxyXG4gIGlzTnVtZXJpYyA9IC9eLT8oPzpcXGQrKD86XFwuXFxkKik/fFxcLlxcZCspKD86ZVsrLV0/XFxkKyk/JC9pLFxyXG4gIG1hdGhjZWlsID0gTWF0aC5jZWlsLFxyXG4gIG1hdGhmbG9vciA9IE1hdGguZmxvb3IsXHJcblxyXG4gIGJpZ251bWJlckVycm9yID0gJ1tCaWdOdW1iZXIgRXJyb3JdICcsXHJcbiAgdG9vTWFueURpZ2l0cyA9IGJpZ251bWJlckVycm9yICsgJ051bWJlciBwcmltaXRpdmUgaGFzIG1vcmUgdGhhbiAxNSBzaWduaWZpY2FudCBkaWdpdHM6ICcsXHJcblxyXG4gIEJBU0UgPSAxZTE0LFxyXG4gIExPR19CQVNFID0gMTQsXHJcbiAgTUFYX1NBRkVfSU5URUdFUiA9IDB4MWZmZmZmZmZmZmZmZmYsICAgICAgICAgLy8gMl41MyAtIDFcclxuICAvLyBNQVhfSU5UMzIgPSAweDdmZmZmZmZmLCAgICAgICAgICAgICAgICAgICAvLyAyXjMxIC0gMVxyXG4gIFBPV1NfVEVOID0gWzEsIDEwLCAxMDAsIDFlMywgMWU0LCAxZTUsIDFlNiwgMWU3LCAxZTgsIDFlOSwgMWUxMCwgMWUxMSwgMWUxMiwgMWUxM10sXHJcbiAgU1FSVF9CQVNFID0gMWU3LFxyXG5cclxuICAvLyBFRElUQUJMRVxyXG4gIC8vIFRoZSBsaW1pdCBvbiB0aGUgdmFsdWUgb2YgREVDSU1BTF9QTEFDRVMsIFRPX0VYUF9ORUcsIFRPX0VYUF9QT1MsIE1JTl9FWFAsIE1BWF9FWFAsIGFuZFxyXG4gIC8vIHRoZSBhcmd1bWVudHMgdG8gdG9FeHBvbmVudGlhbCwgdG9GaXhlZCwgdG9Gb3JtYXQsIGFuZCB0b1ByZWNpc2lvbi5cclxuICBNQVggPSAxRTk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAwIHRvIE1BWF9JTlQzMlxyXG5cclxuXHJcbi8qXHJcbiAqIENyZWF0ZSBhbmQgcmV0dXJuIGEgQmlnTnVtYmVyIGNvbnN0cnVjdG9yLlxyXG4gKi9cclxuZnVuY3Rpb24gY2xvbmUoY29uZmlnT2JqZWN0KSB7XHJcbiAgdmFyIGRpdiwgY29udmVydEJhc2UsIHBhcnNlTnVtZXJpYyxcclxuICAgIFAgPSBCaWdOdW1iZXIucHJvdG90eXBlID0geyBjb25zdHJ1Y3RvcjogQmlnTnVtYmVyLCB0b1N0cmluZzogbnVsbCwgdmFsdWVPZjogbnVsbCB9LFxyXG4gICAgT05FID0gbmV3IEJpZ051bWJlcigxKSxcclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFRElUQUJMRSBDT05GSUcgREVGQVVMVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcbiAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZXMgYmVsb3cgbXVzdCBiZSBpbnRlZ2VycyB3aXRoaW4gdGhlIGluY2x1c2l2ZSByYW5nZXMgc3RhdGVkLlxyXG4gICAgLy8gVGhlIHZhbHVlcyBjYW4gYWxzbyBiZSBjaGFuZ2VkIGF0IHJ1bi10aW1lIHVzaW5nIEJpZ051bWJlci5zZXQuXHJcblxyXG4gICAgLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIGZvciBvcGVyYXRpb25zIGludm9sdmluZyBkaXZpc2lvbi5cclxuICAgIERFQ0lNQUxfUExBQ0VTID0gMjAsICAgICAgICAgICAgICAgICAgICAgLy8gMCB0byBNQVhcclxuXHJcbiAgICAvLyBUaGUgcm91bmRpbmcgbW9kZSB1c2VkIHdoZW4gcm91bmRpbmcgdG8gdGhlIGFib3ZlIGRlY2ltYWwgcGxhY2VzLCBhbmQgd2hlbiB1c2luZ1xyXG4gICAgLy8gdG9FeHBvbmVudGlhbCwgdG9GaXhlZCwgdG9Gb3JtYXQgYW5kIHRvUHJlY2lzaW9uLCBhbmQgcm91bmQgKGRlZmF1bHQgdmFsdWUpLlxyXG4gICAgLy8gVVAgICAgICAgICAwIEF3YXkgZnJvbSB6ZXJvLlxyXG4gICAgLy8gRE9XTiAgICAgICAxIFRvd2FyZHMgemVyby5cclxuICAgIC8vIENFSUwgICAgICAgMiBUb3dhcmRzICtJbmZpbml0eS5cclxuICAgIC8vIEZMT09SICAgICAgMyBUb3dhcmRzIC1JbmZpbml0eS5cclxuICAgIC8vIEhBTEZfVVAgICAgNCBUb3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyLiBJZiBlcXVpZGlzdGFudCwgdXAuXHJcbiAgICAvLyBIQUxGX0RPV04gIDUgVG93YXJkcyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIGRvd24uXHJcbiAgICAvLyBIQUxGX0VWRU4gIDYgVG93YXJkcyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHRvd2FyZHMgZXZlbiBuZWlnaGJvdXIuXHJcbiAgICAvLyBIQUxGX0NFSUwgIDcgVG93YXJkcyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHRvd2FyZHMgK0luZmluaXR5LlxyXG4gICAgLy8gSEFMRl9GTE9PUiA4IFRvd2FyZHMgbmVhcmVzdCBuZWlnaGJvdXIuIElmIGVxdWlkaXN0YW50LCB0b3dhcmRzIC1JbmZpbml0eS5cclxuICAgIFJPVU5ESU5HX01PREUgPSA0LCAgICAgICAgICAgICAgICAgICAgICAgLy8gMCB0byA4XHJcblxyXG4gICAgLy8gRVhQT05FTlRJQUxfQVQgOiBbVE9fRVhQX05FRyAsIFRPX0VYUF9QT1NdXHJcblxyXG4gICAgLy8gVGhlIGV4cG9uZW50IHZhbHVlIGF0IGFuZCBiZW5lYXRoIHdoaWNoIHRvU3RyaW5nIHJldHVybnMgZXhwb25lbnRpYWwgbm90YXRpb24uXHJcbiAgICAvLyBOdW1iZXIgdHlwZTogLTdcclxuICAgIFRPX0VYUF9ORUcgPSAtNywgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCB0byAtTUFYXHJcblxyXG4gICAgLy8gVGhlIGV4cG9uZW50IHZhbHVlIGF0IGFuZCBhYm92ZSB3aGljaCB0b1N0cmluZyByZXR1cm5zIGV4cG9uZW50aWFsIG5vdGF0aW9uLlxyXG4gICAgLy8gTnVtYmVyIHR5cGU6IDIxXHJcbiAgICBUT19FWFBfUE9TID0gMjEsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgdG8gTUFYXHJcblxyXG4gICAgLy8gUkFOR0UgOiBbTUlOX0VYUCwgTUFYX0VYUF1cclxuXHJcbiAgICAvLyBUaGUgbWluaW11bSBleHBvbmVudCB2YWx1ZSwgYmVuZWF0aCB3aGljaCB1bmRlcmZsb3cgdG8gemVybyBvY2N1cnMuXHJcbiAgICAvLyBOdW1iZXIgdHlwZTogLTMyNCAgKDVlLTMyNClcclxuICAgIE1JTl9FWFAgPSAtMWU3LCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLTEgdG8gLU1BWFxyXG5cclxuICAgIC8vIFRoZSBtYXhpbXVtIGV4cG9uZW50IHZhbHVlLCBhYm92ZSB3aGljaCBvdmVyZmxvdyB0byBJbmZpbml0eSBvY2N1cnMuXHJcbiAgICAvLyBOdW1iZXIgdHlwZTogIDMwOCAgKDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4KVxyXG4gICAgLy8gRm9yIE1BWF9FWFAgPiAxZTcsIGUuZy4gbmV3IEJpZ051bWJlcignMWUxMDAwMDAwMDAnKS5wbHVzKDEpIG1heSBiZSBzbG93LlxyXG4gICAgTUFYX0VYUCA9IDFlNywgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxIHRvIE1BWFxyXG5cclxuICAgIC8vIFdoZXRoZXIgdG8gdXNlIGNyeXB0b2dyYXBoaWNhbGx5LXNlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRpb24sIGlmIGF2YWlsYWJsZS5cclxuICAgIENSWVBUTyA9IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ1ZSBvciBmYWxzZVxyXG5cclxuICAgIC8vIFRoZSBtb2R1bG8gbW9kZSB1c2VkIHdoZW4gY2FsY3VsYXRpbmcgdGhlIG1vZHVsdXM6IGEgbW9kIG4uXHJcbiAgICAvLyBUaGUgcXVvdGllbnQgKHEgPSBhIC8gbikgaXMgY2FsY3VsYXRlZCBhY2NvcmRpbmcgdG8gdGhlIGNvcnJlc3BvbmRpbmcgcm91bmRpbmcgbW9kZS5cclxuICAgIC8vIFRoZSByZW1haW5kZXIgKHIpIGlzIGNhbGN1bGF0ZWQgYXM6IHIgPSBhIC0gbiAqIHEuXHJcbiAgICAvL1xyXG4gICAgLy8gVVAgICAgICAgIDAgVGhlIHJlbWFpbmRlciBpcyBwb3NpdGl2ZSBpZiB0aGUgZGl2aWRlbmQgaXMgbmVnYXRpdmUsIGVsc2UgaXMgbmVnYXRpdmUuXHJcbiAgICAvLyBET1dOICAgICAgMSBUaGUgcmVtYWluZGVyIGhhcyB0aGUgc2FtZSBzaWduIGFzIHRoZSBkaXZpZGVuZC5cclxuICAgIC8vICAgICAgICAgICAgIFRoaXMgbW9kdWxvIG1vZGUgaXMgY29tbW9ubHkga25vd24gYXMgJ3RydW5jYXRlZCBkaXZpc2lvbicgYW5kIGlzXHJcbiAgICAvLyAgICAgICAgICAgICBlcXVpdmFsZW50IHRvIChhICUgbikgaW4gSmF2YVNjcmlwdC5cclxuICAgIC8vIEZMT09SICAgICAzIFRoZSByZW1haW5kZXIgaGFzIHRoZSBzYW1lIHNpZ24gYXMgdGhlIGRpdmlzb3IgKFB5dGhvbiAlKS5cclxuICAgIC8vIEhBTEZfRVZFTiA2IFRoaXMgbW9kdWxvIG1vZGUgaW1wbGVtZW50cyB0aGUgSUVFRSA3NTQgcmVtYWluZGVyIGZ1bmN0aW9uLlxyXG4gICAgLy8gRVVDTElEICAgIDkgRXVjbGlkaWFuIGRpdmlzaW9uLiBxID0gc2lnbihuKSAqIGZsb29yKGEgLyBhYnMobikpLlxyXG4gICAgLy8gICAgICAgICAgICAgVGhlIHJlbWFpbmRlciBpcyBhbHdheXMgcG9zaXRpdmUuXHJcbiAgICAvL1xyXG4gICAgLy8gVGhlIHRydW5jYXRlZCBkaXZpc2lvbiwgZmxvb3JlZCBkaXZpc2lvbiwgRXVjbGlkaWFuIGRpdmlzaW9uIGFuZCBJRUVFIDc1NCByZW1haW5kZXJcclxuICAgIC8vIG1vZGVzIGFyZSBjb21tb25seSB1c2VkIGZvciB0aGUgbW9kdWx1cyBvcGVyYXRpb24uXHJcbiAgICAvLyBBbHRob3VnaCB0aGUgb3RoZXIgcm91bmRpbmcgbW9kZXMgY2FuIGFsc28gYmUgdXNlZCwgdGhleSBtYXkgbm90IGdpdmUgdXNlZnVsIHJlc3VsdHMuXHJcbiAgICBNT0RVTE9fTU9ERSA9IDEsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgdG8gOVxyXG5cclxuICAgIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBzaWduaWZpY2FudCBkaWdpdHMgb2YgdGhlIHJlc3VsdCBvZiB0aGUgZXhwb25lbnRpYXRlZEJ5IG9wZXJhdGlvbi5cclxuICAgIC8vIElmIFBPV19QUkVDSVNJT04gaXMgMCwgdGhlcmUgd2lsbCBiZSB1bmxpbWl0ZWQgc2lnbmlmaWNhbnQgZGlnaXRzLlxyXG4gICAgUE9XX1BSRUNJU0lPTiA9IDAsICAgICAgICAgICAgICAgICAgICAgICAvLyAwIHRvIE1BWFxyXG5cclxuICAgIC8vIFRoZSBmb3JtYXQgc3BlY2lmaWNhdGlvbiB1c2VkIGJ5IHRoZSBCaWdOdW1iZXIucHJvdG90eXBlLnRvRm9ybWF0IG1ldGhvZC5cclxuICAgIEZPUk1BVCA9IHtcclxuICAgICAgcHJlZml4OiAnJyxcclxuICAgICAgZ3JvdXBTaXplOiAzLFxyXG4gICAgICBzZWNvbmRhcnlHcm91cFNpemU6IDAsXHJcbiAgICAgIGdyb3VwU2VwYXJhdG9yOiAnLCcsXHJcbiAgICAgIGRlY2ltYWxTZXBhcmF0b3I6ICcuJyxcclxuICAgICAgZnJhY3Rpb25Hcm91cFNpemU6IDAsXHJcbiAgICAgIGZyYWN0aW9uR3JvdXBTZXBhcmF0b3I6ICdcXHhBMCcsICAgICAgICAvLyBub24tYnJlYWtpbmcgc3BhY2VcclxuICAgICAgc3VmZml4OiAnJ1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBUaGUgYWxwaGFiZXQgdXNlZCBmb3IgYmFzZSBjb252ZXJzaW9uLiBJdCBtdXN0IGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVycyBsb25nLCB3aXRoIG5vICcrJyxcclxuICAgIC8vICctJywgJy4nLCB3aGl0ZXNwYWNlLCBvciByZXBlYXRlZCBjaGFyYWN0ZXIuXHJcbiAgICAvLyAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVokXydcclxuICAgIEFMUEhBQkVUID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicsXHJcbiAgICBhbHBoYWJldEhhc05vcm1hbERlY2ltYWxEaWdpdHMgPSB0cnVlO1xyXG5cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG4gIC8vIENPTlNUUlVDVE9SXHJcblxyXG5cclxuICAvKlxyXG4gICAqIFRoZSBCaWdOdW1iZXIgY29uc3RydWN0b3IgYW5kIGV4cG9ydGVkIGZ1bmN0aW9uLlxyXG4gICAqIENyZWF0ZSBhbmQgcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGEgQmlnTnVtYmVyIG9iamVjdC5cclxuICAgKlxyXG4gICAqIHYge251bWJlcnxzdHJpbmd8QmlnTnVtYmVyfSBBIG51bWVyaWMgdmFsdWUuXHJcbiAgICogW2JdIHtudW1iZXJ9IFRoZSBiYXNlIG9mIHYuIEludGVnZXIsIDIgdG8gQUxQSEFCRVQubGVuZ3RoIGluY2x1c2l2ZS5cclxuICAgKi9cclxuICBmdW5jdGlvbiBCaWdOdW1iZXIodiwgYikge1xyXG4gICAgdmFyIGFscGhhYmV0LCBjLCBjYXNlQ2hhbmdlZCwgZSwgaSwgaXNOdW0sIGxlbiwgc3RyLFxyXG4gICAgICB4ID0gdGhpcztcclxuXHJcbiAgICAvLyBFbmFibGUgY29uc3RydWN0b3IgY2FsbCB3aXRob3V0IGBuZXdgLlxyXG4gICAgaWYgKCEoeCBpbnN0YW5jZW9mIEJpZ051bWJlcikpIHJldHVybiBuZXcgQmlnTnVtYmVyKHYsIGIpO1xyXG5cclxuICAgIGlmIChiID09IG51bGwpIHtcclxuXHJcbiAgICAgIGlmICh2ICYmIHYuX2lzQmlnTnVtYmVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgeC5zID0gdi5zO1xyXG5cclxuICAgICAgICBpZiAoIXYuYyB8fCB2LmUgPiBNQVhfRVhQKSB7XHJcbiAgICAgICAgICB4LmMgPSB4LmUgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodi5lIDwgTUlOX0VYUCkge1xyXG4gICAgICAgICAgeC5jID0gW3guZSA9IDBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB4LmUgPSB2LmU7XHJcbiAgICAgICAgICB4LmMgPSB2LmMuc2xpY2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKChpc051bSA9IHR5cGVvZiB2ID09ICdudW1iZXInKSAmJiB2ICogMCA9PSAwKSB7XHJcblxyXG4gICAgICAgIC8vIFVzZSBgMSAvIG5gIHRvIGhhbmRsZSBtaW51cyB6ZXJvIGFsc28uXHJcbiAgICAgICAgeC5zID0gMSAvIHYgPCAwID8gKHYgPSAtdiwgLTEpIDogMTtcclxuXHJcbiAgICAgICAgLy8gRmFzdCBwYXRoIGZvciBpbnRlZ2Vycywgd2hlcmUgbiA8IDIxNDc0ODM2NDggKDIqKjMxKS5cclxuICAgICAgICBpZiAodiA9PT0gfn52KSB7XHJcbiAgICAgICAgICBmb3IgKGUgPSAwLCBpID0gdjsgaSA+PSAxMDsgaSAvPSAxMCwgZSsrKTtcclxuXHJcbiAgICAgICAgICBpZiAoZSA+IE1BWF9FWFApIHtcclxuICAgICAgICAgICAgeC5jID0geC5lID0gbnVsbDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHguZSA9IGU7XHJcbiAgICAgICAgICAgIHguYyA9IFt2XTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHIgPSBTdHJpbmcodik7XHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIGlmICghaXNOdW1lcmljLnRlc3Qoc3RyID0gU3RyaW5nKHYpKSkgcmV0dXJuIHBhcnNlTnVtZXJpYyh4LCBzdHIsIGlzTnVtKTtcclxuXHJcbiAgICAgICAgeC5zID0gc3RyLmNoYXJDb2RlQXQoMCkgPT0gNDUgPyAoc3RyID0gc3RyLnNsaWNlKDEpLCAtMSkgOiAxO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEZWNpbWFsIHBvaW50P1xyXG4gICAgICBpZiAoKGUgPSBzdHIuaW5kZXhPZignLicpKSA+IC0xKSBzdHIgPSBzdHIucmVwbGFjZSgnLicsICcnKTtcclxuXHJcbiAgICAgIC8vIEV4cG9uZW50aWFsIGZvcm0/XHJcbiAgICAgIGlmICgoaSA9IHN0ci5zZWFyY2goL2UvaSkpID4gMCkge1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgZXhwb25lbnQuXHJcbiAgICAgICAgaWYgKGUgPCAwKSBlID0gaTtcclxuICAgICAgICBlICs9ICtzdHIuc2xpY2UoaSArIDEpO1xyXG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgaSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZSA8IDApIHtcclxuXHJcbiAgICAgICAgLy8gSW50ZWdlci5cclxuICAgICAgICBlID0gc3RyLmxlbmd0aDtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAvLyAnW0JpZ051bWJlciBFcnJvcl0gQmFzZSB7bm90IGEgcHJpbWl0aXZlIG51bWJlcnxub3QgYW4gaW50ZWdlcnxvdXQgb2YgcmFuZ2V9OiB7Yn0nXHJcbiAgICAgIGludENoZWNrKGIsIDIsIEFMUEhBQkVULmxlbmd0aCwgJ0Jhc2UnKTtcclxuXHJcbiAgICAgIC8vIEFsbG93IGV4cG9uZW50aWFsIG5vdGF0aW9uIHRvIGJlIHVzZWQgd2l0aCBiYXNlIDEwIGFyZ3VtZW50LCB3aGlsZVxyXG4gICAgICAvLyBhbHNvIHJvdW5kaW5nIHRvIERFQ0lNQUxfUExBQ0VTIGFzIHdpdGggb3RoZXIgYmFzZXMuXHJcbiAgICAgIGlmIChiID09IDEwICYmIGFscGhhYmV0SGFzTm9ybWFsRGVjaW1hbERpZ2l0cykge1xyXG4gICAgICAgIHggPSBuZXcgQmlnTnVtYmVyKHYpO1xyXG4gICAgICAgIHJldHVybiByb3VuZCh4LCBERUNJTUFMX1BMQUNFUyArIHguZSArIDEsIFJPVU5ESU5HX01PREUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdHIgPSBTdHJpbmcodik7XHJcblxyXG4gICAgICBpZiAoaXNOdW0gPSB0eXBlb2YgdiA9PSAnbnVtYmVyJykge1xyXG5cclxuICAgICAgICAvLyBBdm9pZCBwb3RlbnRpYWwgaW50ZXJwcmV0YXRpb24gb2YgSW5maW5pdHkgYW5kIE5hTiBhcyBiYXNlIDQ0KyB2YWx1ZXMuXHJcbiAgICAgICAgaWYgKHYgKiAwICE9IDApIHJldHVybiBwYXJzZU51bWVyaWMoeCwgc3RyLCBpc051bSwgYik7XHJcblxyXG4gICAgICAgIHgucyA9IDEgLyB2IDwgMCA/IChzdHIgPSBzdHIuc2xpY2UoMSksIC0xKSA6IDE7XHJcblxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBOdW1iZXIgcHJpbWl0aXZlIGhhcyBtb3JlIHRoYW4gMTUgc2lnbmlmaWNhbnQgZGlnaXRzOiB7bn0nXHJcbiAgICAgICAgaWYgKEJpZ051bWJlci5ERUJVRyAmJiBzdHIucmVwbGFjZSgvXjBcXC4wKnxcXC4vLCAnJykubGVuZ3RoID4gMTUpIHtcclxuICAgICAgICAgIHRocm93IEVycm9yXHJcbiAgICAgICAgICAgKHRvb01hbnlEaWdpdHMgKyB2KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeC5zID0gc3RyLmNoYXJDb2RlQXQoMCkgPT09IDQ1ID8gKHN0ciA9IHN0ci5zbGljZSgxKSwgLTEpIDogMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWxwaGFiZXQgPSBBTFBIQUJFVC5zbGljZSgwLCBiKTtcclxuICAgICAgZSA9IGkgPSAwO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgdGhhdCBzdHIgaXMgYSB2YWxpZCBiYXNlIGIgbnVtYmVyLlxyXG4gICAgICAvLyBEb24ndCB1c2UgUmVnRXhwLCBzbyBhbHBoYWJldCBjYW4gY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuXHJcbiAgICAgIGZvciAobGVuID0gc3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFscGhhYmV0LmluZGV4T2YoYyA9IHN0ci5jaGFyQXQoaSkpIDwgMCkge1xyXG4gICAgICAgICAgaWYgKGMgPT0gJy4nKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiAnLicgaXMgbm90IHRoZSBmaXJzdCBjaGFyYWN0ZXIgYW5kIGl0IGhhcyBub3QgYmUgZm91bmQgYmVmb3JlLlxyXG4gICAgICAgICAgICBpZiAoaSA+IGUpIHtcclxuICAgICAgICAgICAgICBlID0gbGVuO1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKCFjYXNlQ2hhbmdlZCkge1xyXG5cclxuICAgICAgICAgICAgLy8gQWxsb3cgZS5nLiBoZXhhZGVjaW1hbCAnRkYnIGFzIHdlbGwgYXMgJ2ZmJy5cclxuICAgICAgICAgICAgaWYgKHN0ciA9PSBzdHIudG9VcHBlckNhc2UoKSAmJiAoc3RyID0gc3RyLnRvTG93ZXJDYXNlKCkpIHx8XHJcbiAgICAgICAgICAgICAgICBzdHIgPT0gc3RyLnRvTG93ZXJDYXNlKCkgJiYgKHN0ciA9IHN0ci50b1VwcGVyQ2FzZSgpKSkge1xyXG4gICAgICAgICAgICAgIGNhc2VDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBpID0gLTE7XHJcbiAgICAgICAgICAgICAgZSA9IDA7XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljKHgsIFN0cmluZyh2KSwgaXNOdW0sIGIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUHJldmVudCBsYXRlciBjaGVjayBmb3IgbGVuZ3RoIG9uIGNvbnZlcnRlZCBudW1iZXIuXHJcbiAgICAgIGlzTnVtID0gZmFsc2U7XHJcbiAgICAgIHN0ciA9IGNvbnZlcnRCYXNlKHN0ciwgYiwgMTAsIHgucyk7XHJcblxyXG4gICAgICAvLyBEZWNpbWFsIHBvaW50P1xyXG4gICAgICBpZiAoKGUgPSBzdHIuaW5kZXhPZignLicpKSA+IC0xKSBzdHIgPSBzdHIucmVwbGFjZSgnLicsICcnKTtcclxuICAgICAgZWxzZSBlID0gc3RyLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgbGVhZGluZyB6ZXJvcy5cclxuICAgIGZvciAoaSA9IDA7IHN0ci5jaGFyQ29kZUF0KGkpID09PSA0ODsgaSsrKTtcclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgICBmb3IgKGxlbiA9IHN0ci5sZW5ndGg7IHN0ci5jaGFyQ29kZUF0KC0tbGVuKSA9PT0gNDg7KTtcclxuXHJcbiAgICBpZiAoc3RyID0gc3RyLnNsaWNlKGksICsrbGVuKSkge1xyXG4gICAgICBsZW4gLT0gaTtcclxuXHJcbiAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBOdW1iZXIgcHJpbWl0aXZlIGhhcyBtb3JlIHRoYW4gMTUgc2lnbmlmaWNhbnQgZGlnaXRzOiB7bn0nXHJcbiAgICAgIGlmIChpc051bSAmJiBCaWdOdW1iZXIuREVCVUcgJiZcclxuICAgICAgICBsZW4gPiAxNSAmJiAodiA+IE1BWF9TQUZFX0lOVEVHRVIgfHwgdiAhPT0gbWF0aGZsb29yKHYpKSkge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAgICAodG9vTWFueURpZ2l0cyArICh4LnMgKiB2KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICAvLyBPdmVyZmxvdz9cclxuICAgICAgaWYgKChlID0gZSAtIGkgLSAxKSA+IE1BWF9FWFApIHtcclxuXHJcbiAgICAgICAgLy8gSW5maW5pdHkuXHJcbiAgICAgICAgeC5jID0geC5lID0gbnVsbDtcclxuXHJcbiAgICAgIC8vIFVuZGVyZmxvdz9cclxuICAgICAgfSBlbHNlIGlmIChlIDwgTUlOX0VYUCkge1xyXG5cclxuICAgICAgICAvLyBaZXJvLlxyXG4gICAgICAgIHguYyA9IFt4LmUgPSAwXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB4LmUgPSBlO1xyXG4gICAgICAgIHguYyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBUcmFuc2Zvcm0gYmFzZVxyXG5cclxuICAgICAgICAvLyBlIGlzIHRoZSBiYXNlIDEwIGV4cG9uZW50LlxyXG4gICAgICAgIC8vIGkgaXMgd2hlcmUgdG8gc2xpY2Ugc3RyIHRvIGdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgY29lZmZpY2llbnQgYXJyYXkuXHJcbiAgICAgICAgaSA9IChlICsgMSkgJSBMT0dfQkFTRTtcclxuICAgICAgICBpZiAoZSA8IDApIGkgKz0gTE9HX0JBU0U7ICAvLyBpIDwgMVxyXG5cclxuICAgICAgICBpZiAoaSA8IGxlbikge1xyXG4gICAgICAgICAgaWYgKGkpIHguYy5wdXNoKCtzdHIuc2xpY2UoMCwgaSkpO1xyXG5cclxuICAgICAgICAgIGZvciAobGVuIC09IExPR19CQVNFOyBpIDwgbGVuOykge1xyXG4gICAgICAgICAgICB4LmMucHVzaCgrc3RyLnNsaWNlKGksIGkgKz0gTE9HX0JBU0UpKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpID0gTE9HX0JBU0UgLSAoc3RyID0gc3RyLnNsaWNlKGkpKS5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGkgLT0gbGVuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICg7IGktLTsgc3RyICs9ICcwJyk7XHJcbiAgICAgICAgeC5jLnB1c2goK3N0cik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAvLyBaZXJvLlxyXG4gICAgICB4LmMgPSBbeC5lID0gMF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gQ09OU1RSVUNUT1IgUFJPUEVSVElFU1xyXG5cclxuXHJcbiAgQmlnTnVtYmVyLmNsb25lID0gY2xvbmU7XHJcblxyXG4gIEJpZ051bWJlci5ST1VORF9VUCA9IDA7XHJcbiAgQmlnTnVtYmVyLlJPVU5EX0RPV04gPSAxO1xyXG4gIEJpZ051bWJlci5ST1VORF9DRUlMID0gMjtcclxuICBCaWdOdW1iZXIuUk9VTkRfRkxPT1IgPSAzO1xyXG4gIEJpZ051bWJlci5ST1VORF9IQUxGX1VQID0gNDtcclxuICBCaWdOdW1iZXIuUk9VTkRfSEFMRl9ET1dOID0gNTtcclxuICBCaWdOdW1iZXIuUk9VTkRfSEFMRl9FVkVOID0gNjtcclxuICBCaWdOdW1iZXIuUk9VTkRfSEFMRl9DRUlMID0gNztcclxuICBCaWdOdW1iZXIuUk9VTkRfSEFMRl9GTE9PUiA9IDg7XHJcbiAgQmlnTnVtYmVyLkVVQ0xJRCA9IDk7XHJcblxyXG5cclxuICAvKlxyXG4gICAqIENvbmZpZ3VyZSBpbmZyZXF1ZW50bHktY2hhbmdpbmcgbGlicmFyeS13aWRlIHNldHRpbmdzLlxyXG4gICAqXHJcbiAgICogQWNjZXB0IGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgb3B0aW9uYWwgcHJvcGVydGllcyAoaWYgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgaXNcclxuICAgKiBhIG51bWJlciwgaXQgbXVzdCBiZSBhbiBpbnRlZ2VyIHdpdGhpbiB0aGUgaW5jbHVzaXZlIHJhbmdlIHN0YXRlZCk6XHJcbiAgICpcclxuICAgKiAgIERFQ0lNQUxfUExBQ0VTICAge251bWJlcn0gICAgICAgICAgIDAgdG8gTUFYXHJcbiAgICogICBST1VORElOR19NT0RFICAgIHtudW1iZXJ9ICAgICAgICAgICAwIHRvIDhcclxuICAgKiAgIEVYUE9ORU5USUFMX0FUICAge251bWJlcnxudW1iZXJbXX0gIC1NQVggdG8gTUFYICBvciAgWy1NQVggdG8gMCwgMCB0byBNQVhdXHJcbiAgICogICBSQU5HRSAgICAgICAgICAgIHtudW1iZXJ8bnVtYmVyW119ICAtTUFYIHRvIE1BWCAobm90IHplcm8pICBvciAgWy1NQVggdG8gLTEsIDEgdG8gTUFYXVxyXG4gICAqICAgQ1JZUFRPICAgICAgICAgICB7Ym9vbGVhbn0gICAgICAgICAgdHJ1ZSBvciBmYWxzZVxyXG4gICAqICAgTU9EVUxPX01PREUgICAgICB7bnVtYmVyfSAgICAgICAgICAgMCB0byA5XHJcbiAgICogICBQT1dfUFJFQ0lTSU9OICAgICAgIHtudW1iZXJ9ICAgICAgICAgICAwIHRvIE1BWFxyXG4gICAqICAgQUxQSEFCRVQgICAgICAgICB7c3RyaW5nfSAgICAgICAgICAgQSBzdHJpbmcgb2YgdHdvIG9yIG1vcmUgdW5pcXVlIGNoYXJhY3RlcnMgd2hpY2ggZG9lc1xyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGNvbnRhaW4gJy4nLlxyXG4gICAqICAgRk9STUFUICAgICAgICAgICB7b2JqZWN0fSAgICAgICAgICAgQW4gb2JqZWN0IHdpdGggc29tZSBvZiB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XHJcbiAgICogICAgIHByZWZpeCAgICAgICAgICAgICAgICAge3N0cmluZ31cclxuICAgKiAgICAgZ3JvdXBTaXplICAgICAgICAgICAgICB7bnVtYmVyfVxyXG4gICAqICAgICBzZWNvbmRhcnlHcm91cFNpemUgICAgIHtudW1iZXJ9XHJcbiAgICogICAgIGdyb3VwU2VwYXJhdG9yICAgICAgICAge3N0cmluZ31cclxuICAgKiAgICAgZGVjaW1hbFNlcGFyYXRvciAgICAgICB7c3RyaW5nfVxyXG4gICAqICAgICBmcmFjdGlvbkdyb3VwU2l6ZSAgICAgIHtudW1iZXJ9XHJcbiAgICogICAgIGZyYWN0aW9uR3JvdXBTZXBhcmF0b3Ige3N0cmluZ31cclxuICAgKiAgICAgc3VmZml4ICAgICAgICAgICAgICAgICB7c3RyaW5nfVxyXG4gICAqXHJcbiAgICogKFRoZSB2YWx1ZXMgYXNzaWduZWQgdG8gdGhlIGFib3ZlIEZPUk1BVCBvYmplY3QgcHJvcGVydGllcyBhcmUgbm90IGNoZWNrZWQgZm9yIHZhbGlkaXR5LilcclxuICAgKlxyXG4gICAqIEUuZy5cclxuICAgKiBCaWdOdW1iZXIuY29uZmlnKHsgREVDSU1BTF9QTEFDRVMgOiAyMCwgUk9VTkRJTkdfTU9ERSA6IDQgfSlcclxuICAgKlxyXG4gICAqIElnbm9yZSBwcm9wZXJ0aWVzL3BhcmFtZXRlcnMgc2V0IHRvIG51bGwgb3IgdW5kZWZpbmVkLCBleGNlcHQgZm9yIEFMUEhBQkVULlxyXG4gICAqXHJcbiAgICogUmV0dXJuIGFuIG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIGN1cnJlbnQgdmFsdWVzLlxyXG4gICAqL1xyXG4gIEJpZ051bWJlci5jb25maWcgPSBCaWdOdW1iZXIuc2V0ID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgdmFyIHAsIHY7XHJcblxyXG4gICAgaWYgKG9iaiAhPSBudWxsKSB7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIG9iaiA9PSAnb2JqZWN0Jykge1xyXG5cclxuICAgICAgICAvLyBERUNJTUFMX1BMQUNFUyB7bnVtYmVyfSBJbnRlZ2VyLCAwIHRvIE1BWCBpbmNsdXNpdmUuXHJcbiAgICAgICAgLy8gJ1tCaWdOdW1iZXIgRXJyb3JdIERFQ0lNQUxfUExBQ0VTIHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHt2fSdcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHAgPSAnREVDSU1BTF9QTEFDRVMnKSkge1xyXG4gICAgICAgICAgdiA9IG9ialtwXTtcclxuICAgICAgICAgIGludENoZWNrKHYsIDAsIE1BWCwgcCk7XHJcbiAgICAgICAgICBERUNJTUFMX1BMQUNFUyA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBST1VORElOR19NT0RFIHtudW1iZXJ9IEludGVnZXIsIDAgdG8gOCBpbmNsdXNpdmUuXHJcbiAgICAgICAgLy8gJ1tCaWdOdW1iZXIgRXJyb3JdIFJPVU5ESU5HX01PREUge25vdCBhIHByaW1pdGl2ZSBudW1iZXJ8bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfToge3Z9J1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCA9ICdST1VORElOR19NT0RFJykpIHtcclxuICAgICAgICAgIHYgPSBvYmpbcF07XHJcbiAgICAgICAgICBpbnRDaGVjayh2LCAwLCA4LCBwKTtcclxuICAgICAgICAgIFJPVU5ESU5HX01PREUgPSB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRVhQT05FTlRJQUxfQVQge251bWJlcnxudW1iZXJbXX1cclxuICAgICAgICAvLyBJbnRlZ2VyLCAtTUFYIHRvIE1BWCBpbmNsdXNpdmUgb3JcclxuICAgICAgICAvLyBbaW50ZWdlciAtTUFYIHRvIDAgaW5jbHVzaXZlLCAwIHRvIE1BWCBpbmNsdXNpdmVdLlxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBFWFBPTkVOVElBTF9BVCB7bm90IGEgcHJpbWl0aXZlIG51bWJlcnxub3QgYW4gaW50ZWdlcnxvdXQgb2YgcmFuZ2V9OiB7dn0nXHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwID0gJ0VYUE9ORU5USUFMX0FUJykpIHtcclxuICAgICAgICAgIHYgPSBvYmpbcF07XHJcbiAgICAgICAgICBpZiAodiAmJiB2LnBvcCkge1xyXG4gICAgICAgICAgICBpbnRDaGVjayh2WzBdLCAtTUFYLCAwLCBwKTtcclxuICAgICAgICAgICAgaW50Q2hlY2sodlsxXSwgMCwgTUFYLCBwKTtcclxuICAgICAgICAgICAgVE9fRVhQX05FRyA9IHZbMF07XHJcbiAgICAgICAgICAgIFRPX0VYUF9QT1MgPSB2WzFdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW50Q2hlY2sodiwgLU1BWCwgTUFYLCBwKTtcclxuICAgICAgICAgICAgVE9fRVhQX05FRyA9IC0oVE9fRVhQX1BPUyA9IHYgPCAwID8gLXYgOiB2KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJBTkdFIHtudW1iZXJ8bnVtYmVyW119IE5vbi16ZXJvIGludGVnZXIsIC1NQVggdG8gTUFYIGluY2x1c2l2ZSBvclxyXG4gICAgICAgIC8vIFtpbnRlZ2VyIC1NQVggdG8gLTEgaW5jbHVzaXZlLCBpbnRlZ2VyIDEgdG8gTUFYIGluY2x1c2l2ZV0uXHJcbiAgICAgICAgLy8gJ1tCaWdOdW1iZXIgRXJyb3JdIFJBTkdFIHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZXxjYW5ub3QgYmUgemVyb306IHt2fSdcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHAgPSAnUkFOR0UnKSkge1xyXG4gICAgICAgICAgdiA9IG9ialtwXTtcclxuICAgICAgICAgIGlmICh2ICYmIHYucG9wKSB7XHJcbiAgICAgICAgICAgIGludENoZWNrKHZbMF0sIC1NQVgsIC0xLCBwKTtcclxuICAgICAgICAgICAgaW50Q2hlY2sodlsxXSwgMSwgTUFYLCBwKTtcclxuICAgICAgICAgICAgTUlOX0VYUCA9IHZbMF07XHJcbiAgICAgICAgICAgIE1BWF9FWFAgPSB2WzFdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW50Q2hlY2sodiwgLU1BWCwgTUFYLCBwKTtcclxuICAgICAgICAgICAgaWYgKHYpIHtcclxuICAgICAgICAgICAgICBNSU5fRVhQID0gLShNQVhfRVhQID0gdiA8IDAgPyAtdiA6IHYpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRocm93IEVycm9yXHJcbiAgICAgICAgICAgICAgIChiaWdudW1iZXJFcnJvciArIHAgKyAnIGNhbm5vdCBiZSB6ZXJvOiAnICsgdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENSWVBUTyB7Ym9vbGVhbn0gdHJ1ZSBvciBmYWxzZS5cclxuICAgICAgICAvLyAnW0JpZ051bWJlciBFcnJvcl0gQ1JZUFRPIG5vdCB0cnVlIG9yIGZhbHNlOiB7dn0nXHJcbiAgICAgICAgLy8gJ1tCaWdOdW1iZXIgRXJyb3JdIGNyeXB0byB1bmF2YWlsYWJsZSdcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHAgPSAnQ1JZUFRPJykpIHtcclxuICAgICAgICAgIHYgPSBvYmpbcF07XHJcbiAgICAgICAgICBpZiAodiA9PT0gISF2KSB7XHJcbiAgICAgICAgICAgIGlmICh2KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvICYmXHJcbiAgICAgICAgICAgICAgIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIHx8IGNyeXB0by5yYW5kb21CeXRlcykpIHtcclxuICAgICAgICAgICAgICAgIENSWVBUTyA9IHY7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIENSWVBUTyA9ICF2O1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAgICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyAnY3J5cHRvIHVuYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIENSWVBUTyA9IHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yXHJcbiAgICAgICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyBwICsgJyBub3QgdHJ1ZSBvciBmYWxzZTogJyArIHYpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTU9EVUxPX01PREUge251bWJlcn0gSW50ZWdlciwgMCB0byA5IGluY2x1c2l2ZS5cclxuICAgICAgICAvLyAnW0JpZ051bWJlciBFcnJvcl0gTU9EVUxPX01PREUge25vdCBhIHByaW1pdGl2ZSBudW1iZXJ8bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfToge3Z9J1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCA9ICdNT0RVTE9fTU9ERScpKSB7XHJcbiAgICAgICAgICB2ID0gb2JqW3BdO1xyXG4gICAgICAgICAgaW50Q2hlY2sodiwgMCwgOSwgcCk7XHJcbiAgICAgICAgICBNT0RVTE9fTU9ERSA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQT1dfUFJFQ0lTSU9OIHtudW1iZXJ9IEludGVnZXIsIDAgdG8gTUFYIGluY2x1c2l2ZS5cclxuICAgICAgICAvLyAnW0JpZ051bWJlciBFcnJvcl0gUE9XX1BSRUNJU0lPTiB7bm90IGEgcHJpbWl0aXZlIG51bWJlcnxub3QgYW4gaW50ZWdlcnxvdXQgb2YgcmFuZ2V9OiB7dn0nXHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwID0gJ1BPV19QUkVDSVNJT04nKSkge1xyXG4gICAgICAgICAgdiA9IG9ialtwXTtcclxuICAgICAgICAgIGludENoZWNrKHYsIDAsIE1BWCwgcCk7XHJcbiAgICAgICAgICBQT1dfUFJFQ0lTSU9OID0gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZPUk1BVCB7b2JqZWN0fVxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBGT1JNQVQgbm90IGFuIG9iamVjdDoge3Z9J1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCA9ICdGT1JNQVQnKSkge1xyXG4gICAgICAgICAgdiA9IG9ialtwXTtcclxuICAgICAgICAgIGlmICh0eXBlb2YgdiA9PSAnb2JqZWN0JykgRk9STUFUID0gdjtcclxuICAgICAgICAgIGVsc2UgdGhyb3cgRXJyb3JcclxuICAgICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyBwICsgJyBub3QgYW4gb2JqZWN0OiAnICsgdik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBTFBIQUJFVCB7c3RyaW5nfVxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBBTFBIQUJFVCBpbnZhbGlkOiB7dn0nXHJcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwID0gJ0FMUEhBQkVUJykpIHtcclxuICAgICAgICAgIHYgPSBvYmpbcF07XHJcblxyXG4gICAgICAgICAgLy8gRGlzYWxsb3cgaWYgbGVzcyB0aGFuIHR3byBjaGFyYWN0ZXJzLFxyXG4gICAgICAgICAgLy8gb3IgaWYgaXQgY29udGFpbnMgJysnLCAnLScsICcuJywgd2hpdGVzcGFjZSwgb3IgYSByZXBlYXRlZCBjaGFyYWN0ZXIuXHJcbiAgICAgICAgICBpZiAodHlwZW9mIHYgPT0gJ3N0cmluZycgJiYgIS9eLj8kfFsrXFwtLlxcc118KC4pLipcXDEvLnRlc3QodikpIHtcclxuICAgICAgICAgICAgYWxwaGFiZXRIYXNOb3JtYWxEZWNpbWFsRGlnaXRzID0gdi5zbGljZSgwLCAxMCkgPT0gJzAxMjM0NTY3ODknO1xyXG4gICAgICAgICAgICBBTFBIQUJFVCA9IHY7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvclxyXG4gICAgICAgICAgICAgKGJpZ251bWJlckVycm9yICsgcCArICcgaW52YWxpZDogJyArIHYpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBPYmplY3QgZXhwZWN0ZWQ6IHt2fSdcclxuICAgICAgICB0aHJvdyBFcnJvclxyXG4gICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyAnT2JqZWN0IGV4cGVjdGVkOiAnICsgb2JqKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIERFQ0lNQUxfUExBQ0VTOiBERUNJTUFMX1BMQUNFUyxcclxuICAgICAgUk9VTkRJTkdfTU9ERTogUk9VTkRJTkdfTU9ERSxcclxuICAgICAgRVhQT05FTlRJQUxfQVQ6IFtUT19FWFBfTkVHLCBUT19FWFBfUE9TXSxcclxuICAgICAgUkFOR0U6IFtNSU5fRVhQLCBNQVhfRVhQXSxcclxuICAgICAgQ1JZUFRPOiBDUllQVE8sXHJcbiAgICAgIE1PRFVMT19NT0RFOiBNT0RVTE9fTU9ERSxcclxuICAgICAgUE9XX1BSRUNJU0lPTjogUE9XX1BSRUNJU0lPTixcclxuICAgICAgRk9STUFUOiBGT1JNQVQsXHJcbiAgICAgIEFMUEhBQkVUOiBBTFBIQUJFVFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gdHJ1ZSBpZiB2IGlzIGEgQmlnTnVtYmVyIGluc3RhbmNlLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqXHJcbiAgICogSWYgQmlnTnVtYmVyLkRFQlVHIGlzIHRydWUsIHRocm93IGlmIGEgQmlnTnVtYmVyIGluc3RhbmNlIGlzIG5vdCB3ZWxsLWZvcm1lZC5cclxuICAgKlxyXG4gICAqIHYge2FueX1cclxuICAgKlxyXG4gICAqICdbQmlnTnVtYmVyIEVycm9yXSBJbnZhbGlkIEJpZ051bWJlcjoge3Z9J1xyXG4gICAqL1xyXG4gIEJpZ051bWJlci5pc0JpZ051bWJlciA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICBpZiAoIXYgfHwgdi5faXNCaWdOdW1iZXIgIT09IHRydWUpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICghQmlnTnVtYmVyLkRFQlVHKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICB2YXIgaSwgbixcclxuICAgICAgYyA9IHYuYyxcclxuICAgICAgZSA9IHYuZSxcclxuICAgICAgcyA9IHYucztcclxuXHJcbiAgICBvdXQ6IGlmICh7fS50b1N0cmluZy5jYWxsKGMpID09ICdbb2JqZWN0IEFycmF5XScpIHtcclxuXHJcbiAgICAgIGlmICgocyA9PT0gMSB8fCBzID09PSAtMSkgJiYgZSA+PSAtTUFYICYmIGUgPD0gTUFYICYmIGUgPT09IG1hdGhmbG9vcihlKSkge1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgZWxlbWVudCBpcyB6ZXJvLCB0aGUgQmlnTnVtYmVyIHZhbHVlIG11c3QgYmUgemVyby5cclxuICAgICAgICBpZiAoY1swXSA9PT0gMCkge1xyXG4gICAgICAgICAgaWYgKGUgPT09IDAgJiYgYy5sZW5ndGggPT09IDEpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgYnJlYWsgb3V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIG51bWJlciBvZiBkaWdpdHMgdGhhdCBjWzBdIHNob3VsZCBoYXZlLCBiYXNlZCBvbiB0aGUgZXhwb25lbnQuXHJcbiAgICAgICAgaSA9IChlICsgMSkgJSBMT0dfQkFTRTtcclxuICAgICAgICBpZiAoaSA8IDEpIGkgKz0gTE9HX0JBU0U7XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBudW1iZXIgb2YgZGlnaXRzIG9mIGNbMF0uXHJcbiAgICAgICAgLy9pZiAoTWF0aC5jZWlsKE1hdGgubG9nKGNbMF0gKyAxKSAvIE1hdGguTE4xMCkgPT0gaSkge1xyXG4gICAgICAgIGlmIChTdHJpbmcoY1swXSkubGVuZ3RoID09IGkpIHtcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuID0gY1tpXTtcclxuICAgICAgICAgICAgaWYgKG4gPCAwIHx8IG4gPj0gQkFTRSB8fCBuICE9PSBtYXRoZmxvb3IobikpIGJyZWFrIG91dDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBMYXN0IGVsZW1lbnQgY2Fubm90IGJlIHplcm8sIHVubGVzcyBpdCBpcyB0aGUgb25seSBlbGVtZW50LlxyXG4gICAgICAgICAgaWYgKG4gIT09IDApIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgIC8vIEluZmluaXR5L05hTlxyXG4gICAgfSBlbHNlIGlmIChjID09PSBudWxsICYmIGUgPT09IG51bGwgJiYgKHMgPT09IG51bGwgfHwgcyA9PT0gMSB8fCBzID09PSAtMSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgRXJyb3JcclxuICAgICAgKGJpZ251bWJlckVycm9yICsgJ0ludmFsaWQgQmlnTnVtYmVyOiAnICsgdik7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgbmV3IEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgbWF4aW11bSBvZiB0aGUgYXJndW1lbnRzLlxyXG4gICAqXHJcbiAgICogYXJndW1lbnRzIHtudW1iZXJ8c3RyaW5nfEJpZ051bWJlcn1cclxuICAgKi9cclxuICBCaWdOdW1iZXIubWF4aW11bSA9IEJpZ051bWJlci5tYXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gbWF4T3JNaW4oYXJndW1lbnRzLCBQLmx0KTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBuZXcgQmlnTnVtYmVyIHdob3NlIHZhbHVlIGlzIHRoZSBtaW5pbXVtIG9mIHRoZSBhcmd1bWVudHMuXHJcbiAgICpcclxuICAgKiBhcmd1bWVudHMge251bWJlcnxzdHJpbmd8QmlnTnVtYmVyfVxyXG4gICAqL1xyXG4gIEJpZ051bWJlci5taW5pbXVtID0gQmlnTnVtYmVyLm1pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBtYXhPck1pbihhcmd1bWVudHMsIFAuZ3QpO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2l0aCBhIHJhbmRvbSB2YWx1ZSBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMCBhbmQgbGVzcyB0aGFuIDEsXHJcbiAgICogYW5kIHdpdGggZHAsIG9yIERFQ0lNQUxfUExBQ0VTIGlmIGRwIGlzIG9taXR0ZWQsIGRlY2ltYWwgcGxhY2VzIChvciBsZXNzIGlmIHRyYWlsaW5nXHJcbiAgICogemVyb3MgYXJlIHByb2R1Y2VkKS5cclxuICAgKlxyXG4gICAqIFtkcF0ge251bWJlcn0gRGVjaW1hbCBwbGFjZXMuIEludGVnZXIsIDAgdG8gTUFYIGluY2x1c2l2ZS5cclxuICAgKlxyXG4gICAqICdbQmlnTnVtYmVyIEVycm9yXSBBcmd1bWVudCB7bm90IGEgcHJpbWl0aXZlIG51bWJlcnxub3QgYW4gaW50ZWdlcnxvdXQgb2YgcmFuZ2V9OiB7ZHB9J1xyXG4gICAqICdbQmlnTnVtYmVyIEVycm9yXSBjcnlwdG8gdW5hdmFpbGFibGUnXHJcbiAgICovXHJcbiAgQmlnTnVtYmVyLnJhbmRvbSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcG93Ml81MyA9IDB4MjAwMDAwMDAwMDAwMDA7XHJcblxyXG4gICAgLy8gUmV0dXJuIGEgNTMgYml0IGludGVnZXIgbiwgd2hlcmUgMCA8PSBuIDwgOTAwNzE5OTI1NDc0MDk5Mi5cclxuICAgIC8vIENoZWNrIGlmIE1hdGgucmFuZG9tKCkgcHJvZHVjZXMgbW9yZSB0aGFuIDMyIGJpdHMgb2YgcmFuZG9tbmVzcy5cclxuICAgIC8vIElmIGl0IGRvZXMsIGFzc3VtZSBhdCBsZWFzdCA1MyBiaXRzIGFyZSBwcm9kdWNlZCwgb3RoZXJ3aXNlIGFzc3VtZSBhdCBsZWFzdCAzMCBiaXRzLlxyXG4gICAgLy8gMHg0MDAwMDAwMCBpcyAyXjMwLCAweDgwMDAwMCBpcyAyXjIzLCAweDFmZmZmZiBpcyAyXjIxIC0gMS5cclxuICAgIHZhciByYW5kb201M2JpdEludCA9IChNYXRoLnJhbmRvbSgpICogcG93Ml81MykgJiAweDFmZmZmZlxyXG4gICAgID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF0aGZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3cyXzUzKTsgfVxyXG4gICAgIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gKChNYXRoLnJhbmRvbSgpICogMHg0MDAwMDAwMCB8IDApICogMHg4MDAwMDApICtcclxuICAgICAgIChNYXRoLnJhbmRvbSgpICogMHg4MDAwMDAgfCAwKTsgfTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRwKSB7XHJcbiAgICAgIHZhciBhLCBiLCBlLCBrLCB2LFxyXG4gICAgICAgIGkgPSAwLFxyXG4gICAgICAgIGMgPSBbXSxcclxuICAgICAgICByYW5kID0gbmV3IEJpZ051bWJlcihPTkUpO1xyXG5cclxuICAgICAgaWYgKGRwID09IG51bGwpIGRwID0gREVDSU1BTF9QTEFDRVM7XHJcbiAgICAgIGVsc2UgaW50Q2hlY2soZHAsIDAsIE1BWCk7XHJcblxyXG4gICAgICBrID0gbWF0aGNlaWwoZHAgLyBMT0dfQkFTRSk7XHJcblxyXG4gICAgICBpZiAoQ1JZUFRPKSB7XHJcblxyXG4gICAgICAgIC8vIEJyb3dzZXJzIHN1cHBvcnRpbmcgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5cclxuICAgICAgICBpZiAoY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xyXG5cclxuICAgICAgICAgIGEgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50MzJBcnJheShrICo9IDIpKTtcclxuXHJcbiAgICAgICAgICBmb3IgKDsgaSA8IGs7KSB7XHJcblxyXG4gICAgICAgICAgICAvLyA1MyBiaXRzOlxyXG4gICAgICAgICAgICAvLyAoKE1hdGgucG93KDIsIDMyKSAtIDEpICogTWF0aC5wb3coMiwgMjEpKS50b1N0cmluZygyKVxyXG4gICAgICAgICAgICAvLyAxMTExMSAxMTExMTExMSAxMTExMTExMSAxMTExMTExMSAxMTEwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMFxyXG4gICAgICAgICAgICAvLyAoKE1hdGgucG93KDIsIDMyKSAtIDEpID4+PiAxMSkudG9TdHJpbmcoMilcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTExMTEgMTExMTExMTEgMTExMTExMTFcclxuICAgICAgICAgICAgLy8gMHgyMDAwMCBpcyAyXjIxLlxyXG4gICAgICAgICAgICB2ID0gYVtpXSAqIDB4MjAwMDAgKyAoYVtpICsgMV0gPj4+IDExKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlamVjdGlvbiBzYW1wbGluZzpcclxuICAgICAgICAgICAgLy8gMCA8PSB2IDwgOTAwNzE5OTI1NDc0MDk5MlxyXG4gICAgICAgICAgICAvLyBQcm9iYWJpbGl0eSB0aGF0IHYgPj0gOWUxNSwgaXNcclxuICAgICAgICAgICAgLy8gNzE5OTI1NDc0MDk5MiAvIDkwMDcxOTkyNTQ3NDA5OTIgfj0gMC4wMDA4LCBpLmUuIDEgaW4gMTI1MVxyXG4gICAgICAgICAgICBpZiAodiA+PSA5ZTE1KSB7XHJcbiAgICAgICAgICAgICAgYiA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDIpKTtcclxuICAgICAgICAgICAgICBhW2ldID0gYlswXTtcclxuICAgICAgICAgICAgICBhW2kgKyAxXSA9IGJbMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIDAgPD0gdiA8PSA4OTk5OTk5OTk5OTk5OTk5XHJcbiAgICAgICAgICAgICAgLy8gMCA8PSAodiAlIDFlMTQpIDw9IDk5OTk5OTk5OTk5OTk5XHJcbiAgICAgICAgICAgICAgYy5wdXNoKHYgJSAxZTE0KTtcclxuICAgICAgICAgICAgICBpICs9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGkgPSBrIC8gMjtcclxuXHJcbiAgICAgICAgLy8gTm9kZS5qcyBzdXBwb3J0aW5nIGNyeXB0by5yYW5kb21CeXRlcy5cclxuICAgICAgICB9IGVsc2UgaWYgKGNyeXB0by5yYW5kb21CeXRlcykge1xyXG5cclxuICAgICAgICAgIC8vIGJ1ZmZlclxyXG4gICAgICAgICAgYSA9IGNyeXB0by5yYW5kb21CeXRlcyhrICo9IDcpO1xyXG5cclxuICAgICAgICAgIGZvciAoOyBpIDwgazspIHtcclxuXHJcbiAgICAgICAgICAgIC8vIDB4MTAwMDAwMDAwMDAwMCBpcyAyXjQ4LCAweDEwMDAwMDAwMDAwIGlzIDJeNDBcclxuICAgICAgICAgICAgLy8gMHgxMDAwMDAwMDAgaXMgMl4zMiwgMHgxMDAwMDAwIGlzIDJeMjRcclxuICAgICAgICAgICAgLy8gMTExMTEgMTExMTExMTEgMTExMTExMTEgMTExMTExMTEgMTExMTExMTEgMTExMTExMTEgMTExMTExMTFcclxuICAgICAgICAgICAgLy8gMCA8PSB2IDwgOTAwNzE5OTI1NDc0MDk5MlxyXG4gICAgICAgICAgICB2ID0gKChhW2ldICYgMzEpICogMHgxMDAwMDAwMDAwMDAwKSArIChhW2kgKyAxXSAqIDB4MTAwMDAwMDAwMDApICtcclxuICAgICAgICAgICAgICAgKGFbaSArIDJdICogMHgxMDAwMDAwMDApICsgKGFbaSArIDNdICogMHgxMDAwMDAwKSArXHJcbiAgICAgICAgICAgICAgIChhW2kgKyA0XSA8PCAxNikgKyAoYVtpICsgNV0gPDwgOCkgKyBhW2kgKyA2XTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ID49IDllMTUpIHtcclxuICAgICAgICAgICAgICBjcnlwdG8ucmFuZG9tQnl0ZXMoNykuY29weShhLCBpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgLy8gMCA8PSAodiAlIDFlMTQpIDw9IDk5OTk5OTk5OTk5OTk5XHJcbiAgICAgICAgICAgICAgYy5wdXNoKHYgJSAxZTE0KTtcclxuICAgICAgICAgICAgICBpICs9IDc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGkgPSBrIC8gNztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgQ1JZUFRPID0gZmFsc2U7XHJcbiAgICAgICAgICB0aHJvdyBFcnJvclxyXG4gICAgICAgICAgIChiaWdudW1iZXJFcnJvciArICdjcnlwdG8gdW5hdmFpbGFibGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVzZSBNYXRoLnJhbmRvbS5cclxuICAgICAgaWYgKCFDUllQVE8pIHtcclxuXHJcbiAgICAgICAgZm9yICg7IGkgPCBrOykge1xyXG4gICAgICAgICAgdiA9IHJhbmRvbTUzYml0SW50KCk7XHJcbiAgICAgICAgICBpZiAodiA8IDllMTUpIGNbaSsrXSA9IHYgJSAxZTE0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgayA9IGNbLS1pXTtcclxuICAgICAgZHAgJT0gTE9HX0JBU0U7XHJcblxyXG4gICAgICAvLyBDb252ZXJ0IHRyYWlsaW5nIGRpZ2l0cyB0byB6ZXJvcyBhY2NvcmRpbmcgdG8gZHAuXHJcbiAgICAgIGlmIChrICYmIGRwKSB7XHJcbiAgICAgICAgdiA9IFBPV1NfVEVOW0xPR19CQVNFIC0gZHBdO1xyXG4gICAgICAgIGNbaV0gPSBtYXRoZmxvb3IoayAvIHYpICogdjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIGVsZW1lbnRzIHdoaWNoIGFyZSB6ZXJvLlxyXG4gICAgICBmb3IgKDsgY1tpXSA9PT0gMDsgYy5wb3AoKSwgaS0tKTtcclxuXHJcbiAgICAgIC8vIFplcm8/XHJcbiAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgIGMgPSBbZSA9IDBdO1xyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBlbGVtZW50cyB3aGljaCBhcmUgemVybyBhbmQgYWRqdXN0IGV4cG9uZW50IGFjY29yZGluZ2x5LlxyXG4gICAgICAgIGZvciAoZSA9IC0xIDsgY1swXSA9PT0gMDsgYy5zcGxpY2UoMCwgMSksIGUgLT0gTE9HX0JBU0UpO1xyXG5cclxuICAgICAgICAvLyBDb3VudCB0aGUgZGlnaXRzIG9mIHRoZSBmaXJzdCBlbGVtZW50IG9mIGMgdG8gZGV0ZXJtaW5lIGxlYWRpbmcgemVyb3MsIGFuZC4uLlxyXG4gICAgICAgIGZvciAoaSA9IDEsIHYgPSBjWzBdOyB2ID49IDEwOyB2IC89IDEwLCBpKyspO1xyXG5cclxuICAgICAgICAvLyBhZGp1c3QgdGhlIGV4cG9uZW50IGFjY29yZGluZ2x5LlxyXG4gICAgICAgIGlmIChpIDwgTE9HX0JBU0UpIGUgLT0gTE9HX0JBU0UgLSBpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByYW5kLmUgPSBlO1xyXG4gICAgICByYW5kLmMgPSBjO1xyXG4gICAgICByZXR1cm4gcmFuZDtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcblxyXG4gICAvKlxyXG4gICAqIFJldHVybiBhIEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgc3VtIG9mIHRoZSBhcmd1bWVudHMuXHJcbiAgICpcclxuICAgKiBhcmd1bWVudHMge251bWJlcnxzdHJpbmd8QmlnTnVtYmVyfVxyXG4gICAqL1xyXG4gIEJpZ051bWJlci5zdW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgaSA9IDEsXHJcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHMsXHJcbiAgICAgIHN1bSA9IG5ldyBCaWdOdW1iZXIoYXJnc1swXSk7XHJcbiAgICBmb3IgKDsgaSA8IGFyZ3MubGVuZ3RoOykgc3VtID0gc3VtLnBsdXMoYXJnc1tpKytdKTtcclxuICAgIHJldHVybiBzdW07XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIFBSSVZBVEUgRlVOQ1RJT05TXHJcblxyXG5cclxuICAvLyBDYWxsZWQgYnkgQmlnTnVtYmVyIGFuZCBCaWdOdW1iZXIucHJvdG90eXBlLnRvU3RyaW5nLlxyXG4gIGNvbnZlcnRCYXNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBkZWNpbWFsID0gJzAxMjM0NTY3ODknO1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBDb252ZXJ0IHN0cmluZyBvZiBiYXNlSW4gdG8gYW4gYXJyYXkgb2YgbnVtYmVycyBvZiBiYXNlT3V0LlxyXG4gICAgICogRWcuIHRvQmFzZU91dCgnMjU1JywgMTAsIDE2KSByZXR1cm5zIFsxNSwgMTVdLlxyXG4gICAgICogRWcuIHRvQmFzZU91dCgnZmYnLCAxNiwgMTApIHJldHVybnMgWzIsIDUsIDVdLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB0b0Jhc2VPdXQoc3RyLCBiYXNlSW4sIGJhc2VPdXQsIGFscGhhYmV0KSB7XHJcbiAgICAgIHZhciBqLFxyXG4gICAgICAgIGFyciA9IFswXSxcclxuICAgICAgICBhcnJMLFxyXG4gICAgICAgIGkgPSAwLFxyXG4gICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7XHJcblxyXG4gICAgICBmb3IgKDsgaSA8IGxlbjspIHtcclxuICAgICAgICBmb3IgKGFyckwgPSBhcnIubGVuZ3RoOyBhcnJMLS07IGFyclthcnJMXSAqPSBiYXNlSW4pO1xyXG5cclxuICAgICAgICBhcnJbMF0gKz0gYWxwaGFiZXQuaW5kZXhPZihzdHIuY2hhckF0KGkrKykpO1xyXG5cclxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgICAgaWYgKGFycltqXSA+IGJhc2VPdXQgLSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnJbaiArIDFdID09IG51bGwpIGFycltqICsgMV0gPSAwO1xyXG4gICAgICAgICAgICBhcnJbaiArIDFdICs9IGFycltqXSAvIGJhc2VPdXQgfCAwO1xyXG4gICAgICAgICAgICBhcnJbal0gJT0gYmFzZU91dDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBhcnIucmV2ZXJzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbnZlcnQgYSBudW1lcmljIHN0cmluZyBvZiBiYXNlSW4gdG8gYSBudW1lcmljIHN0cmluZyBvZiBiYXNlT3V0LlxyXG4gICAgLy8gSWYgdGhlIGNhbGxlciBpcyB0b1N0cmluZywgd2UgYXJlIGNvbnZlcnRpbmcgZnJvbSBiYXNlIDEwIHRvIGJhc2VPdXQuXHJcbiAgICAvLyBJZiB0aGUgY2FsbGVyIGlzIEJpZ051bWJlciwgd2UgYXJlIGNvbnZlcnRpbmcgZnJvbSBiYXNlSW4gdG8gYmFzZSAxMC5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoc3RyLCBiYXNlSW4sIGJhc2VPdXQsIHNpZ24sIGNhbGxlcklzVG9TdHJpbmcpIHtcclxuICAgICAgdmFyIGFscGhhYmV0LCBkLCBlLCBrLCByLCB4LCB4YywgeSxcclxuICAgICAgICBpID0gc3RyLmluZGV4T2YoJy4nKSxcclxuICAgICAgICBkcCA9IERFQ0lNQUxfUExBQ0VTLFxyXG4gICAgICAgIHJtID0gUk9VTkRJTkdfTU9ERTtcclxuXHJcbiAgICAgIC8vIE5vbi1pbnRlZ2VyLlxyXG4gICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgayA9IFBPV19QUkVDSVNJT047XHJcblxyXG4gICAgICAgIC8vIFVubGltaXRlZCBwcmVjaXNpb24uXHJcbiAgICAgICAgUE9XX1BSRUNJU0lPTiA9IDA7XHJcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoJy4nLCAnJyk7XHJcbiAgICAgICAgeSA9IG5ldyBCaWdOdW1iZXIoYmFzZUluKTtcclxuICAgICAgICB4ID0geS5wb3coc3RyLmxlbmd0aCAtIGkpO1xyXG4gICAgICAgIFBPV19QUkVDSVNJT04gPSBrO1xyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IHN0ciBhcyBpZiBhbiBpbnRlZ2VyLCB0aGVuIHJlc3RvcmUgdGhlIGZyYWN0aW9uIHBhcnQgYnkgZGl2aWRpbmcgdGhlXHJcbiAgICAgICAgLy8gcmVzdWx0IGJ5IGl0cyBiYXNlIHJhaXNlZCB0byBhIHBvd2VyLlxyXG5cclxuICAgICAgICB5LmMgPSB0b0Jhc2VPdXQodG9GaXhlZFBvaW50KGNvZWZmVG9TdHJpbmcoeC5jKSwgeC5lLCAnMCcpLFxyXG4gICAgICAgICAxMCwgYmFzZU91dCwgZGVjaW1hbCk7XHJcbiAgICAgICAgeS5lID0geS5jLmxlbmd0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ29udmVydCB0aGUgbnVtYmVyIGFzIGludGVnZXIuXHJcblxyXG4gICAgICB4YyA9IHRvQmFzZU91dChzdHIsIGJhc2VJbiwgYmFzZU91dCwgY2FsbGVySXNUb1N0cmluZ1xyXG4gICAgICAgPyAoYWxwaGFiZXQgPSBBTFBIQUJFVCwgZGVjaW1hbClcclxuICAgICAgIDogKGFscGhhYmV0ID0gZGVjaW1hbCwgQUxQSEFCRVQpKTtcclxuXHJcbiAgICAgIC8vIHhjIG5vdyByZXByZXNlbnRzIHN0ciBhcyBhbiBpbnRlZ2VyIGFuZCBjb252ZXJ0ZWQgdG8gYmFzZU91dC4gZSBpcyB0aGUgZXhwb25lbnQuXHJcbiAgICAgIGUgPSBrID0geGMubGVuZ3RoO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLlxyXG4gICAgICBmb3IgKDsgeGNbLS1rXSA9PSAwOyB4Yy5wb3AoKSk7XHJcblxyXG4gICAgICAvLyBaZXJvP1xyXG4gICAgICBpZiAoIXhjWzBdKSByZXR1cm4gYWxwaGFiZXQuY2hhckF0KDApO1xyXG5cclxuICAgICAgLy8gRG9lcyBzdHIgcmVwcmVzZW50IGFuIGludGVnZXI/IElmIHNvLCBubyBuZWVkIGZvciB0aGUgZGl2aXNpb24uXHJcbiAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgIC0tZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB4LmMgPSB4YztcclxuICAgICAgICB4LmUgPSBlO1xyXG5cclxuICAgICAgICAvLyBUaGUgc2lnbiBpcyBuZWVkZWQgZm9yIGNvcnJlY3Qgcm91bmRpbmcuXHJcbiAgICAgICAgeC5zID0gc2lnbjtcclxuICAgICAgICB4ID0gZGl2KHgsIHksIGRwLCBybSwgYmFzZU91dCk7XHJcbiAgICAgICAgeGMgPSB4LmM7XHJcbiAgICAgICAgciA9IHgucjtcclxuICAgICAgICBlID0geC5lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB4YyBub3cgcmVwcmVzZW50cyBzdHIgY29udmVydGVkIHRvIGJhc2VPdXQuXHJcblxyXG4gICAgICAvLyBUSGUgaW5kZXggb2YgdGhlIHJvdW5kaW5nIGRpZ2l0LlxyXG4gICAgICBkID0gZSArIGRwICsgMTtcclxuXHJcbiAgICAgIC8vIFRoZSByb3VuZGluZyBkaWdpdDogdGhlIGRpZ2l0IHRvIHRoZSByaWdodCBvZiB0aGUgZGlnaXQgdGhhdCBtYXkgYmUgcm91bmRlZCB1cC5cclxuICAgICAgaSA9IHhjW2RdO1xyXG5cclxuICAgICAgLy8gTG9vayBhdCB0aGUgcm91bmRpbmcgZGlnaXRzIGFuZCBtb2RlIHRvIGRldGVybWluZSB3aGV0aGVyIHRvIHJvdW5kIHVwLlxyXG5cclxuICAgICAgayA9IGJhc2VPdXQgLyAyO1xyXG4gICAgICByID0gciB8fCBkIDwgMCB8fCB4Y1tkICsgMV0gIT0gbnVsbDtcclxuXHJcbiAgICAgIHIgPSBybSA8IDQgPyAoaSAhPSBudWxsIHx8IHIpICYmIChybSA9PSAwIHx8IHJtID09ICh4LnMgPCAwID8gMyA6IDIpKVxyXG4gICAgICAgICAgICA6IGkgPiBrIHx8IGkgPT0gayAmJihybSA9PSA0IHx8IHIgfHwgcm0gPT0gNiAmJiB4Y1tkIC0gMV0gJiAxIHx8XHJcbiAgICAgICAgICAgICBybSA9PSAoeC5zIDwgMCA/IDggOiA3KSk7XHJcblxyXG4gICAgICAvLyBJZiB0aGUgaW5kZXggb2YgdGhlIHJvdW5kaW5nIGRpZ2l0IGlzIG5vdCBncmVhdGVyIHRoYW4gemVybywgb3IgeGMgcmVwcmVzZW50c1xyXG4gICAgICAvLyB6ZXJvLCB0aGVuIHRoZSByZXN1bHQgb2YgdGhlIGJhc2UgY29udmVyc2lvbiBpcyB6ZXJvIG9yLCBpZiByb3VuZGluZyB1cCwgYSB2YWx1ZVxyXG4gICAgICAvLyBzdWNoIGFzIDAuMDAwMDEuXHJcbiAgICAgIGlmIChkIDwgMSB8fCAheGNbMF0pIHtcclxuXHJcbiAgICAgICAgLy8gMV4tZHAgb3IgMFxyXG4gICAgICAgIHN0ciA9IHIgPyB0b0ZpeGVkUG9pbnQoYWxwaGFiZXQuY2hhckF0KDEpLCAtZHAsIGFscGhhYmV0LmNoYXJBdCgwKSkgOiBhbHBoYWJldC5jaGFyQXQoMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIFRydW5jYXRlIHhjIHRvIHRoZSByZXF1aXJlZCBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMuXHJcbiAgICAgICAgeGMubGVuZ3RoID0gZDtcclxuXHJcbiAgICAgICAgLy8gUm91bmQgdXA/XHJcbiAgICAgICAgaWYgKHIpIHtcclxuXHJcbiAgICAgICAgICAvLyBSb3VuZGluZyB1cCBtYXkgbWVhbiB0aGUgcHJldmlvdXMgZGlnaXQgaGFzIHRvIGJlIHJvdW5kZWQgdXAgYW5kIHNvIG9uLlxyXG4gICAgICAgICAgZm9yICgtLWJhc2VPdXQ7ICsreGNbLS1kXSA+IGJhc2VPdXQ7KSB7XHJcbiAgICAgICAgICAgIHhjW2RdID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICghZCkge1xyXG4gICAgICAgICAgICAgICsrZTtcclxuICAgICAgICAgICAgICB4YyA9IFsxXS5jb25jYXQoeGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgICAgICAgZm9yIChrID0geGMubGVuZ3RoOyAheGNbLS1rXTspO1xyXG5cclxuICAgICAgICAvLyBFLmcuIFs0LCAxMSwgMTVdIGJlY29tZXMgNGJmLlxyXG4gICAgICAgIGZvciAoaSA9IDAsIHN0ciA9ICcnOyBpIDw9IGs7IHN0ciArPSBhbHBoYWJldC5jaGFyQXQoeGNbaSsrXSkpO1xyXG5cclxuICAgICAgICAvLyBBZGQgbGVhZGluZyB6ZXJvcywgZGVjaW1hbCBwb2ludCBhbmQgdHJhaWxpbmcgemVyb3MgYXMgcmVxdWlyZWQuXHJcbiAgICAgICAgc3RyID0gdG9GaXhlZFBvaW50KHN0ciwgZSwgYWxwaGFiZXQuY2hhckF0KDApKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVGhlIGNhbGxlciB3aWxsIGFkZCB0aGUgc2lnbi5cclxuICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcblxyXG4gIC8vIFBlcmZvcm0gZGl2aXNpb24gaW4gdGhlIHNwZWNpZmllZCBiYXNlLiBDYWxsZWQgYnkgZGl2IGFuZCBjb252ZXJ0QmFzZS5cclxuICBkaXYgPSAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8vIEFzc3VtZSBub24temVybyB4IGFuZCBrLlxyXG4gICAgZnVuY3Rpb24gbXVsdGlwbHkoeCwgaywgYmFzZSkge1xyXG4gICAgICB2YXIgbSwgdGVtcCwgeGxvLCB4aGksXHJcbiAgICAgICAgY2FycnkgPSAwLFxyXG4gICAgICAgIGkgPSB4Lmxlbmd0aCxcclxuICAgICAgICBrbG8gPSBrICUgU1FSVF9CQVNFLFxyXG4gICAgICAgIGtoaSA9IGsgLyBTUVJUX0JBU0UgfCAwO1xyXG5cclxuICAgICAgZm9yICh4ID0geC5zbGljZSgpOyBpLS07KSB7XHJcbiAgICAgICAgeGxvID0geFtpXSAlIFNRUlRfQkFTRTtcclxuICAgICAgICB4aGkgPSB4W2ldIC8gU1FSVF9CQVNFIHwgMDtcclxuICAgICAgICBtID0ga2hpICogeGxvICsgeGhpICoga2xvO1xyXG4gICAgICAgIHRlbXAgPSBrbG8gKiB4bG8gKyAoKG0gJSBTUVJUX0JBU0UpICogU1FSVF9CQVNFKSArIGNhcnJ5O1xyXG4gICAgICAgIGNhcnJ5ID0gKHRlbXAgLyBiYXNlIHwgMCkgKyAobSAvIFNRUlRfQkFTRSB8IDApICsga2hpICogeGhpO1xyXG4gICAgICAgIHhbaV0gPSB0ZW1wICUgYmFzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNhcnJ5KSB4ID0gW2NhcnJ5XS5jb25jYXQoeCk7XHJcblxyXG4gICAgICByZXR1cm4geDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb21wYXJlKGEsIGIsIGFMLCBiTCkge1xyXG4gICAgICB2YXIgaSwgY21wO1xyXG5cclxuICAgICAgaWYgKGFMICE9IGJMKSB7XHJcbiAgICAgICAgY21wID0gYUwgPiBiTCA/IDEgOiAtMTtcclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgZm9yIChpID0gY21wID0gMDsgaSA8IGFMOyBpKyspIHtcclxuXHJcbiAgICAgICAgICBpZiAoYVtpXSAhPSBiW2ldKSB7XHJcbiAgICAgICAgICAgIGNtcCA9IGFbaV0gPiBiW2ldID8gMSA6IC0xO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBjbXA7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc3VidHJhY3QoYSwgYiwgYUwsIGJhc2UpIHtcclxuICAgICAgdmFyIGkgPSAwO1xyXG5cclxuICAgICAgLy8gU3VidHJhY3QgYiBmcm9tIGEuXHJcbiAgICAgIGZvciAoOyBhTC0tOykge1xyXG4gICAgICAgIGFbYUxdIC09IGk7XHJcbiAgICAgICAgaSA9IGFbYUxdIDwgYlthTF0gPyAxIDogMDtcclxuICAgICAgICBhW2FMXSA9IGkgKiBiYXNlICsgYVthTF0gLSBiW2FMXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIGxlYWRpbmcgemVyb3MuXHJcbiAgICAgIGZvciAoOyAhYVswXSAmJiBhLmxlbmd0aCA+IDE7IGEuc3BsaWNlKDAsIDEpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB4OiBkaXZpZGVuZCwgeTogZGl2aXNvci5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoeCwgeSwgZHAsIHJtLCBiYXNlKSB7XHJcbiAgICAgIHZhciBjbXAsIGUsIGksIG1vcmUsIG4sIHByb2QsIHByb2RMLCBxLCBxYywgcmVtLCByZW1MLCByZW0wLCB4aSwgeEwsIHljMCxcclxuICAgICAgICB5TCwgeXosXHJcbiAgICAgICAgcyA9IHgucyA9PSB5LnMgPyAxIDogLTEsXHJcbiAgICAgICAgeGMgPSB4LmMsXHJcbiAgICAgICAgeWMgPSB5LmM7XHJcblxyXG4gICAgICAvLyBFaXRoZXIgTmFOLCBJbmZpbml0eSBvciAwP1xyXG4gICAgICBpZiAoIXhjIHx8ICF4Y1swXSB8fCAheWMgfHwgIXljWzBdKSB7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKFxyXG5cclxuICAgICAgICAgLy8gUmV0dXJuIE5hTiBpZiBlaXRoZXIgTmFOLCBvciBib3RoIEluZmluaXR5IG9yIDAuXHJcbiAgICAgICAgICF4LnMgfHwgIXkucyB8fCAoeGMgPyB5YyAmJiB4Y1swXSA9PSB5Y1swXSA6ICF5YykgPyBOYU4gOlxyXG5cclxuICAgICAgICAgIC8vIFJldHVybiDCsTAgaWYgeCBpcyDCsTAgb3IgeSBpcyDCsUluZmluaXR5LCBvciByZXR1cm4gwrFJbmZpbml0eSBhcyB5IGlzIMKxMC5cclxuICAgICAgICAgIHhjICYmIHhjWzBdID09IDAgfHwgIXljID8gcyAqIDAgOiBzIC8gMFxyXG4gICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcSA9IG5ldyBCaWdOdW1iZXIocyk7XHJcbiAgICAgIHFjID0gcS5jID0gW107XHJcbiAgICAgIGUgPSB4LmUgLSB5LmU7XHJcbiAgICAgIHMgPSBkcCArIGUgKyAxO1xyXG5cclxuICAgICAgaWYgKCFiYXNlKSB7XHJcbiAgICAgICAgYmFzZSA9IEJBU0U7XHJcbiAgICAgICAgZSA9IGJpdEZsb29yKHguZSAvIExPR19CQVNFKSAtIGJpdEZsb29yKHkuZSAvIExPR19CQVNFKTtcclxuICAgICAgICBzID0gcyAvIExPR19CQVNFIHwgMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVzdWx0IGV4cG9uZW50IG1heSBiZSBvbmUgbGVzcyB0aGVuIHRoZSBjdXJyZW50IHZhbHVlIG9mIGUuXHJcbiAgICAgIC8vIFRoZSBjb2VmZmljaWVudHMgb2YgdGhlIEJpZ051bWJlcnMgZnJvbSBjb252ZXJ0QmFzZSBtYXkgaGF2ZSB0cmFpbGluZyB6ZXJvcy5cclxuICAgICAgZm9yIChpID0gMDsgeWNbaV0gPT0gKHhjW2ldIHx8IDApOyBpKyspO1xyXG5cclxuICAgICAgaWYgKHljW2ldID4gKHhjW2ldIHx8IDApKSBlLS07XHJcblxyXG4gICAgICBpZiAocyA8IDApIHtcclxuICAgICAgICBxYy5wdXNoKDEpO1xyXG4gICAgICAgIG1vcmUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHhMID0geGMubGVuZ3RoO1xyXG4gICAgICAgIHlMID0geWMubGVuZ3RoO1xyXG4gICAgICAgIGkgPSAwO1xyXG4gICAgICAgIHMgKz0gMjtcclxuXHJcbiAgICAgICAgLy8gTm9ybWFsaXNlIHhjIGFuZCB5YyBzbyBoaWdoZXN0IG9yZGVyIGRpZ2l0IG9mIHljIGlzID49IGJhc2UgLyAyLlxyXG5cclxuICAgICAgICBuID0gbWF0aGZsb29yKGJhc2UgLyAoeWNbMF0gKyAxKSk7XHJcblxyXG4gICAgICAgIC8vIE5vdCBuZWNlc3NhcnksIGJ1dCB0byBoYW5kbGUgb2RkIGJhc2VzIHdoZXJlIHljWzBdID09IChiYXNlIC8gMikgLSAxLlxyXG4gICAgICAgIC8vIGlmIChuID4gMSB8fCBuKysgPT0gMSAmJiB5Y1swXSA8IGJhc2UgLyAyKSB7XHJcbiAgICAgICAgaWYgKG4gPiAxKSB7XHJcbiAgICAgICAgICB5YyA9IG11bHRpcGx5KHljLCBuLCBiYXNlKTtcclxuICAgICAgICAgIHhjID0gbXVsdGlwbHkoeGMsIG4sIGJhc2UpO1xyXG4gICAgICAgICAgeUwgPSB5Yy5sZW5ndGg7XHJcbiAgICAgICAgICB4TCA9IHhjLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhpID0geUw7XHJcbiAgICAgICAgcmVtID0geGMuc2xpY2UoMCwgeUwpO1xyXG4gICAgICAgIHJlbUwgPSByZW0ubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBBZGQgemVyb3MgdG8gbWFrZSByZW1haW5kZXIgYXMgbG9uZyBhcyBkaXZpc29yLlxyXG4gICAgICAgIGZvciAoOyByZW1MIDwgeUw7IHJlbVtyZW1MKytdID0gMCk7XHJcbiAgICAgICAgeXogPSB5Yy5zbGljZSgpO1xyXG4gICAgICAgIHl6ID0gWzBdLmNvbmNhdCh5eik7XHJcbiAgICAgICAgeWMwID0geWNbMF07XHJcbiAgICAgICAgaWYgKHljWzFdID49IGJhc2UgLyAyKSB5YzArKztcclxuICAgICAgICAvLyBOb3QgbmVjZXNzYXJ5LCBidXQgdG8gcHJldmVudCB0cmlhbCBkaWdpdCBuID4gYmFzZSwgd2hlbiB1c2luZyBiYXNlIDMuXHJcbiAgICAgICAgLy8gZWxzZSBpZiAoYmFzZSA9PSAzICYmIHljMCA9PSAxKSB5YzAgPSAxICsgMWUtMTU7XHJcblxyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgIG4gPSAwO1xyXG5cclxuICAgICAgICAgIC8vIENvbXBhcmUgZGl2aXNvciBhbmQgcmVtYWluZGVyLlxyXG4gICAgICAgICAgY21wID0gY29tcGFyZSh5YywgcmVtLCB5TCwgcmVtTCk7XHJcblxyXG4gICAgICAgICAgLy8gSWYgZGl2aXNvciA8IHJlbWFpbmRlci5cclxuICAgICAgICAgIGlmIChjbXAgPCAwKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdHJpYWwgZGlnaXQsIG4uXHJcblxyXG4gICAgICAgICAgICByZW0wID0gcmVtWzBdO1xyXG4gICAgICAgICAgICBpZiAoeUwgIT0gcmVtTCkgcmVtMCA9IHJlbTAgKiBiYXNlICsgKHJlbVsxXSB8fCAwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIG4gaXMgaG93IG1hbnkgdGltZXMgdGhlIGRpdmlzb3IgZ29lcyBpbnRvIHRoZSBjdXJyZW50IHJlbWFpbmRlci5cclxuICAgICAgICAgICAgbiA9IG1hdGhmbG9vcihyZW0wIC8geWMwKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBBbGdvcml0aG06XHJcbiAgICAgICAgICAgIC8vICBwcm9kdWN0ID0gZGl2aXNvciBtdWx0aXBsaWVkIGJ5IHRyaWFsIGRpZ2l0IChuKS5cclxuICAgICAgICAgICAgLy8gIENvbXBhcmUgcHJvZHVjdCBhbmQgcmVtYWluZGVyLlxyXG4gICAgICAgICAgICAvLyAgSWYgcHJvZHVjdCBpcyBncmVhdGVyIHRoYW4gcmVtYWluZGVyOlxyXG4gICAgICAgICAgICAvLyAgICBTdWJ0cmFjdCBkaXZpc29yIGZyb20gcHJvZHVjdCwgZGVjcmVtZW50IHRyaWFsIGRpZ2l0LlxyXG4gICAgICAgICAgICAvLyAgU3VidHJhY3QgcHJvZHVjdCBmcm9tIHJlbWFpbmRlci5cclxuICAgICAgICAgICAgLy8gIElmIHByb2R1Y3Qgd2FzIGxlc3MgdGhhbiByZW1haW5kZXIgYXQgdGhlIGxhc3QgY29tcGFyZTpcclxuICAgICAgICAgICAgLy8gICAgQ29tcGFyZSBuZXcgcmVtYWluZGVyIGFuZCBkaXZpc29yLlxyXG4gICAgICAgICAgICAvLyAgICBJZiByZW1haW5kZXIgaXMgZ3JlYXRlciB0aGFuIGRpdmlzb3I6XHJcbiAgICAgICAgICAgIC8vICAgICAgU3VidHJhY3QgZGl2aXNvciBmcm9tIHJlbWFpbmRlciwgaW5jcmVtZW50IHRyaWFsIGRpZ2l0LlxyXG5cclxuICAgICAgICAgICAgaWYgKG4gPiAxKSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIG4gbWF5IGJlID4gYmFzZSBvbmx5IHdoZW4gYmFzZSBpcyAzLlxyXG4gICAgICAgICAgICAgIGlmIChuID49IGJhc2UpIG4gPSBiYXNlIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gcHJvZHVjdCA9IGRpdmlzb3IgKiB0cmlhbCBkaWdpdC5cclxuICAgICAgICAgICAgICBwcm9kID0gbXVsdGlwbHkoeWMsIG4sIGJhc2UpO1xyXG4gICAgICAgICAgICAgIHByb2RMID0gcHJvZC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgcmVtTCA9IHJlbS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENvbXBhcmUgcHJvZHVjdCBhbmQgcmVtYWluZGVyLlxyXG4gICAgICAgICAgICAgIC8vIElmIHByb2R1Y3QgPiByZW1haW5kZXIgdGhlbiB0cmlhbCBkaWdpdCBuIHRvbyBoaWdoLlxyXG4gICAgICAgICAgICAgIC8vIG4gaXMgMSB0b28gaGlnaCBhYm91dCA1JSBvZiB0aGUgdGltZSwgYW5kIGlzIG5vdCBrbm93biB0byBoYXZlXHJcbiAgICAgICAgICAgICAgLy8gZXZlciBiZWVuIG1vcmUgdGhhbiAxIHRvbyBoaWdoLlxyXG4gICAgICAgICAgICAgIHdoaWxlIChjb21wYXJlKHByb2QsIHJlbSwgcHJvZEwsIHJlbUwpID09IDEpIHtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTdWJ0cmFjdCBkaXZpc29yIGZyb20gcHJvZHVjdC5cclxuICAgICAgICAgICAgICAgIHN1YnRyYWN0KHByb2QsIHlMIDwgcHJvZEwgPyB5eiA6IHljLCBwcm9kTCwgYmFzZSk7XHJcbiAgICAgICAgICAgICAgICBwcm9kTCA9IHByb2QubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY21wID0gMTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIG4gaXMgMCBvciAxLCBjbXAgaXMgLTEuXHJcbiAgICAgICAgICAgICAgLy8gSWYgbiBpcyAwLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNvbXBhcmUgeWMgYW5kIHJlbSBhZ2FpbiBiZWxvdyxcclxuICAgICAgICAgICAgICAvLyBzbyBjaGFuZ2UgY21wIHRvIDEgdG8gYXZvaWQgaXQuXHJcbiAgICAgICAgICAgICAgLy8gSWYgbiBpcyAxLCBsZWF2ZSBjbXAgYXMgLTEsIHNvIHljIGFuZCByZW0gYXJlIGNvbXBhcmVkIGFnYWluLlxyXG4gICAgICAgICAgICAgIGlmIChuID09IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkaXZpc29yIDwgcmVtYWluZGVyLCBzbyBuIG11c3QgYmUgYXQgbGVhc3QgMS5cclxuICAgICAgICAgICAgICAgIGNtcCA9IG4gPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gcHJvZHVjdCA9IGRpdmlzb3JcclxuICAgICAgICAgICAgICBwcm9kID0geWMuc2xpY2UoKTtcclxuICAgICAgICAgICAgICBwcm9kTCA9IHByb2QubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvZEwgPCByZW1MKSBwcm9kID0gWzBdLmNvbmNhdChwcm9kKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN1YnRyYWN0IHByb2R1Y3QgZnJvbSByZW1haW5kZXIuXHJcbiAgICAgICAgICAgIHN1YnRyYWN0KHJlbSwgcHJvZCwgcmVtTCwgYmFzZSk7XHJcbiAgICAgICAgICAgIHJlbUwgPSByZW0ubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgIC8vIElmIHByb2R1Y3Qgd2FzIDwgcmVtYWluZGVyLlxyXG4gICAgICAgICAgICBpZiAoY21wID09IC0xKSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENvbXBhcmUgZGl2aXNvciBhbmQgbmV3IHJlbWFpbmRlci5cclxuICAgICAgICAgICAgICAvLyBJZiBkaXZpc29yIDwgbmV3IHJlbWFpbmRlciwgc3VidHJhY3QgZGl2aXNvciBmcm9tIHJlbWFpbmRlci5cclxuICAgICAgICAgICAgICAvLyBUcmlhbCBkaWdpdCBuIHRvbyBsb3cuXHJcbiAgICAgICAgICAgICAgLy8gbiBpcyAxIHRvbyBsb3cgYWJvdXQgNSUgb2YgdGhlIHRpbWUsIGFuZCB2ZXJ5IHJhcmVseSAyIHRvbyBsb3cuXHJcbiAgICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoeWMsIHJlbSwgeUwsIHJlbUwpIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgbisrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFN1YnRyYWN0IGRpdmlzb3IgZnJvbSByZW1haW5kZXIuXHJcbiAgICAgICAgICAgICAgICBzdWJ0cmFjdChyZW0sIHlMIDwgcmVtTCA/IHl6IDogeWMsIHJlbUwsIGJhc2UpO1xyXG4gICAgICAgICAgICAgICAgcmVtTCA9IHJlbS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGNtcCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgIHJlbSA9IFswXTtcclxuICAgICAgICAgIH0gLy8gZWxzZSBjbXAgPT09IDEgYW5kIG4gd2lsbCBiZSAwXHJcblxyXG4gICAgICAgICAgLy8gQWRkIHRoZSBuZXh0IGRpZ2l0LCBuLCB0byB0aGUgcmVzdWx0IGFycmF5LlxyXG4gICAgICAgICAgcWNbaSsrXSA9IG47XHJcblxyXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSByZW1haW5kZXIuXHJcbiAgICAgICAgICBpZiAocmVtWzBdKSB7XHJcbiAgICAgICAgICAgIHJlbVtyZW1MKytdID0geGNbeGldIHx8IDA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZW0gPSBbeGNbeGldXTtcclxuICAgICAgICAgICAgcmVtTCA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSB3aGlsZSAoKHhpKysgPCB4TCB8fCByZW1bMF0gIT0gbnVsbCkgJiYgcy0tKTtcclxuXHJcbiAgICAgICAgbW9yZSA9IHJlbVswXSAhPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBMZWFkaW5nIHplcm8/XHJcbiAgICAgICAgaWYgKCFxY1swXSkgcWMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoYmFzZSA9PSBCQVNFKSB7XHJcblxyXG4gICAgICAgIC8vIFRvIGNhbGN1bGF0ZSBxLmUsIGZpcnN0IGdldCB0aGUgbnVtYmVyIG9mIGRpZ2l0cyBvZiBxY1swXS5cclxuICAgICAgICBmb3IgKGkgPSAxLCBzID0gcWNbMF07IHMgPj0gMTA7IHMgLz0gMTAsIGkrKyk7XHJcblxyXG4gICAgICAgIHJvdW5kKHEsIGRwICsgKHEuZSA9IGkgKyBlICogTE9HX0JBU0UgLSAxKSArIDEsIHJtLCBtb3JlKTtcclxuXHJcbiAgICAgIC8vIENhbGxlciBpcyBjb252ZXJ0QmFzZS5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBxLmUgPSBlO1xyXG4gICAgICAgIHEuciA9ICttb3JlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcTtcclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgQmlnTnVtYmVyIG4gaW4gZml4ZWQtcG9pbnQgb3IgZXhwb25lbnRpYWxcclxuICAgKiBub3RhdGlvbiByb3VuZGVkIHRvIHRoZSBzcGVjaWZpZWQgZGVjaW1hbCBwbGFjZXMgb3Igc2lnbmlmaWNhbnQgZGlnaXRzLlxyXG4gICAqXHJcbiAgICogbjogYSBCaWdOdW1iZXIuXHJcbiAgICogaTogdGhlIGluZGV4IG9mIHRoZSBsYXN0IGRpZ2l0IHJlcXVpcmVkIChpLmUuIHRoZSBkaWdpdCB0aGF0IG1heSBiZSByb3VuZGVkIHVwKS5cclxuICAgKiBybTogdGhlIHJvdW5kaW5nIG1vZGUuXHJcbiAgICogaWQ6IDEgKHRvRXhwb25lbnRpYWwpIG9yIDIgKHRvUHJlY2lzaW9uKS5cclxuICAgKi9cclxuICBmdW5jdGlvbiBmb3JtYXQobiwgaSwgcm0sIGlkKSB7XHJcbiAgICB2YXIgYzAsIGUsIG5lLCBsZW4sIHN0cjtcclxuXHJcbiAgICBpZiAocm0gPT0gbnVsbCkgcm0gPSBST1VORElOR19NT0RFO1xyXG4gICAgZWxzZSBpbnRDaGVjayhybSwgMCwgOCk7XHJcblxyXG4gICAgaWYgKCFuLmMpIHJldHVybiBuLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgYzAgPSBuLmNbMF07XHJcbiAgICBuZSA9IG4uZTtcclxuXHJcbiAgICBpZiAoaSA9PSBudWxsKSB7XHJcbiAgICAgIHN0ciA9IGNvZWZmVG9TdHJpbmcobi5jKTtcclxuICAgICAgc3RyID0gaWQgPT0gMSB8fCBpZCA9PSAyICYmIChuZSA8PSBUT19FWFBfTkVHIHx8IG5lID49IFRPX0VYUF9QT1MpXHJcbiAgICAgICA/IHRvRXhwb25lbnRpYWwoc3RyLCBuZSlcclxuICAgICAgIDogdG9GaXhlZFBvaW50KHN0ciwgbmUsICcwJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuID0gcm91bmQobmV3IEJpZ051bWJlcihuKSwgaSwgcm0pO1xyXG5cclxuICAgICAgLy8gbi5lIG1heSBoYXZlIGNoYW5nZWQgaWYgdGhlIHZhbHVlIHdhcyByb3VuZGVkIHVwLlxyXG4gICAgICBlID0gbi5lO1xyXG5cclxuICAgICAgc3RyID0gY29lZmZUb1N0cmluZyhuLmMpO1xyXG4gICAgICBsZW4gPSBzdHIubGVuZ3RoO1xyXG5cclxuICAgICAgLy8gdG9QcmVjaXNpb24gcmV0dXJucyBleHBvbmVudGlhbCBub3RhdGlvbiBpZiB0aGUgbnVtYmVyIG9mIHNpZ25pZmljYW50IGRpZ2l0c1xyXG4gICAgICAvLyBzcGVjaWZpZWQgaXMgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgZGlnaXRzIG5lY2Vzc2FyeSB0byByZXByZXNlbnQgdGhlIGludGVnZXJcclxuICAgICAgLy8gcGFydCBvZiB0aGUgdmFsdWUgaW4gZml4ZWQtcG9pbnQgbm90YXRpb24uXHJcblxyXG4gICAgICAvLyBFeHBvbmVudGlhbCBub3RhdGlvbi5cclxuICAgICAgaWYgKGlkID09IDEgfHwgaWQgPT0gMiAmJiAoaSA8PSBlIHx8IGUgPD0gVE9fRVhQX05FRykpIHtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHplcm9zP1xyXG4gICAgICAgIGZvciAoOyBsZW4gPCBpOyBzdHIgKz0gJzAnLCBsZW4rKyk7XHJcbiAgICAgICAgc3RyID0gdG9FeHBvbmVudGlhbChzdHIsIGUpO1xyXG5cclxuICAgICAgLy8gRml4ZWQtcG9pbnQgbm90YXRpb24uXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaSAtPSBuZTtcclxuICAgICAgICBzdHIgPSB0b0ZpeGVkUG9pbnQoc3RyLCBlLCAnMCcpO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgemVyb3M/XHJcbiAgICAgICAgaWYgKGUgKyAxID4gbGVuKSB7XHJcbiAgICAgICAgICBpZiAoLS1pID4gMCkgZm9yIChzdHIgKz0gJy4nOyBpLS07IHN0ciArPSAnMCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpICs9IGUgLSBsZW47XHJcbiAgICAgICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICAgICAgaWYgKGUgKyAxID09IGxlbikgc3RyICs9ICcuJztcclxuICAgICAgICAgICAgZm9yICg7IGktLTsgc3RyICs9ICcwJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG4ucyA8IDAgJiYgYzAgPyAnLScgKyBzdHIgOiBzdHI7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gSGFuZGxlIEJpZ051bWJlci5tYXggYW5kIEJpZ051bWJlci5taW4uXHJcbiAgZnVuY3Rpb24gbWF4T3JNaW4oYXJncywgbWV0aG9kKSB7XHJcbiAgICB2YXIgbixcclxuICAgICAgaSA9IDEsXHJcbiAgICAgIG0gPSBuZXcgQmlnTnVtYmVyKGFyZ3NbMF0pO1xyXG5cclxuICAgIGZvciAoOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBuID0gbmV3IEJpZ051bWJlcihhcmdzW2ldKTtcclxuXHJcbiAgICAgIC8vIElmIGFueSBudW1iZXIgaXMgTmFOLCByZXR1cm4gTmFOLlxyXG4gICAgICBpZiAoIW4ucykge1xyXG4gICAgICAgIG0gPSBuO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2UgaWYgKG1ldGhvZC5jYWxsKG0sIG4pKSB7XHJcbiAgICAgICAgbSA9IG47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbTtcclxuICB9XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFN0cmlwIHRyYWlsaW5nIHplcm9zLCBjYWxjdWxhdGUgYmFzZSAxMCBleHBvbmVudCBhbmQgY2hlY2sgYWdhaW5zdCBNSU5fRVhQIGFuZCBNQVhfRVhQLlxyXG4gICAqIENhbGxlZCBieSBtaW51cywgcGx1cyBhbmQgdGltZXMuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gbm9ybWFsaXNlKG4sIGMsIGUpIHtcclxuICAgIHZhciBpID0gMSxcclxuICAgICAgaiA9IGMubGVuZ3RoO1xyXG5cclxuICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgICBmb3IgKDsgIWNbLS1qXTsgYy5wb3AoKSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBiYXNlIDEwIGV4cG9uZW50LiBGaXJzdCBnZXQgdGhlIG51bWJlciBvZiBkaWdpdHMgb2YgY1swXS5cclxuICAgIGZvciAoaiA9IGNbMF07IGogPj0gMTA7IGogLz0gMTAsIGkrKyk7XHJcblxyXG4gICAgLy8gT3ZlcmZsb3c/XHJcbiAgICBpZiAoKGUgPSBpICsgZSAqIExPR19CQVNFIC0gMSkgPiBNQVhfRVhQKSB7XHJcblxyXG4gICAgICAvLyBJbmZpbml0eS5cclxuICAgICAgbi5jID0gbi5lID0gbnVsbDtcclxuXHJcbiAgICAvLyBVbmRlcmZsb3c/XHJcbiAgICB9IGVsc2UgaWYgKGUgPCBNSU5fRVhQKSB7XHJcblxyXG4gICAgICAvLyBaZXJvLlxyXG4gICAgICBuLmMgPSBbbi5lID0gMF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuLmUgPSBlO1xyXG4gICAgICBuLmMgPSBjO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIEhhbmRsZSB2YWx1ZXMgdGhhdCBmYWlsIHRoZSB2YWxpZGl0eSB0ZXN0IGluIEJpZ051bWJlci5cclxuICBwYXJzZU51bWVyaWMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhc2VQcmVmaXggPSAvXigtPykwKFt4Ym9dKSg/PVxcd1tcXHcuXSokKS9pLFxyXG4gICAgICBkb3RBZnRlciA9IC9eKFteLl0rKVxcLiQvLFxyXG4gICAgICBkb3RCZWZvcmUgPSAvXlxcLihbXi5dKykkLyxcclxuICAgICAgaXNJbmZpbml0eU9yTmFOID0gL14tPyhJbmZpbml0eXxOYU4pJC8sXHJcbiAgICAgIHdoaXRlc3BhY2VPclBsdXMgPSAvXlxccypcXCsoPz1bXFx3Ll0pfF5cXHMrfFxccyskL2c7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBzdHIsIGlzTnVtLCBiKSB7XHJcbiAgICAgIHZhciBiYXNlLFxyXG4gICAgICAgIHMgPSBpc051bSA/IHN0ciA6IHN0ci5yZXBsYWNlKHdoaXRlc3BhY2VPclBsdXMsICcnKTtcclxuXHJcbiAgICAgIC8vIE5vIGV4Y2VwdGlvbiBvbiDCsUluZmluaXR5IG9yIE5hTi5cclxuICAgICAgaWYgKGlzSW5maW5pdHlPck5hTi50ZXN0KHMpKSB7XHJcbiAgICAgICAgeC5zID0gaXNOYU4ocykgPyBudWxsIDogcyA8IDAgPyAtMSA6IDE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFpc051bSkge1xyXG5cclxuICAgICAgICAgIC8vIGJhc2VQcmVmaXggPSAvXigtPykwKFt4Ym9dKSg/PVxcd1tcXHcuXSokKS9pXHJcbiAgICAgICAgICBzID0gcy5yZXBsYWNlKGJhc2VQcmVmaXgsIGZ1bmN0aW9uIChtLCBwMSwgcDIpIHtcclxuICAgICAgICAgICAgYmFzZSA9IChwMiA9IHAyLnRvTG93ZXJDYXNlKCkpID09ICd4JyA/IDE2IDogcDIgPT0gJ2InID8gMiA6IDg7XHJcbiAgICAgICAgICAgIHJldHVybiAhYiB8fCBiID09IGJhc2UgPyBwMSA6IG07XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoYikge1xyXG4gICAgICAgICAgICBiYXNlID0gYjtcclxuXHJcbiAgICAgICAgICAgIC8vIEUuZy4gJzEuJyB0byAnMScsICcuMScgdG8gJzAuMSdcclxuICAgICAgICAgICAgcyA9IHMucmVwbGFjZShkb3RBZnRlciwgJyQxJykucmVwbGFjZShkb3RCZWZvcmUsICcwLiQxJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHN0ciAhPSBzKSByZXR1cm4gbmV3IEJpZ051bWJlcihzLCBiYXNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICdbQmlnTnVtYmVyIEVycm9yXSBOb3QgYSBudW1iZXI6IHtufSdcclxuICAgICAgICAvLyAnW0JpZ051bWJlciBFcnJvcl0gTm90IGEgYmFzZSB7Yn0gbnVtYmVyOiB7bn0nXHJcbiAgICAgICAgaWYgKEJpZ051bWJlci5ERUJVRykge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAgICAgKGJpZ251bWJlckVycm9yICsgJ05vdCBhJyArIChiID8gJyBiYXNlICcgKyBiIDogJycpICsgJyBudW1iZXI6ICcgKyBzdHIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTmFOXHJcbiAgICAgICAgeC5zID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgeC5jID0geC5lID0gbnVsbDtcclxuICAgIH1cclxuICB9KSgpO1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSb3VuZCB4IHRvIHNkIHNpZ25pZmljYW50IGRpZ2l0cyB1c2luZyByb3VuZGluZyBtb2RlIHJtLiBDaGVjayBmb3Igb3Zlci91bmRlci1mbG93LlxyXG4gICAqIElmIHIgaXMgdHJ1dGh5LCBpdCBpcyBrbm93biB0aGF0IHRoZXJlIGFyZSBtb3JlIGRpZ2l0cyBhZnRlciB0aGUgcm91bmRpbmcgZGlnaXQuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcm91bmQoeCwgc2QsIHJtLCByKSB7XHJcbiAgICB2YXIgZCwgaSwgaiwgaywgbiwgbmksIHJkLFxyXG4gICAgICB4YyA9IHguYyxcclxuICAgICAgcG93czEwID0gUE9XU19URU47XHJcblxyXG4gICAgLy8gaWYgeCBpcyBub3QgSW5maW5pdHkgb3IgTmFOLi4uXHJcbiAgICBpZiAoeGMpIHtcclxuXHJcbiAgICAgIC8vIHJkIGlzIHRoZSByb3VuZGluZyBkaWdpdCwgaS5lLiB0aGUgZGlnaXQgYWZ0ZXIgdGhlIGRpZ2l0IHRoYXQgbWF5IGJlIHJvdW5kZWQgdXAuXHJcbiAgICAgIC8vIG4gaXMgYSBiYXNlIDFlMTQgbnVtYmVyLCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgb2YgYXJyYXkgeC5jIGNvbnRhaW5pbmcgcmQuXHJcbiAgICAgIC8vIG5pIGlzIHRoZSBpbmRleCBvZiBuIHdpdGhpbiB4LmMuXHJcbiAgICAgIC8vIGQgaXMgdGhlIG51bWJlciBvZiBkaWdpdHMgb2Ygbi5cclxuICAgICAgLy8gaSBpcyB0aGUgaW5kZXggb2YgcmQgd2l0aGluIG4gaW5jbHVkaW5nIGxlYWRpbmcgemVyb3MuXHJcbiAgICAgIC8vIGogaXMgdGhlIGFjdHVhbCBpbmRleCBvZiByZCB3aXRoaW4gbiAoaWYgPCAwLCByZCBpcyBhIGxlYWRpbmcgemVybykuXHJcbiAgICAgIG91dDoge1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIG51bWJlciBvZiBkaWdpdHMgb2YgdGhlIGZpcnN0IGVsZW1lbnQgb2YgeGMuXHJcbiAgICAgICAgZm9yIChkID0gMSwgayA9IHhjWzBdOyBrID49IDEwOyBrIC89IDEwLCBkKyspO1xyXG4gICAgICAgIGkgPSBzZCAtIGQ7XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSByb3VuZGluZyBkaWdpdCBpcyBpbiB0aGUgZmlyc3QgZWxlbWVudCBvZiB4Yy4uLlxyXG4gICAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgICAgaSArPSBMT0dfQkFTRTtcclxuICAgICAgICAgIGogPSBzZDtcclxuICAgICAgICAgIG4gPSB4Y1tuaSA9IDBdO1xyXG5cclxuICAgICAgICAgIC8vIEdldCB0aGUgcm91bmRpbmcgZGlnaXQgYXQgaW5kZXggaiBvZiBuLlxyXG4gICAgICAgICAgcmQgPSBuIC8gcG93czEwW2QgLSBqIC0gMV0gJSAxMCB8IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5pID0gbWF0aGNlaWwoKGkgKyAxKSAvIExPR19CQVNFKTtcclxuXHJcbiAgICAgICAgICBpZiAobmkgPj0geGMubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAocikge1xyXG5cclxuICAgICAgICAgICAgICAvLyBOZWVkZWQgYnkgc3FydC5cclxuICAgICAgICAgICAgICBmb3IgKDsgeGMubGVuZ3RoIDw9IG5pOyB4Yy5wdXNoKDApKTtcclxuICAgICAgICAgICAgICBuID0gcmQgPSAwO1xyXG4gICAgICAgICAgICAgIGQgPSAxO1xyXG4gICAgICAgICAgICAgIGkgJT0gTE9HX0JBU0U7XHJcbiAgICAgICAgICAgICAgaiA9IGkgLSBMT0dfQkFTRSArIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYnJlYWsgb3V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuID0gayA9IHhjW25pXTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgbnVtYmVyIG9mIGRpZ2l0cyBvZiBuLlxyXG4gICAgICAgICAgICBmb3IgKGQgPSAxOyBrID49IDEwOyBrIC89IDEwLCBkKyspO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiByZCB3aXRoaW4gbi5cclxuICAgICAgICAgICAgaSAlPSBMT0dfQkFTRTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgcmQgd2l0aGluIG4sIGFkanVzdGVkIGZvciBsZWFkaW5nIHplcm9zLlxyXG4gICAgICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3Mgb2YgbiBpcyBnaXZlbiBieSBMT0dfQkFTRSAtIGQuXHJcbiAgICAgICAgICAgIGogPSBpIC0gTE9HX0JBU0UgKyBkO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IHRoZSByb3VuZGluZyBkaWdpdCBhdCBpbmRleCBqIG9mIG4uXHJcbiAgICAgICAgICAgIHJkID0gaiA8IDAgPyAwIDogbiAvIHBvd3MxMFtkIC0gaiAtIDFdICUgMTAgfCAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgciA9IHIgfHwgc2QgPCAwIHx8XHJcblxyXG4gICAgICAgIC8vIEFyZSB0aGVyZSBhbnkgbm9uLXplcm8gZGlnaXRzIGFmdGVyIHRoZSByb3VuZGluZyBkaWdpdD9cclxuICAgICAgICAvLyBUaGUgZXhwcmVzc2lvbiAgbiAlIHBvd3MxMFtkIC0gaiAtIDFdICByZXR1cm5zIGFsbCBkaWdpdHMgb2YgbiB0byB0aGUgcmlnaHRcclxuICAgICAgICAvLyBvZiB0aGUgZGlnaXQgYXQgaiwgZS5nLiBpZiBuIGlzIDkwODcxNCBhbmQgaiBpcyAyLCB0aGUgZXhwcmVzc2lvbiBnaXZlcyA3MTQuXHJcbiAgICAgICAgIHhjW25pICsgMV0gIT0gbnVsbCB8fCAoaiA8IDAgPyBuIDogbiAlIHBvd3MxMFtkIC0gaiAtIDFdKTtcclxuXHJcbiAgICAgICAgciA9IHJtIDwgNFxyXG4gICAgICAgICA/IChyZCB8fCByKSAmJiAocm0gPT0gMCB8fCBybSA9PSAoeC5zIDwgMCA/IDMgOiAyKSlcclxuICAgICAgICAgOiByZCA+IDUgfHwgcmQgPT0gNSAmJiAocm0gPT0gNCB8fCByIHx8IHJtID09IDYgJiZcclxuXHJcbiAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBkaWdpdCB0byB0aGUgbGVmdCBvZiB0aGUgcm91bmRpbmcgZGlnaXQgaXMgb2RkLlxyXG4gICAgICAgICAgKChpID4gMCA/IGogPiAwID8gbiAvIHBvd3MxMFtkIC0gal0gOiAwIDogeGNbbmkgLSAxXSkgJSAxMCkgJiAxIHx8XHJcbiAgICAgICAgICAgcm0gPT0gKHgucyA8IDAgPyA4IDogNykpO1xyXG5cclxuICAgICAgICBpZiAoc2QgPCAxIHx8ICF4Y1swXSkge1xyXG4gICAgICAgICAgeGMubGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICBpZiAocikge1xyXG5cclxuICAgICAgICAgICAgLy8gQ29udmVydCBzZCB0byBkZWNpbWFsIHBsYWNlcy5cclxuICAgICAgICAgICAgc2QgLT0geC5lICsgMTtcclxuXHJcbiAgICAgICAgICAgIC8vIDEsIDAuMSwgMC4wMSwgMC4wMDEsIDAuMDAwMSBldGMuXHJcbiAgICAgICAgICAgIHhjWzBdID0gcG93czEwWyhMT0dfQkFTRSAtIHNkICUgTE9HX0JBU0UpICUgTE9HX0JBU0VdO1xyXG4gICAgICAgICAgICB4LmUgPSAtc2QgfHwgMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAvLyBaZXJvLlxyXG4gICAgICAgICAgICB4Y1swXSA9IHguZSA9IDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZXhjZXNzIGRpZ2l0cy5cclxuICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICB4Yy5sZW5ndGggPSBuaTtcclxuICAgICAgICAgIGsgPSAxO1xyXG4gICAgICAgICAgbmktLTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgeGMubGVuZ3RoID0gbmkgKyAxO1xyXG4gICAgICAgICAgayA9IHBvd3MxMFtMT0dfQkFTRSAtIGldO1xyXG5cclxuICAgICAgICAgIC8vIEUuZy4gNTY3MDAgYmVjb21lcyA1NjAwMCBpZiA3IGlzIHRoZSByb3VuZGluZyBkaWdpdC5cclxuICAgICAgICAgIC8vIGogPiAwIG1lYW5zIGkgPiBudW1iZXIgb2YgbGVhZGluZyB6ZXJvcyBvZiBuLlxyXG4gICAgICAgICAgeGNbbmldID0gaiA+IDAgPyBtYXRoZmxvb3IobiAvIHBvd3MxMFtkIC0gal0gJSBwb3dzMTBbal0pICogayA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSb3VuZCB1cD9cclxuICAgICAgICBpZiAocikge1xyXG5cclxuICAgICAgICAgIGZvciAoOyA7KSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZGlnaXQgdG8gYmUgcm91bmRlZCB1cCBpcyBpbiB0aGUgZmlyc3QgZWxlbWVudCBvZiB4Yy4uLlxyXG4gICAgICAgICAgICBpZiAobmkgPT0gMCkge1xyXG5cclxuICAgICAgICAgICAgICAvLyBpIHdpbGwgYmUgdGhlIGxlbmd0aCBvZiB4Y1swXSBiZWZvcmUgayBpcyBhZGRlZC5cclxuICAgICAgICAgICAgICBmb3IgKGkgPSAxLCBqID0geGNbMF07IGogPj0gMTA7IGogLz0gMTAsIGkrKyk7XHJcbiAgICAgICAgICAgICAgaiA9IHhjWzBdICs9IGs7XHJcbiAgICAgICAgICAgICAgZm9yIChrID0gMTsgaiA+PSAxMDsgaiAvPSAxMCwgaysrKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gaWYgaSAhPSBrIHRoZSBsZW5ndGggaGFzIGluY3JlYXNlZC5cclxuICAgICAgICAgICAgICBpZiAoaSAhPSBrKSB7XHJcbiAgICAgICAgICAgICAgICB4LmUrKztcclxuICAgICAgICAgICAgICAgIGlmICh4Y1swXSA9PSBCQVNFKSB4Y1swXSA9IDE7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB4Y1tuaV0gKz0gaztcclxuICAgICAgICAgICAgICBpZiAoeGNbbmldICE9IEJBU0UpIGJyZWFrO1xyXG4gICAgICAgICAgICAgIHhjW25pLS1dID0gMDtcclxuICAgICAgICAgICAgICBrID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLlxyXG4gICAgICAgIGZvciAoaSA9IHhjLmxlbmd0aDsgeGNbLS1pXSA9PT0gMDsgeGMucG9wKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBPdmVyZmxvdz8gSW5maW5pdHkuXHJcbiAgICAgIGlmICh4LmUgPiBNQVhfRVhQKSB7XHJcbiAgICAgICAgeC5jID0geC5lID0gbnVsbDtcclxuXHJcbiAgICAgIC8vIFVuZGVyZmxvdz8gWmVyby5cclxuICAgICAgfSBlbHNlIGlmICh4LmUgPCBNSU5fRVhQKSB7XHJcbiAgICAgICAgeC5jID0gW3guZSA9IDBdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHg7XHJcbiAgfVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gdmFsdWVPZihuKSB7XHJcbiAgICB2YXIgc3RyLFxyXG4gICAgICBlID0gbi5lO1xyXG5cclxuICAgIGlmIChlID09PSBudWxsKSByZXR1cm4gbi50b1N0cmluZygpO1xyXG5cclxuICAgIHN0ciA9IGNvZWZmVG9TdHJpbmcobi5jKTtcclxuXHJcbiAgICBzdHIgPSBlIDw9IFRPX0VYUF9ORUcgfHwgZSA+PSBUT19FWFBfUE9TXHJcbiAgICAgID8gdG9FeHBvbmVudGlhbChzdHIsIGUpXHJcbiAgICAgIDogdG9GaXhlZFBvaW50KHN0ciwgZSwgJzAnKTtcclxuXHJcbiAgICByZXR1cm4gbi5zIDwgMCA/ICctJyArIHN0ciA6IHN0cjtcclxuICB9XHJcblxyXG5cclxuICAvLyBQUk9UT1RZUEUvSU5TVEFOQ0UgTUVUSE9EU1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBuZXcgQmlnTnVtYmVyIHdob3NlIHZhbHVlIGlzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlci5cclxuICAgKi9cclxuICBQLmFic29sdXRlVmFsdWUgPSBQLmFicyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gbmV3IEJpZ051bWJlcih0aGlzKTtcclxuICAgIGlmICh4LnMgPCAwKSB4LnMgPSAxO1xyXG4gICAgcmV0dXJuIHg7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuXHJcbiAgICogICAxIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIEJpZ051bWJlcih5LCBiKSxcclxuICAgKiAgIC0xIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZ051bWJlcih5LCBiKSxcclxuICAgKiAgIDAgaWYgdGhleSBoYXZlIHRoZSBzYW1lIHZhbHVlLFxyXG4gICAqICAgb3IgbnVsbCBpZiB0aGUgdmFsdWUgb2YgZWl0aGVyIGlzIE5hTi5cclxuICAgKi9cclxuICBQLmNvbXBhcmVkVG8gPSBmdW5jdGlvbiAoeSwgYikge1xyXG4gICAgcmV0dXJuIGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogSWYgZHAgaXMgdW5kZWZpbmVkIG9yIG51bGwgb3IgdHJ1ZSBvciBmYWxzZSwgcmV0dXJuIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgb2YgdGhlXHJcbiAgICogdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIsIG9yIG51bGwgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGlzIMKxSW5maW5pdHkgb3IgTmFOLlxyXG4gICAqXHJcbiAgICogT3RoZXJ3aXNlLCBpZiBkcCBpcyBhIG51bWJlciwgcmV0dXJuIGEgbmV3IEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpc1xyXG4gICAqIEJpZ051bWJlciByb3VuZGVkIHRvIGEgbWF4aW11bSBvZiBkcCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvclxyXG4gICAqIFJPVU5ESU5HX01PREUgaWYgcm0gaXMgb21pdHRlZC5cclxuICAgKlxyXG4gICAqIFtkcF0ge251bWJlcn0gRGVjaW1hbCBwbGFjZXM6IGludGVnZXIsIDAgdG8gTUFYIGluY2x1c2l2ZS5cclxuICAgKiBbcm1dIHtudW1iZXJ9IFJvdW5kaW5nIG1vZGUuIEludGVnZXIsIDAgdG8gOCBpbmNsdXNpdmUuXHJcbiAgICpcclxuICAgKiAnW0JpZ051bWJlciBFcnJvcl0gQXJndW1lbnQge25vdCBhIHByaW1pdGl2ZSBudW1iZXJ8bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfToge2RwfHJtfSdcclxuICAgKi9cclxuICBQLmRlY2ltYWxQbGFjZXMgPSBQLmRwID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gICAgdmFyIGMsIG4sIHYsXHJcbiAgICAgIHggPSB0aGlzO1xyXG5cclxuICAgIGlmIChkcCAhPSBudWxsKSB7XHJcbiAgICAgIGludENoZWNrKGRwLCAwLCBNQVgpO1xyXG4gICAgICBpZiAocm0gPT0gbnVsbCkgcm0gPSBST1VORElOR19NT0RFO1xyXG4gICAgICBlbHNlIGludENoZWNrKHJtLCAwLCA4KTtcclxuXHJcbiAgICAgIHJldHVybiByb3VuZChuZXcgQmlnTnVtYmVyKHgpLCBkcCArIHguZSArIDEsIHJtKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIShjID0geC5jKSkgcmV0dXJuIG51bGw7XHJcbiAgICBuID0gKCh2ID0gYy5sZW5ndGggLSAxKSAtIGJpdEZsb29yKHRoaXMuZSAvIExPR19CQVNFKSkgKiBMT0dfQkFTRTtcclxuXHJcbiAgICAvLyBTdWJ0cmFjdCB0aGUgbnVtYmVyIG9mIHRyYWlsaW5nIHplcm9zIG9mIHRoZSBsYXN0IG51bWJlci5cclxuICAgIGlmICh2ID0gY1t2XSkgZm9yICg7IHYgJSAxMCA9PSAwOyB2IC89IDEwLCBuLS0pO1xyXG4gICAgaWYgKG4gPCAwKSBuID0gMDtcclxuXHJcbiAgICByZXR1cm4gbjtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiAgbiAvIDAgPSBJXHJcbiAgICogIG4gLyBOID0gTlxyXG4gICAqICBuIC8gSSA9IDBcclxuICAgKiAgMCAvIG4gPSAwXHJcbiAgICogIDAgLyAwID0gTlxyXG4gICAqICAwIC8gTiA9IE5cclxuICAgKiAgMCAvIEkgPSAwXHJcbiAgICogIE4gLyBuID0gTlxyXG4gICAqICBOIC8gMCA9IE5cclxuICAgKiAgTiAvIE4gPSBOXHJcbiAgICogIE4gLyBJID0gTlxyXG4gICAqICBJIC8gbiA9IElcclxuICAgKiAgSSAvIDAgPSBJXHJcbiAgICogIEkgLyBOID0gTlxyXG4gICAqICBJIC8gSSA9IE5cclxuICAgKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGRpdmlkZWQgYnkgdGhlIHZhbHVlIG9mXHJcbiAgICogQmlnTnVtYmVyKHksIGIpLCByb3VuZGVkIGFjY29yZGluZyB0byBERUNJTUFMX1BMQUNFUyBhbmQgUk9VTkRJTkdfTU9ERS5cclxuICAgKi9cclxuICBQLmRpdmlkZWRCeSA9IFAuZGl2ID0gZnVuY3Rpb24gKHksIGIpIHtcclxuICAgIHJldHVybiBkaXYodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSwgREVDSU1BTF9QTEFDRVMsIFJPVU5ESU5HX01PREUpO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIGludGVnZXIgcGFydCBvZiBkaXZpZGluZyB0aGUgdmFsdWUgb2YgdGhpc1xyXG4gICAqIEJpZ051bWJlciBieSB0aGUgdmFsdWUgb2YgQmlnTnVtYmVyKHksIGIpLlxyXG4gICAqL1xyXG4gIFAuZGl2aWRlZFRvSW50ZWdlckJ5ID0gUC5pZGl2ID0gZnVuY3Rpb24gKHksIGIpIHtcclxuICAgIHJldHVybiBkaXYodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSwgMCwgMSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgQmlnTnVtYmVyIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBleHBvbmVudGlhdGVkIGJ5IG4uXHJcbiAgICpcclxuICAgKiBJZiBtIGlzIHByZXNlbnQsIHJldHVybiB0aGUgcmVzdWx0IG1vZHVsbyBtLlxyXG4gICAqIElmIG4gaXMgbmVnYXRpdmUgcm91bmQgYWNjb3JkaW5nIHRvIERFQ0lNQUxfUExBQ0VTIGFuZCBST1VORElOR19NT0RFLlxyXG4gICAqIElmIFBPV19QUkVDSVNJT04gaXMgbm9uLXplcm8gYW5kIG0gaXMgbm90IHByZXNlbnQsIHJvdW5kIHRvIFBPV19QUkVDSVNJT04gdXNpbmcgUk9VTkRJTkdfTU9ERS5cclxuICAgKlxyXG4gICAqIFRoZSBtb2R1bGFyIHBvd2VyIG9wZXJhdGlvbiB3b3JrcyBlZmZpY2llbnRseSB3aGVuIHgsIG4sIGFuZCBtIGFyZSBpbnRlZ2Vycywgb3RoZXJ3aXNlIGl0XHJcbiAgICogaXMgZXF1aXZhbGVudCB0byBjYWxjdWxhdGluZyB4LmV4cG9uZW50aWF0ZWRCeShuKS5tb2R1bG8obSkgd2l0aCBhIFBPV19QUkVDSVNJT04gb2YgMC5cclxuICAgKlxyXG4gICAqIG4ge251bWJlcnxzdHJpbmd8QmlnTnVtYmVyfSBUaGUgZXhwb25lbnQuIEFuIGludGVnZXIuXHJcbiAgICogW21dIHtudW1iZXJ8c3RyaW5nfEJpZ051bWJlcn0gVGhlIG1vZHVsdXMuXHJcbiAgICpcclxuICAgKiAnW0JpZ051bWJlciBFcnJvcl0gRXhwb25lbnQgbm90IGFuIGludGVnZXI6IHtufSdcclxuICAgKi9cclxuICBQLmV4cG9uZW50aWF0ZWRCeSA9IFAucG93ID0gZnVuY3Rpb24gKG4sIG0pIHtcclxuICAgIHZhciBoYWxmLCBpc01vZEV4cCwgaSwgaywgbW9yZSwgbklzQmlnLCBuSXNOZWcsIG5Jc09kZCwgeSxcclxuICAgICAgeCA9IHRoaXM7XHJcblxyXG4gICAgbiA9IG5ldyBCaWdOdW1iZXIobik7XHJcblxyXG4gICAgLy8gQWxsb3cgTmFOIGFuZCDCsUluZmluaXR5LCBidXQgbm90IG90aGVyIG5vbi1pbnRlZ2Vycy5cclxuICAgIGlmIChuLmMgJiYgIW4uaXNJbnRlZ2VyKCkpIHtcclxuICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyAnRXhwb25lbnQgbm90IGFuIGludGVnZXI6ICcgKyB2YWx1ZU9mKG4pKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobSAhPSBudWxsKSBtID0gbmV3IEJpZ051bWJlcihtKTtcclxuXHJcbiAgICAvLyBFeHBvbmVudCBvZiBNQVhfU0FGRV9JTlRFR0VSIGlzIDE1LlxyXG4gICAgbklzQmlnID0gbi5lID4gMTQ7XHJcblxyXG4gICAgLy8gSWYgeCBpcyBOYU4sIMKxSW5maW5pdHksIMKxMCBvciDCsTEsIG9yIG4gaXMgwrFJbmZpbml0eSwgTmFOIG9yIMKxMC5cclxuICAgIGlmICgheC5jIHx8ICF4LmNbMF0gfHwgeC5jWzBdID09IDEgJiYgIXguZSAmJiB4LmMubGVuZ3RoID09IDEgfHwgIW4uYyB8fCAhbi5jWzBdKSB7XHJcblxyXG4gICAgICAvLyBUaGUgc2lnbiBvZiB0aGUgcmVzdWx0IG9mIHBvdyB3aGVuIHggaXMgbmVnYXRpdmUgZGVwZW5kcyBvbiB0aGUgZXZlbm5lc3Mgb2Ygbi5cclxuICAgICAgLy8gSWYgK24gb3ZlcmZsb3dzIHRvIMKxSW5maW5pdHksIHRoZSBldmVubmVzcyBvZiBuIHdvdWxkIGJlIG5vdCBiZSBrbm93bi5cclxuICAgICAgeSA9IG5ldyBCaWdOdW1iZXIoTWF0aC5wb3coK3ZhbHVlT2YoeCksIG5Jc0JpZyA/IDIgLSBpc09kZChuKSA6ICt2YWx1ZU9mKG4pKSk7XHJcbiAgICAgIHJldHVybiBtID8geS5tb2QobSkgOiB5O1xyXG4gICAgfVxyXG5cclxuICAgIG5Jc05lZyA9IG4ucyA8IDA7XHJcblxyXG4gICAgaWYgKG0pIHtcclxuXHJcbiAgICAgIC8vIHggJSBtIHJldHVybnMgTmFOIGlmIGFicyhtKSBpcyB6ZXJvLCBvciBtIGlzIE5hTi5cclxuICAgICAgaWYgKG0uYyA/ICFtLmNbMF0gOiAhbS5zKSByZXR1cm4gbmV3IEJpZ051bWJlcihOYU4pO1xyXG5cclxuICAgICAgaXNNb2RFeHAgPSAhbklzTmVnICYmIHguaXNJbnRlZ2VyKCkgJiYgbS5pc0ludGVnZXIoKTtcclxuXHJcbiAgICAgIGlmIChpc01vZEV4cCkgeCA9IHgubW9kKG0pO1xyXG5cclxuICAgIC8vIE92ZXJmbG93IHRvIMKxSW5maW5pdHk6ID49MioqMWUxMCBvciA+PTEuMDAwMDAyNCoqMWUxNS5cclxuICAgIC8vIFVuZGVyZmxvdyB0byDCsTA6IDw9MC43OSoqMWUxMCBvciA8PTAuOTk5OTk3NSoqMWUxNS5cclxuICAgIH0gZWxzZSBpZiAobi5lID4gOSAmJiAoeC5lID4gMCB8fCB4LmUgPCAtMSB8fCAoeC5lID09IDBcclxuICAgICAgLy8gWzEsIDI0MDAwMDAwMF1cclxuICAgICAgPyB4LmNbMF0gPiAxIHx8IG5Jc0JpZyAmJiB4LmNbMV0gPj0gMjRlN1xyXG4gICAgICAvLyBbODAwMDAwMDAwMDAwMDBdICBbOTk5OTk3NTAwMDAwMDBdXHJcbiAgICAgIDogeC5jWzBdIDwgOGUxMyB8fCBuSXNCaWcgJiYgeC5jWzBdIDw9IDk5OTk5NzVlNykpKSB7XHJcblxyXG4gICAgICAvLyBJZiB4IGlzIG5lZ2F0aXZlIGFuZCBuIGlzIG9kZCwgayA9IC0wLCBlbHNlIGsgPSAwLlxyXG4gICAgICBrID0geC5zIDwgMCAmJiBpc09kZChuKSA/IC0wIDogMDtcclxuXHJcbiAgICAgIC8vIElmIHggPj0gMSwgayA9IMKxSW5maW5pdHkuXHJcbiAgICAgIGlmICh4LmUgPiAtMSkgayA9IDEgLyBrO1xyXG5cclxuICAgICAgLy8gSWYgbiBpcyBuZWdhdGl2ZSByZXR1cm4gwrEwLCBlbHNlIHJldHVybiDCsUluZmluaXR5LlxyXG4gICAgICByZXR1cm4gbmV3IEJpZ051bWJlcihuSXNOZWcgPyAxIC8gayA6IGspO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoUE9XX1BSRUNJU0lPTikge1xyXG5cclxuICAgICAgLy8gVHJ1bmNhdGluZyBlYWNoIGNvZWZmaWNpZW50IGFycmF5IHRvIGEgbGVuZ3RoIG9mIGsgYWZ0ZXIgZWFjaCBtdWx0aXBsaWNhdGlvblxyXG4gICAgICAvLyBlcXVhdGVzIHRvIHRydW5jYXRpbmcgc2lnbmlmaWNhbnQgZGlnaXRzIHRvIFBPV19QUkVDSVNJT04gKyBbMjgsIDQxXSxcclxuICAgICAgLy8gaS5lLiB0aGVyZSB3aWxsIGJlIGEgbWluaW11bSBvZiAyOCBndWFyZCBkaWdpdHMgcmV0YWluZWQuXHJcbiAgICAgIGsgPSBtYXRoY2VpbChQT1dfUFJFQ0lTSU9OIC8gTE9HX0JBU0UgKyAyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobklzQmlnKSB7XHJcbiAgICAgIGhhbGYgPSBuZXcgQmlnTnVtYmVyKDAuNSk7XHJcbiAgICAgIGlmIChuSXNOZWcpIG4ucyA9IDE7XHJcbiAgICAgIG5Jc09kZCA9IGlzT2RkKG4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaSA9IE1hdGguYWJzKCt2YWx1ZU9mKG4pKTtcclxuICAgICAgbklzT2RkID0gaSAlIDI7XHJcbiAgICB9XHJcblxyXG4gICAgeSA9IG5ldyBCaWdOdW1iZXIoT05FKTtcclxuXHJcbiAgICAvLyBQZXJmb3JtcyA1NCBsb29wIGl0ZXJhdGlvbnMgZm9yIG4gb2YgOTAwNzE5OTI1NDc0MDk5MS5cclxuICAgIGZvciAoOyA7KSB7XHJcblxyXG4gICAgICBpZiAobklzT2RkKSB7XHJcbiAgICAgICAgeSA9IHkudGltZXMoeCk7XHJcbiAgICAgICAgaWYgKCF5LmMpIGJyZWFrO1xyXG5cclxuICAgICAgICBpZiAoaykge1xyXG4gICAgICAgICAgaWYgKHkuYy5sZW5ndGggPiBrKSB5LmMubGVuZ3RoID0gaztcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTW9kRXhwKSB7XHJcbiAgICAgICAgICB5ID0geS5tb2QobSk7ICAgIC8veSA9IHkubWludXMoZGl2KHksIG0sIDAsIE1PRFVMT19NT0RFKS50aW1lcyhtKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaSkge1xyXG4gICAgICAgIGkgPSBtYXRoZmxvb3IoaSAvIDIpO1xyXG4gICAgICAgIGlmIChpID09PSAwKSBicmVhaztcclxuICAgICAgICBuSXNPZGQgPSBpICUgMjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBuID0gbi50aW1lcyhoYWxmKTtcclxuICAgICAgICByb3VuZChuLCBuLmUgKyAxLCAxKTtcclxuXHJcbiAgICAgICAgaWYgKG4uZSA+IDE0KSB7XHJcbiAgICAgICAgICBuSXNPZGQgPSBpc09kZChuKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaSA9ICt2YWx1ZU9mKG4pO1xyXG4gICAgICAgICAgaWYgKGkgPT09IDApIGJyZWFrO1xyXG4gICAgICAgICAgbklzT2RkID0gaSAlIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB4ID0geC50aW1lcyh4KTtcclxuXHJcbiAgICAgIGlmIChrKSB7XHJcbiAgICAgICAgaWYgKHguYyAmJiB4LmMubGVuZ3RoID4gaykgeC5jLmxlbmd0aCA9IGs7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXNNb2RFeHApIHtcclxuICAgICAgICB4ID0geC5tb2QobSk7ICAgIC8veCA9IHgubWludXMoZGl2KHgsIG0sIDAsIE1PRFVMT19NT0RFKS50aW1lcyhtKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNNb2RFeHApIHJldHVybiB5O1xyXG4gICAgaWYgKG5Jc05lZykgeSA9IE9ORS5kaXYoeSk7XHJcblxyXG4gICAgcmV0dXJuIG0gPyB5Lm1vZChtKSA6IGsgPyByb3VuZCh5LCBQT1dfUFJFQ0lTSU9OLCBST1VORElOR19NT0RFLCBtb3JlKSA6IHk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgbmV3IEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgcm91bmRlZCB0byBhbiBpbnRlZ2VyXHJcbiAgICogdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgUk9VTkRJTkdfTU9ERSBpZiBybSBpcyBvbWl0dGVkLlxyXG4gICAqXHJcbiAgICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gICAqXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtybX0nXHJcbiAgICovXHJcbiAgUC5pbnRlZ2VyVmFsdWUgPSBmdW5jdGlvbiAocm0pIHtcclxuICAgIHZhciBuID0gbmV3IEJpZ051bWJlcih0aGlzKTtcclxuICAgIGlmIChybSA9PSBudWxsKSBybSA9IFJPVU5ESU5HX01PREU7XHJcbiAgICBlbHNlIGludENoZWNrKHJtLCAwLCA4KTtcclxuICAgIHJldHVybiByb3VuZChuLCBuLmUgKyAxLCBybSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGlzIGVxdWFsIHRvIHRoZSB2YWx1ZSBvZiBCaWdOdW1iZXIoeSwgYiksXHJcbiAgICogb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICAgKi9cclxuICBQLmlzRXF1YWxUbyA9IFAuZXEgPSBmdW5jdGlvbiAoeSwgYikge1xyXG4gICAgcmV0dXJuIGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSkgPT09IDA7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGlzIGEgZmluaXRlIG51bWJlciwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICAgKi9cclxuICBQLmlzRmluaXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICEhdGhpcy5jO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIEJpZ051bWJlcih5LCBiKSxcclxuICAgKiBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqL1xyXG4gIFAuaXNHcmVhdGVyVGhhbiA9IFAuZ3QgPSBmdW5jdGlvbiAoeSwgYikge1xyXG4gICAgcmV0dXJuIGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSkgPiAwO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHZhbHVlIG9mXHJcbiAgICogQmlnTnVtYmVyKHksIGIpLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqL1xyXG4gIFAuaXNHcmVhdGVyVGhhbk9yRXF1YWxUbyA9IFAuZ3RlID0gZnVuY3Rpb24gKHksIGIpIHtcclxuICAgIHJldHVybiAoYiA9IGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSkpID09PSAxIHx8IGIgPT09IDA7XHJcblxyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBhbiBpbnRlZ2VyLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqL1xyXG4gIFAuaXNJbnRlZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICEhdGhpcy5jICYmIGJpdEZsb29yKHRoaXMuZSAvIExPR19CQVNFKSA+IHRoaXMuYy5sZW5ndGggLSAyO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZ051bWJlcih5LCBiKSxcclxuICAgKiBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqL1xyXG4gIFAuaXNMZXNzVGhhbiA9IFAubHQgPSBmdW5jdGlvbiAoeSwgYikge1xyXG4gICAgcmV0dXJuIGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSkgPCAwO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHZhbHVlIG9mXHJcbiAgICogQmlnTnVtYmVyKHksIGIpLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gICAqL1xyXG4gIFAuaXNMZXNzVGhhbk9yRXF1YWxUbyA9IFAubHRlID0gZnVuY3Rpb24gKHksIGIpIHtcclxuICAgIHJldHVybiAoYiA9IGNvbXBhcmUodGhpcywgbmV3IEJpZ051bWJlcih5LCBiKSkpID09PSAtMSB8fCBiID09PSAwO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBOYU4sIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAgICovXHJcbiAgUC5pc05hTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAhdGhpcy5zO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyBuZWdhdGl2ZSwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICAgKi9cclxuICBQLmlzTmVnYXRpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zIDwgMDtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgaXMgcG9zaXRpdmUsIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAgICovXHJcbiAgUC5pc1Bvc2l0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucyA+IDA7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGlzIDAgb3IgLTAsIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAgICovXHJcbiAgUC5pc1plcm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gISF0aGlzLmMgJiYgdGhpcy5jWzBdID09IDA7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogIG4gLSAwID0gblxyXG4gICAqICBuIC0gTiA9IE5cclxuICAgKiAgbiAtIEkgPSAtSVxyXG4gICAqICAwIC0gbiA9IC1uXHJcbiAgICogIDAgLSAwID0gMFxyXG4gICAqICAwIC0gTiA9IE5cclxuICAgKiAgMCAtIEkgPSAtSVxyXG4gICAqICBOIC0gbiA9IE5cclxuICAgKiAgTiAtIDAgPSBOXHJcbiAgICogIE4gLSBOID0gTlxyXG4gICAqICBOIC0gSSA9IE5cclxuICAgKiAgSSAtIG4gPSBJXHJcbiAgICogIEkgLSAwID0gSVxyXG4gICAqICBJIC0gTiA9IE5cclxuICAgKiAgSSAtIEkgPSBOXHJcbiAgICpcclxuICAgKiBSZXR1cm4gYSBuZXcgQmlnTnVtYmVyIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBtaW51cyB0aGUgdmFsdWUgb2ZcclxuICAgKiBCaWdOdW1iZXIoeSwgYikuXHJcbiAgICovXHJcbiAgUC5taW51cyA9IGZ1bmN0aW9uICh5LCBiKSB7XHJcbiAgICB2YXIgaSwgaiwgdCwgeExUeSxcclxuICAgICAgeCA9IHRoaXMsXHJcbiAgICAgIGEgPSB4LnM7XHJcblxyXG4gICAgeSA9IG5ldyBCaWdOdW1iZXIoeSwgYik7XHJcbiAgICBiID0geS5zO1xyXG5cclxuICAgIC8vIEVpdGhlciBOYU4/XHJcbiAgICBpZiAoIWEgfHwgIWIpIHJldHVybiBuZXcgQmlnTnVtYmVyKE5hTik7XHJcblxyXG4gICAgLy8gU2lnbnMgZGlmZmVyP1xyXG4gICAgaWYgKGEgIT0gYikge1xyXG4gICAgICB5LnMgPSAtYjtcclxuICAgICAgcmV0dXJuIHgucGx1cyh5KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgeGUgPSB4LmUgLyBMT0dfQkFTRSxcclxuICAgICAgeWUgPSB5LmUgLyBMT0dfQkFTRSxcclxuICAgICAgeGMgPSB4LmMsXHJcbiAgICAgIHljID0geS5jO1xyXG5cclxuICAgIGlmICgheGUgfHwgIXllKSB7XHJcblxyXG4gICAgICAvLyBFaXRoZXIgSW5maW5pdHk/XHJcbiAgICAgIGlmICgheGMgfHwgIXljKSByZXR1cm4geGMgPyAoeS5zID0gLWIsIHkpIDogbmV3IEJpZ051bWJlcih5YyA/IHggOiBOYU4pO1xyXG5cclxuICAgICAgLy8gRWl0aGVyIHplcm8/XHJcbiAgICAgIGlmICgheGNbMF0gfHwgIXljWzBdKSB7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB5IGlmIHkgaXMgbm9uLXplcm8sIHggaWYgeCBpcyBub24temVybywgb3IgemVybyBpZiBib3RoIGFyZSB6ZXJvLlxyXG4gICAgICAgIHJldHVybiB5Y1swXSA/ICh5LnMgPSAtYiwgeSkgOiBuZXcgQmlnTnVtYmVyKHhjWzBdID8geCA6XHJcblxyXG4gICAgICAgICAvLyBJRUVFIDc1NCAoMjAwOCkgNi4zOiBuIC0gbiA9IC0wIHdoZW4gcm91bmRpbmcgdG8gLUluZmluaXR5XHJcbiAgICAgICAgIFJPVU5ESU5HX01PREUgPT0gMyA/IC0wIDogMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB4ZSA9IGJpdEZsb29yKHhlKTtcclxuICAgIHllID0gYml0Rmxvb3IoeWUpO1xyXG4gICAgeGMgPSB4Yy5zbGljZSgpO1xyXG5cclxuICAgIC8vIERldGVybWluZSB3aGljaCBpcyB0aGUgYmlnZ2VyIG51bWJlci5cclxuICAgIGlmIChhID0geGUgLSB5ZSkge1xyXG5cclxuICAgICAgaWYgKHhMVHkgPSBhIDwgMCkge1xyXG4gICAgICAgIGEgPSAtYTtcclxuICAgICAgICB0ID0geGM7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeWUgPSB4ZTtcclxuICAgICAgICB0ID0geWM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHQucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgLy8gUHJlcGVuZCB6ZXJvcyB0byBlcXVhbGlzZSBleHBvbmVudHMuXHJcbiAgICAgIGZvciAoYiA9IGE7IGItLTsgdC5wdXNoKDApKTtcclxuICAgICAgdC5yZXZlcnNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgLy8gRXhwb25lbnRzIGVxdWFsLiBDaGVjayBkaWdpdCBieSBkaWdpdC5cclxuICAgICAgaiA9ICh4TFR5ID0gKGEgPSB4Yy5sZW5ndGgpIDwgKGIgPSB5Yy5sZW5ndGgpKSA/IGEgOiBiO1xyXG5cclxuICAgICAgZm9yIChhID0gYiA9IDA7IGIgPCBqOyBiKyspIHtcclxuXHJcbiAgICAgICAgaWYgKHhjW2JdICE9IHljW2JdKSB7XHJcbiAgICAgICAgICB4TFR5ID0geGNbYl0gPCB5Y1tiXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHggPCB5PyBQb2ludCB4YyB0byB0aGUgYXJyYXkgb2YgdGhlIGJpZ2dlciBudW1iZXIuXHJcbiAgICBpZiAoeExUeSkgdCA9IHhjLCB4YyA9IHljLCB5YyA9IHQsIHkucyA9IC15LnM7XHJcblxyXG4gICAgYiA9IChqID0geWMubGVuZ3RoKSAtIChpID0geGMubGVuZ3RoKTtcclxuXHJcbiAgICAvLyBBcHBlbmQgemVyb3MgdG8geGMgaWYgc2hvcnRlci5cclxuICAgIC8vIE5vIG5lZWQgdG8gYWRkIHplcm9zIHRvIHljIGlmIHNob3J0ZXIgYXMgc3VidHJhY3Qgb25seSBuZWVkcyB0byBzdGFydCBhdCB5Yy5sZW5ndGguXHJcbiAgICBpZiAoYiA+IDApIGZvciAoOyBiLS07IHhjW2krK10gPSAwKTtcclxuICAgIGIgPSBCQVNFIC0gMTtcclxuXHJcbiAgICAvLyBTdWJ0cmFjdCB5YyBmcm9tIHhjLlxyXG4gICAgZm9yICg7IGogPiBhOykge1xyXG5cclxuICAgICAgaWYgKHhjWy0tal0gPCB5Y1tqXSkge1xyXG4gICAgICAgIGZvciAoaSA9IGo7IGkgJiYgIXhjWy0taV07IHhjW2ldID0gYik7XHJcbiAgICAgICAgLS14Y1tpXTtcclxuICAgICAgICB4Y1tqXSArPSBCQVNFO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB4Y1tqXSAtPSB5Y1tqXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgbGVhZGluZyB6ZXJvcyBhbmQgYWRqdXN0IGV4cG9uZW50IGFjY29yZGluZ2x5LlxyXG4gICAgZm9yICg7IHhjWzBdID09IDA7IHhjLnNwbGljZSgwLCAxKSwgLS15ZSk7XHJcblxyXG4gICAgLy8gWmVybz9cclxuICAgIGlmICgheGNbMF0pIHtcclxuXHJcbiAgICAgIC8vIEZvbGxvd2luZyBJRUVFIDc1NCAoMjAwOCkgNi4zLFxyXG4gICAgICAvLyBuIC0gbiA9ICswICBidXQgIG4gLSBuID0gLTAgIHdoZW4gcm91bmRpbmcgdG93YXJkcyAtSW5maW5pdHkuXHJcbiAgICAgIHkucyA9IFJPVU5ESU5HX01PREUgPT0gMyA/IC0xIDogMTtcclxuICAgICAgeS5jID0gW3kuZSA9IDBdO1xyXG4gICAgICByZXR1cm4geTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBObyBuZWVkIHRvIGNoZWNrIGZvciBJbmZpbml0eSBhcyAreCAtICt5ICE9IEluZmluaXR5ICYmIC14IC0gLXkgIT0gSW5maW5pdHlcclxuICAgIC8vIGZvciBmaW5pdGUgeCBhbmQgeS5cclxuICAgIHJldHVybiBub3JtYWxpc2UoeSwgeGMsIHllKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiAgIG4gJSAwID0gIE5cclxuICAgKiAgIG4gJSBOID0gIE5cclxuICAgKiAgIG4gJSBJID0gIG5cclxuICAgKiAgIDAgJSBuID0gIDBcclxuICAgKiAgLTAgJSBuID0gLTBcclxuICAgKiAgIDAgJSAwID0gIE5cclxuICAgKiAgIDAgJSBOID0gIE5cclxuICAgKiAgIDAgJSBJID0gIDBcclxuICAgKiAgIE4gJSBuID0gIE5cclxuICAgKiAgIE4gJSAwID0gIE5cclxuICAgKiAgIE4gJSBOID0gIE5cclxuICAgKiAgIE4gJSBJID0gIE5cclxuICAgKiAgIEkgJSBuID0gIE5cclxuICAgKiAgIEkgJSAwID0gIE5cclxuICAgKiAgIEkgJSBOID0gIE5cclxuICAgKiAgIEkgJSBJID0gIE5cclxuICAgKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIG1vZHVsbyB0aGUgdmFsdWUgb2ZcclxuICAgKiBCaWdOdW1iZXIoeSwgYikuIFRoZSByZXN1bHQgZGVwZW5kcyBvbiB0aGUgdmFsdWUgb2YgTU9EVUxPX01PREUuXHJcbiAgICovXHJcbiAgUC5tb2R1bG8gPSBQLm1vZCA9IGZ1bmN0aW9uICh5LCBiKSB7XHJcbiAgICB2YXIgcSwgcyxcclxuICAgICAgeCA9IHRoaXM7XHJcblxyXG4gICAgeSA9IG5ldyBCaWdOdW1iZXIoeSwgYik7XHJcblxyXG4gICAgLy8gUmV0dXJuIE5hTiBpZiB4IGlzIEluZmluaXR5IG9yIE5hTiwgb3IgeSBpcyBOYU4gb3IgemVyby5cclxuICAgIGlmICgheC5jIHx8ICF5LnMgfHwgeS5jICYmICF5LmNbMF0pIHtcclxuICAgICAgcmV0dXJuIG5ldyBCaWdOdW1iZXIoTmFOKTtcclxuXHJcbiAgICAvLyBSZXR1cm4geCBpZiB5IGlzIEluZmluaXR5IG9yIHggaXMgemVyby5cclxuICAgIH0gZWxzZSBpZiAoIXkuYyB8fCB4LmMgJiYgIXguY1swXSkge1xyXG4gICAgICByZXR1cm4gbmV3IEJpZ051bWJlcih4KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoTU9EVUxPX01PREUgPT0gOSkge1xyXG5cclxuICAgICAgLy8gRXVjbGlkaWFuIGRpdmlzaW9uOiBxID0gc2lnbih5KSAqIGZsb29yKHggLyBhYnMoeSkpXHJcbiAgICAgIC8vIHIgPSB4IC0gcXkgICAgd2hlcmUgIDAgPD0gciA8IGFicyh5KVxyXG4gICAgICBzID0geS5zO1xyXG4gICAgICB5LnMgPSAxO1xyXG4gICAgICBxID0gZGl2KHgsIHksIDAsIDMpO1xyXG4gICAgICB5LnMgPSBzO1xyXG4gICAgICBxLnMgKj0gcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHEgPSBkaXYoeCwgeSwgMCwgTU9EVUxPX01PREUpO1xyXG4gICAgfVxyXG5cclxuICAgIHkgPSB4Lm1pbnVzKHEudGltZXMoeSkpO1xyXG5cclxuICAgIC8vIFRvIG1hdGNoIEphdmFTY3JpcHQgJSwgZW5zdXJlIHNpZ24gb2YgemVybyBpcyBzaWduIG9mIGRpdmlkZW5kLlxyXG4gICAgaWYgKCF5LmNbMF0gJiYgTU9EVUxPX01PREUgPT0gMSkgeS5zID0geC5zO1xyXG5cclxuICAgIHJldHVybiB5O1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqICBuICogMCA9IDBcclxuICAgKiAgbiAqIE4gPSBOXHJcbiAgICogIG4gKiBJID0gSVxyXG4gICAqICAwICogbiA9IDBcclxuICAgKiAgMCAqIDAgPSAwXHJcbiAgICogIDAgKiBOID0gTlxyXG4gICAqICAwICogSSA9IE5cclxuICAgKiAgTiAqIG4gPSBOXHJcbiAgICogIE4gKiAwID0gTlxyXG4gICAqICBOICogTiA9IE5cclxuICAgKiAgTiAqIEkgPSBOXHJcbiAgICogIEkgKiBuID0gSVxyXG4gICAqICBJICogMCA9IE5cclxuICAgKiAgSSAqIE4gPSBOXHJcbiAgICogIEkgKiBJID0gSVxyXG4gICAqXHJcbiAgICogUmV0dXJuIGEgbmV3IEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgbXVsdGlwbGllZCBieSB0aGUgdmFsdWVcclxuICAgKiBvZiBCaWdOdW1iZXIoeSwgYikuXHJcbiAgICovXHJcbiAgUC5tdWx0aXBsaWVkQnkgPSBQLnRpbWVzID0gZnVuY3Rpb24gKHksIGIpIHtcclxuICAgIHZhciBjLCBlLCBpLCBqLCBrLCBtLCB4Y0wsIHhsbywgeGhpLCB5Y0wsIHlsbywgeWhpLCB6YyxcclxuICAgICAgYmFzZSwgc3FydEJhc2UsXHJcbiAgICAgIHggPSB0aGlzLFxyXG4gICAgICB4YyA9IHguYyxcclxuICAgICAgeWMgPSAoeSA9IG5ldyBCaWdOdW1iZXIoeSwgYikpLmM7XHJcblxyXG4gICAgLy8gRWl0aGVyIE5hTiwgwrFJbmZpbml0eSBvciDCsTA/XHJcbiAgICBpZiAoIXhjIHx8ICF5YyB8fCAheGNbMF0gfHwgIXljWzBdKSB7XHJcblxyXG4gICAgICAvLyBSZXR1cm4gTmFOIGlmIGVpdGhlciBpcyBOYU4sIG9yIG9uZSBpcyAwIGFuZCB0aGUgb3RoZXIgaXMgSW5maW5pdHkuXHJcbiAgICAgIGlmICgheC5zIHx8ICF5LnMgfHwgeGMgJiYgIXhjWzBdICYmICF5YyB8fCB5YyAmJiAheWNbMF0gJiYgIXhjKSB7XHJcbiAgICAgICAgeS5jID0geS5lID0geS5zID0gbnVsbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB5LnMgKj0geC5zO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gwrFJbmZpbml0eSBpZiBlaXRoZXIgaXMgwrFJbmZpbml0eS5cclxuICAgICAgICBpZiAoIXhjIHx8ICF5Yykge1xyXG4gICAgICAgICAgeS5jID0geS5lID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIMKxMCBpZiBlaXRoZXIgaXMgwrEwLlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB5LmMgPSBbMF07XHJcbiAgICAgICAgICB5LmUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHk7XHJcbiAgICB9XHJcblxyXG4gICAgZSA9IGJpdEZsb29yKHguZSAvIExPR19CQVNFKSArIGJpdEZsb29yKHkuZSAvIExPR19CQVNFKTtcclxuICAgIHkucyAqPSB4LnM7XHJcbiAgICB4Y0wgPSB4Yy5sZW5ndGg7XHJcbiAgICB5Y0wgPSB5Yy5sZW5ndGg7XHJcblxyXG4gICAgLy8gRW5zdXJlIHhjIHBvaW50cyB0byBsb25nZXIgYXJyYXkgYW5kIHhjTCB0byBpdHMgbGVuZ3RoLlxyXG4gICAgaWYgKHhjTCA8IHljTCkgemMgPSB4YywgeGMgPSB5YywgeWMgPSB6YywgaSA9IHhjTCwgeGNMID0geWNMLCB5Y0wgPSBpO1xyXG5cclxuICAgIC8vIEluaXRpYWxpc2UgdGhlIHJlc3VsdCBhcnJheSB3aXRoIHplcm9zLlxyXG4gICAgZm9yIChpID0geGNMICsgeWNMLCB6YyA9IFtdOyBpLS07IHpjLnB1c2goMCkpO1xyXG5cclxuICAgIGJhc2UgPSBCQVNFO1xyXG4gICAgc3FydEJhc2UgPSBTUVJUX0JBU0U7XHJcblxyXG4gICAgZm9yIChpID0geWNMOyAtLWkgPj0gMDspIHtcclxuICAgICAgYyA9IDA7XHJcbiAgICAgIHlsbyA9IHljW2ldICUgc3FydEJhc2U7XHJcbiAgICAgIHloaSA9IHljW2ldIC8gc3FydEJhc2UgfCAwO1xyXG5cclxuICAgICAgZm9yIChrID0geGNMLCBqID0gaSArIGs7IGogPiBpOykge1xyXG4gICAgICAgIHhsbyA9IHhjWy0ta10gJSBzcXJ0QmFzZTtcclxuICAgICAgICB4aGkgPSB4Y1trXSAvIHNxcnRCYXNlIHwgMDtcclxuICAgICAgICBtID0geWhpICogeGxvICsgeGhpICogeWxvO1xyXG4gICAgICAgIHhsbyA9IHlsbyAqIHhsbyArICgobSAlIHNxcnRCYXNlKSAqIHNxcnRCYXNlKSArIHpjW2pdICsgYztcclxuICAgICAgICBjID0gKHhsbyAvIGJhc2UgfCAwKSArIChtIC8gc3FydEJhc2UgfCAwKSArIHloaSAqIHhoaTtcclxuICAgICAgICB6Y1tqLS1dID0geGxvICUgYmFzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgemNbal0gPSBjO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjKSB7XHJcbiAgICAgICsrZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHpjLnNwbGljZSgwLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbm9ybWFsaXNlKHksIHpjLCBlKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBuZXcgQmlnTnVtYmVyIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBuZWdhdGVkLFxyXG4gICAqIGkuZS4gbXVsdGlwbGllZCBieSAtMS5cclxuICAgKi9cclxuICBQLm5lZ2F0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgeCA9IG5ldyBCaWdOdW1iZXIodGhpcyk7XHJcbiAgICB4LnMgPSAteC5zIHx8IG51bGw7XHJcbiAgICByZXR1cm4geDtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiAgbiArIDAgPSBuXHJcbiAgICogIG4gKyBOID0gTlxyXG4gICAqICBuICsgSSA9IElcclxuICAgKiAgMCArIG4gPSBuXHJcbiAgICogIDAgKyAwID0gMFxyXG4gICAqICAwICsgTiA9IE5cclxuICAgKiAgMCArIEkgPSBJXHJcbiAgICogIE4gKyBuID0gTlxyXG4gICAqICBOICsgMCA9IE5cclxuICAgKiAgTiArIE4gPSBOXHJcbiAgICogIE4gKyBJID0gTlxyXG4gICAqICBJICsgbiA9IElcclxuICAgKiAgSSArIDAgPSBJXHJcbiAgICogIEkgKyBOID0gTlxyXG4gICAqICBJICsgSSA9IElcclxuICAgKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIHBsdXMgdGhlIHZhbHVlIG9mXHJcbiAgICogQmlnTnVtYmVyKHksIGIpLlxyXG4gICAqL1xyXG4gIFAucGx1cyA9IGZ1bmN0aW9uICh5LCBiKSB7XHJcbiAgICB2YXIgdCxcclxuICAgICAgeCA9IHRoaXMsXHJcbiAgICAgIGEgPSB4LnM7XHJcblxyXG4gICAgeSA9IG5ldyBCaWdOdW1iZXIoeSwgYik7XHJcbiAgICBiID0geS5zO1xyXG5cclxuICAgIC8vIEVpdGhlciBOYU4/XHJcbiAgICBpZiAoIWEgfHwgIWIpIHJldHVybiBuZXcgQmlnTnVtYmVyKE5hTik7XHJcblxyXG4gICAgLy8gU2lnbnMgZGlmZmVyP1xyXG4gICAgIGlmIChhICE9IGIpIHtcclxuICAgICAgeS5zID0gLWI7XHJcbiAgICAgIHJldHVybiB4Lm1pbnVzKHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB4ZSA9IHguZSAvIExPR19CQVNFLFxyXG4gICAgICB5ZSA9IHkuZSAvIExPR19CQVNFLFxyXG4gICAgICB4YyA9IHguYyxcclxuICAgICAgeWMgPSB5LmM7XHJcblxyXG4gICAgaWYgKCF4ZSB8fCAheWUpIHtcclxuXHJcbiAgICAgIC8vIFJldHVybiDCsUluZmluaXR5IGlmIGVpdGhlciDCsUluZmluaXR5LlxyXG4gICAgICBpZiAoIXhjIHx8ICF5YykgcmV0dXJuIG5ldyBCaWdOdW1iZXIoYSAvIDApO1xyXG5cclxuICAgICAgLy8gRWl0aGVyIHplcm8/XHJcbiAgICAgIC8vIFJldHVybiB5IGlmIHkgaXMgbm9uLXplcm8sIHggaWYgeCBpcyBub24temVybywgb3IgemVybyBpZiBib3RoIGFyZSB6ZXJvLlxyXG4gICAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgcmV0dXJuIHljWzBdID8geSA6IG5ldyBCaWdOdW1iZXIoeGNbMF0gPyB4IDogYSAqIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHhlID0gYml0Rmxvb3IoeGUpO1xyXG4gICAgeWUgPSBiaXRGbG9vcih5ZSk7XHJcbiAgICB4YyA9IHhjLnNsaWNlKCk7XHJcblxyXG4gICAgLy8gUHJlcGVuZCB6ZXJvcyB0byBlcXVhbGlzZSBleHBvbmVudHMuIEZhc3RlciB0byB1c2UgcmV2ZXJzZSB0aGVuIGRvIHVuc2hpZnRzLlxyXG4gICAgaWYgKGEgPSB4ZSAtIHllKSB7XHJcbiAgICAgIGlmIChhID4gMCkge1xyXG4gICAgICAgIHllID0geGU7XHJcbiAgICAgICAgdCA9IHljO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGEgPSAtYTtcclxuICAgICAgICB0ID0geGM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHQucmV2ZXJzZSgpO1xyXG4gICAgICBmb3IgKDsgYS0tOyB0LnB1c2goMCkpO1xyXG4gICAgICB0LnJldmVyc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBhID0geGMubGVuZ3RoO1xyXG4gICAgYiA9IHljLmxlbmd0aDtcclxuXHJcbiAgICAvLyBQb2ludCB4YyB0byB0aGUgbG9uZ2VyIGFycmF5LCBhbmQgYiB0byB0aGUgc2hvcnRlciBsZW5ndGguXHJcbiAgICBpZiAoYSAtIGIgPCAwKSB0ID0geWMsIHljID0geGMsIHhjID0gdCwgYiA9IGE7XHJcblxyXG4gICAgLy8gT25seSBzdGFydCBhZGRpbmcgYXQgeWMubGVuZ3RoIC0gMSBhcyB0aGUgZnVydGhlciBkaWdpdHMgb2YgeGMgY2FuIGJlIGlnbm9yZWQuXHJcbiAgICBmb3IgKGEgPSAwOyBiOykge1xyXG4gICAgICBhID0gKHhjWy0tYl0gPSB4Y1tiXSArIHljW2JdICsgYSkgLyBCQVNFIHwgMDtcclxuICAgICAgeGNbYl0gPSBCQVNFID09PSB4Y1tiXSA/IDAgOiB4Y1tiXSAlIEJBU0U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGEpIHtcclxuICAgICAgeGMgPSBbYV0uY29uY2F0KHhjKTtcclxuICAgICAgKyt5ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBObyBuZWVkIHRvIGNoZWNrIGZvciB6ZXJvLCBhcyAreCArICt5ICE9IDAgJiYgLXggKyAteSAhPSAwXHJcbiAgICAvLyB5ZSA9IE1BWF9FWFAgKyAxIHBvc3NpYmxlXHJcbiAgICByZXR1cm4gbm9ybWFsaXNlKHksIHhjLCB5ZSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogSWYgc2QgaXMgdW5kZWZpbmVkIG9yIG51bGwgb3IgdHJ1ZSBvciBmYWxzZSwgcmV0dXJuIHRoZSBudW1iZXIgb2Ygc2lnbmlmaWNhbnQgZGlnaXRzIG9mXHJcbiAgICogdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyLCBvciBudWxsIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpcyDCsUluZmluaXR5IG9yIE5hTi5cclxuICAgKiBJZiBzZCBpcyB0cnVlIGluY2x1ZGUgaW50ZWdlci1wYXJ0IHRyYWlsaW5nIHplcm9zIGluIHRoZSBjb3VudC5cclxuICAgKlxyXG4gICAqIE90aGVyd2lzZSwgaWYgc2QgaXMgYSBudW1iZXIsIHJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXNcclxuICAgKiBCaWdOdW1iZXIgcm91bmRlZCB0byBhIG1heGltdW0gb2Ygc2Qgc2lnbmlmaWNhbnQgZGlnaXRzIHVzaW5nIHJvdW5kaW5nIG1vZGUgcm0sIG9yXHJcbiAgICogUk9VTkRJTkdfTU9ERSBpZiBybSBpcyBvbWl0dGVkLlxyXG4gICAqXHJcbiAgICogc2Qge251bWJlcnxib29sZWFufSBudW1iZXI6IHNpZ25pZmljYW50IGRpZ2l0czogaW50ZWdlciwgMSB0byBNQVggaW5jbHVzaXZlLlxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbjogd2hldGhlciB0byBjb3VudCBpbnRlZ2VyLXBhcnQgdHJhaWxpbmcgemVyb3M6IHRydWUgb3IgZmFsc2UuXHJcbiAgICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gICAqXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtzZHxybX0nXHJcbiAgICovXHJcbiAgUC5wcmVjaXNpb24gPSBQLnNkID0gZnVuY3Rpb24gKHNkLCBybSkge1xyXG4gICAgdmFyIGMsIG4sIHYsXHJcbiAgICAgIHggPSB0aGlzO1xyXG5cclxuICAgIGlmIChzZCAhPSBudWxsICYmIHNkICE9PSAhIXNkKSB7XHJcbiAgICAgIGludENoZWNrKHNkLCAxLCBNQVgpO1xyXG4gICAgICBpZiAocm0gPT0gbnVsbCkgcm0gPSBST1VORElOR19NT0RFO1xyXG4gICAgICBlbHNlIGludENoZWNrKHJtLCAwLCA4KTtcclxuXHJcbiAgICAgIHJldHVybiByb3VuZChuZXcgQmlnTnVtYmVyKHgpLCBzZCwgcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghKGMgPSB4LmMpKSByZXR1cm4gbnVsbDtcclxuICAgIHYgPSBjLmxlbmd0aCAtIDE7XHJcbiAgICBuID0gdiAqIExPR19CQVNFICsgMTtcclxuXHJcbiAgICBpZiAodiA9IGNbdl0pIHtcclxuXHJcbiAgICAgIC8vIFN1YnRyYWN0IHRoZSBudW1iZXIgb2YgdHJhaWxpbmcgemVyb3Mgb2YgdGhlIGxhc3QgZWxlbWVudC5cclxuICAgICAgZm9yICg7IHYgJSAxMCA9PSAwOyB2IC89IDEwLCBuLS0pO1xyXG5cclxuICAgICAgLy8gQWRkIHRoZSBudW1iZXIgb2YgZGlnaXRzIG9mIHRoZSBmaXJzdCBlbGVtZW50LlxyXG4gICAgICBmb3IgKHYgPSBjWzBdOyB2ID49IDEwOyB2IC89IDEwLCBuKyspO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZCAmJiB4LmUgKyAxID4gbikgbiA9IHguZSArIDE7XHJcblxyXG4gICAgcmV0dXJuIG47XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgbmV3IEJpZ051bWJlciB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgc2hpZnRlZCBieSBrIHBsYWNlc1xyXG4gICAqIChwb3dlcnMgb2YgMTApLiBTaGlmdCB0byB0aGUgcmlnaHQgaWYgbiA+IDAsIGFuZCB0byB0aGUgbGVmdCBpZiBuIDwgMC5cclxuICAgKlxyXG4gICAqIGsge251bWJlcn0gSW50ZWdlciwgLU1BWF9TQUZFX0lOVEVHRVIgdG8gTUFYX1NBRkVfSU5URUdFUiBpbmNsdXNpdmUuXHJcbiAgICpcclxuICAgKiAnW0JpZ051bWJlciBFcnJvcl0gQXJndW1lbnQge25vdCBhIHByaW1pdGl2ZSBudW1iZXJ8bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfToge2t9J1xyXG4gICAqL1xyXG4gIFAuc2hpZnRlZEJ5ID0gZnVuY3Rpb24gKGspIHtcclxuICAgIGludENoZWNrKGssIC1NQVhfU0FGRV9JTlRFR0VSLCBNQVhfU0FGRV9JTlRFR0VSKTtcclxuICAgIHJldHVybiB0aGlzLnRpbWVzKCcxZScgKyBrKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiAgc3FydCgtbikgPSAgTlxyXG4gICAqICBzcXJ0KE4pID0gIE5cclxuICAgKiAgc3FydCgtSSkgPSAgTlxyXG4gICAqICBzcXJ0KEkpID0gIElcclxuICAgKiAgc3FydCgwKSA9ICAwXHJcbiAgICogIHNxcnQoLTApID0gLTBcclxuICAgKlxyXG4gICAqIFJldHVybiBhIG5ldyBCaWdOdW1iZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHNxdWFyZSByb290IG9mIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlcixcclxuICAgKiByb3VuZGVkIGFjY29yZGluZyB0byBERUNJTUFMX1BMQUNFUyBhbmQgUk9VTkRJTkdfTU9ERS5cclxuICAgKi9cclxuICBQLnNxdWFyZVJvb3QgPSBQLnNxcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbSwgbiwgciwgcmVwLCB0LFxyXG4gICAgICB4ID0gdGhpcyxcclxuICAgICAgYyA9IHguYyxcclxuICAgICAgcyA9IHgucyxcclxuICAgICAgZSA9IHguZSxcclxuICAgICAgZHAgPSBERUNJTUFMX1BMQUNFUyArIDQsXHJcbiAgICAgIGhhbGYgPSBuZXcgQmlnTnVtYmVyKCcwLjUnKTtcclxuXHJcbiAgICAvLyBOZWdhdGl2ZS9OYU4vSW5maW5pdHkvemVybz9cclxuICAgIGlmIChzICE9PSAxIHx8ICFjIHx8ICFjWzBdKSB7XHJcbiAgICAgIHJldHVybiBuZXcgQmlnTnVtYmVyKCFzIHx8IHMgPCAwICYmICghYyB8fCBjWzBdKSA/IE5hTiA6IGMgPyB4IDogMSAvIDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluaXRpYWwgZXN0aW1hdGUuXHJcbiAgICBzID0gTWF0aC5zcXJ0KCt2YWx1ZU9mKHgpKTtcclxuXHJcbiAgICAvLyBNYXRoLnNxcnQgdW5kZXJmbG93L292ZXJmbG93P1xyXG4gICAgLy8gUGFzcyB4IHRvIE1hdGguc3FydCBhcyBpbnRlZ2VyLCB0aGVuIGFkanVzdCB0aGUgZXhwb25lbnQgb2YgdGhlIHJlc3VsdC5cclxuICAgIGlmIChzID09IDAgfHwgcyA9PSAxIC8gMCkge1xyXG4gICAgICBuID0gY29lZmZUb1N0cmluZyhjKTtcclxuICAgICAgaWYgKChuLmxlbmd0aCArIGUpICUgMiA9PSAwKSBuICs9ICcwJztcclxuICAgICAgcyA9IE1hdGguc3FydCgrbik7XHJcbiAgICAgIGUgPSBiaXRGbG9vcigoZSArIDEpIC8gMikgLSAoZSA8IDAgfHwgZSAlIDIpO1xyXG5cclxuICAgICAgaWYgKHMgPT0gMSAvIDApIHtcclxuICAgICAgICBuID0gJzVlJyArIGU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbiA9IHMudG9FeHBvbmVudGlhbCgpO1xyXG4gICAgICAgIG4gPSBuLnNsaWNlKDAsIG4uaW5kZXhPZignZScpICsgMSkgKyBlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByID0gbmV3IEJpZ051bWJlcihuKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHIgPSBuZXcgQmlnTnVtYmVyKHMgKyAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHplcm8uXHJcbiAgICAvLyByIGNvdWxkIGJlIHplcm8gaWYgTUlOX0VYUCBpcyBjaGFuZ2VkIGFmdGVyIHRoZSB0aGlzIHZhbHVlIHdhcyBjcmVhdGVkLlxyXG4gICAgLy8gVGhpcyB3b3VsZCBjYXVzZSBhIGRpdmlzaW9uIGJ5IHplcm8gKHgvdCkgYW5kIGhlbmNlIEluZmluaXR5IGJlbG93LCB3aGljaCB3b3VsZCBjYXVzZVxyXG4gICAgLy8gY29lZmZUb1N0cmluZyB0byB0aHJvdy5cclxuICAgIGlmIChyLmNbMF0pIHtcclxuICAgICAgZSA9IHIuZTtcclxuICAgICAgcyA9IGUgKyBkcDtcclxuICAgICAgaWYgKHMgPCAzKSBzID0gMDtcclxuXHJcbiAgICAgIC8vIE5ld3Rvbi1SYXBoc29uIGl0ZXJhdGlvbi5cclxuICAgICAgZm9yICg7IDspIHtcclxuICAgICAgICB0ID0gcjtcclxuICAgICAgICByID0gaGFsZi50aW1lcyh0LnBsdXMoZGl2KHgsIHQsIGRwLCAxKSkpO1xyXG5cclxuICAgICAgICBpZiAoY29lZmZUb1N0cmluZyh0LmMpLnNsaWNlKDAsIHMpID09PSAobiA9IGNvZWZmVG9TdHJpbmcoci5jKSkuc2xpY2UoMCwgcykpIHtcclxuXHJcbiAgICAgICAgICAvLyBUaGUgZXhwb25lbnQgb2YgciBtYXkgaGVyZSBiZSBvbmUgbGVzcyB0aGFuIHRoZSBmaW5hbCByZXN1bHQgZXhwb25lbnQsXHJcbiAgICAgICAgICAvLyBlLmcgMC4wMDA5OTk5IChlLTQpIC0tPiAwLjAwMSAoZS0zKSwgc28gYWRqdXN0IHMgc28gdGhlIHJvdW5kaW5nIGRpZ2l0c1xyXG4gICAgICAgICAgLy8gYXJlIGluZGV4ZWQgY29ycmVjdGx5LlxyXG4gICAgICAgICAgaWYgKHIuZSA8IGUpIC0tcztcclxuICAgICAgICAgIG4gPSBuLnNsaWNlKHMgLSAzLCBzICsgMSk7XHJcblxyXG4gICAgICAgICAgLy8gVGhlIDR0aCByb3VuZGluZyBkaWdpdCBtYXkgYmUgaW4gZXJyb3IgYnkgLTEgc28gaWYgdGhlIDQgcm91bmRpbmcgZGlnaXRzXHJcbiAgICAgICAgICAvLyBhcmUgOTk5OSBvciA0OTk5IChpLmUuIGFwcHJvYWNoaW5nIGEgcm91bmRpbmcgYm91bmRhcnkpIGNvbnRpbnVlIHRoZVxyXG4gICAgICAgICAgLy8gaXRlcmF0aW9uLlxyXG4gICAgICAgICAgaWYgKG4gPT0gJzk5OTknIHx8ICFyZXAgJiYgbiA9PSAnNDk5OScpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb25seSwgY2hlY2sgdG8gc2VlIGlmIHJvdW5kaW5nIHVwIGdpdmVzIHRoZVxyXG4gICAgICAgICAgICAvLyBleGFjdCByZXN1bHQgYXMgdGhlIG5pbmVzIG1heSBpbmZpbml0ZWx5IHJlcGVhdC5cclxuICAgICAgICAgICAgaWYgKCFyZXApIHtcclxuICAgICAgICAgICAgICByb3VuZCh0LCB0LmUgKyBERUNJTUFMX1BMQUNFUyArIDIsIDApO1xyXG5cclxuICAgICAgICAgICAgICBpZiAodC50aW1lcyh0KS5lcSh4KSkge1xyXG4gICAgICAgICAgICAgICAgciA9IHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRwICs9IDQ7XHJcbiAgICAgICAgICAgIHMgKz0gNDtcclxuICAgICAgICAgICAgcmVwID0gMTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiByb3VuZGluZyBkaWdpdHMgYXJlIG51bGwsIDB7MCw0fSBvciA1MHswLDN9LCBjaGVjayBmb3IgZXhhY3RcclxuICAgICAgICAgICAgLy8gcmVzdWx0LiBJZiBub3QsIHRoZW4gdGhlcmUgYXJlIGZ1cnRoZXIgZGlnaXRzIGFuZCBtIHdpbGwgYmUgdHJ1dGh5LlxyXG4gICAgICAgICAgICBpZiAoIStuIHx8ICErbi5zbGljZSgxKSAmJiBuLmNoYXJBdCgwKSA9PSAnNScpIHtcclxuXHJcbiAgICAgICAgICAgICAgLy8gVHJ1bmNhdGUgdG8gdGhlIGZpcnN0IHJvdW5kaW5nIGRpZ2l0LlxyXG4gICAgICAgICAgICAgIHJvdW5kKHIsIHIuZSArIERFQ0lNQUxfUExBQ0VTICsgMiwgMSk7XHJcbiAgICAgICAgICAgICAgbSA9ICFyLnRpbWVzKHIpLmVxKHgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm91bmQociwgci5lICsgREVDSU1BTF9QTEFDRVMgKyAxLCBST1VORElOR19NT0RFLCBtKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpbiBleHBvbmVudGlhbCBub3RhdGlvbiBhbmRcclxuICAgKiByb3VuZGVkIHVzaW5nIFJPVU5ESU5HX01PREUgdG8gZHAgZml4ZWQgZGVjaW1hbCBwbGFjZXMuXHJcbiAgICpcclxuICAgKiBbZHBdIHtudW1iZXJ9IERlY2ltYWwgcGxhY2VzLiBJbnRlZ2VyLCAwIHRvIE1BWCBpbmNsdXNpdmUuXHJcbiAgICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gICAqXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtkcHxybX0nXHJcbiAgICovXHJcbiAgUC50b0V4cG9uZW50aWFsID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gICAgaWYgKGRwICE9IG51bGwpIHtcclxuICAgICAgaW50Q2hlY2soZHAsIDAsIE1BWCk7XHJcbiAgICAgIGRwKys7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybWF0KHRoaXMsIGRwLCBybSwgMSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgaW4gZml4ZWQtcG9pbnQgbm90YXRpb24gcm91bmRpbmdcclxuICAgKiB0byBkcCBmaXhlZCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBST1VORElOR19NT0RFIGlmIHJtIGlzIG9taXR0ZWQuXHJcbiAgICpcclxuICAgKiBOb3RlOiBhcyB3aXRoIEphdmFTY3JpcHQncyBudW1iZXIgdHlwZSwgKC0wKS50b0ZpeGVkKDApIGlzICcwJyxcclxuICAgKiBidXQgZS5nLiAoLTAuMDAwMDEpLnRvRml4ZWQoMCkgaXMgJy0wJy5cclxuICAgKlxyXG4gICAqIFtkcF0ge251bWJlcn0gRGVjaW1hbCBwbGFjZXMuIEludGVnZXIsIDAgdG8gTUFYIGluY2x1c2l2ZS5cclxuICAgKiBbcm1dIHtudW1iZXJ9IFJvdW5kaW5nIG1vZGUuIEludGVnZXIsIDAgdG8gOCBpbmNsdXNpdmUuXHJcbiAgICpcclxuICAgKiAnW0JpZ051bWJlciBFcnJvcl0gQXJndW1lbnQge25vdCBhIHByaW1pdGl2ZSBudW1iZXJ8bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfToge2RwfHJtfSdcclxuICAgKi9cclxuICBQLnRvRml4ZWQgPSBmdW5jdGlvbiAoZHAsIHJtKSB7XHJcbiAgICBpZiAoZHAgIT0gbnVsbCkge1xyXG4gICAgICBpbnRDaGVjayhkcCwgMCwgTUFYKTtcclxuICAgICAgZHAgPSBkcCArIHRoaXMuZSArIDE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybWF0KHRoaXMsIGRwLCBybSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWdOdW1iZXIgaW4gZml4ZWQtcG9pbnQgbm90YXRpb24gcm91bmRlZFxyXG4gICAqIHVzaW5nIHJtIG9yIFJPVU5ESU5HX01PREUgdG8gZHAgZGVjaW1hbCBwbGFjZXMsIGFuZCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBwcm9wZXJ0aWVzXHJcbiAgICogb2YgdGhlIGZvcm1hdCBvciBGT1JNQVQgb2JqZWN0IChzZWUgQmlnTnVtYmVyLnNldCkuXHJcbiAgICpcclxuICAgKiBUaGUgZm9ybWF0dGluZyBvYmplY3QgbWF5IGNvbnRhaW4gc29tZSBvciBhbGwgb2YgdGhlIHByb3BlcnRpZXMgc2hvd24gYmVsb3cuXHJcbiAgICpcclxuICAgKiBGT1JNQVQgPSB7XHJcbiAgICogICBwcmVmaXg6ICcnLFxyXG4gICAqICAgZ3JvdXBTaXplOiAzLFxyXG4gICAqICAgc2Vjb25kYXJ5R3JvdXBTaXplOiAwLFxyXG4gICAqICAgZ3JvdXBTZXBhcmF0b3I6ICcsJyxcclxuICAgKiAgIGRlY2ltYWxTZXBhcmF0b3I6ICcuJyxcclxuICAgKiAgIGZyYWN0aW9uR3JvdXBTaXplOiAwLFxyXG4gICAqICAgZnJhY3Rpb25Hcm91cFNlcGFyYXRvcjogJ1xceEEwJywgICAgICAvLyBub24tYnJlYWtpbmcgc3BhY2VcclxuICAgKiAgIHN1ZmZpeDogJydcclxuICAgKiB9O1xyXG4gICAqXHJcbiAgICogW2RwXSB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlcy4gSW50ZWdlciwgMCB0byBNQVggaW5jbHVzaXZlLlxyXG4gICAqIFtybV0ge251bWJlcn0gUm91bmRpbmcgbW9kZS4gSW50ZWdlciwgMCB0byA4IGluY2x1c2l2ZS5cclxuICAgKiBbZm9ybWF0XSB7b2JqZWN0fSBGb3JtYXR0aW5nIG9wdGlvbnMuIFNlZSBGT1JNQVQgcGJqZWN0IGFib3ZlLlxyXG4gICAqXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtkcHxybX0nXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IG5vdCBhbiBvYmplY3Q6IHtmb3JtYXR9J1xyXG4gICAqL1xyXG4gIFAudG9Gb3JtYXQgPSBmdW5jdGlvbiAoZHAsIHJtLCBmb3JtYXQpIHtcclxuICAgIHZhciBzdHIsXHJcbiAgICAgIHggPSB0aGlzO1xyXG5cclxuICAgIGlmIChmb3JtYXQgPT0gbnVsbCkge1xyXG4gICAgICBpZiAoZHAgIT0gbnVsbCAmJiBybSAmJiB0eXBlb2Ygcm0gPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBmb3JtYXQgPSBybTtcclxuICAgICAgICBybSA9IG51bGw7XHJcbiAgICAgIH0gZWxzZSBpZiAoZHAgJiYgdHlwZW9mIGRwID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgZm9ybWF0ID0gZHA7XHJcbiAgICAgICAgZHAgPSBybSA9IG51bGw7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9ybWF0ID0gRk9STUFUO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmb3JtYXQgIT0gJ29iamVjdCcpIHtcclxuICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAoYmlnbnVtYmVyRXJyb3IgKyAnQXJndW1lbnQgbm90IGFuIG9iamVjdDogJyArIGZvcm1hdCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RyID0geC50b0ZpeGVkKGRwLCBybSk7XHJcblxyXG4gICAgaWYgKHguYykge1xyXG4gICAgICB2YXIgaSxcclxuICAgICAgICBhcnIgPSBzdHIuc3BsaXQoJy4nKSxcclxuICAgICAgICBnMSA9ICtmb3JtYXQuZ3JvdXBTaXplLFxyXG4gICAgICAgIGcyID0gK2Zvcm1hdC5zZWNvbmRhcnlHcm91cFNpemUsXHJcbiAgICAgICAgZ3JvdXBTZXBhcmF0b3IgPSBmb3JtYXQuZ3JvdXBTZXBhcmF0b3IgfHwgJycsXHJcbiAgICAgICAgaW50UGFydCA9IGFyclswXSxcclxuICAgICAgICBmcmFjdGlvblBhcnQgPSBhcnJbMV0sXHJcbiAgICAgICAgaXNOZWcgPSB4LnMgPCAwLFxyXG4gICAgICAgIGludERpZ2l0cyA9IGlzTmVnID8gaW50UGFydC5zbGljZSgxKSA6IGludFBhcnQsXHJcbiAgICAgICAgbGVuID0gaW50RGlnaXRzLmxlbmd0aDtcclxuXHJcbiAgICAgIGlmIChnMikgaSA9IGcxLCBnMSA9IGcyLCBnMiA9IGksIGxlbiAtPSBpO1xyXG5cclxuICAgICAgaWYgKGcxID4gMCAmJiBsZW4gPiAwKSB7XHJcbiAgICAgICAgaSA9IGxlbiAlIGcxIHx8IGcxO1xyXG4gICAgICAgIGludFBhcnQgPSBpbnREaWdpdHMuc3Vic3RyKDAsIGkpO1xyXG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpICs9IGcxKSBpbnRQYXJ0ICs9IGdyb3VwU2VwYXJhdG9yICsgaW50RGlnaXRzLnN1YnN0cihpLCBnMSk7XHJcbiAgICAgICAgaWYgKGcyID4gMCkgaW50UGFydCArPSBncm91cFNlcGFyYXRvciArIGludERpZ2l0cy5zbGljZShpKTtcclxuICAgICAgICBpZiAoaXNOZWcpIGludFBhcnQgPSAnLScgKyBpbnRQYXJ0O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzdHIgPSBmcmFjdGlvblBhcnRcclxuICAgICAgID8gaW50UGFydCArIChmb3JtYXQuZGVjaW1hbFNlcGFyYXRvciB8fCAnJykgKyAoKGcyID0gK2Zvcm1hdC5mcmFjdGlvbkdyb3VwU2l6ZSlcclxuICAgICAgICA/IGZyYWN0aW9uUGFydC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxkeycgKyBnMiArICd9XFxcXEInLCAnZycpLFxyXG4gICAgICAgICAnJCYnICsgKGZvcm1hdC5mcmFjdGlvbkdyb3VwU2VwYXJhdG9yIHx8ICcnKSlcclxuICAgICAgICA6IGZyYWN0aW9uUGFydClcclxuICAgICAgIDogaW50UGFydDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKGZvcm1hdC5wcmVmaXggfHwgJycpICsgc3RyICsgKGZvcm1hdC5zdWZmaXggfHwgJycpO1xyXG4gIH07XHJcblxyXG5cclxuICAvKlxyXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiB0d28gQmlnTnVtYmVycyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGFzIGEgc2ltcGxlXHJcbiAgICogZnJhY3Rpb24gd2l0aCBhbiBpbnRlZ2VyIG51bWVyYXRvciBhbmQgYW4gaW50ZWdlciBkZW5vbWluYXRvci5cclxuICAgKiBUaGUgZGVub21pbmF0b3Igd2lsbCBiZSBhIHBvc2l0aXZlIG5vbi16ZXJvIHZhbHVlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkXHJcbiAgICogbWF4aW11bSBkZW5vbWluYXRvci4gSWYgYSBtYXhpbXVtIGRlbm9taW5hdG9yIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBkZW5vbWluYXRvciB3aWxsIGJlXHJcbiAgICogdGhlIGxvd2VzdCB2YWx1ZSBuZWNlc3NhcnkgdG8gcmVwcmVzZW50IHRoZSBudW1iZXIgZXhhY3RseS5cclxuICAgKlxyXG4gICAqIFttZF0ge251bWJlcnxzdHJpbmd8QmlnTnVtYmVyfSBJbnRlZ2VyID49IDEsIG9yIEluZmluaXR5LiBUaGUgbWF4aW11bSBkZW5vbWluYXRvci5cclxuICAgKlxyXG4gICAqICdbQmlnTnVtYmVyIEVycm9yXSBBcmd1bWVudCB7bm90IGFuIGludGVnZXJ8b3V0IG9mIHJhbmdlfSA6IHttZH0nXHJcbiAgICovXHJcbiAgUC50b0ZyYWN0aW9uID0gZnVuY3Rpb24gKG1kKSB7XHJcbiAgICB2YXIgZCwgZDAsIGQxLCBkMiwgZSwgZXhwLCBuLCBuMCwgbjEsIHEsIHIsIHMsXHJcbiAgICAgIHggPSB0aGlzLFxyXG4gICAgICB4YyA9IHguYztcclxuXHJcbiAgICBpZiAobWQgIT0gbnVsbCkge1xyXG4gICAgICBuID0gbmV3IEJpZ051bWJlcihtZCk7XHJcblxyXG4gICAgICAvLyBUaHJvdyBpZiBtZCBpcyBsZXNzIHRoYW4gb25lIG9yIGlzIG5vdCBhbiBpbnRlZ2VyLCB1bmxlc3MgaXQgaXMgSW5maW5pdHkuXHJcbiAgICAgIGlmICghbi5pc0ludGVnZXIoKSAmJiAobi5jIHx8IG4ucyAhPT0gMSkgfHwgbi5sdChPTkUpKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3JcclxuICAgICAgICAgIChiaWdudW1iZXJFcnJvciArICdBcmd1bWVudCAnICtcclxuICAgICAgICAgICAgKG4uaXNJbnRlZ2VyKCkgPyAnb3V0IG9mIHJhbmdlOiAnIDogJ25vdCBhbiBpbnRlZ2VyOiAnKSArIHZhbHVlT2YobikpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF4YykgcmV0dXJuIG5ldyBCaWdOdW1iZXIoeCk7XHJcblxyXG4gICAgZCA9IG5ldyBCaWdOdW1iZXIoT05FKTtcclxuICAgIG4xID0gZDAgPSBuZXcgQmlnTnVtYmVyKE9ORSk7XHJcbiAgICBkMSA9IG4wID0gbmV3IEJpZ051bWJlcihPTkUpO1xyXG4gICAgcyA9IGNvZWZmVG9TdHJpbmcoeGMpO1xyXG5cclxuICAgIC8vIERldGVybWluZSBpbml0aWFsIGRlbm9taW5hdG9yLlxyXG4gICAgLy8gZCBpcyBhIHBvd2VyIG9mIDEwIGFuZCB0aGUgbWluaW11bSBtYXggZGVub21pbmF0b3IgdGhhdCBzcGVjaWZpZXMgdGhlIHZhbHVlIGV4YWN0bHkuXHJcbiAgICBlID0gZC5lID0gcy5sZW5ndGggLSB4LmUgLSAxO1xyXG4gICAgZC5jWzBdID0gUE9XU19URU5bKGV4cCA9IGUgJSBMT0dfQkFTRSkgPCAwID8gTE9HX0JBU0UgKyBleHAgOiBleHBdO1xyXG4gICAgbWQgPSAhbWQgfHwgbi5jb21wYXJlZFRvKGQpID4gMCA/IChlID4gMCA/IGQgOiBuMSkgOiBuO1xyXG5cclxuICAgIGV4cCA9IE1BWF9FWFA7XHJcbiAgICBNQVhfRVhQID0gMSAvIDA7XHJcbiAgICBuID0gbmV3IEJpZ051bWJlcihzKTtcclxuXHJcbiAgICAvLyBuMCA9IGQxID0gMFxyXG4gICAgbjAuY1swXSA9IDA7XHJcblxyXG4gICAgZm9yICg7IDspICB7XHJcbiAgICAgIHEgPSBkaXYobiwgZCwgMCwgMSk7XHJcbiAgICAgIGQyID0gZDAucGx1cyhxLnRpbWVzKGQxKSk7XHJcbiAgICAgIGlmIChkMi5jb21wYXJlZFRvKG1kKSA9PSAxKSBicmVhaztcclxuICAgICAgZDAgPSBkMTtcclxuICAgICAgZDEgPSBkMjtcclxuICAgICAgbjEgPSBuMC5wbHVzKHEudGltZXMoZDIgPSBuMSkpO1xyXG4gICAgICBuMCA9IGQyO1xyXG4gICAgICBkID0gbi5taW51cyhxLnRpbWVzKGQyID0gZCkpO1xyXG4gICAgICBuID0gZDI7XHJcbiAgICB9XHJcblxyXG4gICAgZDIgPSBkaXYobWQubWludXMoZDApLCBkMSwgMCwgMSk7XHJcbiAgICBuMCA9IG4wLnBsdXMoZDIudGltZXMobjEpKTtcclxuICAgIGQwID0gZDAucGx1cyhkMi50aW1lcyhkMSkpO1xyXG4gICAgbjAucyA9IG4xLnMgPSB4LnM7XHJcbiAgICBlID0gZSAqIDI7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGZyYWN0aW9uIGlzIGNsb3NlciB0byB4LCBuMC9kMCBvciBuMS9kMVxyXG4gICAgciA9IGRpdihuMSwgZDEsIGUsIFJPVU5ESU5HX01PREUpLm1pbnVzKHgpLmFicygpLmNvbXBhcmVkVG8oXHJcbiAgICAgICAgZGl2KG4wLCBkMCwgZSwgUk9VTkRJTkdfTU9ERSkubWludXMoeCkuYWJzKCkpIDwgMSA/IFtuMSwgZDFdIDogW24wLCBkMF07XHJcblxyXG4gICAgTUFYX0VYUCA9IGV4cDtcclxuXHJcbiAgICByZXR1cm4gcjtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoaXMgQmlnTnVtYmVyIGNvbnZlcnRlZCB0byBhIG51bWJlciBwcmltaXRpdmUuXHJcbiAgICovXHJcbiAgUC50b051bWJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiArdmFsdWVPZih0aGlzKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciByb3VuZGVkIHRvIHNkIHNpZ25pZmljYW50IGRpZ2l0c1xyXG4gICAqIHVzaW5nIHJvdW5kaW5nIG1vZGUgcm0gb3IgUk9VTkRJTkdfTU9ERS4gSWYgc2QgaXMgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgZGlnaXRzXHJcbiAgICogbmVjZXNzYXJ5IHRvIHJlcHJlc2VudCB0aGUgaW50ZWdlciBwYXJ0IG9mIHRoZSB2YWx1ZSBpbiBmaXhlZC1wb2ludCBub3RhdGlvbiwgdGhlbiB1c2VcclxuICAgKiBleHBvbmVudGlhbCBub3RhdGlvbi5cclxuICAgKlxyXG4gICAqIFtzZF0ge251bWJlcn0gU2lnbmlmaWNhbnQgZGlnaXRzLiBJbnRlZ2VyLCAxIHRvIE1BWCBpbmNsdXNpdmUuXHJcbiAgICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gICAqXHJcbiAgICogJ1tCaWdOdW1iZXIgRXJyb3JdIEFyZ3VtZW50IHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtzZHxybX0nXHJcbiAgICovXHJcbiAgUC50b1ByZWNpc2lvbiA9IGZ1bmN0aW9uIChzZCwgcm0pIHtcclxuICAgIGlmIChzZCAhPSBudWxsKSBpbnRDaGVjayhzZCwgMSwgTUFYKTtcclxuICAgIHJldHVybiBmb3JtYXQodGhpcywgc2QsIHJtLCAyKTtcclxuICB9O1xyXG5cclxuXHJcbiAgLypcclxuICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZ051bWJlciBpbiBiYXNlIGIsIG9yIGJhc2UgMTAgaWYgYiBpc1xyXG4gICAqIG9taXR0ZWQuIElmIGEgYmFzZSBpcyBzcGVjaWZpZWQsIGluY2x1ZGluZyBiYXNlIDEwLCByb3VuZCBhY2NvcmRpbmcgdG8gREVDSU1BTF9QTEFDRVMgYW5kXHJcbiAgICogUk9VTkRJTkdfTU9ERS4gSWYgYSBiYXNlIGlzIG5vdCBzcGVjaWZpZWQsIGFuZCB0aGlzIEJpZ051bWJlciBoYXMgYSBwb3NpdGl2ZSBleHBvbmVudFxyXG4gICAqIHRoYXQgaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIFRPX0VYUF9QT1MsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuXHJcbiAgICogVE9fRVhQX05FRywgcmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uLlxyXG4gICAqXHJcbiAgICogW2JdIHtudW1iZXJ9IEludGVnZXIsIDIgdG8gQUxQSEFCRVQubGVuZ3RoIGluY2x1c2l2ZS5cclxuICAgKlxyXG4gICAqICdbQmlnTnVtYmVyIEVycm9yXSBCYXNlIHtub3QgYSBwcmltaXRpdmUgbnVtYmVyfG5vdCBhbiBpbnRlZ2VyfG91dCBvZiByYW5nZX06IHtifSdcclxuICAgKi9cclxuICBQLnRvU3RyaW5nID0gZnVuY3Rpb24gKGIpIHtcclxuICAgIHZhciBzdHIsXHJcbiAgICAgIG4gPSB0aGlzLFxyXG4gICAgICBzID0gbi5zLFxyXG4gICAgICBlID0gbi5lO1xyXG5cclxuICAgIC8vIEluZmluaXR5IG9yIE5hTj9cclxuICAgIGlmIChlID09PSBudWxsKSB7XHJcbiAgICAgIGlmIChzKSB7XHJcbiAgICAgICAgc3RyID0gJ0luZmluaXR5JztcclxuICAgICAgICBpZiAocyA8IDApIHN0ciA9ICctJyArIHN0cjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHIgPSAnTmFOJztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGIgPT0gbnVsbCkge1xyXG4gICAgICAgIHN0ciA9IGUgPD0gVE9fRVhQX05FRyB8fCBlID49IFRPX0VYUF9QT1NcclxuICAgICAgICAgPyB0b0V4cG9uZW50aWFsKGNvZWZmVG9TdHJpbmcobi5jKSwgZSlcclxuICAgICAgICAgOiB0b0ZpeGVkUG9pbnQoY29lZmZUb1N0cmluZyhuLmMpLCBlLCAnMCcpO1xyXG4gICAgICB9IGVsc2UgaWYgKGIgPT09IDEwICYmIGFscGhhYmV0SGFzTm9ybWFsRGVjaW1hbERpZ2l0cykge1xyXG4gICAgICAgIG4gPSByb3VuZChuZXcgQmlnTnVtYmVyKG4pLCBERUNJTUFMX1BMQUNFUyArIGUgKyAxLCBST1VORElOR19NT0RFKTtcclxuICAgICAgICBzdHIgPSB0b0ZpeGVkUG9pbnQoY29lZmZUb1N0cmluZyhuLmMpLCBuLmUsICcwJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW50Q2hlY2soYiwgMiwgQUxQSEFCRVQubGVuZ3RoLCAnQmFzZScpO1xyXG4gICAgICAgIHN0ciA9IGNvbnZlcnRCYXNlKHRvRml4ZWRQb2ludChjb2VmZlRvU3RyaW5nKG4uYyksIGUsICcwJyksIDEwLCBiLCBzLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHMgPCAwICYmIG4uY1swXSkgc3RyID0gJy0nICsgc3RyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdHI7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qXHJcbiAgICogUmV0dXJuIGFzIHRvU3RyaW5nLCBidXQgZG8gbm90IGFjY2VwdCBhIGJhc2UgYXJndW1lbnQsIGFuZCBpbmNsdWRlIHRoZSBtaW51cyBzaWduIGZvclxyXG4gICAqIG5lZ2F0aXZlIHplcm8uXHJcbiAgICovXHJcbiAgUC52YWx1ZU9mID0gUC50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdmFsdWVPZih0aGlzKTtcclxuICB9O1xyXG5cclxuXHJcbiAgUC5faXNCaWdOdW1iZXIgPSB0cnVlO1xyXG5cclxuICBQW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAnQmlnTnVtYmVyJztcclxuXHJcbiAgLy8gTm9kZS5qcyB2MTAuMTIuMCtcclxuICBQW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldID0gUC52YWx1ZU9mO1xyXG5cclxuICBpZiAoY29uZmlnT2JqZWN0ICE9IG51bGwpIEJpZ051bWJlci5zZXQoY29uZmlnT2JqZWN0KTtcclxuXHJcbiAgcmV0dXJuIEJpZ051bWJlcjtcclxufVxyXG5cclxuXHJcbi8vIFBSSVZBVEUgSEVMUEVSIEZVTkNUSU9OU1xyXG5cclxuLy8gVGhlc2UgZnVuY3Rpb25zIGRvbid0IG5lZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyxcclxuLy8gZS5nLiBERUNJTUFMX1BMQUNFUywgaW4gdGhlIHNjb3BlIG9mIHRoZSBgY2xvbmVgIGZ1bmN0aW9uIGFib3ZlLlxyXG5cclxuXHJcbmZ1bmN0aW9uIGJpdEZsb29yKG4pIHtcclxuICB2YXIgaSA9IG4gfCAwO1xyXG4gIHJldHVybiBuID4gMCB8fCBuID09PSBpID8gaSA6IGkgLSAxO1xyXG59XHJcblxyXG5cclxuLy8gUmV0dXJuIGEgY29lZmZpY2llbnQgYXJyYXkgYXMgYSBzdHJpbmcgb2YgYmFzZSAxMCBkaWdpdHMuXHJcbmZ1bmN0aW9uIGNvZWZmVG9TdHJpbmcoYSkge1xyXG4gIHZhciBzLCB6LFxyXG4gICAgaSA9IDEsXHJcbiAgICBqID0gYS5sZW5ndGgsXHJcbiAgICByID0gYVswXSArICcnO1xyXG5cclxuICBmb3IgKDsgaSA8IGo7KSB7XHJcbiAgICBzID0gYVtpKytdICsgJyc7XHJcbiAgICB6ID0gTE9HX0JBU0UgLSBzLmxlbmd0aDtcclxuICAgIGZvciAoOyB6LS07IHMgPSAnMCcgKyBzKTtcclxuICAgIHIgKz0gcztcclxuICB9XHJcblxyXG4gIC8vIERldGVybWluZSB0cmFpbGluZyB6ZXJvcy5cclxuICBmb3IgKGogPSByLmxlbmd0aDsgci5jaGFyQ29kZUF0KC0taikgPT09IDQ4Oyk7XHJcblxyXG4gIHJldHVybiByLnNsaWNlKDAsIGogKyAxIHx8IDEpO1xyXG59XHJcblxyXG5cclxuLy8gQ29tcGFyZSB0aGUgdmFsdWUgb2YgQmlnTnVtYmVycyB4IGFuZCB5LlxyXG5mdW5jdGlvbiBjb21wYXJlKHgsIHkpIHtcclxuICB2YXIgYSwgYixcclxuICAgIHhjID0geC5jLFxyXG4gICAgeWMgPSB5LmMsXHJcbiAgICBpID0geC5zLFxyXG4gICAgaiA9IHkucyxcclxuICAgIGsgPSB4LmUsXHJcbiAgICBsID0geS5lO1xyXG5cclxuICAvLyBFaXRoZXIgTmFOP1xyXG4gIGlmICghaSB8fCAhaikgcmV0dXJuIG51bGw7XHJcblxyXG4gIGEgPSB4YyAmJiAheGNbMF07XHJcbiAgYiA9IHljICYmICF5Y1swXTtcclxuXHJcbiAgLy8gRWl0aGVyIHplcm8/XHJcbiAgaWYgKGEgfHwgYikgcmV0dXJuIGEgPyBiID8gMCA6IC1qIDogaTtcclxuXHJcbiAgLy8gU2lnbnMgZGlmZmVyP1xyXG4gIGlmIChpICE9IGopIHJldHVybiBpO1xyXG5cclxuICBhID0gaSA8IDA7XHJcbiAgYiA9IGsgPT0gbDtcclxuXHJcbiAgLy8gRWl0aGVyIEluZmluaXR5P1xyXG4gIGlmICgheGMgfHwgIXljKSByZXR1cm4gYiA/IDAgOiAheGMgXiBhID8gMSA6IC0xO1xyXG5cclxuICAvLyBDb21wYXJlIGV4cG9uZW50cy5cclxuICBpZiAoIWIpIHJldHVybiBrID4gbCBeIGEgPyAxIDogLTE7XHJcblxyXG4gIGogPSAoayA9IHhjLmxlbmd0aCkgPCAobCA9IHljLmxlbmd0aCkgPyBrIDogbDtcclxuXHJcbiAgLy8gQ29tcGFyZSBkaWdpdCBieSBkaWdpdC5cclxuICBmb3IgKGkgPSAwOyBpIDwgajsgaSsrKSBpZiAoeGNbaV0gIT0geWNbaV0pIHJldHVybiB4Y1tpXSA+IHljW2ldIF4gYSA/IDEgOiAtMTtcclxuXHJcbiAgLy8gQ29tcGFyZSBsZW5ndGhzLlxyXG4gIHJldHVybiBrID09IGwgPyAwIDogayA+IGwgXiBhID8gMSA6IC0xO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ2hlY2sgdGhhdCBuIGlzIGEgcHJpbWl0aXZlIG51bWJlciwgYW4gaW50ZWdlciwgYW5kIGluIHJhbmdlLCBvdGhlcndpc2UgdGhyb3cuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnRDaGVjayhuLCBtaW4sIG1heCwgbmFtZSkge1xyXG4gIGlmIChuIDwgbWluIHx8IG4gPiBtYXggfHwgbiAhPT0gbWF0aGZsb29yKG4pKSB7XHJcbiAgICB0aHJvdyBFcnJvclxyXG4gICAgIChiaWdudW1iZXJFcnJvciArIChuYW1lIHx8ICdBcmd1bWVudCcpICsgKHR5cGVvZiBuID09ICdudW1iZXInXHJcbiAgICAgICA/IG4gPCBtaW4gfHwgbiA+IG1heCA/ICcgb3V0IG9mIHJhbmdlOiAnIDogJyBub3QgYW4gaW50ZWdlcjogJ1xyXG4gICAgICAgOiAnIG5vdCBhIHByaW1pdGl2ZSBudW1iZXI6ICcpICsgU3RyaW5nKG4pKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vLyBBc3N1bWVzIGZpbml0ZSBuLlxyXG5mdW5jdGlvbiBpc09kZChuKSB7XHJcbiAgdmFyIGsgPSBuLmMubGVuZ3RoIC0gMTtcclxuICByZXR1cm4gYml0Rmxvb3Iobi5lIC8gTE9HX0JBU0UpID09IGsgJiYgbi5jW2tdICUgMiAhPSAwO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9FeHBvbmVudGlhbChzdHIsIGUpIHtcclxuICByZXR1cm4gKHN0ci5sZW5ndGggPiAxID8gc3RyLmNoYXJBdCgwKSArICcuJyArIHN0ci5zbGljZSgxKSA6IHN0cikgK1xyXG4gICAoZSA8IDAgPyAnZScgOiAnZSsnKSArIGU7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB0b0ZpeGVkUG9pbnQoc3RyLCBlLCB6KSB7XHJcbiAgdmFyIGxlbiwgenM7XHJcblxyXG4gIC8vIE5lZ2F0aXZlIGV4cG9uZW50P1xyXG4gIGlmIChlIDwgMCkge1xyXG5cclxuICAgIC8vIFByZXBlbmQgemVyb3MuXHJcbiAgICBmb3IgKHpzID0geiArICcuJzsgKytlOyB6cyArPSB6KTtcclxuICAgIHN0ciA9IHpzICsgc3RyO1xyXG5cclxuICAvLyBQb3NpdGl2ZSBleHBvbmVudFxyXG4gIH0gZWxzZSB7XHJcbiAgICBsZW4gPSBzdHIubGVuZ3RoO1xyXG5cclxuICAgIC8vIEFwcGVuZCB6ZXJvcy5cclxuICAgIGlmICgrK2UgPiBsZW4pIHtcclxuICAgICAgZm9yICh6cyA9IHosIGUgLT0gbGVuOyAtLWU7IHpzICs9IHopO1xyXG4gICAgICBzdHIgKz0genM7XHJcbiAgICB9IGVsc2UgaWYgKGUgPCBsZW4pIHtcclxuICAgICAgc3RyID0gc3RyLnNsaWNlKDAsIGUpICsgJy4nICsgc3RyLnNsaWNlKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0cjtcclxufVxyXG5cclxuXHJcbi8vIEVYUE9SVFxyXG5cclxuXHJcbmV4cG9ydCB2YXIgQmlnTnVtYmVyID0gY2xvbmUoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJpZ051bWJlcjtcclxuIiwiaW1wb3J0IEJpZ051bWJlciBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcblxyXG5leHBvcnQgY29uc3Qgc2hvd0NvbnRhaW5lciA9IGZ1bmN0aW9uKGlkIDogc3RyaW5nKSB7XHJcbiAgICBsZXQgY29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250YWluZXInKTtcclxuICAgIGZvciAobGV0IGk9MDtpPGNvbnRhaW5lcnMubGVuZ3RoO2krKykge1xyXG5cdFx0bGV0IGVsZW1lbnQgPSBjb250YWluZXJzW2ldIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmIChlbGVtZW50LmlkID09IGlkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblx0XHRcdGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHRcdFx0ZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5leHBvcnQgY29uc3Qgcm91bmROdW1iZXIgPSBmdW5jdGlvbihudW1iZXIgOiBudW1iZXIpIHtcclxuXHRyZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiAxMDApIC8gMTAwO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgcm91bmROdW1iZXJEZWNpbWFsID0gZnVuY3Rpb24obnVtYmVyIDogbnVtYmVyLCBkZWNpbWFsIDogbnVtYmVyKSB7XHJcblx0bGV0IGh1bmRyZWQgPSBwYXJzZUludCgnMScrICcwJy5yZXBlYXQoZGVjaW1hbCkpO1xyXG5cdHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIGh1bmRyZWQpIC8gaHVuZHJlZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJvdW5kQmlnTnVtYmVyID0gZnVuY3Rpb24obnVtYmVyIDogQmlnTnVtYmVyKSA6IEJpZ051bWJlciB7XHJcblx0cmV0dXJuIG5ldyBCaWdOdW1iZXIoTWF0aC5yb3VuZChudW1iZXIudG9OdW1iZXIoKSAqIDEwMCkgLyAxMDApO1xyXG59XHJcbmV4cG9ydCBjb25zdCByb3VuZEJpZ051bWJlckRlY2ltYWwgPSBmdW5jdGlvbihudW1iZXIgOiBCaWdOdW1iZXIsIGRlY2ltYWwgOiBudW1iZXIpIDogQmlnTnVtYmVyIHtcclxuXHRsZXQgaHVuZHJlZCA9IHBhcnNlSW50KCcxJysgJzAnLnJlcGVhdChkZWNpbWFsKSk7XHJcblx0cmV0dXJuIG5ldyBCaWdOdW1iZXIoTWF0aC5yb3VuZChudW1iZXIudG9OdW1iZXIoKSAqIGh1bmRyZWQpIC8gaHVuZHJlZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBBZGRyZXNzWmVybyA9IFwiMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaXNKU09OID0gZnVuY3Rpb24oc3RyIDogc3RyaW5nKSB7XHJcblx0dHJ5IHtcclxuXHRcdEpTT04ucGFyc2Uoc3RyKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc2hvcnRFdGggPSBmdW5jdGlvbihldGhBZGRyZXNzIDogc3RyaW5nKSB7XHJcblx0aWYgKCFldGhBZGRyZXNzKSByZXR1cm4gJyc7XHJcblxyXG5cdHJldHVybiBldGhBZGRyZXNzLnN1YnN0cmluZygwLCA2KSArIFwiLi4uXCIgKyBldGhBZGRyZXNzLnN1YnN0cmluZyhldGhBZGRyZXNzLmxlbmd0aCAtIDQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwcGVyRmlyc3RMZXR0ZXIgPSBmdW5jdGlvbih0ZXh0IDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIHRleHRbMF0udG9VcHBlckNhc2UoKSArIHRleHQuc3Vic3RyaW5nKDEpO1xyXG59XHJcbiIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjx0ciBpZD1cXFwic3ltYm9sSW5mb1RvQ29weVxcXCI+XFxyXFxuICAgIDx0ZCBjb2xzcGFuPVxcXCI0XFxcIj5cXHJcXG4gICAgICAgIDxhcnRpY2xlPlxcclxcbiAgICAgICAgU29tZSB3YWxsZXRzIGRldGVjdCBhdXRvbWF0aWNhbGx5IHRoZSBjb2lucyB0aGF0IGFyZSByZWdpc3RlcmVkIHRvIHlvdXIgYWRkcmVzcy5cXHJcXG4gICAgICAgIFRob3NlIHRoYXQgZG9uJ3QgZG8gYXV0b21hdGljIGRldGVjdGlvbiwgeW91IG5lZWQgdG8gYWRkIHRoZW0gbWFudWFsbHkuXFxyXFxuICAgICAgICA8YnIgLz48YnIgLz5cXHJcXG4gICAgICAgIFRoaXMgaXMgdGhlIGFkZHJlc3MgZm9yIHRoZSBzeW1ib2wge3tzeW1ib2x9fSxcXHJcXG4gICAgICAgIHlvdSBuZWVkIHRvIGNvcHkgaXQgYW5kIGltcG9ydCB0aGUgdG9rZW4gaW4geW91ciB3YWxsZXRcXHJcXG4gICAgICAgIDxiciAvPlxcclxcbiAgICAgICAgPGlucHV0IHZhbHVlPVxcXCJ7e2FkZHJlc3N9fVxcXCIgLz5cXHJcXG4gICAgICAgIDwvYXJ0aWNsZT5cXHJcXG4gICAgPC90ZD5cXHJcXG48L3RyPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgU2VjdXJpdGllc1NlcnZpY2UgZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2Jyb2tlci9TZWN1cml0aWVzU2VydmljZVwiO1xyXG5pbXBvcnQgU2VjdXJpdGllc0xpc3RIdG1sIGZyb20gJy4uLy4uL2h0bWwvZWxlbWVudHMvU2VjdXJpdGllc0xpc3QuaHRtbCdcclxuaW1wb3J0IFNlY3VyaXR5SHRtbCBmcm9tICcuLi8uLi9odG1sL2VsZW1lbnRzL1NlY3VyaXRpZXMuaHRtbCc7XHJcbmltcG9ydCBTZWN1cml0eSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYnJva2VyL1NlY3VyaXR5XCI7XHJcbmltcG9ydCBMaW1pbmFsTWFya2V0U2VydmljZSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9MaW1pbmFsTWFya2V0U2VydmljZVwiO1xyXG5pbXBvcnQgQ29weUhlbHBlciBmcm9tIFwiLi4vLi4vdXRpbC9Db3B5SGVscGVyXCI7XHJcbmltcG9ydCBBZGRyZXNzSW5mb0h0bWwgZnJvbSAnLi4vLi4vaHRtbC9lbGVtZW50cy9BZGRyZXNzSW5mby5odG1sJztcclxuaW1wb3J0IENvbnRyYWN0QWRkcmVzc05vdEZvdW5kIGZyb20gJy4uLy4uL2h0bWwvZWxlbWVudHMvQ29udHJhY3RBZGRyZXNzTm90Rm91bmQuaHRtbCc7XHJcbmltcG9ydCB7QWRkcmVzc1plcm99IGZyb20gXCIuLi8uLi91dGlsL0hlbHBlclwiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgQWRkVG9XYWxsZXRIdG1sIGZyb20gJy4uLy4uL2h0bWwvZWxlbWVudHMvQWRkVG9XYWxsZXQuaHRtbCc7XHJcbmltcG9ydCBMb2FkaW5nSGVscGVyIGZyb20gXCIuLi8uLi91dGlsL0xvYWRpbmdIZWxwZXJcIjtcclxuaW1wb3J0IEVycm9ySW5mbyBmcm9tIFwiLi4vLi4vZXJyb3JzL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuLi8uLi9lcnJvcnMvR2VuZXJhbEVycm9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN1cml0aWVzTGlzdCB7XHJcbiAgICBwYWdlOiBudW1iZXI7XHJcbiAgICB0Ym9keUlkID0gJ2xpbWluYWxfbWFya2V0X3NlY3VyaXRpZXNfbGlzdCc7XHJcbiAgICBsb2FkbW9yZTogYm9vbGVhbjtcclxuICAgIG9uU2VsZWN0U3ltYm9sPzogKHN5bWJvbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGxvZ286IHN0cmluZykgPT4gdm9pZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBhZ2UgPSAwO1xyXG4gICAgICAgIHRoaXMubG9hZG1vcmUgPSB0cnVlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzU2VydmljZSA9IGF3YWl0IFNlY3VyaXRpZXNTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcblxyXG4gICAgICAgIGxldCBzZWN1cml0aWVzQ291bnQgPSBzZWN1cml0aWVzU2VydmljZS5zZWN1cml0aWVzQXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzID0gYXdhaXQgc2VjdXJpdGllc1NlcnZpY2UuZ2V0UGFnaW5hdGluZ1NlY3VyaXRpZXModGhpcy5wYWdlKyspO1xyXG5cclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVyUGFydGlhbChcclxuICAgICAgICAgICAgXCJzZWN1cml0aWVzXCIsXHJcbiAgICAgICAgICAgIFNlY3VyaXR5SHRtbFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFNlY3VyaXRpZXNMaXN0SHRtbCk7XHJcbiAgICAgICAgbGV0IG9iajogYW55ID0ge1xyXG4gICAgICAgICAgICB0Ym9keUlkOiB0aGlzLnRib2R5SWQsXHJcbiAgICAgICAgICAgIHNlY3VyaXRpZXM6IHNlY3VyaXRpZXMsXHJcbiAgICAgICAgICAgIHNlY3VyaXRpZXNDb3VudDogc2VjdXJpdGllc0NvdW50XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZShvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBiaW5kRXZlbnRzKG9uU2VsZWN0U3ltYm9sOiAoc3ltYm9sOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbG9nbzogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kT25DbGlja0V2ZW50KG9uU2VsZWN0U3ltYm9sKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmJpbmRTZWFyY2hFdmVudCgpO1xyXG4gICAgICAgIHRoaXMuYmluZExvYWRNb3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kT25DbGlja0V2ZW50KG9uU2VsZWN0U3ltYm9sOiAoc3ltYm9sOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbG9nbzogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgbGV0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X3NlY3VyaXRpZXNfdGFibGUnKTtcclxuXHJcbiAgICAgICAgaWYgKCF0YWJsZSkge1xyXG4gICAgICAgICAgICBFcnJvckluZm8ucmVwb3J0KG5ldyBHZW5lcmFsRXJyb3IoXCJQYWdlIGNvdWxkIG5vdCBsb2FkIGNvcnJlY3RseSwgdHJ5IHJlbG9hZGluZ1wiKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdFN5bWJvbCA9IG9uU2VsZWN0U3ltYm9sO1xyXG5cclxuICAgICAgICB0YWJsZS5vbmNsaWNrID0gYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUNsaWNrKGV2dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBoYW5kbGVDbGljayhldnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IChldnQudGFyZ2V0ISBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnYScpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRUb1dhbGxldE9yR2V0QWRkcmVzcyhldnQsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGFyZW50VHIgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFwYXJlbnRUcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAocGFyZW50VHIudGFnTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpICE9PSAndHInKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFRyID0gcGFyZW50VHIucGFyZW50RWxlbWVudCE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3ltYm9sID0gcGFyZW50VHIuZGF0YXNldC5zeW1ib2w7XHJcbiAgICAgICAgaWYgKCFzeW1ib2wpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG5hbWUgPSBwYXJlbnRUci5kYXRhc2V0Lm5hbWUhXHJcbiAgICAgICAgbGV0IGxvZ28gPSBwYXJlbnRUci5kYXRhc2V0LmxvZ28hO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vblNlbGVjdFN5bWJvbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2VsZWN0U3ltYm9sKHN5bWJvbCwgbmFtZSwgbG9nbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgYmluZFNlYXJjaEV2ZW50KCkge1xyXG4gICAgICAgIGxldCBzZWFyY2hGb3JTeW1ib2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoX2Zvcl9zeW1ib2wnKTtcclxuICAgICAgICBpZiAoIXNlYXJjaEZvclN5bWJvbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgc2VjdXJpdGllc1NlcnZpY2UgPSBhd2FpdCBTZWN1cml0aWVzU2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICBsZXQgdGltZW91dDogYW55ID0gbnVsbDtcclxuICAgICAgICBzZWFyY2hGb3JTeW1ib2wuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aW1lb3V0ICE9IG51bGwpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2VhcmNoID0gKGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlYXJjaCB8fCBzZWFyY2gubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZG1vcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd1RvcFNlY3VyaXRpZXMoc2VjdXJpdGllc1NlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZG1vcmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjdXJpdGllcyA9IGF3YWl0IHNlY3VyaXRpZXNTZXJ2aWNlLmZpbmQoc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFNlY3VyaXRpZXNUb0RvbShzZWN1cml0aWVzKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2hvd1RvcFNlY3VyaXRpZXMoc2VjdXJpdGllc1NlcnZpY2U6IFNlY3VyaXRpZXNTZXJ2aWNlKSB7XHJcbiAgICAgICAgbGV0IHNlY3VyaXRpZXMgPSBhd2FpdCBzZWN1cml0aWVzU2VydmljZS5nZXRUb3BTZWN1cml0aWVzKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkU2VjdXJpdGllc1RvRG9tKHNlY3VyaXRpZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFNlY3VyaXRpZXNUb0RvbShzZWN1cml0aWVzOiBBcnJheTxTZWN1cml0eT4pIHtcclxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRib2R5SWQpO1xyXG4gICAgICAgIGlmICghdGJvZHkpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFNlY3VyaXR5SHRtbCk7XHJcbiAgICAgICAgbGV0IG9iajogYW55ID0ge1xyXG4gICAgICAgICAgICBzZWN1cml0aWVzOiBzZWN1cml0aWVzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGUob2JqKTtcclxuICAgICAgICB0Ym9keS5pbm5lckhUTUwgPSBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZExvYWRNb3JlKCkge1xyXG5cclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaW1pbmFsX21hcmtldF9sb2FkX21vcmUnKSE7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKGFzeW5jIChbZW50cnldKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkTW9yZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICByb290OiBudWxsLFxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDAuMSwgLy8gc2V0IG9mZnNldCAwLjEgbWVhbnMgdHJpZ2dlciBpZiBhdGxlYXN0IDEwJSBvZiBlbGVtZW50IGluIHZpZXdwb3J0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRNb3JlKHRoaXM6IFNlY3VyaXRpZXNMaXN0KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRtb3JlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGJvZHlJZCk7XHJcbiAgICAgICAgaWYgKCF0Ym9keSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgc2VjdXJpdGllc1NlcnZpY2UgPSBhd2FpdCBTZWN1cml0aWVzU2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzID0gYXdhaXQgc2VjdXJpdGllc1NlcnZpY2UuZ2V0UGFnaW5hdGluZ1NlY3VyaXRpZXModGhpcy5wYWdlKyspO1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoU2VjdXJpdHlIdG1sKTtcclxuICAgICAgICBsZXQgb2JqOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIHNlY3VyaXRpZXM6IHNlY3VyaXRpZXNcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0ZW1wbGF0ZShvYmopO1xyXG5cclxuICAgICAgICB0Ym9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkVG9XYWxsZXRPckdldEFkZHJlc3MoZXZlbnQ6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lO1xyXG4gICAgICAgIGlmIChjbGFzc05hbWUgIT0gJ2dldEFkZHJlc3MnICYmIGNsYXNzTmFtZSAhPSAnYWRkVG9XYWxsZXQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIGxldCBzeW1ib2wgPSBlbGVtZW50LmRhdGFzZXQuc3ltYm9sO1xyXG4gICAgICAgIGlmICghc3ltYm9sKSByZXR1cm47XHJcblxyXG4gICAgICAgIExvYWRpbmdIZWxwZXIuc2V0TG9hZGluZyhlbGVtZW50KTtcclxuXHJcbiAgICAgICAgbGV0IGxpbWluYWxNYXJrZXRTZXJ2aWNlID0gbmV3IExpbWluYWxNYXJrZXRTZXJ2aWNlKE1vcmFsaXMpO1xyXG4gICAgICAgIGxldCBhZGRyZXNzID0gYXdhaXQgbGltaW5hbE1hcmtldFNlcnZpY2UuZ2V0U3ltYm9sQ29udHJhY3RBZGRyZXNzKHN5bWJvbCk7XHJcblxyXG4gICAgICAgIGlmIChjbGFzc05hbWUgPT0gJ2dldEFkZHJlc3MnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2hvd0dldEFkZHJlc3MoZWxlbWVudCwgc3ltYm9sLCBhZGRyZXNzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNob3dBZGRUb1dhbGxldChlbGVtZW50LCBzeW1ib2wsIGFkZHJlc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBMb2FkaW5nSGVscGVyLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dHZXRBZGRyZXNzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzeW1ib2w6IHN0cmluZywgYWRkcmVzczogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGFkZHJlc3MgIT09IEFkZHJlc3NaZXJvKSB7XHJcbiAgICAgICAgICAgIGxldCBjb3B5SGVscGVyID0gbmV3IENvcHlIZWxwZXIoKTtcclxuICAgICAgICAgICAgbGV0IHN1Y2Nlc3MgPSBhd2FpdCBjb3B5SGVscGVyLmNvcHlUZXh0VG9DbGlwYm9hcmQoYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVyVGV4dCA9ICdDb3BpZWQnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyQ29udHJhY3RJbmZvVG9TdHJpbmcoZWxlbWVudCwgYWRkcmVzcywgc3ltYm9sLCBBZGRyZXNzSW5mb0h0bWwpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNob3dBZGRUb1dhbGxldChlbGVtZW50OiBIVE1MRWxlbWVudCwgc3ltYm9sOiBzdHJpbmcsIGFkZHJlc3M6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChhZGRyZXNzICE9PSBBZGRyZXNzWmVybykge1xyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcihNb3JhbGlzKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhZGRlZCA9IGF3YWl0IHdhbGxldEhlbHBlci5hZGRUb2tlblRvV2FsbGV0KGFkZHJlc3MsIHN5bWJvbCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRyYWN0SW5mb1RvU3RyaW5nKGVsZW1lbnQsIGFkZHJlc3MsIHN5bWJvbCwgQWRkVG9XYWxsZXRIdG1sKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChhZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlckNvbnRyYWN0SW5mb1RvU3RyaW5nKGVsZW1lbnQsIGFkZHJlc3MsIHN5bWJvbCwgQWRkVG9XYWxsZXRIdG1sKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQ29udHJhY3RJbmZvVG9TdHJpbmcoZWxlbWVudDogSFRNTEVsZW1lbnQsIGFkZHJlc3M6IHN0cmluZywgc3ltYm9sOiBzdHJpbmcsIHRlbXBsYXRlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc3ltYm9sSW5mb1RvQ29weSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeW1ib2xJbmZvVG9Db3B5Jyk7XHJcbiAgICAgICAgaWYgKHN5bWJvbEluZm9Ub0NvcHkpIHN5bWJvbEluZm9Ub0NvcHkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGxldCBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgaWYgKGFkZHJlc3MgPT09IEFkZHJlc3NaZXJvKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShDb250cmFjdEFkZHJlc3NOb3RGb3VuZCk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSB0ZW1wbGF0ZShudWxsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoQWRkcmVzc0luZm9IdG1sKTtcclxuICAgICAgICAgICAgbGV0IG9iajogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGVudCA9IHRlbXBsYXRlKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudCEucGFyZW50RWxlbWVudCEucGFyZW50RWxlbWVudCEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBpZD1cXFwidXNlck1lbnVQYW5lbFxcXCI+XFxyXFxuICAgIDxhIGhyZWY9XFxcIiNcXFwiIGlkPVxcXCJ1c2VySW5mb0FjdGlvblxcXCIgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiPlxcclxcbiAgICAgICAgPGltZyBzcmM9XFxcImh0dHBzOi8vZWZmaWd5LmltL2Eve3tldGhBZGRyZXNzfX0ucG5nXFxcIiB3aWR0aD1cXFwiMjRcXFwiPlxcclxcbiAgICAgICAgPHNwYW4gaWQ9XFxcInVzZXJfaW5mb19ldGhBZGRyZXNzXFxcIj57e3Nob3J0RXRoQWRkcmVzc319PC9zcGFuPlxcclxcbiAgICA8L2E+XFxyXFxuXFxyXFxuICAgIDxkaXYgaWQ9XFxcInVzZXJJbmZvRHJvcGRvd25cXFwiIGNsYXNzPVxcXCJkLW5vbmVcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZCBhY2NvdW50X2luZm9cXFwiPlxcclxcbiAgICAgICAgICAgIDxoNj5BY2NvdW50PC9oNj5cXHJcXG4gICAgICAgICAgICA8YSBpZD1cXFwiZGlzY29ubmVjdEZyb21OZXR3b3JrXFxcIiBocmVmPVxcXCIjXFxcIj5EaXNjb25uZWN0PC9hPlxcclxcblxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJlZGl0X2FjY291bnQgZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGEgaWQ9XFxcImVkaXROYW1lXFxcIiBocmVmPVxcXCIjXFxcIj5FZGl0IG5hbWU8L2E+XFxyXFxuICAgICAgICAgICAgPGEgaWQ9XFxcImVkaXRDb250YWN0XFxcIiBocmVmPVxcXCIjXFxcIj5FZGl0IGNvbnRhY3QgaW5mbzwvYT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZWRpdF9hY2NvdW50XFxcIj5cXHJcXG4gICAgICAgICAgICA8YSBpZD1cXFwiZWRpdFRydXN0ZWRDb250YWN0XFxcIiBocmVmPVxcXCIjXFxcIj5FZGl0IHRydXN0ZWQgY29udGFjdDwvYT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGhyLz5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCJodHRwczovL2VmZmlneS5pbS9hL3t7ZXRoQWRkcmVzc319LnBuZ1xcXCI+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cXFwiZC1ibG9ja1xcXCI+PGEgaHJlZj1cXFwie3tibG9ja2NoYWluRXhwbG9yZXJ9fXt7ZXRoQWRkcmVzc319XFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+e3tzaG9ydEV0aEFkZHJlc3N9fTwvYT48L3N0cm9uZz5cXHJcXG4gICAgICAgICAgICAgICAgPHNtYWxsPnt7d2FsbGV0TmFtZX19PC9zbWFsbD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGhyLz5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhpZGRlblxcXCIgaWQ9XFxcInVzZXJJbmZvQVVzZEJhbGFuY2VcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2PjxpbWcgc3JjPVxcXCJodHRwczovL2FwcC5saW1pbmFsLm1hcmtldC9pbWcvYXVzZC5wbmdcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cXFwiZC1ibG9ja1xcXCI+YVVTRCA8c3BhbiBpZD1cXFwidXNlcl9pbmZvX2F1c2RfYmFsYW5jZVxcXCI+PC9zcGFuPjwvc3Ryb25nPlxcclxcblxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImZ1bmRfYWNjb3VudFxcXCI+RnVuZCBteSBhY2NvdW50PC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgaWQ9XFxcIndpdGhkcmF3X2Zyb21fYWNjb3VudFxcXCI+V2l0aGRyYXcgZnJvbSBhY2NvdW50PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8aHIvPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgICAgICA8c3Ryb25nIGNsYXNzPVxcXCJkLWJsb2NrXFxcIj5OZXR3b3JrPC9zdHJvbmc+XFxyXFxuICAgICAgICAgICAgPHNtYWxsPnt7bmV0d29ya05hbWV9fTwvc21hbGw+XFxyXFxuXFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuXFxyXFxuPC9kaXY+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldCBpZD1cXFwia3ljRWRpdE5hbWVcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ3YXJuaW5nQmFyXFxcIj5cXHJcXG4gICAgICAgIDxzdHJvbmc+V2FybmluZzwvc3Ryb25nPjxici8+XFxyXFxuICAgICAgICBZb3UgY2FuIG9ubHkgY2hhbmdlIHRoZSBuYW1lIG9uY2UuIEJlIGNhcmVmdWwgb2Ygd2hhdCB5b3UgY2hhbmdlLlxcclxcbiAgICAgICAgPGJyLz48YnIvPlxcclxcbiAgICAgICAgQWZ0ZXIgeW91IGNoYW5nZSB0aGlzIGluZm9ybWF0aW9uIGEgbmV3IEtZQyBwcm9jZXNzIHdpbGwgYmUgc3RhcnRlZCwgYW5kIHlvdSB3aWxsIE5PVCBiZSBhYmxlIHRvIGRvIGFueVxcclxcbiAgICAgICAgdHJhZGVzXFxyXFxuICAgICAgICB1bnRpbCBpdCBoYXMgYmVlbiBhcHByb3ZlZC5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJnaXZlbl9uYW1lXFxcIj5MZWdhbCBGaXJzdCBuYW1lPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCByZXF1aXJlZCBpZD1cXFwiZ2l2ZW5fbmFtZVxcXCIgbmFtZT1cXFwiZ2l2ZW5fbmFtZVxcXCJcXHJcXG4gICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiUm9uXFxcIlxcclxcbiAgICAgICAgICAgICAgIHZhbHVlPVxcXCJ7e2dpdmVuX25hbWV9fVxcXCIgYXV0b2NvbXBsZXRlPVxcXCJnaXZlbi1uYW1lXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJtaWRkbGVfbmFtZVxcXCI+TGVnYWwgTWlkZGxlIG5hbWU8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IGlkPVxcXCJtaWRkbGVfbmFtZVxcXCIgbmFtZT1cXFwibWlkZGxlX25hbWVcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICB2YWx1ZT1cXFwie3ttaWRkbGVfbmFtZX19XFxcIiBhdXRvY29tcGxldGU9XFxcImFkZGl0aW9uYWwtbmFtZVxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZmFtaWx5X25hbWVcXFwiPkxlZ2FsIExhc3QgbmFtZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgcmVxdWlyZWQgaWQ9XFxcImZhbWlseV9uYW1lXFxcIiBuYW1lPVxcXCJmYW1pbHlfbmFtZVxcXCJcXHJcXG4gICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiU3dhbnNvblxcXCJcXHJcXG4gICAgICAgICAgICAgICB2YWx1ZT1cXFwie3tmYW1pbHlfbmFtZX19XFxcIiBhdXRvY29tcGxldGU9XFxcImZhbWlseS1uYW1lXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbnNcXFwiPlxcclxcbiAgICAgICAgPGJ1dHRvbiBpZD1cXFwia3ljRWRpdE5hbWVDb25maXJtXFxcIj5Db25maXJtPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZmllbGRzZXQ+XFxyXFxuXFxyXFxuPGZpZWxkc2V0IGNsYXNzPVxcXCJoaWRkZW5cXFwiIGlkPVxcXCJjb25maXJtTmFtZUZpZWxkc2V0XFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29uZmlybV9uYW1lXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImNvbmZpcm1fbmFtZVxcXCIgaWQ9XFxcImxhYmVsX2NvbmZpcm1fbmFtZVxcXCI+UGxlYXNlIHR5cGU8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IG5hbWU9XFxcImNvbmZpcm1fbmFtZVxcXCIgaWQ9XFxcImNvbmZpcm1fbmFtZVxcXCIvPlxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiIGlkPVxcXCJreWNFZGl0TmFtZUVycm9yXFxcIj48L2Rpdj5cXHJcXG5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9ucyBncmlkXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gaWQ9XFxcImt5Y0VkaXROYW1lQmFja1xcXCI+QmFjazwvYnV0dG9uPlxcclxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGlkPVxcXCJreWNFZGl0TmFtZVNhdmVcXFwiPkNvbmZpcm08L2J1dHRvbj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaW5nSGVscGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgaXNOdWxsT3JFbXB0eShzdHI6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiAhc3RyIHx8IHN0ci50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPT0gMDtcclxuICAgIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi4vTW9kYWxcIjtcclxuaW1wb3J0IEt5Y0VkaXROYW1lSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNFZGl0TmFtZS5odG1sJztcclxuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL1VzZXJTZXJ2aWNlXCI7XHJcbmltcG9ydCBTdHJpbmdIZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvU3RyaW5nSGVscGVyXCI7XHJcbmltcG9ydCBMb2FkaW5nSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL0xvYWRpbmdIZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEt5Y0VkaXROYW1lRm9ybSB7XHJcbiAgICBtb2RhbDogTW9kYWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93KCkge1xyXG4gICAgICAgIGxldCBreWNFZGl0TmFtZUVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y0VkaXROYW1lRXJyb3InKTtcclxuICAgICAgICBpZiAoa3ljRWRpdE5hbWVFcnJvcikga3ljRWRpdE5hbWVFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoTW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGFjY291bnQgPSBhd2FpdCB1c2VyU2VydmljZS5nZXRBY2NvdW50KClcclxuXHJcbiAgICAgICAgbGV0IGdpdmVuX25hbWUgPSBhY2NvdW50LmlkZW50aXR5LmdpdmVuX25hbWUgYXMgc3RyaW5nO1xyXG4gICAgICAgIGxldCBtaWRkbGVfbmFtZSA9IGFjY291bnQuaWRlbnRpdHkubWlkZGxlX25hbWUgYXMgc3RyaW5nO1xyXG4gICAgICAgIGxldCBmYW1pbHlfbmFtZSA9IGFjY291bnQuaWRlbnRpdHkuZmFtaWx5X25hbWU7XHJcblxyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShLeWNFZGl0TmFtZUh0bWwpXHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0ZW1wbGF0ZSh7Z2l2ZW5fbmFtZTogZ2l2ZW5fbmFtZSwgbWlkZGxlX25hbWU6IG1pZGRsZV9uYW1lLCBmYW1pbHlfbmFtZTogZmFtaWx5X25hbWV9KTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RhbC5zaG93TW9kYWwoJ0VkaXQgbmFtZScsIGNvbnRlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFdmVudHMoKSB7XHJcblxyXG4gICAgICAgIGxldCBreWNFZGl0TmFtZUNvbmZpcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljRWRpdE5hbWVDb25maXJtJyk7XHJcbiAgICAgICAga3ljRWRpdE5hbWVDb25maXJtPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBnaXZlbl9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dpdmVuX25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgbWlkZGxlX25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWlkZGxlX25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgZmFtaWx5X25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFtaWx5X25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eShnaXZlbl9uYW1lLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoJ0dpdmVuIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eShmYW1pbHlfbmFtZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKCdGYW1pbHkgbmFtZSBjYW5ub3QgYmUgZW1wdHknKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZnVsbF9uYW1lID0gdGhpcy5nZXRGdWxsTmFtZSgpO1xyXG4gICAgICAgICAgICBsZXQgbGFiZWxfY29uZmlybV9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsX2NvbmZpcm1fbmFtZScpO1xyXG4gICAgICAgICAgICBpZiAoIWxhYmVsX2NvbmZpcm1fbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiByZXBvcnQgZXJyb3IgaW4gZm9ybVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYWJlbF9jb25maXJtX25hbWUuaW5uZXJIVE1MID0gJ1BsZWFzZSB0eXBlIGluIHRoZSBmdWxsIG5hbWUgXCInICsgZnVsbF9uYW1lICsgJ1wiIGluIHRoZSBib3ggYmVsb3cgdG8gY29uZmlybS4gWW91IFdJTEwgTk9UIGJlIGFibGUgdG8gY2hhbmdlIGl0IGFnYWluLic7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybU5hbWVGaWVsZHNldCcpPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljRWRpdE5hbWUnKT8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsZXQga3ljRWRpdE5hbWVCYWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y0VkaXROYW1lQmFjaycpO1xyXG4gICAgICAgIGt5Y0VkaXROYW1lQmFjaz8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtTmFtZUZpZWxkc2V0Jyk/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNFZGl0TmFtZScpPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBjb25maXJtX25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybV9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBpZiAoIWNvbmZpcm1fbmFtZSkge1xyXG4gICAgICAgICAgICAvL1RPRE86IHJlcG9ydCBlcnJvciBpbiBmb3JtXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBreWNFZGl0TmFtZVNhdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljRWRpdE5hbWVTYXZlJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAga3ljRWRpdE5hbWVTYXZlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBjb25maXJtX25hbWUuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgIGNvbmZpcm1fbmFtZS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm1fbmFtZS52YWx1ZSA9PSB0aGlzLmdldEZ1bGxOYW1lKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1fbmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAga3ljRWRpdE5hbWVTYXZlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25maXJtX25hbWUuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAga3ljRWRpdE5hbWVTYXZlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGt5Y0VkaXROYW1lU2F2ZT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb25maXJtX25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybV9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGNvbmZpcm1fbmFtZSAmJiBjb25maXJtX25hbWUudmFsdWUgIT0gdGhpcy5nZXRGdWxsTmFtZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChjb25maXJtX25hbWUudmFsdWUgKyAnIGlzIG5vdCBzYW1lIGFzICcgKyB0aGlzLmdldEZ1bGxOYW1lKCkgKyAnLiBHbyBvdmVyIHRoZSBuYW1lIGFuZCBtYWtlIHN1cmUgaXQgaXMgaWRlbnRpY2FsJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBnaXZlbl9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dpdmVuX25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgbWlkZGxlX25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWlkZGxlX25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgZmFtaWx5X25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFtaWx5X25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBMb2FkaW5nSGVscGVyLnNldExvYWRpbmcoa3ljRWRpdE5hbWVTYXZlKTtcclxuICAgICAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKE1vcmFsaXMpO1xyXG4gICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVOYW1lKGdpdmVuX25hbWUudmFsdWUsIG1pZGRsZV9uYW1lLnZhbHVlLCBmYW1pbHlfbmFtZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKHJlc3BvbnNlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kYWwuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWFzb24ubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvcihKU09OLnBhcnNlKHJlYXNvbi5tZXNzYWdlKS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIExvYWRpbmdIZWxwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGt5Y0VkaXROYW1lRXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljRWRpdE5hbWVFcnJvcicpO1xyXG4gICAgICAgIGlmICgha3ljRWRpdE5hbWVFcnJvcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBreWNFZGl0TmFtZUVycm9yLmlubmVySFRNTCA9IG1lc3NhZ2U7XHJcbiAgICAgICAga3ljRWRpdE5hbWVFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZ1bGxOYW1lKCkge1xyXG4gICAgICAgIGxldCBnaXZlbl9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dpdmVuX25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGxldCBtaWRkbGVfbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaWRkbGVfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGZhbWlseV9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZhbWlseV9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdpdmVuX25hbWUudmFsdWUgKyAnICcgKyAoIVN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KG1pZGRsZV9uYW1lLnZhbHVlKSA/IG1pZGRsZV9uYW1lLnZhbHVlICsgJyAnIDogJycpICsgZmFtaWx5X25hbWUudmFsdWU7XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgaWQ9XFxcImt5Y0VkaXRDb250YWN0RmllbGRzZXRcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ3YXJuaW5nQmFyXFxcIj5cXHJcXG4gICAgICAgIDxzdHJvbmc+V2FybmluZzwvc3Ryb25nPjxici8+XFxyXFxuICAgICAgICBBZnRlciB5b3UgY2hhbmdlIHRoaXMgaW5mb3JtYXRpb24gYSBuZXcgS1lDIHByb2Nlc3Mgd2lsbCBiZSBzdGFydGVkLCBhbmQgeW91IHdpbGwgTk9UIGJlIGFibGUgdG8gZG8gYW55XFxyXFxuICAgICAgICB0cmFkZXMgdW50aWwgaXQgaGFzIGJlZW4gYXBwcm92ZWQuXFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8Zm9ybSBpZD1cXFwia3ljRWRpdENvbnRhY3RGb3JtXFxcIj5cXHJcXG4gICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiZW1haWxfYWRkcmVzc1xcXCI+RW1haWw8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJlbWFpbFxcXCIgcmVxdWlyZWQgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgaWQ9XFxcImVtYWlsX2FkZHJlc3NcXFwiIG5hbWU9XFxcImVtYWlsX2FkZHJlc3NcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCJuYW1lQGV4YW1wbGUuY29tXFxcIiBhdXRvY29tcGxldGU9XFxcImVtYWlsXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXFxcIj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJwaG9uZV9udW1iZXJcXFwiPlBob25lPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwidGVsXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBpZD1cXFwicGhvbmVfbnVtYmVyXFxcIiBuYW1lPVxcXCJwaG9uZV9udW1iZXJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCIrMS01NTUtNjY2LTc3ODhcXFwiIGF1dG9jb21wbGV0ZT1cXFwidGVsXFxcIiB2YWx1ZT1cXFwiXFxcIj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJzdHJlZXRfYWRkcmVzc1xcXCI+UGVybWFuZW50IFJlc2lkZW50aWFsIEFkZHJlc3M8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImV4cGxhaW5cXFwiPkl0IG11c3QgYmUgYSBwaHlzaWNhbCBhZGRyZXNzLCBub3QgYSBQTyBib3guPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGlucHV0IHJlcXVpcmVkIGlkPVxcXCJzdHJlZXRfYWRkcmVzc1xcXCIgbmFtZT1cXFwic3RyZWV0X2FkZHJlc3NcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCIyMCBOIFNhbiBNYXRlbyBEclxcXCIgdmFsdWU9XFxcIlxcXCIgYXV0b2NvbXBsZXRlPVxcXCJhZGRyZXNzLWxpbmUxXFxcIj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJ1bml0XFxcIj5Vbml0IC8gQXB0ICM8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cXFwidW5pdFxcXCIgbmFtZT1cXFwidW5pdFxcXCIgdmFsdWU9XFxcIlxcXCI+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiY2l0eVxcXCI+Q2l0eTwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGlkPVxcXCJjaXR5XFxcIiBuYW1lPVxcXCJjaXR5XFxcIiBwbGFjZWhvbGRlcj1cXFwiUGF3bmVlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcImFkZHJlc3MtbGV2ZWwyXFxcIj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJwb3N0YWxfY29kZVxcXCI+UG9zdGFsIGNvZGU8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZCBpZD1cXFwicG9zdGFsX2NvZGVcXFwiIGF1dG9jb21wbGV0ZT1cXFwicG9zdGFsLWNvZGVcXFwiIG5hbWU9XFxcInBvc3RhbF9jb2RlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiOTQ0MDFcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcXFwiPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICB7eyNpZiB1c2F9fVxcclxcbiAgICAgICAgPGRpdiBpZD1cXFwic3RhdGVfZGl2XFxcIj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJzdGF0ZVxcXCI+U3RhdGUgKDIgbGV0dGVycyk8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZCBtYXhsZW5ndGg9XFxcIjJcXFwiIGlkPVxcXCJzdGF0ZVxcXCIgbmFtZT1cXFwic3RhdGVcXFwiIHBsYWNlaG9sZGVyPVxcXCJOWVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgdmFsdWU9XFxcIlxcXCIgYXV0b2NvbXBsZXRlPVxcXCJhZGRyZXNzLWxldmVsMVxcXCI+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIHt7L2lmfX1cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIiBpZD1cXFwia3ljRWRpdENvbnRhY3RFcnJvclxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgaWQ9XFxcImt5Y0VkaXRDb250YWN0U2F2ZVxcXCI+U2F2ZTwvYnV0dG9uPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZm9ybT5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgS3ljVmFsaWRhdG9yRXJyb3IgZnJvbSBcIi4uL2Vycm9ycy9jbG91ZC9LeWNWYWxpZGF0b3JFcnJvclwiO1xyXG5pbXBvcnQgU3RyaW5nSGVscGVyIGZyb20gXCIuL1N0cmluZ0hlbHBlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybUhlbHBlciB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRQYXJhbXMoc2VsZWN0b3I6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgYXMgSFRNTEZvcm1FbGVtZW50O1xyXG4gICAgICAgIGlmICghZm9ybSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXJpYWxpemUoZGF0YSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNlcmlhbGl6ZShkYXRhOiBhbnkpIHtcclxuICAgICAgICBsZXQgb2JqOiBhbnkgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAob2JqW2tleV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9ialtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9ialtrZXldLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGZpbGxJbnB1dHMocHJvcGVydGllczogc3RyaW5nW10sIGl0ZW06IGFueSkge1xyXG4gICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9JyArIHZhbHVlICsgJ10nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tib3gnLCBpbnB1dCwgaXRlbVt2YWx1ZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaXRlbVt2YWx1ZV1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpdGVtW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnKSlcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0W25hbWU9JyArIHZhbHVlICsgJ10nKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3QudmFsdWUgPSBpdGVtW3ZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3QuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB2YWxpZGF0ZShzZWxlY3Rvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IgKyAnIGlucHV0W3JlcXVpcmVkXScpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGlucHV0c1tpXSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KGlucHV0LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpXHJcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KGlucHV0LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4uL01vZGFsXCI7XHJcbmltcG9ydCBLeWNFZGl0Q29udGFjdEZvcm1IdG1sIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0t5Y0VkaXRDb250YWN0Rm9ybS5odG1sJ1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IEZvcm1IZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvRm9ybUhlbHBlclwiO1xyXG5pbXBvcnQgS3ljVmFsaWRhdG9yRXJyb3IgZnJvbSBcIi4uLy4uLy4uL2Vycm9ycy9jbG91ZC9LeWNWYWxpZGF0b3JFcnJvclwiO1xyXG5pbXBvcnQgU3RyaW5nSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL1N0cmluZ0hlbHBlclwiO1xyXG5pbXBvcnQge0FjY291bnRJbmZvfSBmcm9tIFwiLi4vLi4vLi4vZHRvL2FscGFjYS9BY2NvdW50SW5mb1wiO1xyXG5pbXBvcnQgTG9hZGluZ0hlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Mb2FkaW5nSGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNFZGl0Q29udGFjdEZvcm0ge1xyXG4gICAgbW9kYWw6IE1vZGFsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2hvdygpIHtcclxuICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoTW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGFjY291bnQgPSBhd2FpdCB1c2VyU2VydmljZS5nZXRBY2NvdW50KCk7XHJcbiAgICAgICAgbGV0IHVzYSA9IGFjY291bnQuaWRlbnRpdHkuY291bnRyeV9vZl90YXhfcmVzaWRlbmNlID09ICdVU0EnXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0VkaXRDb250YWN0Rm9ybUh0bWwpO1xyXG4gICAgICAgIHRoaXMubW9kYWwuc2hvd01vZGFsKCdFZGl0IGNvbnRhY3QgaW5mb3JtYXRpb24nLCB0ZW1wbGF0ZSh7dXNhOiB1c2F9KSlcclxuXHJcbiAgICAgICAgbGV0IGNvbnRhY3RQcm9wZXJ0aWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYWNjb3VudC5jb250YWN0KTtcclxuICAgICAgICBGb3JtSGVscGVyLmZpbGxJbnB1dHMoY29udGFjdFByb3BlcnRpZXMsIGFjY291bnQuY29udGFjdCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgbGV0IGt5Y0VkaXRDb250YWN0U2F2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNFZGl0Q29udGFjdFNhdmUnKTtcclxuICAgICAgICBreWNFZGl0Q29udGFjdFNhdmU/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy52YWxpZGF0ZSgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBMb2FkaW5nSGVscGVyLnNldExvYWRpbmcoa3ljRWRpdENvbnRhY3RTYXZlKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gRm9ybUhlbHBlci5nZXRQYXJhbXMoJyNreWNFZGl0Q29udGFjdEZvcm0nKTtcclxuICAgICAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKE1vcmFsaXMpO1xyXG4gICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVDb250YWN0KGRhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IocmVzcG9uc2UubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGFjY291bnRJbmZvID0gcmVzcG9uc2UgYXMgQWNjb3VudEluZm87XHJcbiAgICAgICAgICAgICAgICBsZXQgZW1haWxfYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbF9hZGRyZXNzJykgYXMgSFRNTElucHV0RWxlbWVudFxyXG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRJbmZvLmNvbnRhY3QuZW1haWxfYWRkcmVzcyAhPSBlbWFpbF9hZGRyZXNzPy52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKCdFbWFpbCB3YXMgbm90IGNoYW5nZWQuIFRoZSBlbWFpbCAnICsgZW1haWxfYWRkcmVzcz8udmFsdWUgKyAnIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCB1bmRlciBkaWZmZXJlbnQgYWNjb3VudC4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlYXNvbi5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IoSlNPTi5wYXJzZShyZWFzb24ubWVzc2FnZSkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGt5Y0VkaXROYW1lRXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljRWRpdENvbnRhY3RFcnJvcicpO1xyXG4gICAgICAgIGlmICgha3ljRWRpdE5hbWVFcnJvcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBreWNFZGl0TmFtZUVycm9yLmlubmVySFRNTCA9IG1lc3NhZ2U7XHJcbiAgICAgICAga3ljRWRpdE5hbWVFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlKCkge1xyXG4gICAgICAgIGxldCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcja3ljRWRpdENvbnRhY3RGaWVsZHNldCBpbnB1dFtyZXF1aXJlZF0nKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5wdXQgPSBpbnB1dHNbaV0gYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKFN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KGlucHV0LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpXHJcbiAgICAgICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eShpbnB1dC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldCBjbGFzcz1cXFwia3ljVHJ1c3RlZENvbnRhY3RcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ3YXJuaW5nQmFyXFxcIj5cXHJcXG4gICAgICAgIDxzdHJvbmc+V2FybmluZzwvc3Ryb25nPjxici8+XFxyXFxuICAgICAgICBBZnRlciB5b3UgY2hhbmdlIHRoaXMgaW5mb3JtYXRpb24gYSBuZXcgS1lDIHByb2Nlc3Mgd2lsbCBiZSBzdGFydGVkLCBhbmQgeW91IHdpbGwgTk9UIGJlIGFibGUgdG8gZG8gYW55XFxyXFxuICAgICAgICB0cmFkZXMgdW50aWwgaXQgaGFzIGJlZW4gYXBwcm92ZWQuXFxyXFxuICAgIDwvZGl2PlxcclxcblxcclxcbiAgICA8Zm9ybSBpZD1cXFwia3ljVHJ1c3RlZENvbnRhY3RGb3JtXFxcIiBtZXRob2Q9XFxcInBvc3RcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZXhwbGFpblxcXCI+XFxyXFxuICAgICAgICAgICAgQSB0cnVzdGVkIGNvbnRhY3QgaXMgYSBwZXJzb24geW91IGF1dGhvcml6ZSB5b3VyIGZpbmFuY2lhbCBmaXJtIHRvIGNvbnRhY3QgaW4gbGltaXRlZCBjaXJjdW1zdGFuY2VzLFxcclxcbiAgICAgICAgICAgIHN1Y2ggYXMgaWYgdGhlcmUgaXMgYSBjb25jZXJuIGFib3V0IGFjdGl2aXR5IGluIHlvdXIgYWNjb3VudCBhbmQgdGhleSBoYXZlIGJlZW4gdW5hYmxlIHRvIGdldCBpbiB0b3VjaCB3aXRoXFxyXFxuICAgICAgICAgICAgeW91LlxcclxcbiAgICAgICAgICAgIDxici8+PGJyLz5cXHJcXG4gICAgICAgICAgICBBIHRydXN0ZWQgY29udGFjdCBtYXkgYmUgYSBmYW1pbHkgbWVtYmVyLCBhdHRvcm5leSwgYWNjb3VudGFudCBvciBhbm90aGVyIHRoaXJkLXBhcnR5IHdobyB5b3UgYmVsaWV2ZSB3b3VsZFxcclxcbiAgICAgICAgICAgIHJlc3BlY3QgeW91ciBwcml2YWN5IGFuZCBrbm93IGhvdyB0byBoYW5kbGUgdGhlIHJlc3BvbnNpYmlsaXR5LlxcclxcbiAgICAgICAgICAgIFRoZSB0cnVzdGVkIHBlcnNvbiBzaG91bGQgYmUgMTggeWVhcnMgb2xkIG9yIG9sZGVyLlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImdpdmVuX25hbWVcXFwiPkxlZ2FsIGdpdmVuIG5hbWUgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWQgaWQ9XFxcImdpdmVuX25hbWVcXFwiIG5hbWU9XFxcImdpdmVuX25hbWVcXFwiLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJmYW1pbHlfbmFtZVxcXCI+TGVnYWwgZmFtaWx5IG5hbWUgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWQgaWQ9XFxcImZhbWlseV9uYW1lXFxcIiBuYW1lPVxcXCJmYW1pbHlfbmFtZVxcXCIvPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgIElmIHlvdSBmaWxsIGluIG5hbWUsIHlvdSBhcmUgcmVxdWlyZWQgdG8gZmlsbCBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZywgZW1haWwsIHBob25lIG9yIGFkZHJlc3NcXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiIGlkPVxcXCJjb250YWN0X21pc3NpbmdfaW5mb1xcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImVtYWlsX2FkZHJlc3NcXFwiPkVtYWlsIG9mIHRydXN0ZWQgY29udGFjdDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGlkPVxcXCJlbWFpbF9hZGRyZXNzXFxcIiB0eXBlPVxcXCJlbWFpbFxcXCIgbmFtZT1cXFwiZW1haWxfYWRkcmVzc1xcXCIvPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcInBob25lX251bWJlclxcXCI+UGhvbmUgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgaWQ9XFxcInBob25lX251bWJlclxcXCIgdHlwZT1cXFwidGVsXFxcIiBuYW1lPVxcXCJwaG9uZV9udW1iZXJcXFwiLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJzdHJlZXRfYWRkcmVzc1xcXCI+QWRkcmVzcyBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cXFwic3RyZWV0X2FkZHJlc3NcXFwiIG5hbWU9XFxcInN0cmVldF9hZGRyZXNzXFxcIi8+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiY2l0eVxcXCI+Q2l0eSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cXFwiY2l0eVxcXCIgbmFtZT1cXFwiY2l0eVxcXCIvPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcInN0YXRlXFxcIj5TdGF0ZSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCBpZD1cXFwic3RhdGVcXFwiIG5hbWU9XFxcInN0YXRlXFxcIi8+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwicG9zdGFsX2NvZGVcXFwiPlBvc3RhbCBjb2RlIG9mIHRydXN0ZWQgY29udGFjdDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGlkPVxcXCJwb3N0YWxfY29kZVxcXCIgbmFtZT1cXFwicG9zdGFsX2NvZGVcXFwiLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJjb3VudHJ5XFxcIj5Db3VudHJ5IG9mIHRydXN0ZWQgY29udGFjdDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPHNlbGVjdCByZXF1aXJlZCBpZD1cXFwiY291bnRyeVxcXCIgcmVxdWlyZWQgbmFtZT1cXFwiY291bnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIHt7I2VhY2ggY291bnRyaWVzfX1cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3tjb2RlfX1cXFwiPnt7bmFtZX19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIHt7L2VhY2h9fVxcclxcbiAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbnB1dF9lcnJvclxcXCIgaWQ9XFxcImt5Y0VkaXROYW1lRXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGlkPVxcXCJ0cnVzdGVkQ29udGFjdFN1Ym1pdFxcXCI+U3VibWl0PC9idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9mb3JtPlxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvdW50cnlIZWxwZXIge1xyXG4gICAgc3RhdGljIENvdW50cmllcyA9IFtcclxuICAgICAgICB7XCJuYW1lXCI6IFwiVW5pdGVkIFN0YXRlcyBvZiBBbWVyaWNhXCIsIFwiY29kZVwiOiBcIlVTQVwifSxcclxuICAgICAgICB7XCJuYW1lXCI6IFwiVW5pdGVkIEtpbmdkb21cIiwgXCJjb2RlXCI6IFwiR0JSXCJ9LFxyXG4gICAgICAgIHtcIm5hbWVcIjogXCJBZmdoYW5pc3RhblwiLCBcImNvZGVcIjogXCJBRkdcIn0sIHtcIm5hbWVcIjogXCJBbGJhbmlhXCIsIFwiY29kZVwiOiBcIkFMQlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJBbGdlcmlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkRaQVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkFtZXJpY2FuIFNhbW9hXCIsIFwiY29kZVwiOiBcIkFTTVwifSwge1wibmFtZVwiOiBcIkFuZG9ycmFcIiwgXCJjb2RlXCI6IFwiQU5EXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkFuZ29sYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJBR09cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJBbmd1aWxsYVwiLCBcImNvZGVcIjogXCJBSUFcIn0sIHtcIm5hbWVcIjogXCJBbnRhcmN0aWNhXCIsIFwiY29kZVwiOiBcIkFUQVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJBbnRpZ3VhIGFuZCBCYXJidWRhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkFUR1wiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkFyZ2VudGluYVwiLCBcImNvZGVcIjogXCJBUkdcIn0sIHtcIm5hbWVcIjogXCJBcm1lbmlhXCIsIFwiY29kZVwiOiBcIkFSTVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJBcnViYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJBQldcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJBdXN0cmFsaWFcIiwgXCJjb2RlXCI6IFwiQVVTXCJ9LCB7XCJuYW1lXCI6IFwiQXVzdHJpYVwiLCBcImNvZGVcIjogXCJBVVRcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQXplcmJhaWphblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJBWkVcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCLDhWxhbmQgSXNsYW5kc1wiLCBcImNvZGVcIjogXCJBTEFcIn0sIHtcIm5hbWVcIjogXCJCYWhhbWFzXCIsIFwiY29kZVwiOiBcIkJIU1wifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJCYWhyYWluXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkJIUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkJhbmdsYWRlc2hcIiwgXCJjb2RlXCI6IFwiQkdEXCJ9LCB7XCJuYW1lXCI6IFwiQmFyYmFkb3NcIiwgXCJjb2RlXCI6IFwiQlJCXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkJlbGFydXNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQkxSXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQmVsZ2l1bVwiLCBcImNvZGVcIjogXCJCRUxcIn0sIHtcIm5hbWVcIjogXCJCZWxpemVcIiwgXCJjb2RlXCI6IFwiQkxaXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkJlbmluXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkJFTlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkJlcm11ZGFcIiwgXCJjb2RlXCI6IFwiQk1VXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkJodXRhblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJCVE5cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJCb2xpdmlhIChQbHVyaW5hdGlvbmFsIFN0YXRlIG9mKVwiLCBcImNvZGVcIjogXCJCT0xcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQm9uYWlyZSwgU2ludCBFdXN0YXRpdXMgYW5kIFNhYmFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQkVTXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQm9zbmlhIGFuZCBIZXJ6ZWdvdmluYVwiLCBcImNvZGVcIjogXCJCSUhcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQm90c3dhbmFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQldBXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQm91dmV0IElzbGFuZFwiLCBcImNvZGVcIjogXCJCVlRcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQnJhemlsXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkJSQVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkJyaXRpc2ggSW5kaWFuIE9jZWFuIFRlcnJpdG9yeVwiLCBcImNvZGVcIjogXCJJT1RcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQnJ1bmVpIERhcnVzc2FsYW1cIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQlJOXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQnVsZ2FyaWFcIiwgXCJjb2RlXCI6IFwiQkdSXCJ9LCB7XCJuYW1lXCI6IFwiQnVya2luYSBGYXNvXCIsIFwiY29kZVwiOiBcIkJGQVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJCdXJ1bmRpXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkJESVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkNhYm8gVmVyZGVcIiwgXCJjb2RlXCI6IFwiQ1BWXCJ9LCB7XCJuYW1lXCI6IFwiQ2FtYm9kaWFcIiwgXCJjb2RlXCI6IFwiS0hNXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkNhbWVyb29uXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkNNUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkNhbmFkYVwiLCBcImNvZGVcIjogXCJDQU5cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQ2F5bWFuIElzbGFuZHNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQ1lNXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQ2VudHJhbCBBZnJpY2FuIFJlcHVibGljXCIsIFwiY29kZVwiOiBcIkNBRlwifSwge1wibmFtZVwiOiBcIkNoYWRcIiwgXCJjb2RlXCI6IFwiVENEXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkNoaWxlXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkNITFwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkNoaW5hXCIsIFwiY29kZVwiOiBcIkNITlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDaHJpc3RtYXMgSXNsYW5kXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkNYUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkNvY29zIChLZWVsaW5nKSBJc2xhbmRzXCIsIFwiY29kZVwiOiBcIkNDS1wifSwge1wibmFtZVwiOiBcIkNvbG9tYmlhXCIsIFwiY29kZVwiOiBcIkNPTFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDb21vcm9zXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkNPTVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkNvbmdvICh0aGUgRGVtb2NyYXRpYyBSZXB1YmxpYyBvZiB0aGUpXCIsIFwiY29kZVwiOiBcIkNPRFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDb25nb1wiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJDT0dcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJDb29rIElzbGFuZHNcIiwgXCJjb2RlXCI6IFwiQ09LXCJ9LCB7XCJuYW1lXCI6IFwiQ29zdGEgUmljYVwiLCBcImNvZGVcIjogXCJDUklcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiQ3JvYXRpYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJIUlZcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJDdWJhXCIsIFwiY29kZVwiOiBcIkNVQlwifSwge1wibmFtZVwiOiBcIkN1cmHDp2FvXCIsIFwiY29kZVwiOiBcIkNVV1wifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJDeXBydXNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQ1lQXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiQ3plY2hpYVwiLCBcImNvZGVcIjogXCJDWkVcIn0sIHtcIm5hbWVcIjogXCJDw7R0ZSBkJ0l2b2lyZVwiLCBcImNvZGVcIjogXCJDSVZcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRGVubWFya1wiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJETktcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJEamlib3V0aVwiLCBcImNvZGVcIjogXCJESklcIn0sIHtcIm5hbWVcIjogXCJEb21pbmljYVwiLCBcImNvZGVcIjogXCJETUFcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRG9taW5pY2FuIFJlcHVibGljXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkRPTVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkVjdWFkb3JcIiwgXCJjb2RlXCI6IFwiRUNVXCJ9LCB7XCJuYW1lXCI6IFwiRWd5cHRcIiwgXCJjb2RlXCI6IFwiRUdZXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkVsIFNhbHZhZG9yXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlNMVlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkVxdWF0b3JpYWwgR3VpbmVhXCIsIFwiY29kZVwiOiBcIkdOUVwifSwge1wibmFtZVwiOiBcIkVyaXRyZWFcIiwgXCJjb2RlXCI6IFwiRVJJXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkVzdG9uaWFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiRVNUXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiRXN3YXRpbmlcIiwgXCJjb2RlXCI6IFwiU1daXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkV0aGlvcGlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkVUSFwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkZhbGtsYW5kIElzbGFuZHMgW01hbHZpbmFzXVwiLCBcImNvZGVcIjogXCJGTEtcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRmFyb2UgSXNsYW5kc1wiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJGUk9cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJGaWppXCIsIFwiY29kZVwiOiBcIkZKSVwifSwge1wibmFtZVwiOiBcIkZpbmxhbmRcIiwgXCJjb2RlXCI6IFwiRklOXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkZyYW5jZVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJGUkFcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJGcmVuY2ggR3VpYW5hXCIsIFwiY29kZVwiOiBcIkdVRlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJGcmVuY2ggUG9seW5lc2lhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlBZRlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkZyZW5jaCBTb3V0aGVybiBUZXJyaXRvcmllc1wiLCBcImNvZGVcIjogXCJBVEZcIn0sIHtcIm5hbWVcIjogXCJHYWJvblwiLCBcImNvZGVcIjogXCJHQUJcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiR2FtYmlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkdNQlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkdlb3JnaWFcIiwgXCJjb2RlXCI6IFwiR0VPXCJ9LCB7XCJuYW1lXCI6IFwiR2VybWFueVwiLCBcImNvZGVcIjogXCJERVVcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiR2hhbmFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiR0hBXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiR2licmFsdGFyXCIsIFwiY29kZVwiOiBcIkdJQlwifSwge1wibmFtZVwiOiBcIkdyZWVjZVwiLCBcImNvZGVcIjogXCJHUkNcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiR3JlZW5sYW5kXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkdSTFwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkdyZW5hZGFcIiwgXCJjb2RlXCI6IFwiR1JEXCJ9LCB7XCJuYW1lXCI6IFwiR3VhZGVsb3VwZVwiLCBcImNvZGVcIjogXCJHTFBcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiR3VhbVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJHVU1cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJHdWF0ZW1hbGFcIiwgXCJjb2RlXCI6IFwiR1RNXCJ9LCB7XCJuYW1lXCI6IFwiR3Vlcm5zZXlcIiwgXCJjb2RlXCI6IFwiR0dZXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkd1aW5lYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJHSU5cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJHdWluZWEtQmlzc2F1XCIsIFwiY29kZVwiOiBcIkdOQlwifSwge1wibmFtZVwiOiBcIkd1eWFuYVwiLCBcImNvZGVcIjogXCJHVVlcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiSGFpdGlcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiSFRJXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiSGVhcmQgSXNsYW5kIGFuZCBNY0RvbmFsZCBJc2xhbmRzXCIsIFwiY29kZVwiOiBcIkhNRFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJIb2x5IFNlZVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJWQVRcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJIb25kdXJhc1wiLCBcImNvZGVcIjogXCJITkRcIn0sIHtcIm5hbWVcIjogXCJIb25nIEtvbmdcIiwgXCJjb2RlXCI6IFwiSEtHXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkh1bmdhcnlcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiSFVOXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiSWNlbGFuZFwiLCBcImNvZGVcIjogXCJJU0xcIn0sIHtcIm5hbWVcIjogXCJJbmRpYVwiLCBcImNvZGVcIjogXCJJTkRcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiSW5kb25lc2lhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIklETlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIklyYW4gKElzbGFtaWMgUmVwdWJsaWMgb2YpXCIsIFwiY29kZVwiOiBcIklSTlwifSwge1wibmFtZVwiOiBcIklyYXFcIiwgXCJjb2RlXCI6IFwiSVJRXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIklyZWxhbmRcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiSVJMXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiSXNsZSBvZiBNYW5cIiwgXCJjb2RlXCI6IFwiSU1OXCJ9LCB7XCJuYW1lXCI6IFwiSXNyYWVsXCIsIFwiY29kZVwiOiBcIklTUlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJJdGFseVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJJVEFcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJKYW1haWNhXCIsIFwiY29kZVwiOiBcIkpBTVwifSwge1wibmFtZVwiOiBcIkphcGFuXCIsIFwiY29kZVwiOiBcIkpQTlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJKZXJzZXlcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiSkVZXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiSm9yZGFuXCIsIFwiY29kZVwiOiBcIkpPUlwifSwge1wibmFtZVwiOiBcIkthemFraHN0YW5cIiwgXCJjb2RlXCI6IFwiS0FaXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIktlbnlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIktFTlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIktpcmliYXRpXCIsIFwiY29kZVwiOiBcIktJUlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJLb3JlYSAodGhlIERlbW9jcmF0aWMgUGVvcGxlJ3MgUmVwdWJsaWMgb2YpXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlBSS1wiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIktvcmVhICh0aGUgUmVwdWJsaWMgb2YpXCIsIFwiY29kZVwiOiBcIktPUlwifSwge1wibmFtZVwiOiBcIkt1d2FpdFwiLCBcImNvZGVcIjogXCJLV1RcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiS3lyZ3l6c3RhblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJLR1pcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJMYW8gUGVvcGxlJ3MgRGVtb2NyYXRpYyBSZXB1YmxpY1wiLCBcImNvZGVcIjogXCJMQU9cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGF0dmlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIkxWQVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIkxlYmFub25cIiwgXCJjb2RlXCI6IFwiTEJOXCJ9LCB7XCJuYW1lXCI6IFwiTGVzb3Rob1wiLCBcImNvZGVcIjogXCJMU09cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTGliZXJpYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJMQlJcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJMaWJ5YVwiLCBcImNvZGVcIjogXCJMQllcIn0sIHtcIm5hbWVcIjogXCJMaWVjaHRlbnN0ZWluXCIsIFwiY29kZVwiOiBcIkxJRVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJMaXRodWFuaWFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTFRVXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiTHV4ZW1ib3VyZ1wiLCBcImNvZGVcIjogXCJMVVhcIn0sIHtcIm5hbWVcIjogXCJNYWNhb1wiLCBcImNvZGVcIjogXCJNQUNcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTWFkYWdhc2NhclwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJNREdcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJNYWxhd2lcIiwgXCJjb2RlXCI6IFwiTVdJXCJ9LCB7XCJuYW1lXCI6IFwiTWFsYXlzaWFcIiwgXCJjb2RlXCI6IFwiTVlTXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIk1hbGRpdmVzXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIk1EVlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIk1hbGlcIiwgXCJjb2RlXCI6IFwiTUxJXCJ9LCB7XCJuYW1lXCI6IFwiTWFsdGFcIiwgXCJjb2RlXCI6IFwiTUxUXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIk1hcnNoYWxsIElzbGFuZHNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTUhMXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiTWFydGluaXF1ZVwiLCBcImNvZGVcIjogXCJNVFFcIn0sIHtcIm5hbWVcIjogXCJNYXVyaXRhbmlhXCIsIFwiY29kZVwiOiBcIk1SVFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJNYXVyaXRpdXNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTVVTXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiTWF5b3R0ZVwiLCBcImNvZGVcIjogXCJNWVRcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTWV4aWNvXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIk1FWFwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIk1pY3JvbmVzaWEgKEZlZGVyYXRlZCBTdGF0ZXMgb2YpXCIsIFwiY29kZVwiOiBcIkZTTVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJNb2xkb3ZhICh0aGUgUmVwdWJsaWMgb2YpXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIk1EQVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIk1vbmFjb1wiLCBcImNvZGVcIjogXCJNQ09cIn0sIHtcIm5hbWVcIjogXCJNb25nb2xpYVwiLCBcImNvZGVcIjogXCJNTkdcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTW9udGVuZWdyb1wiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJNTkVcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJNb250c2VycmF0XCIsIFwiY29kZVwiOiBcIk1TUlwifSwge1wibmFtZVwiOiBcIk1vcm9jY29cIiwgXCJjb2RlXCI6IFwiTUFSXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIk1vemFtYmlxdWVcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTU9aXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiTXlhbm1hclwiLCBcImNvZGVcIjogXCJNTVJcIn0sIHtcIm5hbWVcIjogXCJOYW1pYmlhXCIsIFwiY29kZVwiOiBcIk5BTVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJOYXVydVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJOUlVcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJOZXBhbFwiLCBcImNvZGVcIjogXCJOUExcIn0sIHtcIm5hbWVcIjogXCJOZXRoZXJsYW5kc1wiLCBcImNvZGVcIjogXCJOTERcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTmV3IENhbGVkb25pYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJOQ0xcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJOZXcgWmVhbGFuZFwiLCBcImNvZGVcIjogXCJOWkxcIn0sIHtcIm5hbWVcIjogXCJOaWNhcmFndWFcIiwgXCJjb2RlXCI6IFwiTklDXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIk5pZ2VyXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIk5FUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIk5pZ2VyaWFcIiwgXCJjb2RlXCI6IFwiTkdBXCJ9LCB7XCJuYW1lXCI6IFwiTml1ZVwiLCBcImNvZGVcIjogXCJOSVVcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiTm9yZm9sayBJc2xhbmRcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTkZLXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiTm9ydGhlcm4gTWFyaWFuYSBJc2xhbmRzXCIsIFwiY29kZVwiOiBcIk1OUFwifSwge1wibmFtZVwiOiBcIk5vcndheVwiLCBcImNvZGVcIjogXCJOT1JcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiT21hblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJPTU5cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJQYWtpc3RhblwiLCBcImNvZGVcIjogXCJQQUtcIn0sIHtcIm5hbWVcIjogXCJQYWxhdVwiLCBcImNvZGVcIjogXCJQTFdcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiUGFsZXN0aW5lLCBTdGF0ZSBvZlwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJQU0VcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJQYW5hbWFcIiwgXCJjb2RlXCI6IFwiUEFOXCJ9LCB7XCJuYW1lXCI6IFwiUGFwdWEgTmV3IEd1aW5lYVwiLCBcImNvZGVcIjogXCJQTkdcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiUGFyYWd1YXlcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiUFJZXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiUGVydVwiLCBcImNvZGVcIjogXCJQRVJcIn0sIHtcIm5hbWVcIjogXCJQaGlsaXBwaW5lc1wiLCBcImNvZGVcIjogXCJQSExcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiUGl0Y2Fpcm5cIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiUENOXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiUG9sYW5kXCIsIFwiY29kZVwiOiBcIlBPTFwifSwge1wibmFtZVwiOiBcIlBvcnR1Z2FsXCIsIFwiY29kZVwiOiBcIlBSVFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJQdWVydG8gUmljb1wiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJQUklcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJRYXRhclwiLCBcImNvZGVcIjogXCJRQVRcIn0sIHtcIm5hbWVcIjogXCJSZXB1YmxpYyBvZiBOb3J0aCBNYWNlZG9uaWFcIiwgXCJjb2RlXCI6IFwiTUtEXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlJvbWFuaWFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiUk9VXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiUnVzc2lhbiBGZWRlcmF0aW9uXCIsIFwiY29kZVwiOiBcIlJVU1wifSwge1wibmFtZVwiOiBcIlJ3YW5kYVwiLCBcImNvZGVcIjogXCJSV0FcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiUsOpdW5pb25cIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiUkVVXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU2FpbnQgQmFydGjDqWxlbXlcIiwgXCJjb2RlXCI6IFwiQkxNXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNhaW50IEhlbGVuYSwgQXNjZW5zaW9uIGFuZCBUcmlzdGFuIGRhIEN1bmhhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlNITlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlNhaW50IEtpdHRzIGFuZCBOZXZpc1wiLCBcImNvZGVcIjogXCJLTkFcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU2FpbnQgTHVjaWFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiTENBXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU2FpbnQgTWFydGluIChGcmVuY2ggcGFydClcIiwgXCJjb2RlXCI6IFwiTUFGXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNhaW50IFBpZXJyZSBhbmQgTWlxdWVsb25cIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiU1BNXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU2FpbnQgVmluY2VudCBhbmQgdGhlIEdyZW5hZGluZXNcIiwgXCJjb2RlXCI6IFwiVkNUXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNhbW9hXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIldTTVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlNhbiBNYXJpbm9cIiwgXCJjb2RlXCI6IFwiU01SXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNhbyBUb21lIGFuZCBQcmluY2lwZVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJTVFBcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJTYXVkaSBBcmFiaWFcIiwgXCJjb2RlXCI6IFwiU0FVXCJ9LCB7XCJuYW1lXCI6IFwiU2VuZWdhbFwiLCBcImNvZGVcIjogXCJTRU5cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU2VyYmlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlNSQlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlNleWNoZWxsZXNcIiwgXCJjb2RlXCI6IFwiU1lDXCJ9LCB7XCJuYW1lXCI6IFwiU2llcnJhIExlb25lXCIsIFwiY29kZVwiOiBcIlNMRVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJTaW5nYXBvcmVcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiU0dQXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU2ludCBNYWFydGVuIChEdXRjaCBwYXJ0KVwiLCBcImNvZGVcIjogXCJTWE1cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU2xvdmFraWFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiU1ZLXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU2xvdmVuaWFcIiwgXCJjb2RlXCI6IFwiU1ZOXCJ9LCB7XCJuYW1lXCI6IFwiU29sb21vbiBJc2xhbmRzXCIsIFwiY29kZVwiOiBcIlNMQlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJTb21hbGlhXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlNPTVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlNvdXRoIEFmcmljYVwiLCBcImNvZGVcIjogXCJaQUZcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU291dGggR2VvcmdpYSBhbmQgdGhlIFNvdXRoIFNhbmR3aWNoIElzbGFuZHNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiU0dTXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiU291dGggU3VkYW5cIiwgXCJjb2RlXCI6IFwiU1NEXCJ9LCB7XCJuYW1lXCI6IFwiU3BhaW5cIiwgXCJjb2RlXCI6IFwiRVNQXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlNyaSBMYW5rYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJMS0FcIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJTdWRhblwiLCBcImNvZGVcIjogXCJTRE5cIn0sIHtcIm5hbWVcIjogXCJTdXJpbmFtZVwiLCBcImNvZGVcIjogXCJTVVJcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiU3ZhbGJhcmQgYW5kIEphbiBNYXllblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJTSk1cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJTd2VkZW5cIiwgXCJjb2RlXCI6IFwiU1dFXCJ9LCB7XCJuYW1lXCI6IFwiU3dpdHplcmxhbmRcIiwgXCJjb2RlXCI6IFwiQ0hFXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlN5cmlhbiBBcmFiIFJlcHVibGljXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlNZUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlRhaXdhbiAoUHJvdmluY2Ugb2YgQ2hpbmEpXCIsIFwiY29kZVwiOiBcIlRXTlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJUYWppa2lzdGFuXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlRKS1wiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlRhbnphbmlhLCBVbml0ZWQgUmVwdWJsaWMgb2ZcIiwgXCJjb2RlXCI6IFwiVFpBXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlRoYWlsYW5kXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlRIQVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlRpbW9yLUxlc3RlXCIsIFwiY29kZVwiOiBcIlRMU1wifSwge1wibmFtZVwiOiBcIlRvZ29cIiwgXCJjb2RlXCI6IFwiVEdPXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlRva2VsYXVcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiVEtMXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiVG9uZ2FcIiwgXCJjb2RlXCI6IFwiVE9OXCJ9LCB7XCJuYW1lXCI6IFwiVHJpbmlkYWQgYW5kIFRvYmFnb1wiLCBcImNvZGVcIjogXCJUVE9cIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiVHVuaXNpYVwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJUVU5cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJUdXJrZXlcIiwgXCJjb2RlXCI6IFwiVFVSXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlR1cmttZW5pc3RhblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJUS01cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJUdXJrcyBhbmQgQ2FpY29zIElzbGFuZHNcIiwgXCJjb2RlXCI6IFwiVENBXCJ9LCB7XCJuYW1lXCI6IFwiVHV2YWx1XCIsIFwiY29kZVwiOiBcIlRVVlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJVZ2FuZGFcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiVUdBXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiVWtyYWluZVwiLCBcImNvZGVcIjogXCJVS1JcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiVW5pdGVkIEFyYWIgRW1pcmF0ZXNcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiQVJFXCJcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlVuaXRlZCBLaW5nZG9tIG9mIEdyZWF0IEJyaXRhaW4gYW5kIE5vcnRoZXJuIElyZWxhbmRcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiR0JSXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiVW5pdGVkIFN0YXRlcyBNaW5vciBPdXRseWluZyBJc2xhbmRzXCIsIFwiY29kZVwiOiBcIlVNSVwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJVbml0ZWQgU3RhdGVzIG9mIEFtZXJpY2FcIixcclxuICAgICAgICAgICAgXCJjb2RlXCI6IFwiVVNBXCJcclxuICAgICAgICB9LCB7XCJuYW1lXCI6IFwiVXJ1Z3VheVwiLCBcImNvZGVcIjogXCJVUllcIn0sIHtcIm5hbWVcIjogXCJVemJla2lzdGFuXCIsIFwiY29kZVwiOiBcIlVaQlwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJWYW51YXR1XCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlZVVFwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlZlbmV6dWVsYSAoQm9saXZhcmlhbiBSZXB1YmxpYyBvZilcIiwgXCJjb2RlXCI6IFwiVkVOXCJ9LCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlZpZXQgTmFtXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlZOTVwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIlZpcmdpbiBJc2xhbmRzIChCcml0aXNoKVwiLCBcImNvZGVcIjogXCJWR0JcIn0sIHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiVmlyZ2luIElzbGFuZHMgKFUuUy4pXCIsXHJcbiAgICAgICAgICAgIFwiY29kZVwiOiBcIlZJUlwiXHJcbiAgICAgICAgfSwge1wibmFtZVwiOiBcIldhbGxpcyBhbmQgRnV0dW5hXCIsIFwiY29kZVwiOiBcIldMRlwifSwge1wibmFtZVwiOiBcIldlc3Rlcm4gU2FoYXJhXCIsIFwiY29kZVwiOiBcIkVTSFwifSwge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJZZW1lblwiLFxyXG4gICAgICAgICAgICBcImNvZGVcIjogXCJZRU1cIlxyXG4gICAgICAgIH0sIHtcIm5hbWVcIjogXCJaYW1iaWFcIiwgXCJjb2RlXCI6IFwiWk1CXCJ9LCB7XCJuYW1lXCI6IFwiWmltYmFid2VcIiwgXCJjb2RlXCI6IFwiWldFXCJ9XHJcbiAgICBdO1xyXG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9Nb2RhbFwiO1xyXG5pbXBvcnQgS3ljRWRpdFRydXN0ZWRDb250YWN0SHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNFZGl0VHJ1c3RlZENvbnRhY3QuaHRtbCc7XHJcbmltcG9ydCBDb3VudHJ5SGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL0NvdW50cnlIZWxwZXJcIjtcclxuaW1wb3J0IEZvcm1IZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvRm9ybUhlbHBlclwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvTG9hZGluZ0hlbHBlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljRWRpdFRydXN0ZWRDb250YWN0IHtcclxuXHJcbiAgICBtb2RhbDogTW9kYWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5tb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93KCkge1xyXG4gICAgICAgIGxldCB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZShNb3JhbGlzKTtcclxuICAgICAgICBsZXQgYWNjb3VudCA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldEFjY291bnQoKTtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0VkaXRUcnVzdGVkQ29udGFjdEh0bWwpO1xyXG4gICAgICAgIHRoaXMubW9kYWwuc2hvd01vZGFsKCdFZGl0IHRydXN0ZWQgY29udGFjdCcsIHRlbXBsYXRlKHtjb3VudHJpZXM6IENvdW50cnlIZWxwZXIuQ291bnRyaWVzfSkpXHJcblxyXG4gICAgICAgIGlmIChhY2NvdW50LnRydXN0ZWRfY29udGFjdCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFjdFByb3BlcnRpZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhY2NvdW50LnRydXN0ZWRfY29udGFjdCk7XHJcbiAgICAgICAgICAgIEZvcm1IZWxwZXIuZmlsbElucHV0cyhjb250YWN0UHJvcGVydGllcywgYWNjb3VudC50cnVzdGVkX2NvbnRhY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZEV2ZW50cygpIHtcclxuXHJcblxyXG4gICAgICAgIGxldCB0cnVzdGVkQ29udGFjdFN1Ym1pdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cnVzdGVkQ29udGFjdFN1Ym1pdCcpO1xyXG4gICAgICAgIHRydXN0ZWRDb250YWN0U3VibWl0Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUZvcm1IZWxwZXIudmFsaWRhdGUoJyNreWNUcnVzdGVkQ29udGFjdEZvcm0nKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBMb2FkaW5nSGVscGVyLnNldExvYWRpbmcodHJ1c3RlZENvbnRhY3RTdWJtaXQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IEZvcm1IZWxwZXIuZ2V0UGFyYW1zKCcja3ljVHJ1c3RlZENvbnRhY3RGb3JtJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoTW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGF3YWl0IHVzZXJTZXJ2aWNlLnVwZGF0ZVRydXN0ZWRDb250YWN0KHBhcmFtcykudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3IocmVzcG9uc2UubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5oaWRlTW9kYWwoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWFzb24ubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKEpTT04ucGFyc2UocmVhc29uLm1lc3NhZ2UpLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIExvYWRpbmdIZWxwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQga3ljRWRpdE5hbWVFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNFZGl0TmFtZUVycm9yJyk7XHJcbiAgICAgICAgaWYgKCFreWNFZGl0TmFtZUVycm9yKSByZXR1cm47XHJcblxyXG4gICAgICAgIGt5Y0VkaXROYW1lRXJyb3IuaW5uZXJIVE1MID0gbWVzc2FnZTtcclxuICAgICAgICBreWNFZGl0TmFtZUVycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBDb250cmFjdEluZm8gZnJvbSBcIi4uLy4uL2NvbnRyYWN0cy9Db250cmFjdEluZm9cIjtcclxuaW1wb3J0IEVycm9ySW5mbyBmcm9tIFwiLi4vLi4vZXJyb3JzL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgQmlnTnVtYmVyIGZyb20gXCJiaWdudW1iZXIuanNcIjtcclxuaW1wb3J0IEJsb2NrY2hhaW5FcnJvciBmcm9tIFwiLi4vLi4vZXJyb3JzL0Jsb2NrY2hhaW5FcnJvclwiO1xyXG5pbXBvcnQgRGF0ZUhlbHBlciBmcm9tICcuLi8uLi91dGlsL0RhdGVIZWxwZXInO1xyXG5pbXBvcnQgQmxvY2tjaGFpblNlcnZpY2UgZnJvbSBcIi4vQmxvY2tjaGFpblNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFVU0RTZXJ2aWNlIGV4dGVuZHMgQmxvY2tjaGFpblNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgQVVTREluZm86IGFueTtcclxuICAgIHByaXZhdGUgc3RhdGljIGxhc3RVcGRhdGU/OiBEYXRlO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYVVTREFtb3VudD86IEJpZ051bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHN1cGVyKG1vcmFsaXMpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldEFVU0RCYWxhbmNlT2YoZXRoQWRkcmVzczogc3RyaW5nKTogUHJvbWlzZTxCaWdOdW1iZXI+IHtcclxuICAgICAgICBpZiAoQVVTRFNlcnZpY2UubGFzdFVwZGF0ZSAmJiBBVVNEU2VydmljZS5hVVNEQW1vdW50ICYmXHJcbiAgICAgICAgICAgICAgICBEYXRlSGVscGVyLmlzT2xkZXJUaGVuKEFVU0RTZXJ2aWNlLmxhc3RVcGRhdGUsIDUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBVVNEU2VydmljZS5hVVNEQW1vdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBhd2FpdCB0aGlzLmdldE9wdGlvbnMoXCJiYWxhbmNlT2ZcIiwge1xyXG4gICAgICAgICAgICBhY2NvdW50OiBldGhBZGRyZXNzXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVGdW5jdGlvbihvcHRpb25zKS50aGVuKGJhbGFuY2VPZiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhbW91bnQgPSB0aGlzLm1vcmFsaXMuVW5pdHMuRnJvbVdlaShiYWxhbmNlT2YudG9TdHJpbmcoKSwgMTgpO1xyXG4gICAgICAgICAgICBBVVNEU2VydmljZS5hVVNEQW1vdW50ID0gbmV3IEJpZ051bWJlcihhbW91bnQpO1xyXG4gICAgICAgICAgICBBVVNEU2VydmljZS5sYXN0VXBkYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBVVNEU2VydmljZS5hVVNEQW1vdW50O1xyXG4gICAgICAgIH0pLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrY2hhaW5FcnJvciA9IG5ldyBCbG9ja2NoYWluRXJyb3IocmVhc29uKTtcclxuICAgICAgICAgICAgRXJyb3JJbmZvLnJlcG9ydChibG9ja2NoYWluRXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpZ051bWJlcigwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QVVzZEFiaSgpIHtcclxuICAgICAgICBpZiAoQVVTRFNlcnZpY2UuQVVTREluZm8pIHJldHVybiBBVVNEU2VydmljZS5BVVNESW5mby5hYmk7XHJcblxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcuLi9hYmkvYVVTRC5qc29uJyk7XHJcbiAgICAgICAgQVVTRFNlcnZpY2UuQVVTREluZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgcmV0dXJuIEFVU0RTZXJ2aWNlLkFVU0RJbmZvLmFiaTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgdHJhbnNmZXIoc3ltYm9sQWRkcmVzcyA6IHN0cmluZywgcXR5IDogQmlnTnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IHRoaXMuZ2V0T3B0aW9ucygndHJhbnNmZXInLCB7XHJcbiAgICAgICAgICAgIHJlY2lwaWVudDogc3ltYm9sQWRkcmVzcyxcclxuICAgICAgICAgICAgYW1vdW50OiBNb3JhbGlzLlVuaXRzLlRva2VuKHF0eS50b1N0cmluZygpLCAxOClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUZ1bmN0aW9uKG9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBibG9ja2NoYWluRXJyb3IgPSBuZXcgQmxvY2tjaGFpbkVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvckluZm8ucmVwb3J0KGJsb2NrY2hhaW5FcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBBVVNEU2VydmljZS5hVVNEQW1vdW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIEFVU0RTZXJ2aWNlLmxhc3RVcGRhdGUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE9wdGlvbnMoZnVuY3Rpb25OYW1lIDogc3RyaW5nLCBwYXJhbXMgOiBhbnkpIHtcclxuICAgICAgICBsZXQgY29udHJhY3RJbmZvID0gQ29udHJhY3RJbmZvLmdldENvbnRyYWN0SW5mbygpO1xyXG4gICAgICAgIGxldCBhYmkgPSBhd2FpdCB0aGlzLmdldEFVc2RBYmkoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiBjb250cmFjdEluZm8uQVVTRF9BRERSRVNTLFxyXG4gICAgICAgICAgICBmdW5jdGlvbk5hbWU6IGZ1bmN0aW9uTmFtZSxcclxuICAgICAgICAgICAgYWJpOiBhYmksXHJcbiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8YXJ0aWNsZT5cXHJcXG4gICAgPGRpdiBpZD1cXFwiYmVmb3JlRnVuZGluZ1xcXCI+XFxyXFxuICAgICAgICBUbyB1c2UgbGltaW5hbC5tYXJrZXQgeW91IG5lZWQgc29tZSBhVVNELiBhVVNEIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFVTRC5cXHJcXG4gICAgICAgIFdlIGNhbiBnaXZlIHlvdSBzb21lIGFVU0QgKHRoaXMgaXMgYWxsIGZha2UgbW9uZXkpLCBzbyB5b3UgY2FuIHBsYXkgd2l0aCB0aGUgc3lzdGVtLlxcclxcblxcclxcbiAgICAgICAgRmlyc3QsIHlvdSBuZWVkIHRvIGFkZCBhVVNEIHRvIHlvdSB3YWxsZXQuXFxyXFxuXFxyXFxuICAgICAgICA8YnV0dG9uIGlkPVxcXCJhZGRUb2tlblRvV2FsbGV0XFxcIj5BZGQgYVVTRCB0byB3YWxsZXQ8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxibG9ja3F1b3RlIGlkPVxcXCJuZWVkVG9Db3B5XFxcIiBjbGFzcz1cXFwiZC1ub25lXFxcIj5cXHJcXG4gICAgICAgICAgICBJZiB0aGUgYnV0dG9uIGRpZG4ndCB3b3JrLCB5b3UgY2FuIGNvcHkgdGhlIGFkZHJlc3MgaGVyZSBhbmQgaW1wb3J0IGl0IGludG8geW91ciB3YWxsZXRcXHJcXG4gICAgICAgICAgICA8aW5wdXQgdmFsdWU9XFxcInt7YVVTREFkZHJlc3N9fVxcXCIvPlxcclxcbiAgICAgICAgPC9ibG9ja3F1b3RlPlxcclxcbiAgICAgICAgV2hlbiB5b3UgaGF2ZSBhVVNEIHRvIHlvdSB3YWxsZXQsIHlvdSBjYW4gcmVxdWVzdCBzb21lIG1vbmV5IHRvIHRyYWRlIHdpdGguXFxyXFxuXFxyXFxuICAgICAgICA8YnV0dG9uIGlkPVxcXCJyZXF1ZXN0RmFrZUFVU0RcXFwiPlJlcXVlc3Qgc29tZSBhVVNEPC9idXR0b24+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ3YXJuaW5nQmFyIG5vdGlmaWNhdGlvbkJhciBkLW5vbmVcXFwiIGlkPVxcXCJmdW5kaW5nRXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBpZD1cXFwiYWZ0ZXJGdW5kaW5nXFxcIiBjbGFzcz1cXFwiZC1ub25lIGNlbnRlclxcXCI+XFxyXFxuICAgICAgICBXZSBoYXZlIG5vdyBzZW5kaW5nIGFVU0QgdG8geW91ciB3YWxsZXQuIFRoaXMgdXN1YWxseSB0YWtlcyBmZXcgbWludXRlcywgc28gbGV0cyB3YWl0LlxcclxcbjxiciAvPjxiciAvPlxcclxcbiAgICAgICAgV2hlbiB5b3UgaGF2ZSB0aGUgYVVTRCBpbiB5b3Ugd2FsbGV0LCB3ZSB3aWxsIHRlbGwgeW91LlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8aDM+Q3VycmVudCBhVVNEIGJhbGFuY2U8L2gzPlxcclxcbiAgICAgICAgICAgIDxkaXYgaWQ9XFxcImN1cnJlbnRBVVNEQmFsYW5jZVxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcImVycm9yQWZ0ZXJUcnlGdW5kaW5nXFxcIiBjbGFzcz1cXFwiZC1ub25lXFxcIj5cXHJcXG4gICAgICAgIFdlIGhhZCBhbiBlcnJvciB3aGlsZSB0cnlpbmcgdG8gZnVuZCB5b3UuIFdlJ2xsIGJlIGNyYWNraW5nIGF0IHRoZSBpc3N1ZSBzb29uIHRvIGZpeCBpdC5cXHJcXG4gICAgICAgIFRyeSBhZ2FpbiBpbiBmZXcgbWludXRlcy4gSWYgbm90LCB0cnkgYWdhaW4gaW4gZmV3IGhvdXJzLlxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgPGEgaHJlZj1cXFwiI1xcXCIgaWQ9XFxcInJlZ2lzdGVyQmFua0luZm9cXFwiPlJlZ2lzdGVyIGJhbmsgaW5mb3JtYXRpb24gKG5vdCBuZWVkZWQgZm9yIFNhbmRib3gpPC9hPlxcclxcbjwvYXJ0aWNsZT5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IE5ldHdvcmtJbmZvIGZyb20gXCIuLi8uLi9uZXR3b3Jrcy9OZXR3b3JrSW5mb1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnVuZGluZ1NlcnZpY2Uge1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3RGYWtlRnVuZGluZygpIHtcclxuICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bignZnVuZFVzZXInLCB7Y2hhaW5JZDpuZXR3b3JrSW5mby5DaGFpbklkfSk7XHJcbiAgICB9XHJcblxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPHA+U2V0dXAgeW91ciBiYW5rIHJlbGF0aW9uc2hpcCB3aXRoIExpbWluYWwubWFya2V0LiBQbGVhc2UgY2hvb3NlIHRoZSB0eXBlIG9mIHRyYW5zZmVyIHlvdSB3YW50IHRvIG1ha2U8L3A+XFxyXFxuPHVsPlxcclxcbiAgICA8bGk+PGxhYmVsPjxpbnB1dCB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwiYmFua190cmFuc2ZlclxcXCIgaWQ9XFxcImFjaF90cmFuc2ZlclxcXCIgdmFsdWU9XFxcIjFcXFwiLz4gQUNIIGJhbmsgdHJhbnNmZXIgKFVTKTwvbGFiZWw+XFxyXFxuICAgIDwvbGk+XFxyXFxuICAgIDxsaT48bGFiZWw+PGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJiYW5rX3RyYW5zZmVyXFxcIiBpZD1cXFwid2lyZV90cmFuc2ZlclxcXCIgdmFsdWU9XFxcIjJcXFwiLz4gV2lyZSB0cmFuc2ZlclxcclxcbiAgICAgICAgKEludGVybmF0aW9uYWwpPC9sYWJlbD48L2xpPlxcclxcbjwvdWw+XFxyXFxuPGRpdiBpZD1cXFwic2VsZWN0RnVuZGluZ1R5cGVFcnJvclxcXCIgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIj48L2Rpdj5cXHJcXG48YnV0dG9uIGlkPVxcXCJuZXh0X2JhbmtfaW5mb3JtYXRpb25cXFwiPk5leHQ6IEJhbmsgaW5mb3JtYXRpb248L2J1dHRvbj5cXHJcXG5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IEFVU0RGdW5kIGZyb20gXCIuL0FVU0RGdW5kXCI7XHJcbmltcG9ydCBTZWxlY3RGdW5kaW5nVHlwZUh0bWwgZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9GdW5kaW5nL1NlbGVjdEZ1bmRpbmdUeXBlLmh0bWwnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0RnVuZGluZ1R5cGUge1xyXG5cclxuICAgIGFVc2RGdW5kOiBBVVNERnVuZFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFVc2RGdW5kOiBBVVNERnVuZCkge1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQgPSBhVXNkRnVuZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvdygpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoU2VsZWN0RnVuZGluZ1R5cGVIdG1sKTtcclxuXHJcbiAgICAgICAgdGhpcy5hVXNkRnVuZC5tb2RhbC5zaG93TW9kYWwoJ1NlbGVjdCBmdW5kaW5nIHR5cGUnLCB0ZW1wbGF0ZSh7fSkpO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmRFdmVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEV2ZW50KCkge1xyXG4gICAgICAgIGxldCBuZXh0X2JhbmtfaW5mb3JtYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV4dF9iYW5rX2luZm9ybWF0aW9uJyk7XHJcbiAgICAgICAgbmV4dF9iYW5rX2luZm9ybWF0aW9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC5oaWRlRXJyb3IoJ3NlbGVjdEZ1bmRpbmdUeXBlRXJyb3InKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhY2hfdHJhbnNmZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNoX3RyYW5zZmVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGFjaF90cmFuc2Zlcj8uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC5hY2hSZWxhdGlvbnNoaXAuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB3aXJlX3RyYW5zZmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpcmVfdHJhbnNmZXInKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAod2lyZV90cmFuc2Zlcj8uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC53aXJlVHJhbnNmZXIuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnNob3dFcnJvcignc2VsZWN0RnVuZGluZ1R5cGVFcnJvcicsICdQbGVhc2Ugc2VsZWN0IGZ1bmRpbmcgdHlwZScpXHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQ+XFxyXFxuICAgIDxwPkJlZm9yZSB5b3UgY2FuIHRyYW5zZmVyLCB5b3UgbmVlZCB0byBzZXQgdXAgeW91ciBiYW5rIGluZm9ybWF0aW9uLlxcclxcbiAgICAgICAgV2UgdXNlIDxhIGhyZWY9XFxcImh0dHBzOi8vcGxhaWQuY29tXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+UGxhaWQ8L2E+IHRvIGNvbm5lY3QgeW91ciBhY2NvdW50IHdpdGggdGhlIGJyb2tlciBhY2NvdW50XFxyXFxuICAgICAgICA8YnIvPjxici8+XFxyXFxuICAgICAgICBQbGFpZCBpcyBhIHNlY3VyZSBzZXJ2aWNlIHRoYXQgbWFrZXMgaXQgZWFzeSBmb3IgeW91IHRvIGNvbm5lY3QgeW91ciBiYW5rIGFjY291bnQgaW5mb3JtYXRpb24uXFxyXFxuICAgICAgICBXZSBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdHJhbnNmZXIgZnJvbSB5b3UgYWNjb3VudCBvciBhbnkgb3RoZXIgYWNjZXNzIHRvIHlvdXIgYmFuayBhY2NvdW50LlxcclxcbiAgICA8L3A+XFxyXFxuICAgIDxmb3JtIGlkPVxcXCJhY2hGb3JtXFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIiBpZD1cXFwiYWNoRXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cXFwiYWNoX3ByZXZpb3VzXFxcIj5QcmV2aW91czogRnVuZGluZyB0eXBlPC9idXR0b24+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cXFwiY29ubmVjdFBsYWlkXFxcIj5Db25uZWN0IHVzaW5nIFBsYWlkPC9idXR0b24+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgPC9mb3JtPlxcclxcblxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBBVVNERnVuZCBmcm9tIFwiLi9BVVNERnVuZFwiO1xyXG5pbXBvcnQgQUNIUmVsYXRpb25zaGlwSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0Z1bmRpbmcvQUNIUmVsYXRpb25zaGlwLmh0bWwnO1xyXG5pbXBvcnQgRm9ybUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Gb3JtSGVscGVyXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmFja2VuZC9Vc2VyU2VydmljZVwiO1xyXG5pbXBvcnQgTG9hZGluZ0hlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Mb2FkaW5nSGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBQ0hSZWxhdGlvbnNoaXAge1xyXG5cclxuICAgIGFVc2RGdW5kOiBBVVNERnVuZFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFVc2RGdW5kOiBBVVNERnVuZCkge1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQgPSBhVXNkRnVuZDtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShBQ0hSZWxhdGlvbnNoaXBIdG1sKTtcclxuXHJcbiAgICAgICAgdGhpcy5hVXNkRnVuZC5tb2RhbC5zaG93TW9kYWwoJ0JhbmsgaW5mb3JtYXRpb24nLCB0ZW1wbGF0ZSh7fSkpO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmRFdmVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEV2ZW50KCkge1xyXG4gICAgICAgIGxldCBjb25uZWN0UGxhaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdFBsYWlkJyk7XHJcbiAgICAgICAgY29ubmVjdFBsYWlkPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3RQbGFpZEFjdGlvbigpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBhY2hfcHJldmlvdXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNoX3ByZXZpb3VzJyk7XHJcbiAgICAgICAgYWNoX3ByZXZpb3VzPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnNlbGVjdEZ1bmRpbmdUeXBlLnNob3coKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0UGxhaWRBY3Rpb24oKSB7XHJcbiAgICAgICAgbGV0IGNvbm5lY3RQbGFpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0UGxhaWQnKTtcclxuICAgICAgICBMb2FkaW5nSGVscGVyLnNldExvYWRpbmcoY29ubmVjdFBsYWlkKTtcclxuICAgICAgICB0aGlzLmFVc2RGdW5kLmhpZGVFcnJvcignYWNoRXJyb3InKTtcclxuXHJcbiAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMuYVVzZEZ1bmQubW9yYWxpcyk7XHJcbiAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UuZ2V0UGxhaWRMaW5rVG9rZW4oKVxyXG4gICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC5zaG93RXJyb3IoJ2FjaEVycm9yJywgcmVhc29uKVxyXG4gICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2UnLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGxhaWRUb2tlbiA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9jZG4ucGxhaWQuY29tL2xpbmsvdjIvc3RhYmxlL2xpbmstaW5pdGlhbGl6ZS5qcyc7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBsYWlkQ29ubmVjdGlvbihwbGFpZFRva2VuKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBhY2hGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjaEZvcm0nKTtcclxuICAgICAgICAgICAgICAgIGFjaEZvcm0hLmFwcGVuZChzY3JpcHQpO1xyXG5cclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlUGxhaWRDb25uZWN0aW9uKHBsYWlkVG9rZW46IGFueSkge1xyXG4gICAgICAgIGxldCBsaW5rSGFuZGxlciA9IFBsYWlkLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIHRva2VuOiBwbGFpZFRva2VuLmxpbmtfdG9rZW4sXHJcbiAgICAgICAgICAgIG9uU3VjY2VzczogYXN5bmMgKHB1YmxpY190b2tlbjogYW55LCBtZXRhZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1ldGFkYXRhLmFjY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBMb2FkaW5nSGVscGVyLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnNob3dFcnJvcignYWNoRXJyb3InLCBcIkRpZG4ndCByZWNlaXZlIGFueSBpbmZvcm1hdGlvbiBmcm9tIFBsYWlkLiBQbGVhc2UgdHJ5IGFnYWluLiBJZiBpdCBkb2Vzbid0IHdvcmsuIFBsZWFzZSBjb250YWN0IHVzIGF0IGluZm9AbGltaW5hbC5tYXJrZXRcIilcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UodGhpcy5hVXNkRnVuZC5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXJTZXJ2aWNlLmNyZWF0ZUFjaFJlbGF0aW9uc2hpcChwdWJsaWNfdG9rZW4sIG1ldGFkYXRhLmFjY291bnQuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbi5lcnJvci5pbmRleE9mKCdvbmx5IG9uZSBhY3RpdmUgYWNoIHJlbGF0aW9uc2hpcCcpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFua1JlbGF0aW9uc2hpcCA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldEJhbmtSZWxhdGlvbnNoaXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYVVzZEZ1bmQudHJhbnNmZXIuc2hvdyhiYW5rUmVsYXRpb25zaGlwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYVVzZEZ1bmQuc2hvd0Vycm9yKCdhY2hFcnJvcicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2FkaW5nSGVscGVyLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGVBY2hSZWxhdGlvbnNoaXAnLCByZXNwb25zZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC50cmFuc2Zlci5zaG93KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25FeGl0OiAoZXJyOiBhbnksIG1ldGFkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyciwgbWV0YWRhdGEpO1xyXG4gICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGlua0hhbmRsZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcblxcclxcbiAgICA8Zm9ybT5cXHJcXG4gICAgICAgIDxwPlxcclxcbiAgICAgICAgICAgIFRvIGZpbGwgdXAgeW91ciBicm9rZXIgYWNjb3VudCwgeW91IG5lZWQgdG8gbm90aWZ5IExpbWluYWwubWFya2V0IGZpcnN0IGFib3V0IHlvdXIgdHJhbnNmZXIsXFxyXFxuICAgICAgICAgICAgd2UgY2FuIHRoZW4gbWF0Y2ggaXQgd2l0aCB5b3VyIGFjY291bnQuXFxyXFxuICAgICAgICAgICAgPGJyLz48YnIvPlxcclxcbiAgICAgICAgICAgIFR5cGUgaW4gdGhlIGFtb3VudCB5b3Ugd291bGQgbGlrZSB0byB0cmFuc2ZlciB0byB5b3UgYnJva2VyIGFjY291bnQuXFxyXFxuICAgICAgICAgICAge3sjaWYgYmFua19hY2NvdW50X251bWJlcn19XFxyXFxuICAgICAgICAgICAgPGJyLz48YnIvPlxcclxcbiAgICAgICAgICAgIFRoZSBtb25leSBzaG91bGQgY29tZSBmcm9tIDxzdHJvbmc+e3tiYW5rX2FjY291bnRfbnVtYmVyfX08L3N0cm9uZz5cXHJcXG4gICAgICAgICAgICB7ey9pZn19XFxyXFxuICAgICAgICA8L3A+XFxyXFxuICAgICAgICA8YnIvPlxcclxcbiAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgIEFtb3VudCBpbiBVUyBkb2xsYXJzICgkKVxcclxcbiAgICAgICAgICAgIDxpbnB1dCBuYW1lPVxcXCJhbW91bnRcXFwiIGNsYXNzPVxcXCJhbW91bnRcXFwiIHR5cGU9XFxcInRlbFxcXCIgaWQ9XFxcImFtb3VudFxcXCIgbWlubGVuZ3RoPVxcXCIxXFxcIiByZXF1aXJlZC8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwidHJhbnNmZXJfdHlwZVxcXCIgaWQ9XFxcInRyYW5zZmVyX3R5cGVcXFwiIHZhbHVlPVxcXCJ7e3RyYW5zZmVyX3R5cGV9fVxcXCIvPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwicmVsYXRpb25zaGlwX2lkXFxcIiBpZD1cXFwicmVsYXRpb25zaGlwX2lkXFxcIiB2YWx1ZT1cXFwie3tyZWxhdGlvbnNoaXBJZH19XFxcIi8+XFxyXFxuICAgICAgICA8aW5wdXQgdHlwZT1cXFwiaGlkZGVuXFxcIiBuYW1lPVxcXCJkaXJlY3Rpb25cXFwiIGlkPVxcXCJkaXJlY3Rpb25cXFwiIHZhbHVlPVxcXCJJTkNPTUlOR1xcXCIvPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiIGlkPVxcXCJ0cmFuc2ZlckVycm9yXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XFxcIm5vdGlmeVRyYW5zZmVyXFxcIj5Ob3RpZnkgTGltaW5hbC5tYXJrZXQgb2YgaW5jb21pbmcgdHJhbnNmZXI8L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Zvcm0+XFxyXFxuICAgIHt7e3RyYW5zZmVyc319fVxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImV4cG9ydCBlbnVtIFRyYW5zZmVyRGlyZWN0aW9uRW51bSB7XHJcbiAgICBJbmNvbWluZyA9ICdJTkNPTUlORycsXHJcbiAgICBPdXRnb2luZyA9ICdPVVRHT0lORydcclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxoci8+XFxyXFxuPGgzPnt7RGlyZWN0aW9ufX0gdHJhbnNmZXJzPC9oMz5cXHJcXG57eyNpZiB0cmFuc2ZlcnMubGVuZ3RofX1cXHJcXG48cD5CZWxvdyBpcyBhIGxpc3Qgb2YgdHJhbnNmZXJzLCBjb25maXJtZWQgYW5kIG5vdCBjb25maXJtZWQuPC9wPlxcclxcbjx0YWJsZT5cXHJcXG4gICAgPHRoZWFkPlxcclxcbiAgICA8dHI+XFxyXFxuICAgICAgICA8dGg+QW1vdW50PC90aD5cXHJcXG4gICAgICAgIDx0aD5TdGF0dXM8L3RoPlxcclxcbiAgICAgICAgPHRoPkNyZWF0ZWQ8L3RoPlxcclxcbiAgICAgICAgPHRoPkV4cGlyZXM8L3RoPlxcclxcbiAgICA8L3RyPlxcclxcbiAgICA8L3RoZWFkPlxcclxcbiAgICA8dGJvZHk+XFxyXFxuICAgIHt7I2VhY2ggdHJhbnNmZXJzfX1cXHJcXG4gICAgPHRyPlxcclxcbiAgICAgICAgPHRkPiR7e2Ftb3VudH19PC90ZD5cXHJcXG4gICAgICAgIDx0ZCBpZD1cXFwic3RhdHVzX3t7aWR9fVxcXCI+e3tzdGF0dXN9fTwvdGQ+XFxyXFxuICAgICAgICA8dGQ+e3tkYXRlVGltZUZvcm1hdCBjcmVhdGVkX2F0fX08L3RkPlxcclxcbiAgICAgICAgPHRkPnt7ZGF0ZVRpbWVGb3JtYXQgZXhwaXJlc19hdH19PC90ZD5cXHJcXG4gICAgICAgIDx0ZCBpZD1cXFwiZGVsZXRlX3t7aWR9fVxcXCIgY2xhc3M9XFxcInt7Y2xhc3NCeVN0YXR1cyBzdGF0dXN9fVxcXCI+PGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImRlbGV0ZVRyYW5zZmVyXFxcIiBkYXRhLWlkPVxcXCJ7e2lkfX1cXFwiPkNhbmNlbDwvYT5cXHJcXG4gICAgICAgIDwvdGQ+XFxyXFxuICAgIDwvdHI+XFxyXFxuICAgIHt7L2VhY2h9fVxcclxcbiAgICA8L3Rib2R5PlxcclxcbjwvdGFibGU+XFxyXFxue3tlbHNlfX1cXHJcXG48cD5ObyB0cmFuc2ZlcnMgcmVnaXN0ZXJlZDwvcD5cXHJcXG57ey9pZn19XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhhbmRsZWJhckhlbHBlcnMge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJIZWxwZXJzKCkge1xyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3BlcmMnLCBmdW5jdGlvbiAobnVtYmVyOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChudW1iZXIpICogMTAwMDApIC8gMTAwICsgJyUnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3JvdW5kJywgZnVuY3Rpb24gKG51bWJlcjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQobnVtYmVyKSAqIDEwMCkgLyAxMDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3JvdW5kMicsIGZ1bmN0aW9uIChudW1iZXI6IHN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KG51bWJlcikgKiAxMDAwMCkgLyAxMDAwMDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdjbGFzc0NvbG9yJywgZnVuY3Rpb24gKG51bWJlcjogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobnVtYmVyID4gMCkgPyBcImdyZWVuXCIgOiBcInJlZFwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2RhdGVUaW1lRm9ybWF0JywgZnVuY3Rpb24gKHN0ckRhdGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHN0ckRhdGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVN0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignY2xhc3NCeVN0YXR1cycsIGZ1bmN0aW9uIChzdGF0dXM6IHN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gKHN0YXR1cyA9PSAnUVVFVUVEJyB8fCBzdGF0dXMgPT0gJ0FQUFJPVkFMX1BFTkRJTkcnKSA/ICcnIDogJ2hpZGRlbidcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBUcmFuc2ZlcnNMaXN0SHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0Z1bmRpbmcvVHJhbnNmZXJzTGlzdC5odG1sJ1xyXG5pbXBvcnQgSGFuZGxlYmFySGVscGVycyBmcm9tIFwiLi4vLi4vLi4vdXRpbC9IYW5kbGViYXJIZWxwZXJzXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmFja2VuZC9Vc2VyU2VydmljZVwiO1xyXG5pbXBvcnQgTW9yYWxpcyBmcm9tIFwibW9yYWxpc1wiO1xyXG5pbXBvcnQge1RyYW5zZmVyRGlyZWN0aW9uRW51bX0gZnJvbSBcIi4uLy4uLy4uL2VudW1zL1RyYW5zZmVyRGlyZWN0aW9uRW51bVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhbnNmZXJzTGlzdCB7XHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcztcclxuICAgIHByaXZhdGUgdXNlclNlcnZpY2U6IFVzZXJTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgdGhpcy5tb3JhbGlzID0gbW9yYWxpcztcclxuICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZW5kZXIoZGlyZWN0aW9uOiBUcmFuc2ZlckRpcmVjdGlvbkVudW0pIHtcclxuXHJcbiAgICAgICAgSGFuZGxlYmFySGVscGVycy5yZWdpc3RlckhlbHBlcnMoKTtcclxuXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyc1RlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFRyYW5zZmVyc0xpc3RIdG1sKTtcclxuICAgICAgICBsZXQgdHJhbnNmZXJzID0gYXdhaXQgdGhpcy51c2VyU2VydmljZS5nZXRMYXRlc3RUcmFuc2ZlcnMoZGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZmVyc1RlbXBsYXRlKHtEaXJlY3Rpb246IGRpcmVjdGlvbiwgdHJhbnNmZXJzOiB0cmFuc2ZlcnN9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGxldCBkZWxldGVUcmFuc2ZlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsZXRlVHJhbnNmZXInKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbGV0ZVRyYW5zZmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBkZWxldGVUcmFuc2ZlcnNbaV0/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIHRoaXMgd2l0aGRyYXcgcmVxdWVzdD8nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSAoZGVsZXRlVHJhbnNmZXJzW2ldIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0WydpZCddO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UuZGVsZXRlVHJhbnNmZXIoaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhdHVzVGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzXycgKyBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXNUZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGQuaW5uZXJUZXh0ID0gJ0NBTkNFTEVEJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVsZXRlVGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlXycgKyBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRkPy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IEFVU0RGdW5kIGZyb20gXCIuL0FVU0RGdW5kXCI7XHJcbmltcG9ydCBUcmFuc2Zlckh0bWwgZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9GdW5kaW5nL1RyYW5zZmVyLmh0bWwnXHJcbmltcG9ydCB7QmFua1JlbGF0aW9uc2hpcH0gZnJvbSBcIi4uLy4uLy4uL2R0by9hbHBhY2EvQmFua1JlbGF0aW9uc2hpcFwiO1xyXG5pbXBvcnQgU3RyaW5nSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL1N0cmluZ0hlbHBlclwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvTG9hZGluZ0hlbHBlclwiO1xyXG5pbXBvcnQge1RyYW5zZmVyRGlyZWN0aW9uRW51bX0gZnJvbSBcIi4uLy4uLy4uL2VudW1zL1RyYW5zZmVyRGlyZWN0aW9uRW51bVwiO1xyXG5pbXBvcnQgVHJhbnNmZXJzTGlzdCBmcm9tIFwiLi9UcmFuc2ZlcnNMaXN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFuc2ZlciB7XHJcblxyXG4gICAgbW9yYWxpczogdHlwZW9mIE1vcmFsaXM7XHJcbiAgICBhVXNkRnVuZDogQVVTREZ1bmRcclxuICAgIGJhbmtSZWxhdGlvbnNoaXA/OiBCYW5rUmVsYXRpb25zaGlwO1xyXG4gICAgcHJpdmF0ZSB0cmFuc2ZlcnNMaXN0OiBUcmFuc2ZlcnNMaXN0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzLCBhVXNkRnVuZDogQVVTREZ1bmQpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQgPSBhVXNkRnVuZDtcclxuICAgICAgICB0aGlzLnRyYW5zZmVyc0xpc3QgPSBuZXcgVHJhbnNmZXJzTGlzdCh0aGlzLm1vcmFsaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93KGJhbmtSZWxhdGlvbnNoaXA6IEJhbmtSZWxhdGlvbnNoaXApIHtcclxuICAgICAgICBpZiAoIWJhbmtSZWxhdGlvbnNoaXApIHtcclxuICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC5tb2RhbC5zaG93TW9kYWwoJ05vIGJhbmsgcmVsYXRpb25zaGlwIGV4aXN0cycsICdObyBiYW5rIHJlbGF0aW9uc2hpcCBleGlzdHMuIFlvdSBuZWVkIHRvIGNyZWF0ZSB0aGlzIGJlZm9yZSB5b3UgY2FuIHRyYW5zZmVyIG1vbmV5LiBDbG9zZSB0aGUgd2luZG93IGFuZCB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmFua1JlbGF0aW9uc2hpcCA9IGJhbmtSZWxhdGlvbnNoaXA7XHJcblxyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShUcmFuc2Zlckh0bWwpO1xyXG4gICAgICAgIGxldCB0cmFuc2ZlcnNMaXN0SHRtbCA9IGF3YWl0IHRoaXMudHJhbnNmZXJzTGlzdC5yZW5kZXIoVHJhbnNmZXJEaXJlY3Rpb25FbnVtLkluY29taW5nKTtcclxuXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyX3R5cGUgPSAoU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkoYmFua1JlbGF0aW9uc2hpcC5iYW5rX2FjY291bnRfbnVtYmVyKSAmJiBiYW5rUmVsYXRpb25zaGlwLmJhbmtfYWNjb3VudF90eXBlICE9ICcnKSA/ICd3aXJlJyA6ICdhY2gnO1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQubW9kYWwuc2hvd01vZGFsKCdDcmVhdGUgdHJhbnNmZXIgbm90aWZpY2F0aW9uJywgdGVtcGxhdGUoe1xyXG4gICAgICAgICAgICB0cmFuc2ZlcnM6IHRyYW5zZmVyc0xpc3RIdG1sLFxyXG4gICAgICAgICAgICB0cmFuc2Zlcl90eXBlOiB0cmFuc2Zlcl90eXBlLFxyXG4gICAgICAgICAgICByZWxhdGlvbnNoaXBJZDogYmFua1JlbGF0aW9uc2hpcC5pZFxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMudHJhbnNmZXJzTGlzdC5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIGxldCBub3RpZnlUcmFuc2ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZnlUcmFuc2ZlcicpO1xyXG4gICAgICAgIG5vdGlmeVRyYW5zZmVyPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYVVzZEZ1bmQuaGlkZUVycm9yKCd0cmFuc2ZlckVycm9yJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ftb3VudCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eShhbW91bnQudmFsdWUpIHx8IHBhcnNlRmxvYXQoYW1vdW50LnZhbHVlKSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnNob3dFcnJvcignYW1vdW50RXJyb3InLCAnQW1vdW50IGNhbm5vdCBiZSBlbXB0eSBvciBiZWxvdyAkMTAnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExvYWRpbmdIZWxwZXIuc2V0TG9hZGluZyhub3RpZnlUcmFuc2Zlcik7XHJcblxyXG4gICAgICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UuY3JlYXRlVHJhbnNmZXIoYW1vdW50LnZhbHVlLCAnSU5DT01JTkcnKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eSh0aGlzLmJhbmtSZWxhdGlvbnNoaXAhLnByb2Nlc3Nvcl90b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hVXNkRnVuZC53aXJlVHJhbnNmZXJJbmZvLnNob3coYW1vdW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFVc2RGdW5kLmFjaFRyYW5zZmVySW5mby5zaG93KGFtb3VudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBodHRwRXJyb3IgPSBKU09OLnBhcnNlKHJlYXNvbi5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnNob3dFcnJvcigndHJhbnNmZXJFcnJvcicsIGh0dHBFcnJvci5zZXJ2ZXJFcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBMb2FkaW5nSGVscGVyLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICA8cD5CZWZvcmUgeW91IGNhbiB0cmFuc2ZlciwgeW91IG5lZWQgdG8gc2V0IHVwIHlvdXIgYmFuayBpbmZvcm1hdGlvbjwvcD5cXHJcXG4gICAgPGZvcm0gaWQ9XFxcIndpcmVUcmFuc2ZlckZvcm1cXFwiPlxcclxcbiAgICAgICAgPGxhYmVsPk5hbWUgb2YgYmFua1xcclxcbiAgICAgICAgICAgIDxpbnB1dCBuYW1lPVxcXCJuYW1lXFxcIiByZXF1aXJlZCBpZD1cXFwibmFtZVxcXCIvPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIiBpZD1cXFwic3dpZnRfZXJyb3JcXFwiPkJJQy9TV0lGVCBjb2RlIHNob3VsZCBiZSA4IG9yIDExIGNoYXJhY3RlcnM8L2Rpdj5cXHJcXG4gICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICBCYW5rIGNvZGUgKEJJQy9TV0lGVClcXHJcXG4gICAgICAgICAgICA8aW5wdXQgbmFtZT1cXFwiYmFua19jb2RlXFxcIiBtYXhsZW5ndGg9XFxcIjExXFxcIiBpZD1cXFwiYmFua19jb2RlXFxcIiByZXF1aXJlZC8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgIEFjY291bnQgbnVtYmVyIChJQkFOKVxcclxcbiAgICAgICAgICAgIDxpbnB1dCBuYW1lPVxcXCJhY2NvdW50X251bWJlclxcXCIgaWQ9XFxcImFjY291bnRfbnVtYmVyXFxcIiByZXF1aXJlZC8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgIFN0cmVldCBhZGRyZXNzXFxyXFxuICAgICAgICAgICAgPGlucHV0IG5hbWU9XFxcInN0cmVldF9hZGRyZXNzXFxcIiBpZD1cXFwic3RyZWV0X2FkZHJlc3NcXFwiIHJlcXVpcmVkLz5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgUG9zdGFsIGNvZGVcXHJcXG4gICAgICAgICAgICA8aW5wdXQgbmFtZT1cXFwicG9zdGFsX2NvZGVcXFwiIGlkPVxcXCJwb3N0YWxfY29kZVxcXCIgcmVxdWlyZWQvPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgIDxsYWJlbD5cXHJcXG4gICAgICAgICAgICBDaXR5XFxyXFxuICAgICAgICAgICAgPGlucHV0IG5hbWU9XFxcImNpdHlcXFwiIGlkPVxcXCJjaXR5XFxcIiByZXF1aXJlZC8+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcblxcclxcbiAgICAgICAgPGxhYmVsPlN0YXRlXFxyXFxuICAgICAgICAgICAgPGlucHV0IG5hbWU9XFxcInN0YXRlX3Byb3ZpbmNlXFxcIiBpZD1cXFwic3RhdGVfcHJvdmluY2VcXFwiIHJlcXVpcmVkLz5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgQ291bnRyeSB3aGVyZSBiYW5rIGFjY291bnQgaXMgbG9jYXRlZFxcclxcbiAgICAgICAgICAgIDxzZWxlY3QgcmVxdWlyZWQgaWQ9XFxcImNvdW50cnlcXFwiIHJlcXVpcmVkIG5hbWU9XFxcImNvdW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICB7eyNlYWNoIGNvdW50cmllc319XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInt7Y29kZX19XFxcIj57e25hbWV9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICB7ey9lYWNofX1cXHJcXG4gICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuXFxyXFxuICAgICAgICA8aW5wdXQgdHlwZT1cXFwiaGlkZGVuXFxcIiBuYW1lPVxcXCJiYW5rX2NvZGVfdHlwZVxcXCIgdmFsdWU9XFxcIkJJQ1xcXCIvPlxcclxcbiAgICAgICAgPGRpdiBpZD1cXFwid3JpdGVUcmFuc2ZlckVycm9yXFxcIiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cXFwid2lyZV90cmFuc2Zlcl9wcmV2aW91c1xcXCI+UHJldmlvdXM6IEZ1bmRpbmcgdHlwZTwvYnV0dG9uPlxcclxcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XFxcInNhdmVfaW50ZXJuYXRpb25hbF9iYW5rX2luZm9ybWF0aW9uXFxcIj5OZXh0OiBUcmFuc2ZlcjwvYnV0dG9uPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZm9ybT5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgQVVTREZ1bmQgZnJvbSBcIi4vQVVTREZ1bmRcIjtcclxuaW1wb3J0IFdpcmVUcmFuc2Zlckh0bWwgZnJvbSBcIi4uLy4uLy4uL2h0bWwvbW9kYWwvRnVuZGluZy9XaXJlVHJhbnNmZXIuaHRtbFwiO1xyXG5pbXBvcnQgRm9ybUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Gb3JtSGVscGVyXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmFja2VuZC9Vc2VyU2VydmljZVwiO1xyXG5pbXBvcnQgQ291bnRyeUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Db3VudHJ5SGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaXJlVHJhbnNmZXIge1xyXG5cclxuICAgIGFVc2RGdW5kOiBBVVNERnVuZFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFVc2RGdW5kOiBBVVNERnVuZCkge1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQgPSBhVXNkRnVuZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2hvdygpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoV2lyZVRyYW5zZmVySHRtbCk7XHJcblxyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQubW9kYWwuc2hvd01vZGFsKCdDcmVhdGUgYmFuayBpbmZvcm1hdGlvbicsIHRlbXBsYXRlKHtjb3VudHJpZXM6IENvdW50cnlIZWxwZXIuQ291bnRyaWVzfSkpO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZEV2ZW50cygpIHtcclxuICAgICAgICBsZXQgd2lyZV90cmFuc2Zlcl9wcmV2aW91cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aXJlX3RyYW5zZmVyX3ByZXZpb3VzJyk7XHJcbiAgICAgICAgd2lyZV90cmFuc2Zlcl9wcmV2aW91cz8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYVVzZEZ1bmQuc2VsZWN0RnVuZGluZ1R5cGUuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgc2F2ZV9pbnRlcm5hdGlvbmFsX2JhbmtfaW5mb3JtYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9pbnRlcm5hdGlvbmFsX2JhbmtfaW5mb3JtYXRpb24nKTtcclxuICAgICAgICBzYXZlX2ludGVybmF0aW9uYWxfYmFua19pbmZvcm1hdGlvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBGb3JtSGVscGVyLmdldFBhcmFtcygnI3dpcmVUcmFuc2ZlckZvcm0nKTtcclxuICAgICAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMuYVVzZEZ1bmQubW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGF3YWl0IHVzZXJTZXJ2aWNlLnJlZ2lzdGVyV2lyZVRyYW5zZmVyUmVsYXRpb25zaGlwKHBhcmFtcylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFVc2RGdW5kLnRyYW5zZmVyLnNob3cocmVzcG9uc2UpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gSlNPTi5wYXJzZShyZWFzb24ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdyaXRlVHJhbnNmZXJFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cml0ZVRyYW5zZmVyRXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod3JpdGVUcmFuc2ZlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmouc2VydmVyRXJyb3IubWVzc2FnZS5pbmRleE9mKCdvbmx5IG9uZSBiYW5rIGFzc29jaWF0aW9uJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYW5rUmVsYXRpb25zaGlwID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0QmFua1JlbGF0aW9uc2hpcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmFua1JlbGF0aW9uc2hpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVHJhbnNmZXJFcnJvci5pbm5lclRleHQgPSAnV2UgY2Fubm90IGNyZWF0ZSB0aGUgYmFuayBjb25uZWN0aW9uLiBTb21ldGhpbmcgaXMgbm90IHdvcmtpbmcgYXMgaXQgc2hvdWxkLiBQbGVhc2UgY29udGFjdCB1cyBhdCA8YSBocmVmPVwibWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXRcIj5pbmZvQGxpbWluYWwubWFya2V0PC9hPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVUcmFuc2ZlckVycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYVVzZEZ1bmQudHJhbnNmZXIuc2hvdyhiYW5rUmVsYXRpb25zaGlwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVHJhbnNmZXJFcnJvci5pbm5lclRleHQgPSBvYmouc2VydmVyRXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVHJhbnNmZXJFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlKCkge1xyXG4gICAgICAgIGxldCBzd2lmdF9lcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd2lmdF9lcnJvcicpO1xyXG4gICAgICAgIGlmIChzd2lmdF9lcnJvcikgc3dpZnRfZXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBsZXQgd3JpdGVUcmFuc2ZlckVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyaXRlVHJhbnNmZXJFcnJvcicpO1xyXG4gICAgICAgIGlmICh3cml0ZVRyYW5zZmVyRXJyb3IpIHdyaXRlVHJhbnNmZXJFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICBpZiAoIUZvcm1IZWxwZXIudmFsaWRhdGUoJyN3aXJlVHJhbnNmZXJGb3JtJykpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGJhbmtfY29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYW5rX2NvZGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmIChiYW5rX2NvZGUudmFsdWUubGVuZ3RoICE9IDggJiYgYmFua19jb2RlLnZhbHVlLmxlbmd0aCAhPSAxMSkge1xyXG4gICAgICAgICAgICBiYW5rX2NvZGUuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICBsZXQgc3dpZnRfZXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3dpZnRfZXJyb3InKTtcclxuICAgICAgICAgICAgaWYgKHN3aWZ0X2Vycm9yKSBzd2lmdF9lcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8aDI+WW91IG5lZWQgdG8gdHJhbnNmZXIgbm93PC9oMj5cXHJcXG48cD5cXHJcXG4gICAgVXNlIHRoaXMgaW5mb3JtYXRpb24gdG8gZXhlY3V0ZSB0aGUgdHJhbnNmZXIuXFxyXFxuICAgIEFscGFjYS4uLi4uLiBpbmZvcm1hdGlvbiBpcyBuZWVkZWQuXFxyXFxuICAgICR7e2Ftb3VudH19XFxyXFxuPC9wPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgQVVTREZ1bmQgZnJvbSBcIi4vQVVTREZ1bmRcIjtcclxuaW1wb3J0IEFDSFRyYW5zZmVySW5mb0h0bWwgZnJvbSBcIi4uLy4uLy4uL2h0bWwvbW9kYWwvRnVuZGluZy9BQ0hUcmFuc2ZlckluZm8uaHRtbFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBQ0hUcmFuc2ZlckluZm8ge1xyXG5cclxuICAgIGFVc2RGdW5kOiBBVVNERnVuZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhVXNkRnVuZDogQVVTREZ1bmQpIHtcclxuICAgICAgICB0aGlzLmFVc2RGdW5kID0gYVVzZEZ1bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3coYW1vdW50OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoQUNIVHJhbnNmZXJJbmZvSHRtbCk7XHJcbiAgICAgICAgdGhpcy5hVXNkRnVuZC5tb2RhbC5zaG93TW9kYWwoJ1RyYW5zZmVyIGluZm9ybWF0aW9uJywgdGVtcGxhdGUoe2Ftb3VudDogYW1vdW50fSksIGZhbHNlLCAoKSA9PiB7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxoMj5Zb3UgbmVlZCB0byB0cmFuc2ZlciBub3c8L2gyPlxcclxcbjxwPlxcclxcbiAgICBVc2UgdGhpcyBpbmZvcm1hdGlvbiB0byBleGVjdXRlIHRoZSB0cmFuc2Zlci5cXHJcXG4gICAgQWxwYWNhLi4uLi4uIGluZm9ybWF0aW9uIGlzIG5lZWRlZC5cXHJcXG4gICAgJHt7YW1vdW50fX1cXHJcXG48L3A+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBBVVNERnVuZCBmcm9tIFwiLi9BVVNERnVuZFwiO1xyXG5pbXBvcnQgV2lyZVRyYW5zZmVySW5mb0h0bWwgZnJvbSBcIi4uLy4uLy4uL2h0bWwvbW9kYWwvRnVuZGluZy9XaXJlVHJhbnNmZXJJbmZvLmh0bWxcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2lyZVRyYW5zZmVySW5mbyB7XHJcblxyXG4gICAgYVVzZEZ1bmQ6IEFVU0RGdW5kO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFVc2RGdW5kOiBBVVNERnVuZCkge1xyXG4gICAgICAgIHRoaXMuYVVzZEZ1bmQgPSBhVXNkRnVuZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvdyhhbW91bnQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShXaXJlVHJhbnNmZXJJbmZvSHRtbCk7XHJcbiAgICAgICAgdGhpcy5hVXNkRnVuZC5tb2RhbC5zaG93TW9kYWwoJ1RyYW5zZmVyIGluZm9ybWF0aW9uJywgdGVtcGxhdGUoe2Ftb3VudDogYW1vdW50fSkpO1xyXG5cclxuICAgIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi4vTW9kYWxcIjtcclxuaW1wb3J0IFNlbGVjdEZ1bmRpbmdUeXBlIGZyb20gXCIuL1NlbGVjdEZ1bmRpbmdUeXBlXCI7XHJcbmltcG9ydCBBQ0hSZWxhdGlvbnNoaXAgZnJvbSBcIi4vQUNIUmVsYXRpb25zaGlwXCI7XHJcbmltcG9ydCBUcmFuc2ZlciBmcm9tIFwiLi9UcmFuc2ZlclwiO1xyXG5pbXBvcnQgV2lyZVRyYW5zZmVyIGZyb20gXCIuL1dpcmVUcmFuc2ZlclwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IEFDSFRyYW5zZmVySW5mbyBmcm9tIFwiLi9BQ0hUcmFuc2ZlckluZm9cIjtcclxuaW1wb3J0IFdpcmVUcmFuc2ZlckluZm8gZnJvbSBcIi4vV2lyZVRyYW5zZmVySW5mb1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVVTREZ1bmQge1xyXG5cclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgbW9kYWw6IE1vZGFsO1xyXG5cclxuICAgIHNlbGVjdEZ1bmRpbmdUeXBlOiBTZWxlY3RGdW5kaW5nVHlwZTtcclxuICAgIGFjaFJlbGF0aW9uc2hpcDogQUNIUmVsYXRpb25zaGlwO1xyXG4gICAgd2lyZVRyYW5zZmVyOiBXaXJlVHJhbnNmZXI7XHJcbiAgICB0cmFuc2ZlcjogVHJhbnNmZXI7XHJcbiAgICBhY2hUcmFuc2ZlckluZm86IEFDSFRyYW5zZmVySW5mbztcclxuICAgIHdpcmVUcmFuc2ZlckluZm86IFdpcmVUcmFuc2ZlckluZm87XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9yYWxpczogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RGdW5kaW5nVHlwZSA9IG5ldyBTZWxlY3RGdW5kaW5nVHlwZSh0aGlzKTtcclxuICAgICAgICB0aGlzLmFjaFJlbGF0aW9uc2hpcCA9IG5ldyBBQ0hSZWxhdGlvbnNoaXAodGhpcyk7XHJcbiAgICAgICAgdGhpcy50cmFuc2ZlciA9IG5ldyBUcmFuc2Zlcihtb3JhbGlzLCB0aGlzKTtcclxuICAgICAgICB0aGlzLndpcmVUcmFuc2ZlciA9IG5ldyBXaXJlVHJhbnNmZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5hY2hUcmFuc2ZlckluZm8gPSBuZXcgQUNIVHJhbnNmZXJJbmZvKHRoaXMpO1xyXG4gICAgICAgIHRoaXMud2lyZVRyYW5zZmVySW5mbyA9IG5ldyBXaXJlVHJhbnNmZXJJbmZvKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93KCkge1xyXG4gICAgICAgIGxldCB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgIGxldCBiYW5rUmVsYXRpb25zaGlwID0gYXdhaXQgdXNlclNlcnZpY2UuZ2V0QmFua1JlbGF0aW9uc2hpcCgpO1xyXG4gICAgICAgIGlmIChiYW5rUmVsYXRpb25zaGlwKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNmZXIuc2hvdyhiYW5rUmVsYXRpb25zaGlwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEZ1bmRpbmdUeXBlLnNob3coKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93RXJyb3IoZWxlbWVudElkOiBzdHJpbmcsIHJlYXNvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG4gICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gcmVhc29uO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGlkZUVycm9yKGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG4gICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgRmFrZUZ1bmRpbmdIdG1sIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvZnVuZGluZy9GYWtlRnVuZGluZy5odG1sJztcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9Nb2RhbFwiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgQ29udHJhY3RJbmZvIGZyb20gXCIuLi8uLi8uLi9jb250cmFjdHMvQ29udHJhY3RJbmZvXCI7XHJcbmltcG9ydCBGdW5kaW5nU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYnJva2VyL0Z1bmRpbmdTZXJ2aWNlXCI7XHJcbmltcG9ydCBBVVNEU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9BVVNEU2VydmljZVwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IHtyb3VuZEJpZ051bWJlcn0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBCaWdOdW1iZXIgZnJvbSBcImJpZ251bWJlci5qc1wiO1xyXG5pbXBvcnQgQVVTREZ1bmQgZnJvbSBcIi4vQVVTREZ1bmRcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGYWtlQVVTREZ1bmQge1xyXG4gICAgbW9yYWxpczogdHlwZW9mIE1vcmFsaXM7XHJcbiAgICBjdXJyZW50QmFsYW5jZTogQmlnTnVtYmVyO1xyXG4gICAgbW9kYWw6IE1vZGFsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgdGhpcy5tb3JhbGlzID0gbW9yYWxpcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRCYWxhbmNlID0gbmV3IEJpZ051bWJlcigtMSk7XHJcbiAgICAgICAgdGhpcy5tb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93QVVTREZ1bmQoY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcclxuXHJcbiAgICAgICAgLy90aGlzIGlzIHJlYWwgaW5zdHJ1Y3Rpb24gaG93IHRvIHRyYW5zZmVyIHRvIGJyb2tlclxyXG4gICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dBVVNERmFrZUZ1bmQoY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoRmFrZUZ1bmRpbmdIdG1sKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbnRyYWN0SW5mbyA9IENvbnRyYWN0SW5mby5nZXRDb250cmFjdEluZm8oKTtcclxuICAgICAgICBsZXQgY29udGVudCA9IHRlbXBsYXRlKHthVVNEQWRkcmVzczogY29udHJhY3RJbmZvLkFVU0RfQUREUkVTU30pO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5tb2RhbC5zaG93TW9kYWwoJ0Z1bmQgbXkgYWNjb3VudCAoRmFrZSBtb25leSknLCBjb250ZW50KTtcclxuXHJcbiAgICAgICAgbGV0IGFkZFRvV2FsbGV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZFRva2VuVG9XYWxsZXQnKTtcclxuICAgICAgICBpZiAoIWFkZFRvV2FsbGV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGFkZFRvV2FsbGV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udHJhY3RJbmZvID0gQ29udHJhY3RJbmZvLmdldENvbnRyYWN0SW5mbygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHdhbGxldEhlbHBlci5hZGRUb2tlblRvV2FsbGV0KGNvbnRyYWN0SW5mby5BVVNEX0FERFJFU1MsICdhVVNEJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q29weUZpZWxkKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB0aGlzLnNob3dDb3B5RmllbGQoKTtcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IHJlZ2lzdGVyQmFua0luZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0ZXJCYW5rSW5mbycpO1xyXG4gICAgICAgIHJlZ2lzdGVyQmFua0luZm8/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmhpZGVNb2RhbCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFVc2RGdW5kID0gbmV3IEFVU0RGdW5kKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGFVc2RGdW5kLnNob3coKTtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgbGV0IHJlcXVlc3RGYWtlQVVTRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXF1ZXN0RmFrZUFVU0QnKTtcclxuICAgICAgICByZXF1ZXN0RmFrZUFVU0Q/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0RmFrZUFVU0QhLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgJ3RydWUnKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmdW5kaW5nU2VydmljZSA9IG5ldyBGdW5kaW5nU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZnVuZGluZ1NlcnZpY2UucmVxdWVzdEZha2VGdW5kaW5nKClcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcldoaWxlRnVuZGluZyh7fSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycsIHJlc3VsdC5zdWNjZXNzKTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGxldCBmdW5kaW5nRXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVuZGluZ0Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnVuZGluZ0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEZha2VBVVNEIS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdFcnJvci5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nRXJyb3IuaW5uZXJIVE1MID0gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdFcnJvciEuY2xhc3NMaXN0LmFkZCgnZC1ub25lJylcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCAqIDEwMDApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBiZWZvcmVGdW5kaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlZm9yZUZ1bmRpbmcnKTtcclxuICAgICAgICAgICAgICAgIGxldCBhZnRlckZ1bmRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWZ0ZXJGdW5kaW5nJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJlZm9yZUZ1bmRpbmcgfHwgIWFmdGVyRnVuZGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEFVU0RCYWxhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICBiZWZvcmVGdW5kaW5nLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJGdW5kaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvcldoaWxlRnVuZGluZyhyZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2NhbGxiYWNrKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRBVVNEQmFsYW5jZSgpIHtcclxuICAgICAgICBsZXQgY3VycmVudEFVU0RCYWxhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRBVVNEQmFsYW5jZScpXHJcbiAgICAgICAgaWYgKCFjdXJyZW50QVVTREJhbGFuY2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGFVU0RTZXJ2aWNlID0gbmV3IEFVU0RTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGV0aEFkZHJlc3MgPSB1c2VyU2VydmljZS5nZXRFdGhBZGRyZXNzKCk7XHJcblxyXG4gICAgICAgIGxldCBhbW91bnQgPSBuZXcgQmlnTnVtYmVyKDApO1xyXG4gICAgICAgIGlmIChldGhBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgIGFtb3VudCA9IGF3YWl0IGFVU0RTZXJ2aWNlLmdldEFVU0RCYWxhbmNlT2YoZXRoQWRkcmVzcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRBVVNEQmFsYW5jZS5pbm5lckhUTUwgPSAnJCcgKyByb3VuZEJpZ051bWJlcihhbW91bnQpLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYWxhbmNlLmVxKC0xKSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCYWxhbmNlID0gYW1vdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhbGFuY2UuZXEoYW1vdW50KSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEFVU0RCYWxhbmNlKCk7XHJcbiAgICAgICAgICAgIH0sIDUgKiAxMDAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0NvcHlGaWVsZCgpIHtcclxuXHJcbiAgICAgICAgbGV0IG5lZWRUb0NvcHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVlZFRvQ29weScpO1xyXG4gICAgICAgIGlmICghbmVlZFRvQ29weSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBuZWVkVG9Db3B5LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXJyb3JXaGlsZUZ1bmRpbmcocmVzdWx0OiBhbnkpIHtcclxuICAgICAgICBsZXQgYmVmb3JlRnVuZGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZWZvcmVGdW5kaW5nJyk7XHJcbiAgICAgICAgbGV0IGVycm9yQWZ0ZXJGdW5kaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yQWZ0ZXJUcnlGdW5kaW5nJyk7XHJcbiAgICAgICAgaWYgKCFiZWZvcmVGdW5kaW5nIHx8ICFlcnJvckFmdGVyRnVuZGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0Lm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgZXJyb3JBZnRlckZ1bmRpbmcuaW5uZXJIVE1MID0gcmVzdWx0Lm1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJlZm9yZUZ1bmRpbmcuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgZXJyb3JBZnRlckZ1bmRpbmcuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgaWQ9XFxcIndpdGhkcmF3SW5wdXRcXFwiPlxcclxcblxcclxcbiAgICB7eyNpZiBiYW5rLmJhbmtfY29kZV90eXBlfX1cXHJcXG4gICAgWW91ciBtb25leSB3aWxsIGJlIHNlbnQgdG8ge3tiYW5rLm5hbWV9fSB0byBhY2NvdW50IG51bWJlciB7e2JhbmsuYWNjb3VudF9udW1iZXJ9fS5cXHJcXG4gICAgPGJyLz48YnIvPlxcclxcbiAgICBPdXRnb2luZyBJbnRlcm5hdGlvbmFsIFdpcmUgVHJhbnNmZXJzIGNvc3QgaXMgJHt7dHJhbnNmZXJDb3N0fX0uPGJyLz5cXHJcXG4gICAgRmVlcyB3aWxsIGJlIGRlZHVjdGVkIGZyb20gdGhlIGFtb3VudC5cXHJcXG4gICAge3svaWZ9fVxcclxcbiAgICB7eyN1bmxlc3MgYmFuay5iYW5rX2NvZGVfdHlwZX19XFxyXFxuICAgIFlvdXIgbW9uZXkgd2lsbCBiZSBzZW50IHRvIGFjY291bnQgbnVtYmVyIHt7YmFuay5iYW5rX2FjY291bnRfbnVtYmVyfX0uXFxyXFxuICAgIDxici8+PGJyLz5cXHJcXG4gICAgQUNIIHRyYW5zZmVyIGNvc3RzIGlzICR7e3RyYW5zZmVyQ29zdH19LiBGZWVzIHdpbGwgYmUgZGVkdWN0ZWQgZnJvbSB0aGUgYW1vdW50LlxcclxcbiAgICB7ey91bmxlc3N9fVxcclxcbiAgICA8Zm9ybSBpZD1cXFwid2l0aGRyYXdGb3JtXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbD5BbW91bnQgdG8gd2l0aGRyYXdcXHJcXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwidGVsXFxcIiBuYW1lPVxcXCJhbW91bnRcXFwiIGlkPVxcXCJhbW91bnRcXFwiLz5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbnB1dF9lcnJvclxcXCIgaWQ9XFxcIndpdGhkcmF3QW1vdW50RXJyb3JcXFwiPlRoZSBhbW91bnQgaXMgbG93ZXIgdGhhbiB0aGUgY29zdCBvZiB0cmFuc2ZlcjwvZGl2PlxcclxcbiAgICAgICAgPGJ1dHRvbiBpZD1cXFwiY29uZmlybVdpdGhkcmF3XFxcIj5Db25maXJtIHdpdGhkcmF3PC9idXR0b24+XFxyXFxuICAgIDwvZm9ybT5cXHJcXG4gICAge3t7VHJhbnNmZXJzfX19XFxyXFxuPC9maWVsZHNldD5cXHJcXG5cXHJcXG48ZmllbGRzZXQgaWQ9XFxcIndpdGhkcmF3Q29uZmlybVxcXCIgY2xhc3M9XFxcImhpZGRlblxcXCI+XFxyXFxuICAgIFlvdSBhcmUgYWJvdXQgdG8gd2l0aGRyYXcgJDxzcGFuIGlkPVxcXCJ3aXRoZHJhd0Ftb3VudFRleHRcXFwiPjwvc3Bhbj4gZnJvbSB5b3VyIGFjY291bnRcXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwid2FybmluZ0JhclxcXCI+XFxyXFxuICAgICAgICBXYXJuaW5nOiBUaGUgZmVlIG9mIHRoaXMgdHJhbnNhY3Rpb24gd2lsbCBiZSAkPHNwYW4gaWQ9XFxcImZlZVdhcm5pbmdcXFwiPjwvc3Bhbj5cXHJcXG4gICAgICAgIGFuZCBpcyA8c3BhbiBpZD1cXFwiZmVlUGVyY2VudGFnZVxcXCI+PC9zcGFuPiUgb2YgdGhlIGFtb3VudC5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIiBpZD1cXFwid2l0aGRyYXdFcnJvclxcXCI+PC9kaXY+XFxyXFxuICAgIDxidXR0b24gaWQ9XFxcImNvbmZpcm1XaXRoZHJhd0J1dHRvblxcXCI+RXhlY3V0ZSB0cmFuc2ZlcjwvYnV0dG9uPlxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBXaXRoZHJhd01vZGFsSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0Z1bmRpbmcvV2l0aGRyYXdNb2RhbC5odG1sJ1xyXG5pbXBvcnQgTW9yYWxpcyBmcm9tIFwibW9yYWxpc1wiO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uL01vZGFsXCI7XHJcbmltcG9ydCBBVVNEU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9BVVNEU2VydmljZVwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IHtCYW5rUmVsYXRpb25zaGlwfSBmcm9tIFwiLi4vLi4vLi4vZHRvL2FscGFjYS9CYW5rUmVsYXRpb25zaGlwXCI7XHJcbmltcG9ydCBTdHJpbmdIZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvU3RyaW5nSGVscGVyXCI7XHJcbmltcG9ydCB7aXNKU09OLCByb3VuZE51bWJlcn0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBUcmFuc2ZlcnNMaXN0IGZyb20gXCIuL1RyYW5zZmVyc0xpc3RcIjtcclxuaW1wb3J0IHtUcmFuc2ZlckRpcmVjdGlvbkVudW19IGZyb20gXCIuLi8uLi8uLi9lbnVtcy9UcmFuc2ZlckRpcmVjdGlvbkVudW1cIjtcclxuaW1wb3J0IEJpZ051bWJlciBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaXRoZHJhd01vZGFsIHtcclxuXHJcbiAgICBtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcztcclxuICAgIHByaXZhdGUgdXNlclNlcnZpY2U6IFVzZXJTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBiYW5rSW5mbz86IEJhbmtSZWxhdGlvbnNoaXA7XHJcbiAgICBwcml2YXRlIHdpcmVUcmFuc2ZlckNvc3QgPSA1MDtcclxuICAgIHByaXZhdGUgYWNoVHJhbnNmZXJDb3N0ID0gMjU7XHJcbiAgICBwcml2YXRlIHRyYW5zZmVyQ29zdDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50QmFsYW5jZT86IEJpZ051bWJlcjtcclxuICAgIHByaXZhdGUgdHJhbnNmZXJzTGlzdDogVHJhbnNmZXJzTGlzdDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICAgICAgdGhpcy51c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmZXJDb3N0ID0gdGhpcy53aXJlVHJhbnNmZXJDb3N0O1xyXG5cclxuICAgICAgICB0aGlzLnRyYW5zZmVyc0xpc3QgPSBuZXcgVHJhbnNmZXJzTGlzdCh0aGlzLm1vcmFsaXMpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNob3coKSB7XHJcbiAgICAgICAgbGV0IG1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgbGV0IGJhbmtSZWxhdGlvbnNoaXBzID0gYXdhaXQgdGhpcy51c2VyU2VydmljZS5nZXRCYW5rUmVsYXRpb25zaGlwKCk7XHJcbiAgICAgICAgaWYgKCFiYW5rUmVsYXRpb25zaGlwcykge1xyXG4gICAgICAgICAgICBtb2RhbC5zaG93TW9kYWwoJ1dpdGhkcmF3IGluZm9ybWF0aW9uJywgXCJZb3UgaGF2ZW4ndCBzZXR1cCBiYW5rIGNvbm5lY3Rpb24uIFlvdSBjYW5ub3Qgd2l0aGRyYXcgZnJvbSB3aXRob3V0IGJhbmsgY29ubmVjdGlvblwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRyYW5zZmVyc0h0bWwgPSBhd2FpdCB0aGlzLnRyYW5zZmVyc0xpc3QucmVuZGVyKFRyYW5zZmVyRGlyZWN0aW9uRW51bS5PdXRnb2luZyk7XHJcbiAgICAgICAgbGV0IGV0aEFkZHJlc3MgPSB0aGlzLnVzZXJTZXJ2aWNlLmdldEV0aEFkZHJlc3MoKTtcclxuXHJcbiAgICAgICAgbGV0IGF1c2RTZXJ2aWNlID0gbmV3IEFVU0RTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFsYW5jZSA9IG5ldyBCaWdOdW1iZXIoMCk7XHJcbiAgICAgICAgaWYgKGV0aEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QmFsYW5jZSA9IGF3YWl0IGF1c2RTZXJ2aWNlLmdldEFVU0RCYWxhbmNlT2YoZXRoQWRkcmVzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmFsYW5jZS5lcSgwKSkge1xyXG4gICAgICAgICAgICBsZXQgdG1wID0gSGFuZGxlYmFycy5jb21waWxlKFwiWW91ciBjdXJyZW50IGJhbGFuY2UgaXMgJDAuIFRoZXJlIGlzIG5vdGhpbmcgdG8gd2l0aGRyYXcuIHt7e3RyYW5zZmVyc319fVwiKTtcclxuICAgICAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdXaXRoZHJhdyBpbmZvcm1hdGlvbicsIHRtcCh7dHJhbnNmZXJzOiB0cmFuc2ZlcnNIdG1sfSkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB3aXRoZHJhd1RlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFdpdGhkcmF3TW9kYWxIdG1sKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYW5rSW5mbyA9IGJhbmtSZWxhdGlvbnNoaXBzO1xyXG4gICAgICAgIHRoaXMudHJhbnNmZXJDb3N0ID0gKHRoaXMuYmFua0luZm8uYmFua19jb2RlX3R5cGUpID8gdGhpcy53aXJlVHJhbnNmZXJDb3N0IDogdGhpcy5hY2hUcmFuc2ZlckNvc3Q7XHJcblxyXG4gICAgICAgIGxldCBvYmo6IGFueSA9IHtcclxuICAgICAgICAgICAgYW1vdW50OiB0aGlzLmN1cnJlbnRCYWxhbmNlLFxyXG4gICAgICAgICAgICB0cmFuc2ZlckNvc3Q6IHRoaXMudHJhbnNmZXJDb3N0LFxyXG4gICAgICAgICAgICBUcmFuc2ZlcnM6IHRyYW5zZmVyc0h0bWwsXHJcbiAgICAgICAgICAgIGJhbms6IHRoaXMuYmFua0luZm8hXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdXaXRoZHJhdyBpbmZvcm1hdGlvbicsIHdpdGhkcmF3VGVtcGxhdGUob2JqKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmZXJzTGlzdC5iaW5kRXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGxldCBjb25maXJtV2l0aGRyYXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybVdpdGhkcmF3Jyk7XHJcbiAgICAgICAgY29uZmlybVdpdGhkcmF3Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iYW5rSW5mbykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbW91bnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkoYW1vdW50LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUZsb2F0KGFtb3VudC52YWx1ZSkgPD0gdGhpcy50cmFuc2ZlckNvc3QpIHtcclxuICAgICAgICAgICAgICAgIGxldCB3aXRoZHJhd0Ftb3VudEVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpdGhkcmF3QW1vdW50RXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHdpdGhkcmF3QW1vdW50RXJyb3IhLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgYW1vdW50LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93V2l0aGRyYXdDb25maXJtYXRpb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd1dpdGhkcmF3Q29uZmlybWF0aW9uKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5iYW5rSW5mbykgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ftb3VudCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGxldCB3aXRoZHJhd0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpdGhkcmF3SW5wdXQnKTtcclxuICAgICAgICB3aXRoZHJhd0lucHV0Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgbGV0IHdpdGhkcmF3Q29uZmlybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aXRoZHJhd0NvbmZpcm0nKTtcclxuICAgICAgICB3aXRoZHJhd0NvbmZpcm0/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcblxyXG4gICAgICAgIGxldCB3aXRoZHJhd0Ftb3VudFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2l0aGRyYXdBbW91bnRUZXh0Jyk7XHJcbiAgICAgICAgbGV0IGZlZVdhcm5pbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVlV2FybmluZycpO1xyXG4gICAgICAgIGxldCBmZWVQZXJjZW50YWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZVBlcmNlbnRhZ2UnKTtcclxuXHJcbiAgICAgICAgd2l0aGRyYXdBbW91bnRUZXh0IS5pbm5lclRleHQgPSBhbW91bnQudmFsdWU7XHJcbiAgICAgICAgZmVlV2FybmluZyEuaW5uZXJUZXh0ID0gdGhpcy50cmFuc2ZlckNvc3QudG9TdHJpbmcoKTtcclxuICAgICAgICBmZWVQZXJjZW50YWdlIS5pbm5lclRleHQgPSByb3VuZE51bWJlcigodGhpcy50cmFuc2ZlckNvc3QgLyBwYXJzZUZsb2F0KGFtb3VudC52YWx1ZSkpICogMTAwKS50b1N0cmluZygpO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IGNvbmZpcm1XaXRoZHJhd0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtV2l0aGRyYXdCdXR0b24nKTtcclxuICAgICAgICBjb25maXJtV2l0aGRyYXdCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlclNlcnZpY2UuY3JlYXRlVHJhbnNmZXIoYW1vdW50LnZhbHVlLCBUcmFuc2ZlckRpcmVjdGlvbkVudW0uT3V0Z29pbmcpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB3aXRoZHJhd0NvbmZpcm0hLmlubmVySFRNTCA9IGF3YWl0IHRoaXMudHJhbnNmZXJzTGlzdC5yZW5kZXIoVHJhbnNmZXJEaXJlY3Rpb25FbnVtLk91dGdvaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZmVyc0xpc3QuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3aXRoZHJhd0Vycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpdGhkcmF3RXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpdGhkcmF3RXJyb3IpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpdGhkcmF3RXJyb3IgJiYgaXNKU09OKHJlYXNvbi5tZXNzYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBKU09OLnBhcnNlKHJlYXNvbi5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGRyYXdFcnJvci5pbm5lclRleHQgPSBlcnJvci5zZXJ2ZXJFcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3RXJyb3IuaW5uZXJUZXh0ID0gcmVhc29uLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aXRoZHJhd0Vycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQVVTRFNlcnZpY2UgZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2Jsb2NrY2hhaW4vQVVTRFNlcnZpY2VcIjtcclxuaW1wb3J0IHtyb3VuZEJpZ051bWJlcn0gZnJvbSBcIi4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IEZha2VBVVNERnVuZCBmcm9tIFwiLi4vbW9kYWxzL0Z1bmRpbmcvRmFrZUFVU0RGdW5kXCI7XHJcbmltcG9ydCBNb3JhbGlzIGZyb20gXCJtb3JhbGlzXCI7XHJcbmltcG9ydCBBVVNERnVuZCBmcm9tIFwiLi4vbW9kYWxzL0Z1bmRpbmcvQVVTREZ1bmRcIjtcclxuaW1wb3J0IFdpdGhkcmF3TW9kYWwgZnJvbSBcIi4uL21vZGFscy9GdW5kaW5nL1dpdGhkcmF3TW9kYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFVc2RCYWxhbmNlIHtcclxuICAgIHVzZXI6IE1vcmFsaXMuQXR0cmlidXRlcztcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzLCB1c2VyOiBNb3JhbGlzLkF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRBVVNEQmFsYW5jZVVJKCkge1xyXG4gICAgICAgIGlmICghdGhpcy51c2VyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCB1c2VySW5mb0FVc2RCYWxhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJJbmZvQVVzZEJhbGFuY2UnKTtcclxuICAgICAgICBsZXQgZnJvbnRwYWdlQVVzZEJhbGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnJvbnRwYWdlQVVzZEJhbGFuY2UnKTtcclxuXHJcbiAgICAgICAgaWYgKHVzZXJJbmZvQVVzZEJhbGFuY2UgJiYgIXVzZXJJbmZvQVVzZEJhbGFuY2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudXNlci5nZXQoJ2FscGFjYUlkJykpIHtcclxuICAgICAgICAgICAgZnJvbnRwYWdlQVVzZEJhbGFuY2U/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB1c2VySW5mb0FVc2RCYWxhbmNlPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZyb250cGFnZUFVc2RCYWxhbmNlPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdXNlckluZm9BVXNkQmFsYW5jZT8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYVVTRFNlcnZpY2UgPSBuZXcgQVVTRFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgYVVzZFZhbHVlID0gYXdhaXQgYVVTRFNlcnZpY2UuZ2V0QVVTREJhbGFuY2VPZih0aGlzLnVzZXIuZ2V0KCdldGhBZGRyZXNzJykpO1xyXG4gICAgICAgIGFVc2RWYWx1ZSA9IHJvdW5kQmlnTnVtYmVyKGFVc2RWYWx1ZSk7XHJcblxyXG4gICAgICAgIGxldCBmcm9udHBhZ2VBVVNEQmFsYW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcm9udF9wYWdlX2FVU0RfYmFsYW5jZScpO1xyXG4gICAgICAgIGlmIChmcm9udHBhZ2VBVVNEQmFsYW5jZSkgZnJvbnRwYWdlQVVTREJhbGFuY2UuaW5uZXJIVE1MID0gJyQnICsgYVVzZFZhbHVlO1xyXG5cclxuICAgICAgICBsZXQgdXNlcl9pbmZvX2F1c2RfYmFsYW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2luZm9fYXVzZF9iYWxhbmNlJylcclxuICAgICAgICBpZiAodXNlcl9pbmZvX2F1c2RfYmFsYW5jZSkgdXNlcl9pbmZvX2F1c2RfYmFsYW5jZS5pbm5lckhUTUwgPSAnJCcgKyBhVXNkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIGlmIChhVXNkVmFsdWUuaXNMZXNzVGhhbigxMCkpIHtcclxuICAgICAgICAgICAgbGV0IGZyb250cGFnZV9mdW5kX2FjY291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnJvbnRwYWdlX2Z1bmRfYWNjb3VudCcpO1xyXG4gICAgICAgICAgICBmcm9udHBhZ2VfZnVuZF9hY2NvdW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgbGV0IGZ1bmRfYWNjb3VudEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZnVuZF9hY2NvdW50Jyk7XHJcbiAgICAgICAgZnVuZF9hY2NvdW50QnV0dG9ucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYVVTREZ1bmRpbmdNb2RhbCA9IG5ldyBGYWtlQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgaWYgKG5ldHdvcmtJbmZvLlRlc3ROZXR3b3JrKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9ICdDbGljayBmb3Igc29tZSBhVVNEJztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYVVTREZ1bmRpbmdNb2RhbC5zaG93QVVTREZha2VGdW5kKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYVVzZEZ1bmQgPSBuZXcgQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhVXNkRnVuZC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IHdpdGhkcmF3X2Zyb21fYWNjb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aXRoZHJhd19mcm9tX2FjY291bnQnKTtcclxuICAgICAgICB3aXRoZHJhd19mcm9tX2FjY291bnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB3aXRoZHJhd01vZGFsID0gbmV3IFdpdGhkcmF3TW9kYWwodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgYXdhaXQgd2l0aGRyYXdNb2RhbC5zaG93KClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL1VzZXJTZXJ2aWNlXCI7XHJcbmltcG9ydCBNb3JhbGlzIGZyb20gXCJNb3JhbGlzXCI7XHJcbmltcG9ydCBVc2VySW5mb0VsZW1lbnQgZnJvbSAnLi4vLi4vaHRtbC9lbGVtZW50cy9Vc2VySW5mby5odG1sJ1xyXG5pbXBvcnQge3Nob3J0RXRofSBmcm9tIFwiLi4vLi4vdXRpbC9IZWxwZXJcIjtcclxuaW1wb3J0IE5ldHdvcmtJbmZvIGZyb20gXCIuLi8uLi9uZXR3b3Jrcy9OZXR3b3JrSW5mb1wiO1xyXG5pbXBvcnQgUHJvdmlkZXJJbmZvIGZyb20gXCIuLi8uLi93YWxsZXQvUHJvdmlkZXJJbmZvXCI7XHJcbmltcG9ydCBLeWNFZGl0TmFtZUZvcm0gZnJvbSBcIi4uL21vZGFscy9LWUMvS3ljRWRpdE5hbWVGb3JtXCI7XHJcbmltcG9ydCBLeWNFZGl0Q29udGFjdEZvcm0gZnJvbSBcIi4uL21vZGFscy9LWUMvS3ljRWRpdENvbnRhY3RGb3JtXCI7XHJcbmltcG9ydCBLeWNFZGl0VHJ1c3RlZENvbnRhY3QgZnJvbSBcIi4uL21vZGFscy9LWUMvS3ljRWRpdFRydXN0ZWRDb250YWN0XCI7XHJcbmltcG9ydCBBVXNkQmFsYW5jZSBmcm9tIFwiLi9BVXNkQmFsYW5jZVwiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgdXNlcj86IE1vcmFsaXMuQXR0cmlidXRlcztcclxuICAgIHVzZXJTZXJ2aWNlOiBVc2VyU2VydmljZTtcclxuICAgIHByb3ZpZGVySW5mbzogUHJvdmlkZXJJbmZvO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihtb3JhbGlzOiB0eXBlb2YgTW9yYWxpcywgcHJvdmlkZXJJbmZvOiBQcm92aWRlckluZm8sIHVzZXI/OiBNb3JhbGlzLkF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy51c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJbmZvID0gcHJvdmlkZXJJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZW5kZXIoZWxlbWVudElkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMudXNlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmxpc3RlbkZvcldhbGxldENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkVXNlck1lbnVVSShlbGVtZW50SWQpO1xyXG5cclxuICAgICAgICBsZXQgYVVzZEJhbGFuY2UgPSBuZXcgQVVzZEJhbGFuY2UodGhpcy5tb3JhbGlzLCB0aGlzLnVzZXIpO1xyXG4gICAgICAgIGF3YWl0IGFVc2RCYWxhbmNlLmxvYWRBVVNEQmFsYW5jZVVJKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGlzdGVuRm9yV2FsbGV0Q2hhbmdlcygpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMub25DaGFpbkNoYW5nZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm1vcmFsaXMub25BY2NvdW50Q2hhbmdlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubW9yYWxpcy5vbkRpc2Nvbm5lY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm1vcmFsaXMub25Db25uZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgbG9hZFVzZXJNZW51VUkoZWxlbWVudElkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMudXNlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgdXNlckluZm9EaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG4gICAgICAgIGlmICghdXNlckluZm9EaXYpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBsZXQgb2JqOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIGV0aEFkZHJlc3M6IHRoaXMudXNlci5nZXQoJ2V0aEFkZHJlc3MnKSxcclxuICAgICAgICAgICAgc2hvcnRFdGhBZGRyZXNzOiBzaG9ydEV0aCh0aGlzLnVzZXIuZ2V0KCdldGhBZGRyZXNzJykpLFxyXG4gICAgICAgICAgICB3YWxsZXROYW1lOiB0aGlzLnByb3ZpZGVySW5mby5XYWxsZXROYW1lLFxyXG4gICAgICAgICAgICBuZXR3b3JrTmFtZTogbmV0d29ya0luZm8uQ2hhaW5OYW1lICsgKChuZXR3b3JrSW5mby5UZXN0TmV0d29yaykgPyAnIC0gKFRlc3QgbmV0d29yayknIDogJycpLFxyXG4gICAgICAgICAgICBibG9ja2NoYWluRXhwbG9yZXI6IG5ldHdvcmtJbmZvLkJsb2NrRXhwbG9yZXIgKyAnL2FkZHJlc3MvJyxcclxuICAgICAgICAgICAgcHJvdmlkZXI6ICcnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoVXNlckluZm9FbGVtZW50KTtcclxuICAgICAgICBsZXQgaHRtbCA9IHRlbXBsYXRlKG9iaik7XHJcblxyXG4gICAgICAgIHVzZXJJbmZvRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcblxyXG4gICAgICAgIGxldCB1c2VySW5mb0FjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VySW5mb0FjdGlvbicpO1xyXG4gICAgICAgIHVzZXJJbmZvQWN0aW9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB1c2VySW5mb0Ryb3Bkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJJbmZvRHJvcGRvd24nKTtcclxuICAgICAgICAgICAgaWYgKCF1c2VySW5mb0Ryb3Bkb3duKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB1c2VySW5mb0Ryb3Bkb3duLmNsYXNzTGlzdC50b2dnbGUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB1c2VySW5mb0Ryb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgZGlzY29ubmVjdEZyb21OZXR3b3JrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2Nvbm5lY3RGcm9tTmV0d29yaycpO1xyXG4gICAgICAgIGRpc2Nvbm5lY3RGcm9tTmV0d29yaz8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tb3JhbGlzLlVzZXIubG9nT3V0KCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kVXNlckFjdGlvbkV2ZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZFVzZXJBY3Rpb25FdmVudHMoKSB7XHJcbiAgICAgICAgbGV0IGVkaXROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXROYW1lJyk7XHJcbiAgICAgICAgZWRpdE5hbWU/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBreWNNb2RhbCA9IG5ldyBLeWNFZGl0TmFtZUZvcm0oKTtcclxuICAgICAgICAgICAgYXdhaXQga3ljTW9kYWwuc2hvdygpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBlZGl0Q29udGFjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Q29udGFjdCcpO1xyXG4gICAgICAgIGVkaXRDb250YWN0Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGxldCBreWNNb2RhbCA9IG5ldyBLeWNFZGl0Q29udGFjdEZvcm0oKTtcclxuICAgICAgICAgICAgYXdhaXQga3ljTW9kYWwuc2hvdygpO1xyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsZXQgZWRpdFRydXN0ZWRDb250YWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRUcnVzdGVkQ29udGFjdCcpO1xyXG4gICAgICAgIGVkaXRUcnVzdGVkQ29udGFjdD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBsZXQga3ljTW9kYWwgPSBuZXcgS3ljRWRpdFRydXN0ZWRDb250YWN0KCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGt5Y01vZGFsLnNob3coKTtcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxidXR0b24gY2xhc3M9XFxcImxpbWluYWxfbWFya2V0X2Nvbm5lY3Rfd2FsbGV0IG91dGxpbmVcXFwiPkNvbm5lY3Qgd2FsbGV0PC9idXR0b24+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIlxcclxcbjxhcnRpY2xlIGlkPVxcXCJ0b3NfcHBfY29va2llX3BhbmVsXFxcIj5cXHJcXG4gICAgPHA+XFxyXFxuICAgICAgICBCeSBjb25uZWN0aW5nIGEgd2FsbGV0LCBJIGFncmVlIHRvIGxpbWluYWwubWFya2V0IFRlcm1zIG9mIFVzZSwgQ29va2llcyBQb2xpY3kgYW5kIFByaXZhY3kgUG9saWN5LlxcclxcbiAgICA8L3A+XFxyXFxuICAgIDx1bD5cXHJcXG4gICAgICAgIDxsaT5cXHJcXG4gICAgPGxhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJhbGxcXFwiIHZhbHVlPVxcXCIxXFxcIj5cXHJcXG5cXHJcXG4gICAgICAgIEkgYWNjZXB0IGFsbFxcclxcblxcclxcbiAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPC9saT5cXHJcXG4gICAgICAgIDxsaT5cXHJcXG4gICAgPGxhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJ0b3NcXFwiIHZhbHVlPVxcXCIxXFxcIj5cXHJcXG4gICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgSSBhY2NlcHQgPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cubGltaW5hbC5tYXJrZXQvdGVybXMtb2Ytc2VydmljZVxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlRlcm1zIG9mIHNlcnZpY2U8L2E+XFxyXFxuICAgICAgICA8c21hbGw+VGhpbmdzIHRvIG5vdGUuIFlvdSBhcmUgdGFraW5nIGEgcmlzayBieSBidXlpbmcgc3RvY2tzLiBZb3Ugd2lsbCBiZSBhc2tlZCB0byBkbyBLWUMvQU1MLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciBhbnkgdHJhbnNhY3Rpb24geW91IG1ha2UuPC9zbWFsbD5cXHJcXG4gICAgICA8L3NwYW4+XFxyXFxuICAgIDwvbGFiZWw+PC9saT5cXHJcXG4gICAgICAgIDxsaT5cXHJcXG4gICAgPGxhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJwcFxcXCIgdmFsdWU9XFxcIjFcXFwiPlxcclxcbiAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICBJIGFjY2VwdCB0aGUgPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cubGltaW5hbC5tYXJrZXQvcHJpdmFjeS1wb2xpY3lcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5Qcml2YWN5IFBvbGljeTwvYT5cXHJcXG4gICAgICAgIDxzbWFsbD5MaW1pbmFsLm1hcmtldCBkb2Vzbid0IHN0b3JlIGFueSBwZXJzb25hbCBkYXRhLiBBbnkgS1lDIGluZm8gaXMgc3RvcmVkIHdpdGggdGhlIGJyb2tlci4gSWYgeW91IHJlZ2lzdGVyIG9uIG91ciBtYWlsaW5nIGxpc3QsIHRoYXQgd2lsbCBiZSB0aGUgb25seSBwZXJzb25hbCBpbmZvIHdlIHN0b3JlLjwvc21hbGw+XFxyXFxuICAgICAgPC9zcGFuPlxcclxcbiAgICA8L2xhYmVsPjwvbGk+XFxyXFxuICAgICAgICA8bGk+XFxyXFxuICAgIDxsYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiY29va2llXFxcIiB2YWx1ZT1cXFwiMVxcXCI+XFxyXFxuICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgIEkgYWNjZXB0IDxhIGhyZWY9XFxcImh0dHBzOi8vd3d3LmxpbWluYWwubWFya2V0L2Nvb2tpZS1wb2xpY3lcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5Db29raWUgcG9saWN5PC9hPlxcclxcbiAgICAgICAgPHNtYWxsPldlIHVzZSBzb21lIGNvb2tpZXMgJiBzZXJ2aWNlcyB0byBpbXByb3ZlIG91ciBzZXJ2aWNlLiBZb3UgZG9uJ3QgaGF2ZSB0byBhY2NlcHQgYnV0IHdlIHdpbGwgdGhlbiBqdXN0IHN0b3JlIGVzc2VudGlhbCBjb29raWVzLjwvc21hbGw+XFxyXFxuICAgICAgPC9zcGFuPlxcclxcbiAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgPC9saT5cXHJcXG4gICAgPC91bD5cXHJcXG48L2FydGljbGU+XFxyXFxuXFxyXFxuPGRpdiBjbGFzcz1cXFwiZC1ub25lXFxcIiBpZD1cXFwid2FsbGV0X2Nvbm5lY3Rvcl9wYW5lbFxcXCI+XFxyXFxuICAgIDxhcnRpY2xlIGNsYXNzPVxcXCJwcm92aWRlclxcXCIgaWQ9XFxcImNvbm5lY3Rfd2FsbGV0X3dhbGxldENvbm5lY3RcXFwiIGRhdGEtcHJvdmlkZXI9XFxcIndhbGxldENvbm5lY3RcXFwiPlxcclxcblxcclxcbiAgICAgICAgPGgzPkNvbm5lY3QgdXNpbmcgV2FsbGV0Q29ubmVjdDwvaDM+XFxyXFxuICAgICAgICA8cD5cXHJcXG4gICAgICAgICAgICBQb3B1bGFyIG9wdGlvbiB0byBjb25uZWN0IHlvdXIgbW9iaWxlIHdhbGxldC5cXHJcXG4gICAgICAgICAgICBGb3IgbW9iaWxlIHdlIGxpa2UgPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cudG9rZW5wb2NrZXQucHJvL1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmsgb25jbGljaz0nZXZlbnQuc3RvcFByb2dhdGlvbigpOydcXFwiPlRva2VuXFxyXFxuICAgICAgICAgICAgUG9rZXQ8L2E+XFxyXFxuICAgICAgICAgICAgYXMgaXMgc3VwcG9ydCB0ZXN0IG5ldHdvcms8L3A+XFxyXFxuXFxyXFxuICAgIDwvYXJ0aWNsZT5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZC1ub25lXFxcIiBpZD1cXFwid2FsbGV0Q29ubmVjdENvbm5lY3Rpb25JbmZvXFxcIj48L2Rpdj5cXHJcXG4gICAgPCEtLVxcclxcbiAgICA8YXJ0aWNsZSBjbGFzcz1cXFwicHJvdmlkZXJcXFwiIGlkPVxcXCJjb25uZWN0X3dhbGxldF9jb2luYmFzZVdhbGxldFxcXCIgZGF0YS1wcm92aWRlcj1cXFwiY29pbmJhc2VcXFwiPlxcclxcblxcclxcbiAgICAgICAgPGgzPkNvaW5iYXNlIHdhbGxldDwvaDM+XFxyXFxuICAgICAgICA8cD5Db25uZWN0IHVzaW5nIHlvdXIgQ29pbmJhc2UgYXBwPC9wPlxcclxcblxcclxcbiAgICA8L2FydGljbGU+XFxyXFxuICAgIC0tPlxcclxcbiAgICA8YXJ0aWNsZSBpZD1cXFwiY29ubmVjdF93YWxsZXRfbWV0YW1hc2tcXFwiIGNsYXNzPVxcXCJwcm92aWRlclxcXCIgZGF0YS1wcm92aWRlcj1cXFwibWV0YW1hc2tcXFwiPlxcclxcblxcclxcbiAgICAgICAgPGgzPk1ldGFtYXNrPC9oMz5cXHJcXG4gICAgICAgIDxwPkNvbm5lY3QgdXNpbmcgeW91ciBNZXRhbWFzazwvcD5cXHJcXG5cXHJcXG4gICAgPC9hcnRpY2xlPlxcclxcbjwvZGl2PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2VsZW1lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBdXRoZW50aWNhdGVTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL0F1dGhlbnRpY2F0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IHdhbGxldEJ1dHRvbiBmcm9tICcuLi8uLi9odG1sL2VsZW1lbnRzL0Nvbm5lY3RXYWxsZXRCdXR0b24uaHRtbCc7XHJcbmltcG9ydCBzZWxlY3RXYWxsZXRQcm92aWRlciBmcm9tICcuLi8uLi9odG1sL21vZGFsL1NlbGVjdFdhbGxldFByb3ZpZGVyLmh0bWwnO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWxcIjtcclxuaW1wb3J0IE5ldHdvcmtJbmZvIGZyb20gXCIuLi8uLi9uZXR3b3Jrcy9OZXR3b3JrSW5mb1wiO1xyXG5pbXBvcnQge3Nob3J0RXRofSBmcm9tIFwiLi4vLi4vdXRpbC9IZWxwZXJcIjtcclxuaW1wb3J0IENvb2tpZUhlbHBlciBmcm9tIFwiLi4vLi4vdXRpbC9Db29raWVIZWxwZXJcIjtcclxuaW1wb3J0IFByb3ZpZGVySW5mbyBmcm9tIFwiLi4vLi4vd2FsbGV0L1Byb3ZpZGVySW5mb1wiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgRXJyb3JJbmZvIGZyb20gXCIuLi8uLi9lcnJvcnMvRXJyb3JJbmZvXCI7XHJcbmltcG9ydCBUcmFkZVBhZ2UgZnJvbSBcIi4uL3BhZ2VzL1RyYWRlUGFnZVwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25uZWN0V2FsbGV0IHtcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgcHVibGljIHN0YXRpYyBQcm92aWRlcjogc3RyaW5nO1xyXG4gICAgbW9kYWwgOiBNb2RhbDtcclxuICAgIHByb3ZpZGVySW5mbyA6IFByb3ZpZGVySW5mbztcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IobW9yYWxpczogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySW5mbyA9IG5ldyBQcm92aWRlckluZm8obnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlckJ1dHRvbihlbGVtZW50SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpIS5pbm5lckhUTUwgPSB3YWxsZXRCdXR0b247XHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGltaW5hbF9tYXJrZXRfY29ubmVjdF93YWxsZXRcIik7XHJcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jaG9vc2VXYWxsZXRQcm92aWRlcigpKTtcclxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNob29zZVdhbGxldFByb3ZpZGVyKCkpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNob29zZVdhbGxldFByb3ZpZGVyKCkge1xyXG4gICAgICAgIHRoaXMubW9kYWwuc2hvd01vZGFsKCdDb25uZWN0IHRvIGEgd2FsbGV0Jywgc2VsZWN0V2FsbGV0UHJvdmlkZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwQ2hlY2tib3hlcygpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBQcm92aWRlcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwQ2hlY2tib3hlcygpIHtcclxuICAgICAgICBsZXQgY2hlY2tib3hlczogYW55ID0ge2FsbDpmYWxzZSwgdG9zOiBmYWxzZSwgcHA6IGZhbHNlLCBjb29raWU6IGZhbHNlfTtcclxuXHJcbiAgICAgICAgbGV0IGNvb2tpZUhlbHBlciA9IG5ldyBDb29raWVIZWxwZXIoZG9jdW1lbnQpO1xyXG4gICAgICAgIGxldCB0b3NDb25maXJtZWQgPSBjb29raWVIZWxwZXIuZ2V0Q29va2llVmFsdWUoJ3RvcycpO1xyXG4gICAgICAgIGlmICh0b3NDb25maXJtZWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjaGVja2JveGVzID0ge3RvczogdHJ1ZSwgcHA6IHRydWV9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVByb3ZpZGVycyhjaGVja2JveGVzKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3NfcHBfY29va2llX3BhbmVsJykhLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdG9zX3BwX2Nvb2tpZV9wYW5lbCBpbnB1dCcpO1xyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgbGV0IGNoZWNrYm94ID0gaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSE7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAnYWxsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZVRvU2V0ID0gY2hlY2tib3guY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dHMuZm9yRWFjaCh0bXAgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3RoZXJJbnB1dCA9IHRtcCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveGVzW290aGVySW5wdXQubmFtZV0gPSB2YWx1ZVRvU2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlcklucHV0LmNoZWNrZWQgPSB2YWx1ZVRvU2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2JveGVzW25hbWVdID0gY2hlY2tib3guY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVByb3ZpZGVycyhjaGVja2JveGVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0dXBQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgbGV0IGFuY2hvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjd2FsbGV0X2Nvbm5lY3Rvcl9wYW5lbCAucHJvdmlkZXInKTtcclxuICAgICAgICBhbmNob3JzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcHJvdmlkZXIgPSAoZXZ0LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQpLmRhdGFzZXQucHJvdmlkZXIhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0V2FsbGV0KHByb3ZpZGVyKVxyXG4gICAgICAgICAgICB9LCB7Y2FwdHVyZTp0cnVlfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9nZ2xlUHJvdmlkZXJzKGNoZWNrYm94ZXM6IGFueSkge1xyXG4gICAgICAgIGxldCBjb29raWVIZWxwZXIgPSBuZXcgQ29va2llSGVscGVyKGRvY3VtZW50KTtcclxuXHJcbiAgICAgICAgaWYgKGNoZWNrYm94ZXMudG9zICYmIGNoZWNrYm94ZXMucHApIHtcclxuICAgICAgICAgICAgY29va2llSGVscGVyLnNldENvb2tpZSgndG9zJywgbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBpZiAod2FsbGV0SGVscGVyLmlzV2Vidmlldyh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kYWwuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RXYWxsZXQoJycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhbGxldF9jb25uZWN0b3JfcGFuZWwnKSEuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvb2tpZUhlbHBlci5kZWxldGVDb29raWUoJ3RvcycpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FsbGV0X2Nvbm5lY3Rvcl9wYW5lbCcpIS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dVbnN1cHBvcnRlZE5ldHdvcmtNZXNzYWdlKGNvbm5lY3Rpb25JbmZvIDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgc3RyID0gJ1RoZSBuZXR3b3JrIHlvdSBhcmUgY29ubmVjdGluZyB0byBpcyBub3Qgc3VwcG9ydGVkLic7XHJcbiAgICAgICAgc3RyICs9ICdGb2xsb3dpbmcgbmV0d29ya3MgYXJlIHN1cHBvcnRlZC4gJ1xyXG4gICAgICAgIGxldCBuZXR3b3JrcyA9IE5ldHdvcmtJbmZvLmdldE5ldHdvcmtzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaT0wO2k8bmV0d29ya3MubGVuZ3RoO2krKykge1xyXG4gICAgICAgICAgICBpZiAoaSAhPSAwKSBzdHIgKz0gJywgJztcclxuICAgICAgICAgICAgc3RyICs9IG5ldHdvcmtzW2ldLk5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbm5lY3Rpb25JbmZvLmlubmVySFRNTCA9IHN0cjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbm5lY3RXYWxsZXQocHJvdmlkZXJOYW1lIDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGF1dGhlbnRpY2F0aW9uU2VydmljZSA9IG5ldyBBdXRoZW50aWNhdGVTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcblxyXG4gICAgICAgIGxldCBjb29raWVIZWxwZXIgPSBuZXcgQ29va2llSGVscGVyKGRvY3VtZW50KTtcclxuICAgICAgICBjb29raWVIZWxwZXIuc2V0Q29va2llUHJvdmlkZXIocHJvdmlkZXJOYW1lKTtcclxuXHJcbiAgICAgICAgYXV0aGVudGljYXRpb25TZXJ2aWNlLmF1dGhlbnRpY2F0ZVVzZXIoXHJcbiAgICAgICAgICAgIHByb3ZpZGVyTmFtZSxcclxuICAgICAgICAgICAgKHdhbGxldENvbm5lY3Rpb25JbmZvIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndlYjNFbmFibGVkUmVzdWx0KHByb3ZpZGVyTmFtZSwgd2FsbGV0Q29ubmVjdGlvbkluZm8pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhc3luYyAodXNlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5oaWRlTW9kYWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlckluZm8gPSBuZXcgVXNlckluZm8odGhpcy5tb3JhbGlzLCB0aGlzLnByb3ZpZGVySW5mbywgdXNlcik7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1c2VySW5mby5yZW5kZXIoJ3VzZXJfaGVhZGVyX2luZm8nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X2V4ZWN1dGVfdHJhZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYWdlID0gbmV3IFRyYWRlUGFnZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhZ2UubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgRXJyb3JJbmZvLnJlcG9ydChyZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdlYjNFbmFibGVkUmVzdWx0KHByb3ZpZGVyTmFtZSA6IHN0cmluZywgd2FsbGV0Q29ubmVjdGlvbkluZm8gOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySW5mbyA9IG5ldyBQcm92aWRlckluZm8od2FsbGV0Q29ubmVjdGlvbkluZm8pO1xyXG5cclxuICAgICAgICBsZXQgY29ubmVjdGlvbkluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcm92aWRlck5hbWUgKyAnQ29ubmVjdGlvbkluZm8nKTtcclxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25JbmZvKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbm5lY3Rpb25JbmZvLmNsYXNzTGlzdC5yZXBsYWNlKCdhbGVydC13YXJuaW5nJywgJ2FsZXJ0LWluZm8nKTtcclxuICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVySW5mby5DaGFpbklkICE9IG5ldHdvcmtJbmZvLkNoYWluSWQpIHtcclxuICAgICAgICAgICAgbGV0IHVzZXJOZXR3b3JrID0gTmV0d29ya0luZm8uZ2V0TmV0d29ya0luZm9CeUNoYWluSWQodGhpcy5wcm92aWRlckluZm8uQ2hhaW5JZCk7XHJcbiAgICAgICAgICAgIGlmICghdXNlck5ldHdvcmspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Vuc3VwcG9ydGVkTmV0d29ya01lc3NhZ2UoY29ubmVjdGlvbkluZm8pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgTmV0d29ya0luZm8uc2V0TmV0d29ya0J5Q2hhaW5JZCh0aGlzLnByb3ZpZGVySW5mby5DaGFpbklkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3RyID0gJ0Nvbm5lY3RpbmcgdG8geW91IHdhbGxldCBcIicgKyB0aGlzLnByb3ZpZGVySW5mby5XYWxsZXROYW1lICsgJ1wiIHRvIGFkZHJlc3MgJyArIHNob3J0RXRoKHRoaXMucHJvdmlkZXJJbmZvLlVzZXJBZGRyZXNzKTtcclxuICAgICAgICBzdHIgKz0gJy4gT3BlbiAnICsgdGhpcy5wcm92aWRlckluZm8uV2FsbGV0TmFtZSArICcgYW5kIDxzdHJvbmc+Q29uZmlybTwvc3Ryb25nPiB0aGUgc2lnbiBpbi4nO1xyXG4gICAgICAgIGNvbm5lY3Rpb25JbmZvLmlubmVySFRNTCA9IHN0cjtcclxuICAgICAgICBjb25uZWN0aW9uSW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgIH1cclxufSIsImltcG9ydCBFcnJvckluZm8gZnJvbSBcIi4uLy4uL2Vycm9ycy9FcnJvckluZm9cIjtcclxuaW1wb3J0IEJsb2NrY2hhaW5FcnJvciBmcm9tIFwiLi4vLi4vZXJyb3JzL0Jsb2NrY2hhaW5FcnJvclwiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuLi8uLi9lcnJvcnMvR2VuZXJhbEVycm9yXCI7XHJcbmltcG9ydCBLeWNTdGF0dXMgZnJvbSBcIi4uLy4uL2R0by9LeWNTdGF0dXNcIjtcclxuaW1wb3J0IEFVc2RCYWxhbmNlIGZyb20gXCIuLi8uLi91aS9lbGVtZW50cy9BVXNkQmFsYW5jZVwiO1xyXG5pbXBvcnQgQmxvY2tjaGFpblNlcnZpY2UgZnJvbSBcIi4vQmxvY2tjaGFpblNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtZQ1NlcnZpY2UgZXh0ZW5kcyBCbG9ja2NoYWluU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBLWUNJbmZvOiBhbnk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBLeWNSZXNwb25zZTogS3ljU3RhdHVzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgc3VwZXIobW9yYWxpcylcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0S1lDQWJpKCkge1xyXG4gICAgICAgIGlmIChLWUNTZXJ2aWNlLktZQ0luZm8pIHJldHVybiBLWUNTZXJ2aWNlLktZQ0luZm8uYWJpO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiLi4vYWJpL0tZQy5qc29uXCIpO1xyXG4gICAgICAgIEtZQ1NlcnZpY2UuS1lDSW5mbyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICByZXR1cm4gS1lDU2VydmljZS5LWUNJbmZvLmFiaTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGhhc1ZhbGlkS1lDKCk6IFByb21pc2U8S3ljU3RhdHVzPiB7XHJcbiAgICAgICAgaWYgKEtZQ1NlcnZpY2UuS3ljUmVzcG9uc2UgJiYgS1lDU2VydmljZS5LeWNSZXNwb25zZS5pc1ZhbGlkS3ljKSByZXR1cm4gS1lDU2VydmljZS5LeWNSZXNwb25zZTtcclxuXHJcbiAgICAgICAgS1lDU2VydmljZS5LeWNSZXNwb25zZSA9IGF3YWl0IHRoaXMubW9yYWxpcy5DbG91ZC5ydW4oJ2lzVmFsaWRLeWMnLCB7Y2hhaW5JZDogdGhpcy5tb3JhbGlzLmNoYWluSWR9KVxyXG4gICAgICAgICAgICAuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBibG9ja2NoYWluRXJyb3IgPSBuZXcgQmxvY2tjaGFpbkVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2tjaGFpbkVycm9yLmFkZHJlc3NJc05vdFZhbGlkS1lDKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBFcnJvckluZm8ucmVwb3J0KGJsb2NrY2hhaW5FcnJvcilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSkgYXMgS3ljU3RhdHVzO1xyXG5cclxuICAgICAgICBpZiAoS1lDU2VydmljZS5LeWNSZXNwb25zZS5hbHBhY2FJZCkge1xyXG4gICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgICAgICAgICAgdXNlcj8uc2V0KCdhbHBhY2FJZCcsIEtZQ1NlcnZpY2UuS3ljUmVzcG9uc2UuYWxwYWNhSWQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFVc2RCYWxhbmNlID0gbmV3IEFVc2RCYWxhbmNlKHRoaXMubW9yYWxpcywgdXNlciEpO1xyXG4gICAgICAgICAgICBhd2FpdCBhVXNkQmFsYW5jZS5sb2FkQVVTREJhbGFuY2VVSSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gS1lDU2VydmljZS5LeWNSZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZUtZQ0luZm8oZGF0YTogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBsZXQgdXNlciA9IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBHZW5lcmFsRXJyb3IoXCJZb3UgbmVlZCB0byBiZSBsb2dnZWQgaW4gdG8gZG8gS1lDLiBQbGVhc2UgbG9naW4gYWdhaW4uXCIpXHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKFwia3ljUmVnaXN0cmF0aW9uXCIsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVLWUNJbmZvKGRhdGE6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IHVzZXIgPSB0aGlzLm1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcbiAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgR2VuZXJhbEVycm9yKFwiWW91IG5lZWQgdG8gYmUgbG9nZ2VkIGluIHRvIGRvIEtZQy4gUGxlYXNlIGxvZ2luIGFnYWluLlwiKVxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bihcInVwZGF0ZUFjY291bnRcIiwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVmFsaWRBY2NvdW50SWQoc3RyOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoJ15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC01XVswLTlhLWZdezN9LVswODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn0kJyk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3Qoc3RyKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVEb2N1bWVudHMocGFyYW1zOiBhbnkpIHtcclxuICAgICAgICBsZXQgdXNlciA9IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgICAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBHZW5lcmFsRXJyb3IoXCJZb3UgbmVlZCB0byBiZSBsb2dnZWQgaW4gdG8gZG8gS1lDLiBQbGVhc2UgbG9naW4gYWdhaW4uXCIpXHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKFwia3ljQWN0aW9uUmVxdWlyZWRVcGRhdGVcIiwgcGFyYW1zKTtcclxuICAgIH1cclxufSIsImltcG9ydCBDb250cmFjdEluZm8gZnJvbSBcIi4uLy4uL2NvbnRyYWN0cy9Db250cmFjdEluZm9cIjtcclxuaW1wb3J0IExpbWluYWxNYXJrZXRTZXJ2aWNlIGZyb20gXCIuL0xpbWluYWxNYXJrZXRTZXJ2aWNlXCI7XHJcbmltcG9ydCBFcnJvckluZm8gZnJvbSBcIi4uLy4uL2Vycm9ycy9FcnJvckluZm9cIjtcclxuaW1wb3J0IHtBZGRyZXNzWmVyb30gZnJvbSBcIi4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBCaWdOdW1iZXIgZnJvbSBcImJpZ251bWJlci5qc1wiO1xyXG5pbXBvcnQgQmxvY2tjaGFpbkVycm9yIGZyb20gXCIuLi8uLi9lcnJvcnMvQmxvY2tjaGFpbkVycm9yXCI7XHJcbmltcG9ydCBCbG9ja2NoYWluU2VydmljZSBmcm9tIFwiLi9CbG9ja2NoYWluU2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdXJpdHlUb2tlblNlcnZpY2UgZXh0ZW5kcyBCbG9ja2NoYWluU2VydmljZSB7XHJcblxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIFNlY3VyaXR5VG9rZW5JbmZvOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9yYWxpczogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICBzdXBlcihtb3JhbGlzKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFF1YW50aXR5QnlBZGRyZXNzKHN5bWJvbDogc3RyaW5nLCBldGhBZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPEJpZ051bWJlcj4ge1xyXG4gICAgICAgIGxldCBsaW1pbmFsTWFya2V0U2VydmljZSA9IG5ldyBMaW1pbmFsTWFya2V0U2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgIGxldCBzeW1ib2xBZGRyZXNzID0gYXdhaXQgbGltaW5hbE1hcmtldFNlcnZpY2UuZ2V0U3ltYm9sQ29udHJhY3RBZGRyZXNzKHN5bWJvbCk7XHJcbiAgICAgICAgaWYgKHN5bWJvbEFkZHJlc3MgPT09IEFkZHJlc3NaZXJvKSByZXR1cm4gbmV3IEJpZ051bWJlcigwKTtcclxuXHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBhd2FpdCB0aGlzLmdldE9wdGlvbnMoJ2JhbGFuY2VPZicsIHN5bWJvbEFkZHJlc3MsIHtcclxuICAgICAgICAgICAgYWNjb3VudDogZXRoQWRkcmVzc1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlRnVuY3Rpb24ob3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oYmFsYW5jZU9mID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhbW91bnQgPSB0aGlzLm1vcmFsaXMuVW5pdHMuRnJvbVdlaShiYWxhbmNlT2YudG9TdHJpbmcoKSwgMTgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdOdW1iZXIoYW1vdW50KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBibG9ja2NoYWluRXJyb3IgPSBuZXcgQmxvY2tjaGFpbkVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICBFcnJvckluZm8ucmVwb3J0KGJsb2NrY2hhaW5FcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJpZ051bWJlcigwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHRyYW5zZmVyKHN5bWJvbEFkZHJlc3M6IHN0cmluZywgcXR5OiBCaWdOdW1iZXIpIHtcclxuICAgICAgICBsZXQgY29udHJhY3RJbmZvID0gQ29udHJhY3RJbmZvLmdldENvbnRyYWN0SW5mbygpO1xyXG4gICAgICAgIGxldCBvcHRpb25zID0gYXdhaXQgdGhpcy5nZXRPcHRpb25zKCd0cmFuc2ZlcicsIHN5bWJvbEFkZHJlc3MsIHtcclxuICAgICAgICAgICAgcmVjaXBpZW50OiBjb250cmFjdEluZm8uQVVTRF9BRERSRVNTLFxyXG4gICAgICAgICAgICBhbW91bnQ6IE1vcmFsaXMuVW5pdHMuVG9rZW4ocXR5LnRvU3RyaW5nKCksIDE4KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlRnVuY3Rpb24ob3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tjaGFpbkVycm9yID0gbmV3IEJsb2NrY2hhaW5FcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3JJbmZvLnJlcG9ydChibG9ja2NoYWluRXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0T3B0aW9ucyhmdW5jdGlvbk5hbWU6IHN0cmluZywgc3ltYm9sQWRkcmVzczogc3RyaW5nLCBwYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGxldCBzZWN1cml0eVN5bWJvbEFiaSA9IGF3YWl0IHRoaXMuZ2V0U2VjdXJpdHlUb2tlbkFiaSgpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogc3ltYm9sQWRkcmVzcyxcclxuICAgICAgICAgICAgZnVuY3Rpb25OYW1lOiBmdW5jdGlvbk5hbWUsXHJcbiAgICAgICAgICAgIGFiaTogc2VjdXJpdHlTeW1ib2xBYmksXHJcbiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2VjdXJpdHlUb2tlbkFiaSgpIHtcclxuICAgICAgICBpZiAoU2VjdXJpdHlUb2tlblNlcnZpY2UuU2VjdXJpdHlUb2tlbkluZm8pIHJldHVybiBTZWN1cml0eVRva2VuU2VydmljZS5TZWN1cml0eVRva2VuSW5mby5hYmk7XHJcblxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcuLi9hYmkvU2VjdXJpdHlUb2tlbi5qc29uJyk7XHJcbiAgICAgICAgU2VjdXJpdHlUb2tlblNlcnZpY2UuU2VjdXJpdHlUb2tlbkluZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgcmV0dXJuIFNlY3VyaXR5VG9rZW5TZXJ2aWNlLlNlY3VyaXR5VG9rZW5JbmZvLmFiaTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2dyZXNzIHtcclxuXHJcbiAgICBwdWJsaWMgc2hvdyhtZXNzYWdlIDogc3RyaW5nLCBwZXJjZW50YWdlIDogbnVtYmVyLCB3YXJuaW5nPyA6IGJvb2xlYW4sIGhpZGVFbGVtZW50cz8gOiBzdHJpbmdbXSkge1xyXG5cclxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MnKTtcclxuICAgICAgICBpZiAoIXByb2dyZXNzKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChoaWRlRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaGlkZUVsZW1lbnRzLmZvckVhY2goKGVsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9ncmVzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICBwcm9ncmVzcy5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInByb2dyZXNzX3RleHRcIj4nICsgbWVzc2FnZSArICc8L2Rpdj4nO1xyXG4gICAgICAgIHByb2dyZXNzLnN0eWxlLndpZHRoID0gcGVyY2VudGFnZSArICclJztcclxuXHJcbiAgICAgICAgcHJvZ3Jlc3MuY2xhc3NMaXN0LnRvZ2dsZSgncHJvZ3Jlc3MtYmFyLXN0cmlwZWQnLCAocGVyY2VudGFnZSAhPSAxMDApKTtcclxuICAgICAgICBwcm9ncmVzcy5jbGFzc0xpc3QudG9nZ2xlKCdwcm9ncmVzcy1iYXItYW5pbWF0ZWQnLCAocGVyY2VudGFnZSAhPSAxMDApKTtcclxuICAgICAgICBpZiAod2FybmluZykge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5jbGFzc0xpc3QuYWRkKCdiZy13YXJuaW5nJyk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLmNsYXNzTGlzdC5hZGQoJ3Byb2dyZXNzX3RleHRfYXR0bicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdhcm5pbmcnKTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3MuY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3NfdGV4dF9hdHRuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IFByb2dyZXNzIGZyb20gXCIuLi8uLi91aS9lbGVtZW50cy9Qcm9ncmVzc1wiO1xyXG5pbXBvcnQge1RyYWRlVHlwZX0gZnJvbSBcIi4uLy4uL2VudW1zL1RyYWRlVHlwZVwiO1xyXG5pbXBvcnQge3VwcGVyRmlyc3RMZXR0ZXJ9IGZyb20gXCIuLi8uLi91dGlsL0hlbHBlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3Vic2NyaXB0aW9uIHtcclxuICAgIG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRPcmRlckJ1eVRhYmxlUHJlZml4KCkge1xyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtJbmZvLk5hbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzdWJzY3JpYmVUb1RhYmxlKHRyYWRlVHlwZSA6IFRyYWRlVHlwZSwgb25VcGRhdGVDYWxsYmFjayA6IChvYmplY3QgOiBhbnkpID0+IHZvaWQpIHtcclxuICAgICAgICBsZXQgdGFibGVOYW1lID0gdGhpcy5nZXRPcmRlckJ1eVRhYmxlUHJlZml4KCkgKyAnT3JkZXInICsgdHJhZGVUeXBlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzdWJzY3JpYmUgdG8gdGFibGU6JyArIHRhYmxlTmFtZSk7XHJcblxyXG4gICAgICAgIGxldCBxdWVyeSA9IG5ldyB0aGlzLm1vcmFsaXMuUXVlcnkodGFibGVOYW1lKTtcclxuICAgICAgICBsZXQgc3Vic2NyaXB0aW9uID0gYXdhaXQgcXVlcnkuc3Vic2NyaWJlKCk7XHJcblxyXG4gICAgICAgIHN1YnNjcmlwdGlvbi5vbigndXBkYXRlJywgKHJlc3BvbnNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IHJlc3BvbnNlLnRvSlNPTigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2JqZWN0IHVwZGF0ZWQnLCBKU09OLnN0cmluZ2lmeShvYmplY3QpLCBvYmplY3QpO1xyXG4gICAgICAgICAgICBsZXQgZXRoTGluayA9ICcgPGEgY2xhc3M9XCJ3aGl0ZS1saW5rXCIgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vbXVtYmFpLnBvbHlnb25zY2FuLmNvbS90eC8nICsgb2JqZWN0LnRyYW5zYWN0aW9uX2hhc2ggKyAnXCI+VmlldyB0cmFuc2FjdGlvbjwvYT4nO1xyXG5cclxuICAgICAgICAgICAgb25VcGRhdGVDYWxsYmFjayhvYmplY3QpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhdHVzOicsIG9iamVjdC5zdGF0dXMpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gbmV3IFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgIGlmICgoIW9iamVjdC5zdGF0dXMgJiYgb2JqZWN0LmNvbmZpcm1lZCkgfHwgb2JqZWN0LnN0YXR1cyA9PSAnbW9uZXlfc2VudCcpIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzLnNob3coJ0Jsb2NrY2hhaW4gaGFzIGNvbmZpcm1lZCwgbW9uZXkgaGFzIGJlZW4gc2VudCB0byBicm9rZXIuJyArIGV0aExpbmssIDU2KVxyXG4gICAgICAgICAgICAgICAgLy9ibG9ja2NoYWluIGhhcyBjb25maXJtZWQsIG1vbmV5IHdpbGwgYXJyaXZlIHNvb24gdG8gYnJva2VyXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqZWN0LnN0YXR1cyA9PSAnbW9uZXlfYXJyaXZlZCcpIHtcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzLnNob3coJ01vbmV5IGhhcyBhcnJpdmVkLCB3aWxsIG5vdyBleGVjdXRlIHlvdXIgYnV5IG9yZGVyLicgKyBldGhMaW5rLCA3MClcclxuICAgICAgICAgICAgICAgIC8vbW9uZXkgaGFzIGFycml2ZWQgdG8gYnJva2VyLCB3ZSB3aWxsIG5vdyBleGVjdXRlIHlvdXIgb3JkZXJcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmplY3Quc3RhdHVzID09ICdvcmRlcl9yZXF1ZXN0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAvL29yZGVyIGhhcyBiZWVuIGV4ZWN1dGVkLCB3ZSBhcmUgd2FpdGluZyBvbiByZXNwb25zZSBmcm9tIHRoZSBzdG9jayBleGNoYW5nZVxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnQnV5IG9yZGVyIGhhcyBiZWVuIGV4ZWN1dGVkLiBXZSB3aWxsIHVwZGF0ZSB5b3Ugd2hlbiBpdCBoYXMgYmVlbiBmaWxsZWQuJyArIGV0aExpbmssIDg0KVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iamVjdC5zdGF0dXMgPT0gJ29yZGVyX2ZpbGxlZCcpIHtcclxuICAgICAgICAgICAgICAgIC8vb3JkZXIgaGFzIGJlZW4gZmlsbGVkLCB5b3UgZ290IG9iamVjdC5maWxsZWRRdHkgb2Ygc2hhcmVzLiBZb3Ugd2lsbCBzZWUgaXQgc29vbiBpbiB5b3VyIHdhbGxldFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc2hvdygnT3JkZXIgaGFzIGJlZW4gZmlsbGVkLCB5b3Ugd2lsbCByZWNlaXZlICcgKyBvYmplY3QuZmlsbGVkUXR5ICsgJyAnICsgU3ltYm9sICsgJyBzb29uIGludG8geW91ciB3YWxsZXQuJyArIGV0aExpbmssIDEwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5zaG93KCdXYWl0aW5nIGZvciBibG9ja2NoYWluIHRvIGNvbmZpcm0gdHJhbnNhY3Rpb24uJywgOTkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufSIsImV4cG9ydCBlbnVtIFRyYWRlVHlwZSB7XHJcbiAgICBTZWxsID0gJ1NlbGwnLFxyXG4gICAgQnV5ID0gJ0J1eSdcclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxidXR0b24gaWQ9XFxcImxpbWluYWxfbWFya2V0X2V4ZWN1dGVfdHJhZGVcXFwiPjwvYnV0dG9uPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCJcXHJcXG48YXJ0aWNsZSBjbGFzcz1cXFwidHJhZGVfZXhlY3V0ZWRcXFwiPlxcclxcbiAgICA8bmF2PlxcclxcbiAgICA8dWw+XFxyXFxuICAgICAgICA8bGk+XFxyXFxuICAgICAgICAgICAgPGltZyBzcmM9XFxcInt7c2VsbGluZ0xvZ299fVxcXCI+PGJyIC8+XFxyXFxuICAgICAgICAgICAge3tzZWxsaW5nU3ltYm9sfX08YnIgLz5cXHJcXG4gICAgICAgICAgICB7e3NlbGxpbmdBbW91bnR9fVxcclxcbiAgICAgICAgPC9saT5cXHJcXG4gICAgPC91bD5cXHJcXG4gICAgPHVsPlxcclxcbiAgICAgICAgPGxpPiAtLS0tPiA8L2xpPlxcclxcbiAgICA8L3VsPlxcclxcbiAgICA8dWw+XFxyXFxuICAgICAgICA8bGk+XFxyXFxuICAgICAgICAgICAgPGltZyBzcmM9XFxcInt7YnV5aW5nTG9nb319XFxcIiAvPjxiciAvPlxcclxcbiAgICAgICAgICAgIHt7YnV5aW5nU3ltYm9sfX08YnIgLz5cXHJcXG4gICAgICAgICAgICA8YWJiciB0aXRsZT1cXFwie3tidXlpbmdRdWFudGl0eX19XFxcIiBkYXRhLXRvb2x0aXA9XFxcInt7YnV5aW5nUXVhbnRpdHl9fVxcXCI+e3tidXlpbmdSb3VuZFF1YW50aXR5fX08L2FiYnI+XFxyXFxuICAgICAgICA8L2xpPlxcclxcbiAgICA8L3VsPlxcclxcbiAgICA8L25hdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIElmIHlvdSBoYXZlbid0IGFscmVhZHksIGFkZCB0aGUge3tidXlpbmdTeW1ib2x9fSB0byB5b3VyIHdhbGxldC5cXHJcXG4gICAgICAgIDxiciAvPjxiciAvPlxcclxcbiAgICAgICAgPGJ1dHRvbiBpZD1cXFwiYWRkVG9rZW5Ub1dhbGxldFxcXCIgZGF0YS1hZGRyZXNzPVxcXCJ7e3Rva2VuQWRkcmVzc319XFxcIj5BZGQge3tidXlpbmdTeW1ib2x9fSB0byB3YWxsZXQ8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxkaXYgaWQ9XFxcImFkZFRva2VuVG9XYWxsZXRGYWlsZWRcXFwiIGNsYXNzPVxcXCJkLW5vbmVcXFwiPlxcclxcbiAgICAgICAgICAgIFlvdSBjYW4gY29weSB0aGUgYWRkcmVzcywgdG8gaW1wb3J0IHRoZSB0b2tlblxcclxcbiAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT1cXFwie3t0b2tlbkFkZHJlc3N9fVxcXCIgLz5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGJyIC8+XFxyXFxuICAgICAgICBTaG91bGQgYmUgdmlzaWJsZSBpbiB5b3VyIHt7d2FsbGV0TmFtZX19IG9uIGFkZHJlc3Mge3tzaG9ydEV0aEFkZHJlc3N9fS5cXHJcXG4gICAgICAgIDxiciAvPjxiciAvPlxcclxcbiAgICAgICAgPHNtYWxsPllvdSBjYW4gdmlldyB0aGUgPGEgaHJlZj1cXFwie3tibG9ja0V4cGxvcmVyTGlua319XFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+YmxvY2sgdHJhbnNhY3Rpb24gaGVyZTwvYT48L3NtYWxsPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2FydGljbGU+XFxyXFxuXCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIllvdSBuZWVkIHRvIGhhdmUge3tzeW1ib2x9fSBjdXJyZW5jeSBpbiB5b3VyIHdhbGxldC4gWW91IHVzZSB7e3N5bWJvbH19IHRvIHBheSBmb3IgdXNpbmcgdGhlIGJsb2NrY2hhaW4uXFxyXFxuXFxyXFxuVG8gZ2V0IHNvbWUge3tzeW1ib2x9fSBjdXJyZW5jeVxcclxcbjxvbD5cXHJcXG4gICAgPGxpPkNvcHkgeW91ciBhZGRyZXNzIHNob3duIGJlbG93XFxyXFxuICAgICAgICA8aW5wdXQgdmFsdWU9XFxcInt7ZXRoQWRkcmVzc319XFxcIiAvPlxcclxcbiAgICA8L2xpPlxcclxcbiAgICA8bGk+T3BlbiA8YSBocmVmPVxcXCJ7e2ZhdWNldFVybH19XFxcIiBpZD1cXFwiZ2V0TmF0aXZlVG9rZW5zXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+e3tmYXVjZXRVcmx9fTwvYT48L2xpPlxcclxcbiAgICA8bGk+UGFzdGUgaW4geW91ciBhZGRyZXNzIHlvdSBqdXN0IGNvcGllZCBhbmQgY2xpY2sgdGhlIHN1Ym1pdCBidXR0b248L2xpPlxcclxcbjwvb2w+XFxyXFxuXFxyXFxuPGRpdiBjbGFzcz1cXFwiaW5mb0JhciBkLW5vbmVcXFwiIGlkPVxcXCJ3YWl0aW5nRm9yTmF0aXZlVG9rZW5cXFwiPldhaXRpbmcgZm9yIHt7c3ltYm9sfX0uIFdpbmRvdyB3aWxsIGNsb3NlIHdoZW4geW91IGhhdmUgc29tZSBpblxcclxcbiAgICB5b3Ugd2FsbGV0LlxcclxcbiAgICBJdCBtaWdodCB0YWtlIGZldyBtaW51dGVzIGFmdGVyIHlvdSByZXF1ZXN0ZWQgaXQuXFxyXFxuICAgIDxwcm9ncmVzcz48L3Byb2dyZXNzPlxcclxcbjwvZGl2PlxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCJZb3UgbmVlZCB0byBoYXZlIHt7c3ltYm9sfX0gY3VycmVuY3kgaW4geW91ciB3YWxsZXQuIFlvdSB1c2Uge3tzeW1ib2x9fSB0byBwYXkgZm9yIHVzaW5nIHRoZSBibG9ja2NoYWluLlxcclxcblxcclxcblRvIGdldCBzb21lIHt7c3ltYm9sfX0gY3VycmVuY3lcXHJcXG48b2w+XFxyXFxuICAgIDxsaT5Db3B5IHlvdXIgYWRkcmVzcyBzaG93biBiZWxvd1xcclxcbiAgICAgICAgPGlucHV0IHZhbHVlPVxcXCJ7e2V0aEFkZHJlc3N9fVxcXCIgLz5cXHJcXG4gICAgPC9saT5cXHJcXG4gICAgPGxpPk9wZW4gPGEgaHJlZj1cXFwie3tidXlVcmx9fVxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPnt7YnV5VXJsfX08L2E+PC9saT5cXHJcXG4gICAgPGxpPlBhc3RlIGluIHlvdXIgYWRkcmVzcyB5b3UganVzdCBjb3BpZWQgYW5kIGNsaWNrIHRoZSBzdWJtaXQgYnV0dG9uPC9saT5cXHJcXG48L29sPlxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblxcclxcblwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgTmV0d29ya0luZm8gZnJvbSBcIi4uLy4uL25ldHdvcmtzL05ldHdvcmtJbmZvXCI7XHJcbmltcG9ydCBGYWtlTmF0aXZlVG9rZW5OZWVkZWRIdG1sIGZyb20gJy4uLy4uL2h0bWwvbW9kYWwvRmFrZU5hdGl2ZVRva2VuTmVlZGVkLmh0bWwnO1xyXG5pbXBvcnQgTmF0aXZlVG9rZW5OZWVkZWRIdG1sIGZyb20gJy4uLy4uL2h0bWwvbW9kYWwvTmF0aXZlVG9rZW5OZWVkZWQuaHRtbCc7XHJcbmltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbFwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdGl2ZVRva2VuTmVlZGVkIHtcclxuICAgIG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcztcclxuICAgIG9uTmF0aXZlVG9rZW5BcnJpdmVkIDogKCkgPT4gdm9pZDtcclxuICAgIHRpbWVPdXQ/OiBhbnkgPSB1bmRlZmluZWQ7XHJcbiAgICBtb2RhbDogTW9kYWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzLCBvbk5hdGl2ZVRva2VuQXJyaXZlZCA6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMub25OYXRpdmVUb2tlbkFycml2ZWQgPSBvbk5hdGl2ZVRva2VuQXJyaXZlZDtcclxuICAgICAgICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3coKSB7XHJcbiAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoKTtcclxuICAgICAgICBsZXQgZXRoQWRkcmVzcyA9IHVzZXJTZXJ2aWNlLmdldEV0aEFkZHJlc3MoKTtcclxuXHJcbiAgICAgICAgaWYgKG5ldHdvcmtJbmZvLlRlc3ROZXR3b3JrKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShGYWtlTmF0aXZlVG9rZW5OZWVkZWRIdG1sKTtcclxuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSB0ZW1wbGF0ZSh7c3ltYm9sOm5ldHdvcmtJbmZvLk5hdGl2ZVN5bWJvbCwgZmF1Y2V0VXJsOm5ldHdvcmtJbmZvLkZhdWNldFVybCwgZXRoQWRkcmVzczpldGhBZGRyZXNzfSlcclxuICAgICAgICAgICAgdGhpcy5tb2RhbC5zaG93TW9kYWwoJ0dldCBzb21lICcgKyBuZXR3b3JrSW5mby5OYXRpdmVTeW1ib2wsIGNvbnRlbnQsIGZhbHNlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFRpbWVyKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKE5hdGl2ZVRva2VuTmVlZGVkSHRtbCk7XHJcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGUoe3N5bWJvbDpuZXR3b3JrSW5mby5OYXRpdmVTeW1ib2wsIGJ1eVVybDpuZXR3b3JrSW5mby5CdXlVcmwsIGV0aEFkZHJlc3M6ZXRoQWRkcmVzc30pXHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2hvd01vZGFsKCdHZXQgc29tZSAnICsgbmV0d29ya0luZm8uTmF0aXZlU3ltYm9sLCBjb250ZW50LCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxUaW1lcigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2V0TmF0aXZlVG9rZW5zJyk7XHJcbiAgICAgICAgaWYgKCFsaW5rKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB3YWl0aW5nRm9yTmF0aXZlVG9rZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FpdGluZ0Zvck5hdGl2ZVRva2VuJyk7XHJcbiAgICAgICAgICAgIHdhaXRpbmdGb3JOYXRpdmVUb2tlbj8uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrRm9yTmF0aXZlVG9rZW5zKCk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNhbmNlbFRpbWVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVPdXQpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVPdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjaGVja0Zvck5hdGl2ZVRva2VucygpIHtcclxuICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGxldCBoYXNFbm91Z2hOYXRpdmVUb2tlbnMgPSBhd2FpdCBuZXR3b3JrSW5mby5oYXNFbm91Z2hOYXRpdmVUb2tlbnModGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBpZiAoaGFzRW5vdWdoTmF0aXZlVG9rZW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWwuaGlkZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIHRoaXMub25OYXRpdmVUb2tlbkFycml2ZWQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVPdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY2hlY2tGb3JOYXRpdmVUb2tlbnMoKSwgNSAqIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgaWQ9XFxcImt5Y0FjdGlvblJlcXVpcmVkRGl2XFxcIj5cXHJcXG5cXHJcXG4gICAge3sjaWYgT3RoZXJ9fVxcclxcbiAgICA8c3Ryb25nPlRoaXMgaXMgdGhlIG1lc3NhZ2UgZnJvbSBLWUMgcHJvY2Vzc29yIHdlIHJlY2VpdmVkPC9zdHJvbmc+XFxyXFxuICAgIDxibG9ja3F1b3RlPlxcclxcbiAgICAgICAge3tPdGhlcn19XFxyXFxuICAgIDwvYmxvY2txdW90ZT5cXHJcXG4gICAge3svaWZ9fVxcclxcbiAgICA8Zm9ybSBub3ZhbGlkYXRlIGlkPVxcXCJreWNBY3Rpb25SZXF1aXJlZEZvcm1cXFwiIG5hbWU9XFxcImt5Y0FjdGlvblJlcXVpcmVkRm9ybVxcXCIgb25zdWJtaXQ9XFxcInJldHVybiBmYWxzZTtcXFwiPlxcclxcbiAgICAgICAge3t7S3ljSW5mb319fVxcclxcbiAgICAgICAge3sjaWYgU3VibWl0RGF0YX19XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbnB1dF9lcnJvclxcXCIgaWQ9XFxcImt5Y0FjdGlvblJlcXVpcmVkRXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGlkPVxcXCJreWNBY3Rpb25SZXF1aXJlZFN1Ym1pdFxcXCI+U2VuZCBuZXcgaW5mb3JtYXRpb248L2J1dHRvbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAge3svaWZ9fVxcclxcbiAgICA8L2Zvcm0+XFxyXFxuPC9kaXY+XFxyXFxuXFxyXFxuPGRpdiBpZD1cXFwia3ljQWN0aW9uUmVxdWlyZWRTdWJtaXR0ZWREaXZcXFwiIGNsYXNzPVxcXCJoaWRkZW4gY2VudGVyXFxcIj5cXHJcXG4gICAgPGgzPllvdSBkb2N1bWVudHMgaGF2ZSBiZWVuIHN1Ym1pdHRlZC48YnIvPldlIHdpbGwgZW1haWwgeW91IHdoZW4geW91ciBhY2NvdW50IGlzIHJlYWR5LjwvaDM+XFxyXFxuICAgIFlvdSBjYW4gY2xvc2UgdGhpcyB3aW5kb3cuXFxyXFxuPC9kaXY+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldD5cXHJcXG4gICAgWW91ciBhcHBsaWNhdGlvbiBoYXMgYmVlbiByZWplY3RlZCBkdXJpbmcgS1lDIHByb2Nlc3MuPGJyLz48YnIvPlxcclxcbiAgICBXZSBkb24ndCBoYXZlIHRoZSBpbmZvcm1hdGlvbiBvbiB3aHkgdGhhdCBoYXBwZW5lZCwgYnV0IHlvdSBjYW4gZW1haWwgdXMgYXRcXHJcXG4gICAgPGEgaHJlZj0nbWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXQ/c3ViamVjdD1NeSBhcHBsaWNhdGlvbiB3YXMgcmVqZWN0ZWQmYm9keT1IaSwgY2FuIHlvdSBoZWxwIG1lIHRvIGZpbmQgb3V0IHdoYXQgdGhlIHByb2JsZW0gaXM/IE15IG5hbWUgaXMgX19fX19fXyBhbmQgSSB1c2VkIHRoZSBlbWFpbCBfX19fX19fIHRvIHJlZ2lzdGVyIGF0IGxpbWluYWwubWFya2V0Jz5pbmZvQGxpbWluYWwubWFya2V0PC9hPlxcclxcbiAgICBhbmQgd2UgY2FuIGZpbmQgb3V0LCBhbmQgd2Ugc2hvdWxkIGJlIGFibGUgdG8gc29sdmUgaXQgdG9nZXRoZXIuXFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICA8cD5cXHJcXG4gICAgICAgIElkZW50aXR5IG5lZWRzIHRvIGJlIHZlcmlmaWVkLlxcclxcbiAgICAgICAgVGhpcyBtZWFucyB5b3UgbmVlZCB0byB1cGxvYWRcXHJcXG4gICAgICAgIGEgbmV3IHBob3RvIG9mIHlvdXIgaWQuIFlvdSBtaWdodCB0cnkgYW5vdGhlciB0eXBlIG9mIElELCBzdWNoIGFzXFxyXFxuICAgICAgICBkcml2ZXIncyBsaWNlbnNlIGlmIHlvdSB0cmllZCBwYXNzcG9ydCBiZWZvcmVcXHJcXG4gICAgPC9wPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImlkZW50aXR5X3ZlcmlmaWNhdGlvblxcXCIgXFxcIlBob3RvIElEIEZyb250IChGcm9udCBvZiBwYXNzcG9ydClcXFwifX19XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImlkZW50aXR5X3ZlcmlmaWNhdGlvbl8yXFxcIiBcXFwiUGhvdG8gSUQgQmFjayAoUGFzc3BvcnQgcGljdHVyZSBvZiBJRCkgXFxcIn19fVxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQ+XFxyXFxuICAgIDxwPlxcclxcbiAgICAgICAgQWRkcmVzcyBuZWVkcyB0byBiZSB2ZXJpZmllZC4gUGxlYXNlIHVwbG9hZCBkb2N1bWVudCB0aGF0IGNvbmZpcm1zIHlvdXIgYWRkcmVzcy5cXHJcXG4gICAgICAgIEEgYmlsbCBmcm9tIHRoZSBnb3Zlcm5tZW50IG9yIHV0aWxpdHkgY29tcGFueSBpbiB0aGF0IGxhc3QgMzAgZGF5cyB3aXRoIHlvdXIgbmFtZSBpdCBzaG91bGQgd29yay5cXHJcXG4gICAgPC9wPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImFkZHJlc3NfdmVyaWZpY2F0aW9uXFxcIiBcXFwiUGljdHVyZSBvZiBhZGRyZXNzIHZlcmlmaWNhdGlvblxcXCJ9fX1cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBGdXJ0aGVyIGluZm9ybWF0aW9uIG5lZWRzIHRvIGJlIHN1Ym1pdHRlZCBpZiBhY2NvdW50IG93bmVyIGlzIGFmZmlsaWF0ZWQgdG8gZmlucmEgb3IgYW4gZXhjaGFuZ2VcXHJcXG4gICAgPGJyLz5cXHJcXG4gICAgUGxlYXNlIGNvbnRhY3QgdXMgYXQgPGEgaHJlZj1cXFwibWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXRcXFwiPmluZm9AbGltaW5hbC5tYXJrZXQ8L2E+IGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uXFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBGdXJ0aGVyIGluZm9ybWF0aW9uIG5lZWRzIHRvIGJlIHN1Ym1pdHRlZCBpZiBhY2NvdW50IG93bmVyIGlzIGEgY29udHJvbCBwZXJzb25cXHJcXG4gICAgPGJyLz5cXHJcXG4gICAgUGxlYXNlIGNvbnRhY3QgdXMgYXQgPGEgaHJlZj1cXFwibWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXRcXFwiPmluZm9AbGltaW5hbC5tYXJrZXQ8L2E+IGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uXFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBUaGUgYWNjb3VudCBvd25lcuKAmXMgY291bnRyeSBvZiB0YXggcmVzaWRlbmNlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgb3VyIEtZQyBwcm92aWRlcnMuXFxyXFxuICAgIEluIHRoaXMgY2FzZSwgd2XigJlsbCBtYW51YWxseSBwZXJmb3JtIEtZQyBvbiB0aGUgdXNlclxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldD5cXHJcXG4gICAgRGF0ZSBvZiBiaXJ0aCBuZWVkcyB0byBiZSB2ZXJpZmllZC4gUGxlYXNlIHVwbG9hZCBkb2N1bWVudCB0aGF0IGNvbmZpcm1zIHlvdXIgZGF0ZSBvZiBiaXJ0aC5cXHJcXG5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICB7e3tmaWxlVXBsb2FkIFxcXCJkYXRlX29mX2JpcnRoX3ZlcmlmaWNhdGlvblxcXCIgXFxcIkRhdGUgb2YgYmlydGggdmVyaWZpY2F0aW9uXFxcIn19fVxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQ+XFxyXFxuICAgIEZ1cnRoZXIgaW5mb3JtYXRpb24gbmVlZHMgdG8gYmUgc3VibWl0dGVkIGlmIGZhbWlseSBtZW1iZXIgaXMgYSBwb2xpdGljYWxseSBleHBvc2VkIHBlcnNvblxcclxcbiAgICA8YnIvPlxcclxcbiAgICBQbGVhc2UgY29udGFjdCB1cyBhdCA8YSBocmVmPVxcXCJtYWlsdG86aW5mb0BsaW1pbmFsLm1hcmtldFxcXCI+aW5mb0BsaW1pbmFsLm1hcmtldDwvYT4gZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb25cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQ+XFxyXFxuICAgIElkZW50aXR5IG5lZWRzIHRvIGJlIHZlcmlmaWVkIHZpYSBhIGdvdmVybm1lbnQgaXNzdWVkIElELlxcclxcblxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImlkZW50aXR5X3ZlcmlmaWNhdGlvblxcXCIgXFxcIlBob3RvIElEIEZyb250IChGcm9udCBvZiBwYXNzcG9ydClcXFwifX19XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImlkZW50aXR5X3ZlcmlmaWNhdGlvbl8yXFxcIiBcXFwiUGhvdG8gSUQgQmFjayAoUGFzc3BvcnQgcGljdHVyZSBvZiBJRCkgXFxcIn19fVxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQ+XFxyXFxuICAgIEZ1cnRoZXIgaW5mb3JtYXRpb24gbmVlZHMgdG8gYmUgc3VibWl0dGVkIGlmIGFjY291bnQgb3duZXIgaXMgcG9saXRpY2FsbHkgZXhwb3NlZCBwZXJzb25cXHJcXG4gICAgPGJyLz5cXHJcXG4gICAgUGxlYXNlIGNvbnRhY3QgdXMgYXQgPGEgaHJlZj1cXFwibWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXRcXFwiPmluZm9AbGltaW5hbC5tYXJrZXQ8L2E+IGZvciBmdXJ0aGVyIGluZm9ybWF0aW9uXFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBJZGVudGl0eSBuZWVkcyB0byBiZSB2ZXJpZmllZCB2aWEgYSBsaXZlIHNlbGZpZSBvZiB0aGUgYWNjb3VudCBvd25lclxcclxcblxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImlkZW50aXR5X3ZlcmlmaWNhdGlvblxcXCIgXFxcIkxpdmUgc2VsZmllIHZlcmlmaWNhdGlvblxcXCJ9fX1cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBUYXggSUQgbnVtYmVyIG5lZWRzIHRvIGJlIHZlcmlmaWVkLiBQbGVhc2UgdXBsb2FkIGRvY3VtZW50IHRoYXQgY29uZmlybXMgeW91ciBUYXggSWRcXHJcXG5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICB7e3tmaWxlVXBsb2FkIFxcXCJ0YXhfaWRfdmVyaWZpY2F0aW9uXFxcIiBcXFwiVGF4IGlkIHZlcmlmaWNhdGlvblxcXCJ9fX1cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0PlxcclxcbiAgICBGdXJ0aGVyIGluZm9ybWF0aW9uIG5lZWRzIHRvIGJlIHN1Ym1pdHRlZCBhYm91dCBhY2NvdW50IG93bmVy4oCZcyB2aXNhXFxyXFxuICAgIDxici8+XFxyXFxuICAgIFBsZWFzZSBjb250YWN0IHVzIGF0IDxhIGhyZWY9XFxcIm1haWx0bzppbmZvQGxpbWluYWwubWFya2V0XFxcIj5pbmZvQGxpbWluYWwubWFya2V0PC9hPiBmb3IgZnVydGhlciBpbmZvcm1hdGlvblxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldD5cXHJcXG4gICAgSWRlbnRpZnlpbmcgaW5mb3JtYXRpb24gc3VibWl0dGVkIGJ5IHRoZSB1c2VyIHdhcyBpbmNvcnJlY3Qgc28gYSBuZXcsIGNvcnJlY3RlZCwgVzhCRU4gbmVlZHMgdG8gYmUgc3VibWl0dGVkXFxyXFxuICAgIDxici8+XFxyXFxuICAgIFBsZWFzZSBjb250YWN0IHVzIGF0IDxhIGhyZWY9XFxcIm1haWx0bzppbmZvQGxpbWluYWwubWFya2V0XFxcIj5pbmZvQGxpbWluYWwubWFya2V0PC9hPiBmb3IgZnVydGhlciBpbmZvcm1hdGlvblxcclxcbjwvZmllbGRzZXQ+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXY+XFxyXFxuICAgIDxsYWJlbCBmb3I9XFxcInt7aW5wdXRJZH19XFxcIj57e2xhYmVsfX08L2xhYmVsPlxcclxcbiAgICA8aW5wdXQgdHlwZT1cXFwiZmlsZVxcXCIgcmVxdWlyZWQgaWQ9XFxcInt7aW5wdXRJZH19XFxcIiBhY2NlcHQ9XFxcInt7YWNjZXB0fX1cXFwiIGNhcHR1cmU9XFxcInt7Y2FwdHVyZX19XFxcIi8+XFxyXFxuICAgIDxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIGlkPVxcXCJ7e2lucHV0SWR9fV9iYXNlNjRcXFwiIG5hbWU9XFxcInt7aW5wdXRJZH19X2Jhc2U2NFxcXCIvPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJlcnJvciBoaWRkZW5cXFwiIGlkPVxcXCJ7e2lucHV0SWR9fV9lcnJvclxcXCI+PC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBpZD1cXFwie3tpbnB1dElkfX1fcHJldmlld1xcXCI+XFxyXFxuXFxyXFxuPC9kaXY+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBGaWxlVXBsb2FkSHRtbCBmcm9tICcuLi8uLi9odG1sL2VsZW1lbnRzL0ZpbGVVcGxvYWQuaHRtbCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlVXBsb2FkIHtcclxuXHJcbiAgICBwcml2YXRlIG1heEZpbGVTaXplOiBudW1iZXIgPSA4ICogMTAyNCAqIDEwMjQgKiAxMDsgLy8xME1CXHJcbiAgICBpbnB1dElkOiBzdHJpbmc7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgYWNjZXB0ID0gXCJpbWFnZS8qLC5wZGZcIjtcclxuICAgIGNhcHR1cmUgPSAnZW52aXJvbm1lbnQnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlucHV0SWQ6IHN0cmluZywgbGFiZWw6IHN0cmluZywgYWNjZXB0ID0gXCJpbWFnZS9wbmcsaW1hZ2UvanBlZywucGRmXCIsIGNhcHR1cmUgPSAnZW52aXJvbm1lbnQnKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dElkID0gaW5wdXRJZDtcclxuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgdGhpcy5hY2NlcHQgPSBhY2NlcHQ7XHJcbiAgICAgICAgdGhpcy5jYXB0dXJlID0gY2FwdHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShGaWxlVXBsb2FkSHRtbCk7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgbGV0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaW5wdXRJZCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBmaWxlSW5wdXQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRmlsZShmaWxlSW5wdXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcm90ZWN0ZWQgcHJvY2Vzc0ZpbGUoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuaGlkZUZpbGVSZWxhdGVkSW5mbyhlbGVtZW50LmlkKTtcclxuXHJcbiAgICAgICAgbGV0IGZpbGVzID0gZWxlbWVudC5maWxlcztcclxuICAgICAgICBpZiAoIWZpbGVzKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBmaWxlID0gZmlsZXNbMF07XHJcbiAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZpbGVSZWxhdGVkSW5mbyhlbGVtZW50LmlkLCAnTm8gZmlsZSBzZWxlY3RlZC4gUGxlYXNlIHNlbGVjdCBmaWxlLicpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJhc2U2NElucHV0KGVsZW1lbnQuaWQsICcnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IHRoaXMubWF4RmlsZVNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RmlsZVJlbGF0ZWRJbmZvKGVsZW1lbnQuaWQsICdGaWxlICcgKyBmaWxlLm5hbWUgKyAnIGlzIHRvIGxhcmdlLiBGaWxlcyBjYW5ub3QgYmUgbGFyZ2VyIHRoZW4gMTBNQi4gWW91IG5lZWQgdG8gbWFrZSBpdCBzbWFsbGVyIGJlZm9yZSBzdWJtaXR0aW5nIHlvdXIgYXBwbGljYXRpb24nKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCYXNlNjRJbnB1dChlbGVtZW50LmlkLCAnJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJhc2U2NElucHV0KGVsZW1lbnQuaWQsIHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dGaWxlUmVsYXRlZEluZm8oZWxlbWVudC5pZCwgJ0NvdWxkIG5vdCByZWFkIGZpbGUgJyArIGZpbGUubmFtZSArICcuIEVpdGhlciB0aGUgZmlsZSBpcyBjb3JydXB0IG9yIHlvdXIgYnJvd3NlciBkb2VzIG5vdCBhbGxvdyB1cyB0byByZWFkIGl0Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldEJhc2U2NElucHV0KGVsZW1lbnRJZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGJhc2U2NElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkICsgJ19iYXNlNjQnKSEgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBiYXNlNjRJbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGxldCBwcmV2aWV3RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCArICdfcHJldmlldycpO1xyXG4gICAgICAgIGlmICghcHJldmlld0VsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ2RhdGE6aW1hZ2UnKSAhPSAtMSkge1xyXG4gICAgICAgICAgICBwcmV2aWV3RWxlbWVudC5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCInICsgYmFzZTY0SW5wdXQudmFsdWUgKyAnXCIgLz4nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJldmlld0VsZW1lbnQuaW5uZXJIVE1MID0gJydcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByb3RlY3RlZCBzaG93RmlsZVJlbGF0ZWRJbmZvKGVsZW1lbnRJZDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZmlsZVJlbGF0ZWRJbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkICsgJ19lcnJvcicpISBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoIWZpbGVSZWxhdGVkSW5mbykgcmV0dXJuO1xyXG5cclxuICAgICAgICBmaWxlUmVsYXRlZEluZm8uaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICBmaWxlUmVsYXRlZEluZm8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaGlkZUZpbGVSZWxhdGVkSW5mbyhlbGVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBmaWxlUmVsYXRlZEluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQgKyAnX2Vycm9yJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFmaWxlUmVsYXRlZEluZm8pIHJldHVybjtcclxuXHJcbiAgICAgICAgZmlsZVJlbGF0ZWRJbmZvLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmaWxlVXBsb2FkczogRmlsZVVwbG9hZFtdID0gW107XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3RlckhhbmRsZXIoKSB7XHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZmlsZVVwbG9hZCcsIChpZCwgbGFiZWwpID0+IHtcclxuICAgICAgICAgICAgbGV0IGZpbGVVcGxvYWQgPSBuZXcgRmlsZVVwbG9hZChpZCwgbGFiZWwpO1xyXG4gICAgICAgICAgICBGaWxlVXBsb2FkLmZpbGVVcGxvYWRzLnB1c2goZmlsZVVwbG9hZCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmlsZVVwbG9hZC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEt5Y1ZhbGlkYXRvckVycm9yIGZyb20gXCIuLi9lcnJvcnMvY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuaW1wb3J0IFN0cmluZ0hlbHBlciBmcm9tIFwiLi9TdHJpbmdIZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgc2VsZWN0b3I6IHN0cmluZztcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3I6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlUmVxdWlyZWRGaWVsZHMoKSB7XHJcbiAgICAgICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5zZWxlY3RvciArICcgaW5wdXRbcmVxdWlyZWRdLCAnICsgdGhpcy5zZWxlY3RvciArICcgc2VsZWN0W3JlcXVpcmVkXScpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGlucHV0c1tpXSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNaXNzaW5nSW5wdXRGcm9tVXNlcihpbnB1dCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBtdXN0IGZpbGwgaW50byB0aGlzIGZpZWxkJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dE5hbWU6IGlucHV0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPScgKyBpbnB1dC5pZCArICddJykhLmlubmVySFRNTCxcclxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiBpbnB1dC5wYXR0ZXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGUob2JqKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlucHV0LnBhdHRlcm4pIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gaW5wdXQucGF0dGVybjtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaGVzID0gaW5wdXQudmFsdWUubWF0Y2gocGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoaXMgaXMgbm90IHZhbGlkIGRhdGUgZm9ybWF0LCBwbGVhc2UgdXNlIFlZWVktTU0tREQgKHllYXItbW9udGgtZGF0ZSknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dE5hbWU6IGlucHV0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj0nICsgaW5wdXQuaWQgKyAnXScpIS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IGlucHV0LnBhdHRlcm5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGlzTWlzc2luZ0lucHV0RnJvbVVzZXIoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gKChpbnB1dC50eXBlID09ICdjaGVja2JveCcgJiYgIWlucHV0LmNoZWNrZWQpIHx8IFN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KGlucHV0LnZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbW92ZU1pc3NpbmdJbmZvKGVycm9yRGl2SWQ6IHN0cmluZywgZm9jdXNFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yRGl2SWQpO1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgaWYgKCFmb2N1c0VsZW1lbnRJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgZm9jdXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9jdXNFbGVtZW50SWQpO1xyXG4gICAgICAgIGlmIChmb2N1c0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgZm9jdXNFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRNaXNzaW5nSW5mbyhlcnJvckRpdklkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgZm9jdXNFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yRGl2SWQpO1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgaWYgKHRleHQgPT0gJycpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgICAgICBpZiAoZm9jdXNFbGVtZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvY3VzRWxlbWVudElkKT8uZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvY3VzRWxlbWVudElkKT8uc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlKG9iajogeyBsYWJlbFRleHQ6IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nOyBwYXR0ZXJuOiBzdHJpbmc7IGlucHV0TmFtZTogc3RyaW5nIH0pIHtcclxuICAgICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvYmouaW5wdXROYW1lKTtcclxuICAgICAgICBpZiAoIWlucHV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBpbnB1dEVycm9yID0gaW5wdXQucGFyZW50RWxlbWVudCEucXVlcnlTZWxlY3RvcignLmlucHV0X2Vycm9yJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKGlucHV0RXJyb3IpIHtcclxuICAgICAgICAgICAgaW5wdXRFcnJvci5zY3JvbGxJbnRvVmlldyh7YmxvY2s6ICdjZW50ZXInfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgIGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsICc8ZGl2IGNsYXNzPVwiaW5wdXRfZXJyb3JcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrXCIgaWQ9XCJpbnB1dF9lcnJvcl8nICsgb2JqLmlucHV0TmFtZSArICdcIj4nICsgb2JqLm1lc3NhZ2UgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICBpZiAob2JqLnBhdHRlcm4pIHtcclxuICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdwYXR0ZXJuJywgb2JqLnBhdHRlcm4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdHRlcm4gPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3BhdHRlcm4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKHBhdHRlcm4gJiYgaW5wdXQudmFsdWUubWF0Y2gocGF0dGVybikpIHx8IChpbnB1dC5yZXF1aXJlZCAmJiBpbnB1dC52YWx1ZSkgfHwgaW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lcnJvcl8nICsgb2JqLmlucHV0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yTWVzc2FnZSkgZXJyb3JNZXNzYWdlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCA4MDApO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9Nb2RhbFwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IEt5Y0FjdGlvblJlcXVpcmVkSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNBY3Rpb25SZXF1aXJlZC5odG1sJztcclxuaW1wb3J0IFdlRG9udEtub3dXaHlIdG1sIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1dlRG9udEtub3dXaHkuaHRtbCdcclxuaW1wb3J0IEt5Y1Jlc3VsdE1lc3NhZ2UgZnJvbSBcIi4uLy4uLy4uL2R0by9LeWNSZXN1bHRNZXNzYWdlXCI7XHJcblxyXG5cclxuaW1wb3J0IElERU5USVRZX1ZFUklGSUNBVElPTiBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9JREVOVElUWV9WRVJJRklDQVRJT04uaHRtbCdcclxuaW1wb3J0IEFERFJFU1NfVkVSSUZJQ0FUSU9OIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0FERFJFU1NfVkVSSUZJQ0FUSU9OLmh0bWwnXHJcbmltcG9ydCBBRkZJTElBVEVEIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0FGRklMSUFURUQuaHRtbCdcclxuaW1wb3J0IENPTlRST0xfUEVSU09OIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0NPTlRST0xfUEVSU09OLmh0bWwnXHJcbmltcG9ydCBDT1VOVFJZX05PVF9TVVBQT1JURUQgZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9LeWMvQWN0aW9uUmVxdWlyZWQvQ09VTlRSWV9OT1RfU1VQUE9SVEVELmh0bWwnXHJcbmltcG9ydCBEQVRFX09GX0JJUlRIIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0RBVEVfT0ZfQklSVEguaHRtbCdcclxuaW1wb3J0IEZBTUlMWV9NRU1CRVJfUEVQIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0ZBTUlMWV9NRU1CRVJfUEVQLmh0bWwnXHJcbmltcG9ydCBJTlZBTElEX0lERU5USVRZX1BBU1NQT1JUIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL0lOVkFMSURfSURFTlRJVFlfUEFTU1BPUlQuaHRtbCdcclxuaW1wb3J0IFBFUCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9QRVAuaHRtbCdcclxuaW1wb3J0IFNFTEZJRV9WRVJJRklDQVRJT04gZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9LeWMvQWN0aW9uUmVxdWlyZWQvU0VMRklFX1ZFUklGSUNBVElPTi5odG1sJ1xyXG5pbXBvcnQgVEFYX0lERU5USUZJQ0FUSU9OIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1RBWF9JREVOVElGSUNBVElPTi5odG1sJ1xyXG5pbXBvcnQgVklTQV9UWVBFX09USEVSIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0FjdGlvblJlcXVpcmVkL1ZJU0FfVFlQRV9PVEhFUi5odG1sJ1xyXG5pbXBvcnQgVzhCRU5fQ09SUkVDVElPTiBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9BY3Rpb25SZXF1aXJlZC9XOEJFTl9DT1JSRUNUSU9OLmh0bWwnXHJcbmltcG9ydCBGb3JtSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL0Zvcm1IZWxwZXJcIjtcclxuaW1wb3J0IEZpbGVVcGxvYWQgZnJvbSBcIi4uLy4uL2VsZW1lbnRzL0ZpbGVVcGxvYWRcIjtcclxuaW1wb3J0IEt5Y1ZhbGlkYXRvckVycm9yIGZyb20gXCIuLi8uLi8uLi9lcnJvcnMvY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uLy4uLy4uL3V0aWwvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgS1lDU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9LWUNTZXJ2aWNlXCI7XHJcbmltcG9ydCBMb2FkaW5nSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL0xvYWRpbmdIZWxwZXJcIjtcclxuaW1wb3J0IEV4ZWN1dGVUcmFkZUJ1dHRvbiBmcm9tIFwiLi4vLi4vZWxlbWVudHMvdHJhZGVwYW5lbC9FeGVjdXRlVHJhZGVCdXR0b25cIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNBY3Rpb25SZXF1aXJlZCB7XHJcblxyXG4gICAgbW9kYWw6IE1vZGFsO1xyXG4gICAgdGVtcGxhdGVzOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xyXG4gICAgZXhlY3V0ZVRyYWRlQnV0dG9uOiBFeGVjdXRlVHJhZGVCdXR0b247XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0ZVRyYWRlQnV0dG9uOiBFeGVjdXRlVHJhZGVCdXR0b24pIHtcclxuICAgICAgICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlVHJhZGVCdXR0b24gPSBleGVjdXRlVHJhZGVCdXR0b247XHJcblxyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLnNldCgnV2VEb250S25vd1doeUh0bWwnLCBXZURvbnRLbm93V2h5SHRtbCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdBRERSRVNTX1ZFUklGSUNBVElPTicsIEFERFJFU1NfVkVSSUZJQ0FUSU9OKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ0FGRklMSUFURUQnLCBBRkZJTElBVEVEKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ0NPTlRST0xfUEVSU09OJywgQ09OVFJPTF9QRVJTT04pO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLnNldCgnQ09VTlRSWV9OT1RfU1VQUE9SVEVEJywgQ09VTlRSWV9OT1RfU1VQUE9SVEVEKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ0RBVEVfT0ZfQklSVEgnLCBEQVRFX09GX0JJUlRIKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ0ZBTUlMWV9NRU1CRVJfUEVQJywgRkFNSUxZX01FTUJFUl9QRVApO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLnNldCgnSURFTlRJVFlfVkVSSUZJQ0FUSU9OJywgSURFTlRJVFlfVkVSSUZJQ0FUSU9OKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ0lOVkFMSURfSURFTlRJVFlfUEFTU1BPUlQnLCBJTlZBTElEX0lERU5USVRZX1BBU1NQT1JUKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ1BFUCcsIFBFUCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdTRUxGSUVfVkVSSUZJQ0FUSU9OJywgU0VMRklFX1ZFUklGSUNBVElPTik7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KCdUQVhfSURFTlRJRklDQVRJT04nLCBUQVhfSURFTlRJRklDQVRJT04pO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLnNldCgnVklTQV9UWVBFX09USEVSJywgVklTQV9UWVBFX09USEVSKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoJ1c4QkVOX0NPUlJFQ1RJT04nLCBXOEJFTl9DT1JSRUNUSU9OKTtcclxuXHJcbiAgICAgICAgRmlsZVVwbG9hZC5yZWdpc3RlckhhbmRsZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2hvdygpIHtcclxuICAgICAgICBsZXQgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoTW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGt5Y1Jlc3VsdCA9IGF3YWl0IHVzZXJTZXJ2aWNlLmt5Y0FjdGlvblJlcXVpcmVkKClcclxuICAgICAgICBpZiAoIWt5Y1Jlc3VsdCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQga3ljSW5mbyA9IHRoaXMuZ2V0S3ljTWVzc2FnZXMoa3ljUmVzdWx0Lm1lc3NhZ2VzKTtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0FjdGlvblJlcXVpcmVkSHRtbCk7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0ZW1wbGF0ZSh7XHJcbiAgICAgICAgICAgIGpzb246IEpTT04uc3RyaW5naWZ5KGt5Y1Jlc3VsdCksXHJcbiAgICAgICAgICAgIEt5Y0luZm86IGt5Y0luZm8sXHJcbiAgICAgICAgICAgIE90aGVyOiBreWNSZXN1bHQuYWRkaXRpb25hbF9pbmZvcm1hdGlvbixcclxuICAgICAgICAgICAgU3VibWl0RGF0YToga3ljSW5mby5pbmRleE9mKCc8aW5wdXQnKSAhPSAtMVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMubW9kYWwuc2hvd01vZGFsKCdBY3Rpb24gcmVxdWlyZWQnLCBjb250ZW50LCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgbGV0IGt5Y0FjdGlvblJlcXVpcmVkRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNBY3Rpb25SZXF1aXJlZEZvcm0nKTtcclxuICAgICAgICBreWNBY3Rpb25SZXF1aXJlZEZvcm0/LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUVycm9yKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y0FjdGlvblJlcXVpcmVkU3VibWl0JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIExvYWRpbmdIZWxwZXIuc2V0TG9hZGluZyhzdWJtaXRCdG4pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcignI2t5Y0FjdGlvblJlcXVpcmVkRm9ybScpXHJcbiAgICAgICAgICAgIGlmICghZm9ybVZhbGlkYXRvci52YWxpZGF0ZVJlcXVpcmVkRmllbGRzKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBGb3JtSGVscGVyLmdldFBhcmFtcygnI2t5Y0FjdGlvblJlcXVpcmVkRm9ybScpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGt5Y1NlcnZpY2UgPSBuZXcgS1lDU2VydmljZShNb3JhbGlzKTtcclxuICAgICAgICAgICAgYXdhaXQga3ljU2VydmljZS51cGRhdGVEb2N1bWVudHMocGFyYW1zKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBreWNBY3Rpb25SZXF1aXJlZERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNBY3Rpb25SZXF1aXJlZERpdicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGt5Y0FjdGlvblJlcXVpcmVkRGl2Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGt5Y0FjdGlvblJlcXVpcmVkU3VibWl0dGVkRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y0FjdGlvblJlcXVpcmVkU3VibWl0dGVkRGl2JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAga3ljQWN0aW9uUmVxdWlyZWRTdWJtaXR0ZWREaXY/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVRyYWRlQnV0dG9uLmNoZWNrS3ljSXNEb25lKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVUcmFkZUJ1dHRvbi5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2gocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBGaWxlVXBsb2FkLmZpbGVVcGxvYWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIEZpbGVVcGxvYWQuZmlsZVVwbG9hZHNbaV0uYmluZEV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRLeWNNZXNzYWdlcyhtZXNzYWdlczogS3ljUmVzdWx0TWVzc2FnZVtdKSB7XHJcbiAgICAgICAgbGV0IGt5Y0luZm8gPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBodG1sVGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlcy5nZXQobWVzc2FnZXNbaV0ua2V5KTtcclxuICAgICAgICAgICAgaWYgKCFodG1sVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETzogSGVyZSB3ZSBzaG91bGQgdG8gbG9nZ2VyLCBjcml0aWNhbCB0aGF0IHdlIGRvbnQga25vdyB3aHlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShodG1sVGVtcGxhdGUpXHJcbiAgICAgICAgICAgIGt5Y0luZm8gKz0gdGVtcGxhdGUoe21lc3NhZ2U6IG1lc3NhZ2VzW2ldLm1lc3NhZ2V9KVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmIChreWNJbmZvID09ICcnKSB7XHJcbiAgICAgICAgICAgIGxldCBodG1sID0gdGhpcy50ZW1wbGF0ZXMuZ2V0KCdXZURvbnRLbm93V2h5SHRtbCcpO1xyXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XHJcbiAgICAgICAgICAgIGt5Y0luZm8gPSB0ZW1wbGF0ZSh7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ga3ljSW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGVFcnJvcigpIHtcclxuICAgICAgICBsZXQga3ljQWN0aW9uUmVxdWlyZWRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNBY3Rpb25SZXF1aXJlZEVycm9yJyk7XHJcbiAgICAgICAgaWYgKCFreWNBY3Rpb25SZXF1aXJlZEVycm9yKSByZXR1cm47XHJcbiAgICAgICAga3ljQWN0aW9uUmVxdWlyZWRFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93RXJyb3IocmVhc29uOiBhbnkpIHtcclxuICAgICAgICBsZXQga3ljQWN0aW9uUmVxdWlyZWRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNBY3Rpb25SZXF1aXJlZEVycm9yJyk7XHJcbiAgICAgICAgaWYgKCFreWNBY3Rpb25SZXF1aXJlZEVycm9yKSByZXR1cm47XHJcblxyXG4gICAgICAgIGt5Y0FjdGlvblJlcXVpcmVkRXJyb3IuaW5uZXJIVE1MID0gJ0Vycm9yIG9jY3VycmVkIHdoaWxlIHNhdmluZyB5b3VyIGRvY3VtZW50cy4gUmVhc29uOicgKyByZWFzb247XHJcbiAgICAgICAga3ljQWN0aW9uUmVxdWlyZWRFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBpZD1cXFwia3ljX3JlZ1xcXCI+XFxyXFxuXFxyXFxuICAgIDxmb3JtIGlkPVxcXCJreWNfd2l6YXJkX2Zvcm1cXFwiIG5hbWU9XFxcImt5Y193aXphcmRfZm9ybVxcXCIgbm92YWxpZGF0ZSBvbnN1Ym1pdD1cXFwicmV0dXJuIGZhbHNlXFxcIj5cXHJcXG4gICAgICAgIHt7e0t5Y0NvbnRhY3RIdG1sfX19XFxyXFxuICAgICAgICB7e3tLeWNJZGVudGl0eUh0bWx9fX1cXHJcXG4gICAgICAgIHt7e0t5Y1RydXN0ZWRDb250YWN0SHRtbH19fVxcclxcbiAgICAgICAge3t7S3ljRGlzY2xvc3VyZUh0bWx9fX1cXHJcXG4gICAgICAgIHt7e0t5Y1VwbG9hZEh0bWx9fX1cXHJcXG4gICAgICAgIHt7e0t5Y0FjY291bnRBZ3JlZW1lbnRIdG1sfX19XFxyXFxuICAgIDwvZm9ybT5cXHJcXG48L2Rpdj5cXHJcXG5cXHJcXG48ZGl2IGlkPVxcXCJ3YWl0aW5nX2Zvcl9reWNfcmVnXFxcIiBjbGFzcz1cXFwiaGlkZGVuXFxcIj5cXHJcXG4gICAgS1lDIGlzIGJlaW5nIHByb2Nlc3NlZC4gVGhpcyBtYXkgdGFrZSBhYm91dCA0LTUgbWludXRlcy4gV2luZG93IHdpbGwgY2xvc2Ugd2hlbiBpdCdzIGRvbmUuXFxyXFxuICAgIDxici8+PGJyLz5cXHJcXG4gICAgWW91IGNhbiBjbG9zZSB0aGUgd2luZG93LCB3ZSB3aWxsIGVtYWlsIHlvdSB3aGVuIEtZQyBpcyBmaW5pc2hlZC5cXHJcXG5cXHJcXG4gICAgPHByb2dyZXNzPjwvcHJvZ3Jlc3M+XFxyXFxuXFxyXFxuPC9kaXY+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldCBjbGFzcz1cXFwia3ljQ29udGFjdCBoaWRkZW5cXFwiIGRhdGEtZm9ybT1cXFwiMVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImV4cGxhaW5cXFwiPlxcclxcbiAgICAgICAgVG8gYmUgYWJsZSB0byB0cmFkZSBvbiB0aGUgc3RvY2sgbWFya2V0LCB3ZSBuZWVkIHRvIGdldCB5b3VyIGluZm9ybWF0aW9uLlxcclxcbiAgICAgICAgVGhpcyBpcyBhIHJlcXVpcmVtZW50IGZyb20gdGhlIGZpbmFuY2lhbCByZWd1bGF0b3JzLlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImVtYWlsX2FkZHJlc3NcXFwiPkVtYWlsPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCB0eXBlPVxcXCJlbWFpbFxcXCIgcmVxdWlyZWQgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgaWQ9XFxcImVtYWlsX2FkZHJlc3NcXFwiIG5hbWU9XFxcImVtYWlsX2FkZHJlc3NcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIm5hbWVAZXhhbXBsZS5jb21cXFwiIGF1dG9jb21wbGV0ZT1cXFwiZW1haWxcXFwiXFxyXFxuICAgICAgICAgICAgICAgdmFsdWU9XFxcIlxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwicGhvbmVfbnVtYmVyXFxcIj5QaG9uZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgdHlwZT1cXFwidGVsXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBpZD1cXFwicGhvbmVfbnVtYmVyXFxcIiBuYW1lPVxcXCJwaG9uZV9udW1iZXJcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIisxLTU1NS02NjYtNzc4OFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJ0ZWxcXFwiIHZhbHVlPVxcXCJcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInN0cmVldF9hZGRyZXNzXFxcIj5QZXJtYW5lbnQgUmVzaWRlbnRpYWwgQWRkcmVzczwvbGFiZWw+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJleHBsYWluXFxcIj5JdCBtdXN0IGJlIGEgcGh5c2ljYWwgYWRkcmVzcywgbm90IGEgUE8gYm94LjwvZGl2PlxcclxcbiAgICAgICAgPGlucHV0IHJlcXVpcmVkIGlkPVxcXCJzdHJlZXRfYWRkcmVzc1xcXCIgbmFtZT1cXFwic3RyZWV0X2FkZHJlc3NcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIjIwIE4gU2FuIE1hdGVvIERyXFxcIiB2YWx1ZT1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcImFkZHJlc3MtbGluZTFcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInVuaXRcXFwiPlVuaXQgLyBBcHQgIzwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgaWQ9XFxcInVuaXRcXFwiIG5hbWU9XFxcInVuaXRcXFwiIHZhbHVlPVxcXCJcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImNpdHlcXFwiPkNpdHk8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IGlkPVxcXCJjaXR5XFxcIiBuYW1lPVxcXCJjaXR5XFxcIiBwbGFjZWhvbGRlcj1cXFwiUGF3bmVlXFxcIlxcclxcbiAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcXFwiIGF1dG9jb21wbGV0ZT1cXFwiYWRkcmVzcy1sZXZlbDJcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInBvc3RhbF9jb2RlXFxcIj5Qb3N0YWwgY29kZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgcmVxdWlyZWQgaWQ9XFxcInBvc3RhbF9jb2RlXFxcIiBhdXRvY29tcGxldGU9XFxcInBvc3RhbC1jb2RlXFxcIiBuYW1lPVxcXCJwb3N0YWxfY29kZVxcXCJcXHJcXG4gICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiOTQ0MDFcXFwiXFxyXFxuICAgICAgICAgICAgICAgdmFsdWU9XFxcIlxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGlkPVxcXCJzdGF0ZV9kaXZcXFwiPlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwic3RhdGVcXFwiPlN0YXRlICgyIGxldHRlcnMpPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBtYXhsZW5ndGg9XFxcIjJcXFwiIGlkPVxcXCJzdGF0ZVxcXCIgbmFtZT1cXFwic3RhdGVcXFwiIHBsYWNlaG9sZGVyPVxcXCJOWVxcXCJcXHJcXG4gICAgICAgICAgICAgICB2YWx1ZT1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcImFkZHJlc3MtbGV2ZWwxXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJjb3VudHJ5X29mX3RheF9yZXNpZGVuY2VcXFwiPkNvdW50cnkgb2YgdGF4IHJlc2lkZW5jZTwvbGFiZWw+XFxyXFxuICAgICAgICB7eyNpZiBlZGl0fX1cXHJcXG4gICAgICAgIDxpbnB1dCBuYW1lPVxcXCJjb3VudHJ5X29mX3RheF9yZXNpZGVuY2VcXFwiIHJlYWRvbmx5IGlkPVxcXCJjb3VudHJ5X29mX3RheF9yZXNpZGVuY2VcXFwiLz5cXHJcXG4gICAgICAgIHt7L2lmfX1cXHJcXG4gICAgICAgIHt7I3VubGVzcyBlZGl0fX1cXHJcXG4gICAgICAgIDxzZWxlY3QgcmVxdWlyZWQgaWQ9XFxcImNvdW50cnlfb2ZfdGF4X3Jlc2lkZW5jZVxcXCIgbmFtZT1cXFwiY291bnRyeV9vZl90YXhfcmVzaWRlbmNlXFxcIiBhdXRvY29tcGxldGU9XFxcImNvdW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAge3sjZWFjaCBjb3VudHJpZXN9fVxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInt7Y29kZX19XFxcIj57e25hbWV9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIHt7L2VhY2h9fVxcclxcbiAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgICAgICB7ey91bmxlc3N9fVxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcImNvbnRhY3RfbmV4dFxcXCI+TmV4dDogSWRlbnRpdHk8L2J1dHRvbj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cXHJcXG5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IEtZQ0Zvcm0gZnJvbSBcIi4uLy4uL3VpL21vZGFscy9LWUNGb3JtXCI7XHJcbmltcG9ydCBTdHJpbmdIZWxwZXIgZnJvbSBcIi4uLy4uL3V0aWwvU3RyaW5nSGVscGVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNWYWxpZGF0b3JFcnJvciB7XHJcbiAgICB2YWxpZFZhbHVlczogc3RyaW5nIHwgc3RyaW5nW10gPSAnJztcclxuICAgIGlucHV0TmFtZTogc3RyaW5nID0gJyc7XHJcbiAgICBsYWJlbFRleHQ6IHN0cmluZyA9ICcnO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgcGF0dGVybjogc3RyaW5nID0gJyc7XHJcbiAgICBvbnNob3c6IGFueTtcclxuICAgIGt5Y0Zvcm06IEtZQ0Zvcm07XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXJyb3I6IGFueSwga3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIGxldCBvYmo6IGFueSA9IHt9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghZXJyb3IuaW5wdXROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKGVycm9yKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9iaiA9IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBvYmoubWVzc2FnZT8ucmVwbGFjZSgvXy9nLCAnICcpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkVmFsdWVzID0gb2JqLnZhbGlkVmFsdWVzPy5yZXBsYWNlKC9fL2csICcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXROYW1lID0gb2JqLmlucHV0TmFtZTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbFRleHQgPSBvYmoubGFiZWxUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLnBhdHRlcm4gPSBvYmoucGF0dGVybjtcclxuICAgICAgICAgICAgdGhpcy5vbnNob3cgPSBvYmoub25zaG93O1xyXG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzc2FnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMua3ljRm9ybSA9IGt5Y0Zvcm07XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eSh0aGlzLmlucHV0TmFtZSkpIHtcclxuICAgICAgICAgICAgbGV0IGFjdGl2ZUZpZWxkc2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmt5Y0Zvcm0uYWN0aXZlRmllbGRzZXRTZWxlY3RvcikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dEVycm9yID0gYWN0aXZlRmllbGRzZXQucXVlcnlTZWxlY3RvcignLmlucHV0X2Vycm9yJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWxpZFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0RXJyb3IuaW5uZXJIVE1MID0gdGhpcy52YWxpZFZhbHVlcy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlICYmIHRoaXMubWVzc2FnZS5pbmRleE9mKCdJbnZhbGlkIGZ1bmN0aW9uJykgIT0gLTEgfHwgdGhpcy5tZXNzYWdlLmluZGV4T2YoJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBQYXJzZSBBUEknKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dEVycm9yLmlubmVySFRNTCA9ICdXZSBqdXN0IGRlcGxveWVkIG5ldyB2ZXJzaW9uIG9mIG91ciB3ZWJzaXRlLiBUaGlzIGNhbiBjYXVzZSBpbnRlcnJ1cHRpb24uIFBsZWFzZSB3YWl0IDMwIHNlY29uZHMgYW5kIHN1Ym1pdCBhZ2Fpbic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRFcnJvci5pbm5lckhUTUwgPSB0aGlzLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5wdXRFcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgICAgIGlucHV0RXJyb3Iuc2Nyb2xsSW50b1ZpZXcoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pbnB1dE5hbWUpO1xyXG4gICAgICAgIGlmICghaW5wdXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGlucHV0RXJyb3IgPSBpbnB1dC5wYXJlbnRFbGVtZW50IS5xdWVyeVNlbGVjdG9yKCcuaW5wdXRfZXJyb3InKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoaW5wdXRFcnJvcikge1xyXG4gICAgICAgICAgICBpbnB1dEVycm9yLnNjcm9sbEludG9WaWV3KHtibG9jazogJ2NlbnRlcid9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XHJcbiAgICAgICAgbGV0IGVycm9ySW5wdXQgPSAnPGRpdiBjbGFzcz1cImlucHV0X2Vycm9yXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9ja1wiIGlkPVwiaW5wdXRfZXJyb3JfJyArIHRoaXMuaW5wdXROYW1lICsgJ1wiPicgKyB0aGlzLm1lc3NhZ2UgKyAnPC9kaXY+JztcclxuICAgICAgICBpZiAoaW5wdXQuY2xpZW50V2lkdGggPCAzMDApIHtcclxuICAgICAgICAgICAgbGV0IGRpdiA9IHRoaXMuZ2V0RGl2VG9EaXNwbGF5RXJyb3JNZXNzYWdlKGlucHV0KTtcclxuICAgICAgICAgICAgZGl2Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGVycm9ySW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0Lmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGVycm9ySW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnB1dC5mb2N1cygpO1xyXG4gICAgICAgIGlmICh0aGlzLnBhdHRlcm4pIHtcclxuICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdwYXR0ZXJuJywgdGhpcy5wYXR0ZXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdwYXR0ZXJuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChwYXR0ZXJuICYmIGlucHV0LnZhbHVlLm1hdGNoKHBhdHRlcm4pKSB8fCAoaW5wdXQudHlwZSAhPSAnY2hlY2tib3gnICYmIGlucHV0LnR5cGUgIT0gJ3JhZGlvJyAmJiBpbnB1dC5yZXF1aXJlZCAmJiBpbnB1dC52YWx1ZSkgfHwgaW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lcnJvcl8nICsgdGhpcy5pbnB1dE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIGVycm9yTWVzc2FnZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgODAwKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsZXQgZmllbGRzZXRFbGVtZW50ID0gaW5wdXQuY2xvc2VzdCgnZmllbGRzZXRbZGF0YS1mb3JtPVwiMVwiXScpO1xyXG4gICAgICAgIGlmIChmaWVsZHNldEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGZpZWxkc2V0RWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgnaGlkZGVuJywgJycpLnRyaW0oKTtcclxuICAgICAgICAgICAgdGhpcy5reWNGb3JtLnNob3coY2xhc3NOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlucHV0LnNjcm9sbEludG9WaWV3KGZhbHNlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25zaG93KSB7XHJcbiAgICAgICAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5vbnNob3cuaWQpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmspIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IE1vcmFsaXMuQ2xvdWQucnVuKHRoaXMub25zaG93LmZ1bmN0aW9uTmFtZSwgdGhpcy5vbnNob3cucGFyYW1zKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXRfZXJyb3JfJyArIHRoaXMuaW5wdXROYW1lKSEuaW5uZXJIVE1MID0gJ0VtYWlsIGhhcyBiZWVuIHNlbnQgdG8gJyArIHRoaXMub25zaG93LnBhcmFtcy5lbWFpbDtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaXZUb0Rpc3BsYXlFcnJvck1lc3NhZ2UoaW5wdXQ6IEhUTUxFbGVtZW50LCBjb3VudGVyID0gMSk6IEhUTUxFbGVtZW50IHtcclxuXHJcbiAgICAgICAgbGV0IGRpdiA9IGlucHV0LnBhcmVudEVsZW1lbnQhLmNsb3Nlc3QoJ2RpdicpO1xyXG4gICAgICAgIGlmICghZGl2KSByZXR1cm4gaW5wdXQ7XHJcblxyXG4gICAgICAgIGlmIChkaXYuY2xpZW50V2lkdGggPiAzMDAgfHwgY291bnRlciA+IDUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldERpdlRvRGlzcGxheUVycm9yTWVzc2FnZShkaXYsICsrY291bnRlcik7XHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFN0cmluZ0hlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9TdHJpbmdIZWxwZXJcIjtcclxuaW1wb3J0IEt5Y1ZhbGlkYXRvckVycm9yIGZyb20gXCIuLi8uLi8uLi9lcnJvcnMvY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuaW1wb3J0IEtZQ0Zvcm0gZnJvbSBcIi4uL0tZQ0Zvcm1cIjtcclxuaW1wb3J0IEZpbGVVcGxvYWQgZnJvbSBcIi4uLy4uL2VsZW1lbnRzL0ZpbGVVcGxvYWRcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNCYXNlIHtcclxuICAgIGt5Y0Zvcm06IEtZQ0Zvcm07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIHRoaXMua3ljRm9ybSA9IGt5Y0Zvcm07XHJcblxyXG4gICAgICAgIEZpbGVVcGxvYWQucmVnaXN0ZXJIYW5kbGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dGaWVsZHNldChzZWxlY3Rvcjogc3RyaW5nLCBoZWFkZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuaGlkZUZpZWxkc2V0cygpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKT8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpbWluYWxfbWFya2V0X21vZGFsX2RpdiA+IGFydGljbGUgPiBoZWFkZXIgPiBzcGFuJykhLmlubmVySFRNTCA9IGhlYWRlclxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaW1pbmFsX21hcmtldF9tb2RhbF9kaXYgPiBhcnRpY2xlJykhLnNjcm9sbFRvcCA9IDBcclxuICAgICAgICB0aGlzLmt5Y0Zvcm0uYWN0aXZlRmllbGRzZXRTZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93UmVxdWlyZWRNYXJrZXIoKSB7XHJcbiAgICAgICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LCBzZWxlY3QnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5wdXQgPSBpbnB1dHNbaV0gYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCFpbnB1dC5pZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj0nICsgaW5wdXQuaWQgKyAnXScpO1xyXG4gICAgICAgICAgICBpZiAoIWxhYmVsKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsLmlubmVySFRNTC5pbmRleE9mKCcqJykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgKz0gJyonO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsLmlubmVySFRNTC5pbmRleE9mKCcqJykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBsYWJlbC5pbm5lckhUTUwucmVwbGFjZSgnKicsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UmVxdWlyZWQoaW5wdXRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJZCk/LnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAncmVxdWlyZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlUmVxdWlyZWQoaW5wdXRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5wdXRJZCk/LnJlbW92ZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZChzZWxlY3Rvcjogc3RyaW5nLCBldmVudE5hbWU6IHN0cmluZywgYWN0aW9uOiAoZXZ0OiBFdmVudCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbihldnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRGaWxlVXBsb2FkcygpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEZpbGVVcGxvYWQuZmlsZVVwbG9hZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgRmlsZVVwbG9hZC5maWxlVXBsb2Fkc1tpXS5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlRmllbGRzZXRzKCkge1xyXG4gICAgICAgIGxldCBmaWVsZHNldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcja3ljX3dpemFyZF9mb3JtID4gZmllbGRzZXQnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkc2V0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmaWVsZHNldHNbaV0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgdmFsaWRhdGVSZXF1aXJlZEZpZWxkcyhzZWxlY3Rvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IgKyAnIGlucHV0W3JlcXVpcmVkXSwgJyArIHNlbGVjdG9yICsgJyBzZWxlY3RbcmVxdWlyZWRdJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGlucHV0ID0gaW5wdXRzW2ldIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc01pc3NpbmdJbnB1dEZyb21Vc2VyKGlucHV0KSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91IG11c3QgZmlsbCBpbnRvIHRoaXMgZmllbGQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0TmFtZTogaW5wdXQuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsYWJlbFtmb3I9JyArIGlucHV0LmlkICsgJ10nKSEuaW5uZXJIVE1MLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IGlucHV0LnBhdHRlcm5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQga3ljVmFsaWRhdGlvbkVycm9yID0gbmV3IEt5Y1ZhbGlkYXRvckVycm9yKG9iaiwgdGhpcy5reWNGb3JtKTtcclxuICAgICAgICAgICAgICAgIGt5Y1ZhbGlkYXRpb25FcnJvci5oYW5kbGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlucHV0LnBhdHRlcm4pIHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gaW5wdXQucGF0dGVybjtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaGVzID0gaW5wdXQudmFsdWUubWF0Y2gocGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoaXMgaXMgbm90IHZhbGlkIGRhdGUgZm9ybWF0LCBwbGVhc2UgdXNlIFlZWVktTU0tREQgKHllYXItbW9udGgtZGF0ZSknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dE5hbWU6IGlucHV0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsW2Zvcj0nICsgaW5wdXQuaWQgKyAnXScpIS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IGlucHV0LnBhdHRlcm5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBreWNWYWxpZGF0aW9uRXJyb3IgPSBuZXcgS3ljVmFsaWRhdG9yRXJyb3Iob2JqLCB0aGlzLmt5Y0Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGt5Y1ZhbGlkYXRpb25FcnJvci5oYW5kbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzaG93RWxlbWVudChlbGVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlRWxlbWVudChlbGVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRMYWJlbChlbGVtZW50SWQ6IHN0cmluZywgdGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGF4X2lkX2xhYmVsJyk7XHJcbiAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzTWlzc2luZ0lucHV0RnJvbVVzZXIoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gKChpbnB1dC50eXBlID09ICdjaGVja2JveCcgJiYgIWlucHV0LmNoZWNrZWQpIHx8IFN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KGlucHV0LnZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbW92ZU1pc3NpbmdJbmZvKGVycm9yRGl2SWQ6IHN0cmluZywgZm9jdXNFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yRGl2SWQpO1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgaWYgKCFmb2N1c0VsZW1lbnRJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgZm9jdXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9jdXNFbGVtZW50SWQpO1xyXG4gICAgICAgIGlmIChmb2N1c0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgZm9jdXNFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRNaXNzaW5nSW5mbyhlcnJvckRpdklkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgZm9jdXNFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yRGl2SWQpO1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgaWYgKHRleHQgPT0gJycpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgICAgICBpZiAoZm9jdXNFbGVtZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvY3VzRWxlbWVudElkKT8uZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvY3VzRWxlbWVudElkKT8uc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQgS3ljQ29udGFjdEh0bWwgZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9LeWMvS3ljQ29udGFjdC5odG1sJztcclxuaW1wb3J0IEt5Y0Jhc2UgZnJvbSBcIi4vS3ljQmFzZVwiO1xyXG5pbXBvcnQgS1lDRm9ybSBmcm9tIFwiLi4vS1lDRm9ybVwiO1xyXG5pbXBvcnQgQ291bnRyeUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Db3VudHJ5SGVscGVyXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljQ29udGFjdCBleHRlbmRzIEt5Y0Jhc2Uge1xyXG5cclxuICAgIHVzVGF4UmVzaWRlbmNlID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGt5Y0Zvcm0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKGVkaXQgPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShLeWNDb250YWN0SHRtbCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZSh7ZWRpdDogZWRpdCwgY291bnRyaWVzOiBDb3VudHJ5SGVscGVyLkNvdW50cmllc30pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpZWxkc2V0KCcua3ljQ29udGFjdCcsICdDb250YWN0IGluZm9ybWF0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kKCcjY291bnRyeV9vZl90YXhfcmVzaWRlbmNlJywgJ2NoYW5nZScsIChldnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGlucHV0ID0gZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICB0aGlzLnVzVGF4UmVzaWRlbmNlID0gKGlucHV0LnZhbHVlLnRvVXBwZXJDYXNlKCkgPT0gJ1VTQScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNUYXhSZXNpZGVuY2UpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0ZV9kaXYnKT8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIHRoaXMua3ljRm9ybS5zZXRTdGVwcyg1KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgnc3RhdGUnKVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua3ljRm9ybS5zZXRTdGVwcyg2KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSZXF1aXJlZCgnc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0ZV9kaXYnKT8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgc2hvd0lkZW50aXR5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhY3RfbmV4dCcpO1xyXG4gICAgICAgIGlmIChzaG93SWRlbnRpdHlCdXR0b24pIHtcclxuICAgICAgICAgICAgc2hvd0lkZW50aXR5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUmVxdWlyZWRGaWVsZHMoJy5reWNDb250YWN0JykpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmt5Y0Zvcm0ua3ljSWRlbnRpdHkuc2hvdygpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxmaWVsZHNldCBjbGFzcz1cXFwia3ljSWRlbnRpdHkgaGlkZGVuXFxcIiBkYXRhLWZvcm09XFxcIjFcXFwiPlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZ2l2ZW5fbmFtZVxcXCI+TGVnYWwgRmlyc3QgbmFtZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgcmVxdWlyZWQgaWQ9XFxcImdpdmVuX25hbWVcXFwiIG5hbWU9XFxcImdpdmVuX25hbWVcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIlJvblxcXCJcXHJcXG4gICAgICAgICAgICAgICB2YWx1ZT1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcImdpdmVuLW5hbWVcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcIm1pZGRsZV9uYW1lXFxcIj5MZWdhbCBNaWRkbGUgbmFtZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgaWQ9XFxcIm1pZGRsZV9uYW1lXFxcIiBuYW1lPVxcXCJtaWRkbGVfbmFtZVxcXCJcXHJcXG4gICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcXFwiIGF1dG9jb21wbGV0ZT1cXFwiYWRkaXRpb25hbC1uYW1lXFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJmYW1pbHlfbmFtZVxcXCI+TGVnYWwgTGFzdCBuYW1lPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCByZXF1aXJlZCBpZD1cXFwiZmFtaWx5X25hbWVcXFwiIG5hbWU9XFxcImZhbWlseV9uYW1lXFxcIlxcclxcbiAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVxcXCJTd2Fuc29uXFxcIlxcclxcbiAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcXFwiIGF1dG9jb21wbGV0ZT1cXFwiZmFtaWx5LW5hbWVcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAge3sjdW5sZXNzIGVkaXR9fVxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZGF0ZV9vZl9iaXJ0aFxcXCI+RGF0ZSBvZiBiaXJ0aDwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgcmVxdWlyZWQgaWQ9XFxcImRhdGVfb2ZfYmlydGhcXFwiIG5hbWU9XFxcImRhdGVfb2ZfYmlydGhcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIjE5NzgtMTEtMjRcXFwiIHBhdHRlcm49XFxcIlxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9XFxcIiB2YWx1ZT1cXFwiXFxcIiBhdXRvY29tcGxldGU9XFxcImJkYXlcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgPGRpdiBpZD1cXFwiY2l0aXplbl9vZl91c2FfcXVlc3Rpb25cXFwiIGNsYXNzPVxcXCJoaWRkZW5cXFwiPlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiY2l0aXplbl95ZXNcXFwiPkFyZSB5b3UgYSBjaXRpemVuIG9mIHRoZSBVbml0ZWQgU3RhdGVzPzwvbGFiZWw+XFxyXFxuICAgICAgICA8ZmllbGRzZXQ+XFxyXFxuICAgICAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwicmFkaW9cXFwiIGlkPVxcXCJjaXRpemVuX3llc1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XFxcImNpdGl6ZW5cXFwiIHZhbHVlPVxcXCIxXFxcIj4gWWVzXFxyXFxuICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8bGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJyYWRpb1xcXCIgaWQ9XFxcImNpdGl6ZW5fbm9cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVxcXCJjaXRpemVuXFxcIiB2YWx1ZT1cXFwiMFxcXCI+IE5vXFxyXFxuICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8ZmllbGRzZXQgaWQ9XFxcImNpdGl6ZW5fbm9fdHlwZV9vcHRpb25zXFxcIiBjbGFzcz1cXFwiaGlkZGVuXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwZXJtYW5lbnRfcmVzaWRlbnRcXFwiIGlkPVxcXCJjaXRpemVuX25vX3R5cGVfb3B0aW9uc18xXFxcIiB2YWx1ZT1cXFwiMVxcXCIvPiBHcmVlbiBDYXJkXFxyXFxuICAgICAgICAgICAgICAgICAgICAvIFBlcm1hbmVudCBSZXNpZGVudFxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwZXJtYW5lbnRfcmVzaWRlbnRcXFwiIGlkPVxcXCJjaXRpemVuX25vX3R5cGVfb3B0aW9uc18yXFxcIiB2YWx1ZT1cXFwiMFxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgVmlzYTwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPC9maWVsZHNldD5cXHJcXG4gICAgICAgIDwvZmllbGRzZXQ+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGlkPVxcXCJ0YXhfaWRfdHlwZV9vcHRpb25zXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInRheF9pZF90eXBlXFxcIj5UYXggSWQgVHlwZTwvbGFiZWw+XFxyXFxuICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVxcXCJ0YXhfaWRfdHlwZVxcXCIgbmFtZT1cXFwidGF4X2lkX3R5cGVcXFwiIHBsYWNlaG9sZGVyPVxcXCJVU0FfU1NOXFxcIj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJVU0FfU1NOXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJBUkdfQVJfQ1VJVFxcXCI+QXJnZW50aW5hIENVSVQ8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJBVVNfVEZOXFxcIj5BdXN0cmFsaWFuIFRheCBGaWxlIE51bWJlcjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkFVU19BQk5cXFwiPkF1c3RyYWxpYW4gQnVzaW5lc3MgTnVtYmVyPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiQk9MX05JVFxcXCI+Qm9saXZpYSBOSVQ8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJCUkFfQ1BGXFxcIj5CcmF6aWwgQ1BGPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiQ0hMX1JVVFxcXCI+Q2hpbGUgUlVUPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiQ09MX05JVFxcXCI+Q29sb21iaWEgTklUPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiQ1JJX05JVEVcXFwiPkNvc3RhIFJpY2EgTklURTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkRFVV9UQVhfSURcXFwiPkdlcm1hbnkgVGF4IElEIChJZGVudGlmaWthdGlvbnNudW1tZXIpPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiRE9NX1JOQ1xcXCI+RG9taW5pY2FuIFJlcHVibGljIFJOQzwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkVDVV9SVUNcXFwiPkVjdWFkb3IgUlVDPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiRlJBX1NQSVxcXCI+RnJhbmNlIFNQSSAoUmVmZXJlbmNlIFRheCBOdW1iZXIpPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiR0JSX1VUUlxcXCI+VUsgVVRSIChVbmlxdWUgVGF4cGF5ZXIgUmVmZXJlbmNlKTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkdCUl9OSU5PXFxcIj5VSyBOSU5PIChOYXRpb25hbCBJbnN1cmFuY2UgTnVtYmVyKTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkdUTV9OSVRcXFwiPkd1YXRlbWFsYSBOSVQ8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJITkRfUlROXFxcIj5Ib25kdXJhcyBSVE48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJIVU5fVElOXFxcIj5IdW5nYXJ5IFRJTiBOdW1iZXI8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJJRE5fS1RQXFxcIj5JbmRvbmVzaWEgS1RQPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiSU5EX1BBTlxcXCI+SW5kaWEgUEFOIE51bWJlcjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIklTUl9UQVhfSURcXFwiPklzcmFlbCBUYXggSUQgKFRldWRhdCBaZWh1dCk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJJVEFfVEFYX0lEXFxcIj5JdGFseSBUYXggSUQgKENvZGljZSBGaXNjYWxlKTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkpQTl9UQVhfSURcXFwiPkphcGFuIFRheCBJRCAoS29pamluIEJhbmdvKTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIk1FWF9SRkNcXFwiPk1leGljbyBSRkM8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJOSUNfUlVDXFxcIj5OaWNhcmFndWEgUlVDPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiTkxEX1RJTlxcXCI+TmV0aGVybGFuZHMgVElOIE51bWJlcjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlBBTl9SVUNcXFwiPlBhbmFtYSBSVUM8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJQRVJfUlVDXFxcIj5QZXJ1IFJVQzwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlBSWV9SVUNcXFwiPlBhcmFndWF5IFJVQzwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlNHUF9OUklDXFxcIj5TaW5nYXBvcmUgTlJJQzwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlNHUF9GSU5cXFwiPlNpbmdhcG9yZSBGSU48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJTR1BfQVNHRFxcXCI+U2luZ2Fwb3JlIEFTR0Q8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJTR1BfSVRSXFxcIj5TaW5nYXBvcmUgSVRSPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiU0xWX05JVFxcXCI+RWwgU2FsdmFkb3IgTklUPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiU1dFX1RBWF9JRFxcXCI+U3dlZGVuIFRheCBJRCAoUGVyc29ubnVtbWVyKTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlVSWV9SVVRcXFwiPlVydWd1YXkgUlVUPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiVkVOX1JJRlxcXCI+VmVuZXp1ZWxhIFJJRjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIk5PVF9TUEVDSUZJRURcXFwiPk90aGVyIFRheCBJRHM8L29wdGlvbj5cXHJcXG4gICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBpZD1cXFwidGF4X2lkX2xhYmVsXFxcIiBmb3I9XFxcInRheF9pZFxcXCI+VGF4IElkIChTU04pPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCByZXF1aXJlZCBpZD1cXFwidGF4X2lkXFxcIiBuYW1lPVxcXCJ0YXhfaWRcXFwiXFxyXFxuICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIjY2Ni01NS00MzIxXFxcIlxcclxcbiAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcXFwiPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBpZD1cXFwiY291bnRyeV9vZl9iaXJ0aF9vcHRpb25cXFwiPlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiY291bnRyeV9vZl9iaXJ0aFxcXCI+Q291bnRyeSBvZiBiaXJ0aDwvbGFiZWw+XFxyXFxuICAgICAgICA8c2VsZWN0IGlkPVxcXCJjb3VudHJ5X29mX2JpcnRoXFxcIiBuYW1lPVxcXCJjb3VudHJ5X29mX2JpcnRoXFxcIj5cXHJcXG4gICAgICAgICAgICB7eyNlYWNoIGNvdW50cmllc319XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3tjb2RlfX1cXFwiPnt7bmFtZX19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAge3svZWFjaH19XFxyXFxuICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcImNvdW50cnlfb2ZfY2l0aXplbnNoaXBfb3B0aW9uXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImNvdW50cnlfb2ZfY2l0aXplbnNoaXBcXFwiPkNvdW50cnkgb2YgY2l0aXplbnNoaXA8L2xhYmVsPlxcclxcbiAgICAgICAgPHNlbGVjdCByZXF1aXJlZCBpZD1cXFwiY291bnRyeV9vZl9jaXRpemVuc2hpcFxcXCIgbmFtZT1cXFwiY291bnRyeV9vZl9jaXRpemVuc2hpcFxcXCI+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICB7eyNlYWNoIGNvdW50cmllc319XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwie3tjb2RlfX1cXFwiPnt7bmFtZX19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAge3svZWFjaH19XFxyXFxuICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcInZpc2FfdHlwZV9vcHRpb25cXFwiIGNsYXNzPVxcXCJoaWRkZW5cXFwiPlxcclxcbiAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJ2aXNhX3R5cGVcXFwiPlZpc2EgdHlwZSAtIDxhXFxyXFxuICAgICAgICAgICAgICAgICAgICBocmVmPVxcXCJodHRwczovL3RyYXZlbC5zdGF0ZS5nb3YvY29udGVudC90cmF2ZWwvZW4vdXMtdmlzYXMvdmlzYS1pbmZvcm1hdGlvbi1yZXNvdXJjZXMvYWxsLXZpc2EtY2F0ZWdvcmllcy5odG1sXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlZpc2FcXHJcXG4gICAgICAgICAgICAgICAgaW5mb3JtYXRpb248L2E+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8c2VsZWN0IGlkPVxcXCJ2aXNhX3R5cGVcXFwiIG5hbWU9XFxcInZpc2FfdHlwZVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkIxXFxcIiBzZWxlY3RlZD5VU0EgVmlzYSBDYXRlZ29yeSBCLTE8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiQjJcXFwiPlVTQSBWaXNhIENhdGVnb3J5IEItMjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJEQUNBXFxcIj5VU0EgVmlzYSBDYXRlZ29yeSBEQUNBPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkUxXFxcIj5VU0EgVmlzYSBDYXRlZ29yeSBFLTE8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiRTJcXFwiPlVTQSBWaXNhIENhdGVnb3J5IEUtMjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJFM1xcXCI+VVNBIFZpc2EgQ2F0ZWdvcnkgRS0zPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIkYxXFxcIj5VU0EgVmlzYSBDYXRlZ29yeSBGLTE8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiRzRcXFwiPlVTQSBWaXNhIENhdGVnb3J5IEctNDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJIMUJcXFwiPlVTQSBWaXNhIENhdGVnb3J5IEgtMUI8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiSjFcXFwiPlVTQSBWaXNhIENhdGVnb3J5IEotMTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJMMVxcXCI+VVNBIFZpc2EgQ2F0ZWdvcnkgTC0xPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIk9USEVSXFxcIj5Bbnkgb3RoZXIgVVNBIFZpc2EgQ2F0ZWdvcnk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiTzFcXFwiPlVTQSBWaXNhIENhdGVnb3J5IE8tMTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJUTjFcXFwiPlVTQSBWaXNhIENhdGVnb3J5IFROLTE8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBpZD1cXFwidmlzYV9leHBpcmF0aW9uX2RhdGVfb3B0aW9uXFxcIj5cXHJcXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJ2aXNhX2V4cGlyYXRpb25fZGF0ZVxcXCI+VmlzYSBleHBpcmF0aW9uIGRhdGU8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJkYXRlXFxcIiBpZD1cXFwidmlzYV9leHBpcmF0aW9uX2RhdGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgIG5hbWU9XFxcInZpc2FfZXhwaXJhdGlvbl9kYXRlXFxcIiBwbGFjZWhvbGRlcj1cXFwiMjAyOC0wNS0wMVxcXCIgdmFsdWU9XFxcIlxcXCI+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgaWQ9XFxcImRhdGVfb2ZfZGVwYXJ0dXJlX2Zyb21fdXNhX29wdGlvblxcXCI+XFxyXFxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiZGF0ZV9vZl9kZXBhcnR1cmVfZnJvbV91c2FcXFwiPkRhdGUgb2YgZGVwYXJ0dXJlIGZyb20gVVNBPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiZGF0ZVxcXCIgaWQ9XFxcImRhdGVfb2ZfZGVwYXJ0dXJlX2Zyb21fdXNhXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICBuYW1lPVxcXCJkYXRlX29mX2RlcGFydHVyZV9mcm9tX3VzYVxcXCIgcGxhY2Vob2xkZXI9XFxcIjIwMjgtMDUtMDFcXFwiIHZhbHVlPVxcXCJcXFwiPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiYW5udWFsX2luY29tZVxcXCI+QW5udWFsIEhvdXNlaG9sZCBJbmNvbWU8L2xhYmVsPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZXhwbGFpblxcXCI+XFxyXFxuICAgICAgICAgICAgQW5udWFsIGhvdXNlaG9sZCBpbmNvbWUgaW5jbHVkZXMgaW5jb21lIGZyb20gc291cmNlcyBzdWNoIGFzIGVtcGxveW1lbnQsIGFsaW1vbnksIHNvY2lhbCBzZWN1cml0eSxcXHJcXG4gICAgICAgICAgICBpbnZlc3RtZW50IGluY29tZSwgZXRjLlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8c2VsZWN0IG5hbWU9XFxcImFubnVhbF9pbmNvbWVcXFwiIGlkPVxcXCJhbm51YWxfaW5jb21lXFxcIj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjFcXFwiPjAgLSAkMjAsMDAwPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMlxcXCI+JDIwLDAwMCAtICQ0OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIzXFxcIj4kNTAsMDAwIC0gJDk5LDk5OTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjRcXFwiPiQxMDAsMDAwIC0gJDQ5OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCI1XFxcIj4kNTAwLDAwMCAtICQ5OTksOTk5PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiNlxcXCI+JDEsMDAwLDAwMCAtICQ5LDk5OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImxpcXVpZF9uZXRfd29ydGhcXFwiPkxpcXVpZCBBc3NldHM8L2xhYmVsPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZXhwbGFpblxcXCI+TGlxdWlkIGFzc2V0cyBpcyB5b3VyIG5ldCB3b3J0aCBtaW51cyBhc3NldHMgdGhhdCBjYW5ub3QgYmVcXHJcXG4gICAgICAgICAgICBjb252ZXJ0ZWQgcXVpY2tseSBhbmQgZWFzaWx5IGludG8gY2FzaCwgc3VjaCBhcyByZWFsIGVzdGF0ZSwgYnVzaW5lc3MgZXF1aXR5LFxcclxcbiAgICAgICAgICAgIHBlcnNvbmFsIHByb3BlcnR5IGFuZCBhdXRvbW9iaWxlcywgZXhwZWN0ZWQgaW5oZXJpdGFuY2VzLCBhc3NldHMgZWFybWFya2VkIGZvclxcclxcbiAgICAgICAgICAgIG90aGVyIHB1cnBvc2VzLCBhbmQgaW52ZXN0bWVudHMgb3IgYWNjb3VudHMgc3ViamVjdCB0byBzdWJzdGFudGlhbCBwZW5hbHRpZXNcXHJcXG4gICAgICAgICAgICBpZiB0aGV5IHdlcmUgc29sZCBvciBpZiBhc3NldHMgd2VyZSB3aXRoZHJhd24gZnJvbSB0aGVtLlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8c2VsZWN0IG5hbWU9XFxcImxpcXVpZF9uZXRfd29ydGhcXFwiIHJlcXVpcmVkIGlkPVxcXCJsaXF1aWRfbmV0X3dvcnRoXFxcIj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJcXFwiPjwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjFcXFwiPjAgLSAkMjAsMDAwPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMlxcXCI+JDIwLDAwMCAtICQ0OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIzXFxcIj4kNTAsMDAwIC0gJDk5LDk5OTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjRcXFwiPiQxMDAsMDAwIC0gJDQ5OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCI1XFxcIj4kNTAwLDAwMCAtICQ5OTksOTk5PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMVxcXCI+JDEsMDAwLDAwMCAtICQ5LDk5OSw5OTk8L29wdGlvbj5cXHJcXG4gICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImZ1bmRpbmdfc291cmNlXFxcIj5GdW5kaW5nIHNvdXJjZTwvbGFiZWw+XFxyXFxuICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVxcXCJmdW5kaW5nX3NvdXJjZVxcXCIgbmFtZT1cXFwiZnVuZGluZ19zb3VyY2VcXFwiXFxyXFxuICAgICAgICAgICAgICAgIG11bHRpcGxlIHNpemU9XFxcIjRcXFwiIGFyaWEtbGFiZWw9XFxcInNpemUgMyBzZWxlY3RcXFwiPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImVtcGxveW1lbnRfaW5jb21lXFxcIj5FbXBsb3ltZW50IGluY29tZTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImludmVzdG1lbnRzXFxcIj5JbnZlc3RtZW50czwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImluaGVyaXRhbmNlXFxcIj5Jbmhlcml0YW5jZTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImJ1c2luZXNzX2luY29tZVxcXCI+QnVzaW5lc3MgaW5jb21lPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwic2F2aW5nc1xcXCI+U2F2aW5nczwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcImZhbWlseVxcXCI+RmFtaWx5PC9vcHRpb24+XFxyXFxuICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIHt7L3VubGVzc319XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWQgYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcImlkZW50aXR5X3ByZXZcXFwiPlByZXZpb3VzOiBDb250YWN0PC9idXR0b24+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcImlkZW50aXR5X25leHRcXFwiPk5leHQ6IFRydXN0ZWQgY29udGFjdHM8L2J1dHRvbj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IEtZQ0Zvcm0gZnJvbSBcIi4uL0tZQ0Zvcm1cIjtcclxuaW1wb3J0IEt5Y0Jhc2UgZnJvbSBcIi4vS3ljQmFzZVwiO1xyXG5pbXBvcnQgS3ljSWRlbnRpdHlIdG1sIGZyb20gXCIuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNJZGVudGl0eS5odG1sXCI7XHJcbmltcG9ydCBDb3VudHJ5SGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL0NvdW50cnlIZWxwZXJcIjtcclxuaW1wb3J0IEt5Y1ZhbGlkYXRvckVycm9yIGZyb20gXCIuLi8uLi8uLi9lcnJvcnMvY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNJZGVudGl0eSBleHRlbmRzIEt5Y0Jhc2Uge1xyXG4gICAgZWRpdCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGt5Y0Zvcm06IEtZQ0Zvcm0pIHtcclxuICAgICAgICBzdXBlcihreWNGb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKGVkaXQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuZWRpdCA9IGVkaXQ7XHJcblxyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShLeWNJZGVudGl0eUh0bWwpO1xyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZSh7ZWRpdDogZWRpdCwgY291bnRyaWVzOiBDb3VudHJ5SGVscGVyLkNvdW50cmllc30pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5reWNGb3JtLmt5Y0NvbnRhY3QudXNUYXhSZXNpZGVuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudCgnY2l0aXplbl9vZl91c2FfcXVlc3Rpb24nKTtcclxuICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudCgndGF4X2lkX3R5cGVfb3B0aW9ucycpO1xyXG4gICAgICAgICAgICB0aGlzLnNldExhYmVsKCd0YXhfaWRfbGFiZWwnLCAnU1NOJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudCgnY2l0aXplbl9vZl91c2FfcXVlc3Rpb24nKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRMYWJlbCgndGF4X2lkX2xhYmVsJywgJ05hdGlvbmFsIFRheCBJZCAoU1NOKScpO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dFbGVtZW50KCd0YXhfaWRfdHlwZV9vcHRpb25zJylcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93RmllbGRzZXQoJy5reWNJZGVudGl0eScsICdJZGVudGl0eScpO1xyXG4gICAgICAgIHRoaXMuc2hvd0VsZW1lbnQoJ2NvdW50cnlfb2ZfY2l0aXplbnNoaXBfb3B0aW9uJyk7XHJcbiAgICAgICAgbGV0IGNvdW50cnlfb2ZfY2l0aXplbnNoaXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY291bnRyeV9vZl9jaXRpemVuc2hpcCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgIGlmIChjb3VudHJ5X29mX2NpdGl6ZW5zaGlwKSB7XHJcbiAgICAgICAgICAgIGNvdW50cnlfb2ZfY2l0aXplbnNoaXAub3B0aW9uc1sxXS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZEV2ZW50cygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kKCcjY2l0aXplbl95ZXMnLCAnY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YXhJZFR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGF4X2lkX3R5cGUnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0YXhJZFR5cGUpIHRheElkVHlwZS52YWx1ZSA9ICdVU0FfU1NOJztcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY291bnRyeV9vZl9jaXRpemVuc2hpcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudHJ5X29mX2NpdGl6ZW5zaGlwJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5X29mX2NpdGl6ZW5zaGlwLm9wdGlvbnNbMV0uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvdW50cnlfb2ZfY2l0aXplbnNoaXAudmFsdWUgPSAnVVNBJztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVFbGVtZW50KCdjaXRpemVuX25vX3R5cGVfb3B0aW9ucycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudCgndmlzYV90eXBlX29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudCgnY291bnRyeV9vZl9jaXRpemVuc2hpcF9vcHRpb24nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ2NvdW50cnlfb2ZfYmlydGgnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ3Zpc2FfdHlwZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSZXF1aXJlZCgndmlzYV9leHBpcmF0aW9uX2RhdGUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ2RhdGVfb2ZfZGVwYXJ0dXJlX2Zyb21fdXNhJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGF4X2lkX2xhYmVsJykhLmlubmVySFRNTCA9ICdTU04nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDaXRpemVuRXJyb3JNZXNzYWdlKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYmluZCgnI2NpdGl6ZW5fbm8nLCAnY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VsZW1lbnQoJ2NpdGl6ZW5fbm9fdHlwZV9vcHRpb25zJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFbGVtZW50KCdjb3VudHJ5X29mX2NpdGl6ZW5zaGlwX29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgnY291bnRyeV9vZl9iaXJ0aCcpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RheF9pZF9sYWJlbCcpIS5pbm5lckhUTUwgPSAnU1NOJ1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50cnlfb2ZfY2l0aXplbnNoaXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY291bnRyeV9vZl9jaXRpemVuc2hpcCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgY291bnRyeV9vZl9jaXRpemVuc2hpcC5vcHRpb25zWzBdLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvdW50cnlfb2ZfY2l0aXplbnNoaXAub3B0aW9uc1sxXS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlQ2l0aXplbkVycm9yTWVzc2FnZSgpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICB0aGlzLmJpbmQoJyNjaXRpemVuX25vX3R5cGVfb3B0aW9uc18xJywgJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5wdXQgPSBldnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFbGVtZW50KCdjb3VudHJ5X29mX2NpdGl6ZW5zaGlwX29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudCgndmlzYV90eXBlX29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgnY291bnRyeV9vZl9iaXJ0aCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSZXF1aXJlZCgndmlzYV90eXBlJylcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ3Zpc2FfZXhwaXJhdGlvbl9kYXRlJylcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ2RhdGVfb2ZfZGVwYXJ0dXJlX2Zyb21fdXNhJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuYmluZCgnI2NpdGl6ZW5fbm9fdHlwZV9vcHRpb25zXzInLCAnY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dCA9IGV2dC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VsZW1lbnQoJ3Zpc2FfdHlwZV9vcHRpb24nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VsZW1lbnQoJ2NvdW50cnlfb2ZfY2l0aXplbnNoaXBfb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlcXVpcmVkKCdjb3VudHJ5X29mX2JpcnRoJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlcXVpcmVkKCdjb3VudHJ5X29mX2NpdGl6ZW5zaGlwJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlcXVpcmVkKCd2aXNhX3R5cGUnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgndmlzYV9leHBpcmF0aW9uX2RhdGUnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgnZGF0ZV9vZl9kZXBhcnR1cmVfZnJvbV91c2EnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kKCcjdmlzYV90eXBlJywgJ2NoYW5nZScsIChldnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGlucHV0ID0gZXZ0LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT0gJ0IxJyB8fCBpbnB1dC52YWx1ZSA9PSAnQjInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFbGVtZW50KCdkYXRlX29mX2RlcGFydHVyZV9mcm9tX3VzYV9vcHRpb24nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUVsZW1lbnQoJ2RhdGVfb2ZfZGVwYXJ0dXJlX2Zyb21fdXNhX29wdGlvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kQnV0dG9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZUNpdGl6ZW5FcnJvck1lc3NhZ2UoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NpdGl6ZW5feWVzJykhLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XHJcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dF9lcnJvcl9jaXRpemVuX3llcycpO1xyXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIGVycm9yTWVzc2FnZS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRCdXR0b25zKCkge1xyXG4gICAgICAgIGxldCBzaG93Q29udGFjdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZGVudGl0eV9wcmV2Jyk7XHJcbiAgICAgICAgc2hvd0NvbnRhY3RCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmt5Y0Zvcm0ua3ljQ29udGFjdC5zaG93KCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IHNob3dEaXNjbG9zdXJlc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZGVudGl0eV9uZXh0Jyk7XHJcbiAgICAgICAgc2hvd0Rpc2Nsb3N1cmVzQnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlSW5wdXRzKCkpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUmVxdWlyZWRGaWVsZHMoJy5reWNJZGVudGl0eScpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB0aGlzLmt5Y0Zvcm0ua3ljVHJ1c3RlZENvbnRhY3Quc2hvdygpO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVJbnB1dHMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdCkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGxldCBjaXRpemVuX3llcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXRpemVuX3llcycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGNpdGl6ZW5fbm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2l0aXplbl9ubycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5reWNGb3JtLmt5Y0NvbnRhY3QudXNUYXhSZXNpZGVuY2UpIHtcclxuICAgICAgICAgICAgY2l0aXplbl95ZXMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjaXRpemVuX25vLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNpdGl6ZW5feWVzLmNoZWNrZWQgJiYgIWNpdGl6ZW5fbm8uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBsZXQgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBtdXN0IHNlbGVjdCBlaXRoZXIgb3B0aW9uJyxcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZTogJ2NpdGl6ZW5feWVzJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPWNpdGl6ZW5feWVzXScpIS5pbm5lckhUTUxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGt5Y1ZhbGlkYXRpb25FcnJvciA9IG5ldyBLeWNWYWxpZGF0b3JFcnJvcihvYmosIHRoaXMua3ljRm9ybSk7XHJcbiAgICAgICAgICAgIGt5Y1ZhbGlkYXRpb25FcnJvci5oYW5kbGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGdyZWVuQ2FyZE9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXRpemVuX25vX3R5cGVfb3B0aW9uc18xJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBsZXQgdmlzYU9wdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXRpemVuX25vX3R5cGVfb3B0aW9uc18yJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBpZiAoY2l0aXplbl9uby5jaGVja2VkICYmICFncmVlbkNhcmRPcHRpb24uY2hlY2tlZCAmJiAhdmlzYU9wdGlvbi5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91IG11c3Qgc2VsZWN0IGVpdGhlciBvcHRpb24sIFwiR3JlZW4gQ2FyZCAvIFBlcm1hbmVudCBSZXNpZGVudFwiIG9yIFwiVmlzYVwiJyxcclxuICAgICAgICAgICAgICAgIGlucHV0TmFtZTogJ2NpdGl6ZW5fbm8nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxUZXh0OiAnJ1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQga3ljVmFsaWRhdGlvbkVycm9yID0gbmV3IEt5Y1ZhbGlkYXRvckVycm9yKG9iaiwgdGhpcy5reWNGb3JtKTtcclxuICAgICAgICAgICAga3ljVmFsaWRhdGlvbkVycm9yLmhhbmRsZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgY2xhc3M9XFxcImt5Y0Rpc2Nsb3N1cmVzIGhpZGRlblxcXCIgZGF0YS1mb3JtPVxcXCIxXFxcIj5cXHJcXG4gICAge3sjdW5sZXNzIGVkaXR9fVxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZW1wbG95bWVudF9zdGF0dXNcXFwiPkVtcGxveW1lbnQgc3RhdHVzPC9sYWJlbD5cXHJcXG4gICAgICAgIDxzZWxlY3QgaWQ9XFxcImVtcGxveW1lbnRfc3RhdHVzXFxcIiByZXF1aXJlZCBuYW1lPVxcXCJlbXBsb3ltZW50X3N0YXR1c1xcXCI+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiXFxcIj48L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJlbXBsb3llZFxcXCI+RW1wbG95ZWQ8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCJ1bmVtcGxveWVkXFxcIj5VbmVtcGxveWVkPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwicmV0aXJlZFxcXCI+UmV0aXJlZDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInN0dWRlbnRcXFwiPlN0dWRlbnQ8L29wdGlvbj5cXHJcXG4gICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImVtcGxveWVyX25hbWVcXFwiPkVtcGxveWVyIG5hbWU8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IG5hbWU9XFxcImVtcGxveWVyX25hbWVcXFwiIGlkPVxcXCJlbXBsb3llcl9uYW1lXFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiZW1wbG95ZXJfYWRkcmVzc1xcXCI+RW1wbG95ZXIgYWRkcmVzczwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgbmFtZT1cXFwiZW1wbG95ZXJfYWRkcmVzc1xcXCIgaWQ9XFxcImVtcGxveWVyX2FkZHJlc3NcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJlbXBsb3ltZW50X3Bvc2l0aW9uXFxcIj5PY2N1cGF0aW9uIC8gSm9iIHRpdGxlPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBuYW1lPVxcXCJlbXBsb3ltZW50X3Bvc2l0aW9uXFxcIiBpZD1cXFwiZW1wbG95bWVudF9wb3NpdGlvblxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvcmdhbml6YXRpb24tdGl0bGVcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIHt7L3VubGVzc319XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImRpc2Nsb3N1cmVfc2VsZWN0aW9uc1xcXCI+XFxyXFxuICAgICAgICBEbyBhbnkgb2YgdGhlIGZvbGxvd2luZyBhcHBseSB0byB5b3Ugb3IgYSBtZW1iZXIgb2YgeW91ciBpbW1lZGlhdGUgZmFtaWx5P1xcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiaXNfYWZmaWxpYXRlZF9leGNoYW5nZV9vcl9maW5yYVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiIGlkPVxcXCJpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhXFxcIiBuYW1lPVxcXCJpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XFxcInN3aXRjaFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgQWZmaWxpYXRlZCBvciB3b3JrIHdpdGggYSBVUyByZWdpc3RlcmVkIGJyb2tlci1kZWFsZXIgb3JcXHJcXG4gICAgICAgICAgICAgICAgRklOUkEuXFxyXFxuICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cXFwiZXhwbGFpblxcXCI+QXJlIHlvdSBvciBhbiBpbW1lZGlhdGUgZmFtaWx5IG1lbWJlciBhZmZpbGlhdGVkIHdpdGggb3IgZW1wbG95ZWQgYnkgYSBzdG9ja1xcclxcbiAgICAgICAgICAgICAgICAgICAgZXhjaGFuZ2UsIHJlZ3VsYXRvcnkgYm9keSwgbWVtYmVyIGZpcm0gb2YgYW4gZXhjaGFuZ2UsIEZJTlJBIG9yIGEgbXVuaWNpcGFsIHNlY3VyaXRpZXNcXHJcXG4gICAgICAgICAgICAgICAgICAgIGJyb2tlci1kZWFsZXI/PC9zbWFsbD5cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwiaXNfYWZmaWxpYXRlZF9leGNoYW5nZV9vcl9maW5yYV9leHRyYVxcXCI+PC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImlzX2NvbnRyb2xfcGVyc29uXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgaWQ9XFxcImlzX2NvbnRyb2xfcGVyc29uXFxcIiBuYW1lPVxcXCJpc19jb250cm9sX3BlcnNvblxcXCIgcm9sZT1cXFwic3dpdGNoXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2PlxcclxcblxcclxcbiAgICAgICAgICAgICAgICBTZW5pb3IgZXhlY3V0aXZlIGF0IG9yIGEgMTAlIG9yIGdyZWF0ZXIgc2hhcmVob2xkZXIgb2YgYSBwdWJsaWNseSB0cmFkZWQgY29tcGFueS5cXHJcXG4gICAgICAgICAgICAgICAgPHNtYWxsIGNsYXNzPVxcXCJleHBsYWluXFxcIj5BcmUgeW91IG9yIGFuIGltbWVkaWF0ZSBmYW1pbHkgbWVtYmVyIGFuIG9mZmljZXIgb3IgMTAlIG9yIGdyZWF0ZXIgc2hhcmVob2xkZXIgb2ZcXHJcXG4gICAgICAgICAgICAgICAgICAgIGEgcHVibGljbHkgdHJhZGVkIGNvbXBhbnksIHN1YmplY3QgdG8gdGhlIFVTIFNlY3VyaXRpZXMgRXhjaGFuZ2UgQWN0IDE5MzQ/PC9zbWFsbD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwiaXNfY29udHJvbF9wZXJzb25fZXh0cmFcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJpc19wb2xpdGljYWxseV9leHBvc2VkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgaWQ9XFxcImlzX3BvbGl0aWNhbGx5X2V4cG9zZWRcXFwiIG5hbWU9XFxcImlzX3BvbGl0aWNhbGx5X2V4cG9zZWRcXFwiIHJvbGU9XFxcInN3aXRjaFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgSSBhbSBhIHNlbmlvciBwb2xpdGljYWwgZmlndXJlLlxcclxcbiAgICAgICAgICAgICAgICA8c21hbGwgY2xhc3M9XFxcImV4cGxhaW5cXFwiPkFyZSB5b3UgY3VycmVudGx5IG9yIGZvcm1lcmx5IGEgUG9saXRpY2FsbHkgRXhwb3NlZCBQZXJzb24gb3IgUHVibGljIE9mZmljaWFsXFxyXFxuICAgICAgICAgICAgICAgICAgICAoUEVQKT8gPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/cT0lRTIlODAlOUNQb2xpdGljYWxseStFeHBvc2VkK1BlcnNvbiVFMiU4MCU5RCsoUEVQKVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+V2hhdCBpcyBQRVA/PC9hPiA8L2E+PC9zbWFsbD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwiaXNfcG9saXRpY2FsbHlfZXhwb3NlZF9leHRyYVxcXCI+PC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJjaGVja2JveFxcXCIgaWQ9XFxcImltbWVkaWF0ZV9mYW1pbHlfZXhwb3NlZFxcXCIgbmFtZT1cXFwiaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkXFxcIiByb2xlPVxcXCJzd2l0Y2hcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIEkgYW0gYSBmYW1pbHkgbWVtYmVyIG9yIHJlbGF0aXZlIG9mIGEgc2VuaW9yIHBvbGl0aWNhbCBmaWd1cmUuXFxyXFxuICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cXFwiZXhwbGFpblxcXCI+QXJlIHlvdSBhbiBpbW1lZGlhdGUgZmFtaWx5IG1lbWJlciBjdXJyZW50bHkgb3IgZm9ybWVybHkgYSBQb2xpdGljYWxseSBFeHBvc2VkXFxyXFxuICAgICAgICAgICAgICAgICAgICBQZXJzb24gb3IgUHVibGljIE9mZmljaWFsIChQRVApPyA8YVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPVxcXCJodHRwczovL3d3dy5nb29nbGUuY29tL3NlYXJjaD9xPSVFMiU4MCU5Q1BvbGl0aWNhbGx5K0V4cG9zZWQrUGVyc29uJUUyJTgwJTlEKyhQRVApXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+V2hhdCBpcyBQRVA/PC9hPjwvc21hbGw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XFxcImltbWVkaWF0ZV9mYW1pbHlfZXhwb3NlZF9leHRyYVxcXCI+PC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcIm5vbmVfYWJvdmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBpZD1cXFwibm9uZV9hYm92ZVxcXCIgbmFtZT1cXFwibm9uZV9hYm92ZVxcXCIgcm9sZT1cXFwic3dpdGNoXFxcIj48L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIE5vbmUgb2YgdGhlIGFib3ZlIGFwcGx5IHRvIG1lIG9yIG15IGZhbWlseS5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiIGlkPVxcXCJub25lX2Fib3ZlX2Vycm9yXFxcIj48L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWQgYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcImRpc2Nsb3N1cmVzX3ByZXZcXFwiPlByZXZpb3VzOiBUcnVzdGVkIGNvbnRhY3Q8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBpZD1cXFwiZGlzY2xvc3VyZXNfbmV4dFxcXCI+TmV4dDogQWdyZWVtZW50czwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgaWQ9XFxcImFmZmlsaWF0ZV9vcl9jb250cm9sbGVkXFxcIj5cXHJcXG4gICAgPGRpdj5Zb3UgbmVlZCB0byBmaWxsIGluIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb248L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImNvbXBhbnlfbmFtZVxcXCI+Q29tcGFueSBuYW1lPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBuYW1lPVxcXCJjb21wYW55X25hbWVcXFwiIHJlcXVpcmVkIGlkPVxcXCJjb21wYW55X25hbWVcXFwiIGF1dG9jb21wbGV0ZT1cXFwib3JnYW5pemF0aW9uXFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiY29tcGFueV9zdHJlZXRfYWRkcmVzc1xcXCI+Q29tcGFueSBzdHJlZXQgYWRkcmVzczwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgbmFtZT1cXFwiY29tcGFueV9zdHJlZXRfYWRkcmVzc1xcXCIgcmVxdWlyZWQgaWQ9XFxcImNvbXBhbnlfc3RyZWV0X2FkZHJlc3NcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJjb21wYW55X2NpdHlcXFwiPkNvbXBhbnkgY2l0eTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgbmFtZT1cXFwiY29tcGFueV9jaXR5XFxcIiByZXF1aXJlZCBpZD1cXFwiY29tcGFueV9jaXR5XFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiY29tcGFueV9zdGF0ZVxcXCI+Q29tcGFueSBzdGF0ZTwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgbmFtZT1cXFwiY29tcGFueV9zdGF0ZVxcXCIgcmVxdWlyZWQgaWQ9XFxcImNvbXBhbnlfc3RhdGVcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJjb21wYW55X2NvdW50cnlcXFwiPkNvbXBhbnkgY291bnRyeTwvbGFiZWw+XFxyXFxuICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVxcXCJjb21wYW55X2NvdW50cnlcXFwiIHJlcXVpcmVkIG5hbWU9XFxcImNvbXBhbnlfY291bnRyeVxcXCI+XFxyXFxuICAgICAgICAgICAge3sjZWFjaCBjb3VudHJpZXN9fVxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInt7Y29kZX19XFxcIj57e25hbWV9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIHt7L2VhY2h9fVxcclxcbiAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwiY29tcGFueV9jb21wbGlhbmNlX2VtYWlsXFxcIj5Db21wYW55IGNvbXBsaWFuY2Ugb2ZmaWNlciBlbWFpbDwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgbmFtZT1cXFwiY29tcGFueV9jb21wbGlhbmNlX2VtYWlsXFxcIiByZXF1aXJlZCBpZD1cXFwiY29tcGFueV9jb21wbGlhbmNlX2VtYWlsXFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZXhwbGFpblxcXCI+XFxyXFxuICAgICAgICAgICAgSW4gYWNjb3JkYW5jZSB3aXRoIGFwcGxpY2FibGUgRklOUkEgcnVsZXMsIHVzZXIgd2lsbCBuZWVkIHRvIG9idGFpbiBhIGxldHRlciB3cml0dGVuXFxyXFxuICAgICAgICAgICAgYW5kIHNpZ25lZCBieSBhIGNvbXBsaWFuY2Ugb2ZmaWNlciBvbiBjb21wYW55IGxldHRlcmhlYWQgZXhwbGljaXRseSBncmFudGluZyBwZXJtaXNzaW9uIGZvclxcclxcbiAgICAgICAgICAgIHRoZSBhcHBsaWNhbnQgdG8gY2FycnkgdGhlIGFjY291bnQgYW5kIGV4cGxpY2l0bHkgc3RhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgZmlybSByZXF1aXJlc1xcclxcbiAgICAgICAgICAgIGFjY2VzcyB0byBkdXBsaWNhdGUgYWNjb3VudCBzdGF0ZW1lbnRzIGFuZC9vciB0cmFkZSBjb25maXJtYXRpb25zLlxcclxcblxcclxcbiAgICAgICAgICAgIElmIHRoZSBmaXJtIHdvdWxkIGxpa2Ugb25saW5lIGFjY2VzcyB5b3VyIGR1cGxpY2F0ZSBhY2NvdW50IHN0YXRlbWVudHMgYW5kL29yIHRyYWRlIGNvbmZpcm1hdGlvbnMsXFxyXFxuICAgICAgICAgICAgaW5jbHVkZSBpbiB0aGUgbGV0dGVyIHRoZSBhcHBsaWNhbnQncyBmdWxsIG5hbWUgYW5kIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb24gZm9yIHRoZSBpbnRlcmVzdGVkXFxyXFxuICAgICAgICAgICAgcGFydHk6IEZpcnN0IGFuZCBsYXN0IG5hbWUsIHRpdGxlLCBlbWFpbCBhZGRyZXNzLCB0ZWxlcGhvbmUgbnVtYmVyLlxcclxcblxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICB7e3tmaWxlVXBsb2FkIFxcXCJhY2NvdW50X2FwcHJvdmFsX2xldHRlclxcXCIgXFxcIkFjY291bnQgYXBwcm92YWwgbGV0dGVyXFxcIn19fVxcclxcblxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2ZpZWxkc2V0PlxcclxcblwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgS3ljQmFzZSBmcm9tIFwiLi9LeWNCYXNlXCI7XHJcbmltcG9ydCBLWUNGb3JtIGZyb20gXCIuLi9LWUNGb3JtXCI7XHJcbmltcG9ydCBLeWNBZmZpbGlhdGVPckNvbnRyb2xsZWRIdG1sIGZyb20gXCIuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNBZmZpbGlhdGVPckNvbnRyb2xsZWQuaHRtbFwiO1xyXG5pbXBvcnQgQ291bnRyeUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Db3VudHJ5SGVscGVyXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljQWZmaWxpYXRlT3JDb250cm9sbGVkIGV4dGVuZHMgS3ljQmFzZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGt5Y0Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGt5Y0FmZmlsaWF0ZU9yQ29udHJvbGxlZFRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0FmZmlsaWF0ZU9yQ29udHJvbGxlZEh0bWwpXHJcbiAgICAgICAgcmV0dXJuIGt5Y0FmZmlsaWF0ZU9yQ29udHJvbGxlZFRlbXBsYXRlKHtjb3VudHJpZXM6IENvdW50cnlIZWxwZXIuQ291bnRyaWVzfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kRmlsZVVwbG9hZHMoKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbXBhbnlfY291bnRyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wYW55X2NvdW50cnknKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGNvbXBhbnlfY291bnRyeT8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ID0gZXZ0LnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdC52YWx1ZSA9PT0gJ1VTQScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVxdWlyZWQoJ2NvbXBhbnlfc3RhdGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVxdWlyZWQoJ2NvbXBhbnlfc3RhdGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlKCkge1xyXG4gICAgICAgIGxldCBjb21wYW55X25hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGFueV9uYW1lJyk7XHJcbiAgICAgICAgaWYgKCFjb21wYW55X25hbWUpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVJlcXVpcmVkRmllbGRzKCcjYWZmaWxpYXRlX29yX2NvbnRyb2xsZWQnKVxyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0IGlkPVxcXCJpbW1lZGlhdGVfZmFtaWx5XFxcIj5cXHJcXG4gICAgPGRpdj5TaW5jZSB5b3UgY2hvc2UgdGhhdCB5b3VyIGltbWVkaWF0ZSBmYW1pbHkgbWVtYmVyLCB5b3UgbmVlZCB0byBmaWxsIGluIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb248L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcImRpc2Nsb3N1cmVfZ2l2ZW5fbmFtZVxcXCI+R2l2ZW4gbmFtZSBvZiBwb2xpdGljYWwgcGVyc29uPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBuYW1lPVxcXCJkaXNjbG9zdXJlX2dpdmVuX25hbWVcXFwiIGlkPVxcXCJkaXNjbG9zdXJlX2dpdmVuX25hbWVcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJkaXNjbG9zdXJlX2ZhbWlseV9uYW1lXFxcIj5GYW1pbHkgbmFtZSBvZiBwb2xpdGljYWwgcGVyc29uPC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBuYW1lPVxcXCJkaXNjbG9zdXJlX2ZhbWlseV9uYW1lXFxcIiBpZD1cXFwiZGlzY2xvc3VyZV9mYW1pbHlfbmFtZVxcXCIvPlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2ZpZWxkc2V0PlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgS3ljQmFzZSBmcm9tIFwiLi9LeWNCYXNlXCI7XHJcbmltcG9ydCBLWUNGb3JtIGZyb20gXCIuLi9LWUNGb3JtXCI7XHJcbmltcG9ydCBLeWNJbW1lZGlhdGVGYW1pbHlIdG1sIGZyb20gXCIuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNJbW1lZGlhdGVGYW1pbHkuaHRtbFwiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEt5Y0ltbWVkaWF0ZUZhbWlseSBleHRlbmRzIEt5Y0Jhc2Uge1xyXG4gICAgY29uc3RydWN0b3Ioa3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGt5Y0Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGt5Y0ltbWVkaWF0ZUZhbWlseVRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0ltbWVkaWF0ZUZhbWlseUh0bWwpO1xyXG4gICAgICAgIHJldHVybiBreWNJbW1lZGlhdGVGYW1pbHlUZW1wbGF0ZSh7fSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZEV2ZW50cygpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGUoKSB7XHJcbiAgICAgICAgbGV0IGRpc2Nsb3N1cmVfZ2l2ZW5fbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNjbG9zdXJlX2dpdmVuX25hbWUnKVxyXG4gICAgICAgIGlmICghZGlzY2xvc3VyZV9naXZlbl9uYW1lKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVSZXF1aXJlZEZpZWxkcygnI2ltbWVkaWF0ZV9mYW1pbHknKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEt5Y0Jhc2UgZnJvbSBcIi4vS3ljQmFzZVwiO1xyXG5pbXBvcnQgS1lDRm9ybSBmcm9tIFwiLi4vS1lDRm9ybVwiO1xyXG5pbXBvcnQgS3ljRGlzY2xvc3VyZUh0bWwgZnJvbSBcIi4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0t5Y0Rpc2Nsb3N1cmVzLmh0bWxcIjtcclxuaW1wb3J0IEt5Y0FmZmlsaWF0ZU9yQ29udHJvbGxlZCBmcm9tIFwiLi9LeWNBZmZpbGlhdGVPckNvbnRyb2xsZWRcIjtcclxuaW1wb3J0IEt5Y0ltbWVkaWF0ZUZhbWlseSBmcm9tIFwiLi9LeWNJbW1lZGlhdGVGYW1pbHlcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNEaXNjbG9zdXJlcyBleHRlbmRzIEt5Y0Jhc2Uge1xyXG4gICAga3ljQWZmaWxpYXRlZE9yQ29udHJvbGxlZDogS3ljQWZmaWxpYXRlT3JDb250cm9sbGVkO1xyXG4gICAga3ljSW1tZWRpYXRlRmFtaWx5OiBLeWNJbW1lZGlhdGVGYW1pbHk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa3ljRm9ybTogS1lDRm9ybSkge1xyXG4gICAgICAgIHN1cGVyKGt5Y0Zvcm0pO1xyXG5cclxuICAgICAgICB0aGlzLmt5Y0FmZmlsaWF0ZWRPckNvbnRyb2xsZWQgPSBuZXcgS3ljQWZmaWxpYXRlT3JDb250cm9sbGVkKHRoaXMua3ljRm9ybSk7XHJcbiAgICAgICAgdGhpcy5reWNJbW1lZGlhdGVGYW1pbHkgPSBuZXcgS3ljSW1tZWRpYXRlRmFtaWx5KHRoaXMua3ljRm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlZGl0ID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoS3ljRGlzY2xvc3VyZUh0bWwpO1xyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZSh7ZWRpdDogZWRpdH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmt5Y0Zvcm0uc3RlcHMgPT0gNSkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY2xvc3VyZXNfbmV4dCcpIS5pbm5lclRleHQgPSAnTmV4dDogQWdyZWVtZW50cyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2Nsb3N1cmVzX25leHQnKSEuaW5uZXJUZXh0ID0gJ05leHQ6IFVwbG9hZCBkb2N1bWVudHMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dGaWVsZHNldCgnLmt5Y0Rpc2Nsb3N1cmVzJywgJ0Rpc2Nsb3N1cmVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcblxyXG4gICAgICAgIGxldCBpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lzX2FmZmlsaWF0ZWRfZXhjaGFuZ2Vfb3JfZmlucmEnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlzX2FmZmlsaWF0ZWRfZXhjaGFuZ2Vfb3JfZmlucmE/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRBZmZpbGlhdGVkT3JDb250cm9sQ29tcG9uZW50KCdpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBpc19jb250cm9sX3BlcnNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpc19jb250cm9sX3BlcnNvbicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaXNfY29udHJvbF9wZXJzb24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRBZmZpbGlhdGVkT3JDb250cm9sQ29tcG9uZW50KCdpc19jb250cm9sX3BlcnNvbicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltbWVkaWF0ZV9mYW1pbHlfZXhwb3NlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkUGVwKCdpbW1lZGlhdGVfZmFtaWx5X2V4cG9zZWQnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBpc19wb2xpdGljYWxseV9leHBvc2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lzX3BvbGl0aWNhbGx5X2V4cG9zZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlzX3BvbGl0aWNhbGx5X2V4cG9zZWQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVuY2hlY2soJ2ltbWVkaWF0ZV9mYW1pbHlfZXhwb3NlZCcpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IG5vbmVfYWJvdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9uZV9hYm92ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbm9uZV9hYm92ZT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTWlzc2luZ0luZm8oJ25vbmVfYWJvdmVfZXJyb3InKTtcclxuICAgICAgICAgICAgbm9uZV9hYm92ZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBwcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2Nsb3N1cmVzX3ByZXYnKTtcclxuICAgICAgICBwcmV2Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5reWNGb3JtLmt5Y1RydXN0ZWRDb250YWN0LnNob3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IG5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY2xvc3VyZXNfbmV4dCcpO1xyXG4gICAgICAgIG5leHQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVGaWVsZHMoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5reWNGb3JtLnN0ZXBzID09IDUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua3ljRm9ybS5reWNBY2NvdW50QWdyZWVtZW50LnNob3coKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua3ljRm9ybS5reWNVcGxvYWQuc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkQWZmaWxpYXRlZE9yQ29udHJvbENvbXBvbmVudChlbGVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChlbGVtZW50SWQgPT0gJ2lzX2FmZmlsaWF0ZWRfZXhjaGFuZ2Vfb3JfZmlucmEnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5jaGVjaygnaXNfY29udHJvbF9wZXJzb24nKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5jaGVjaygnaXNfYWZmaWxpYXRlZF9leGNoYW5nZV9vcl9maW5yYScpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBsZXQgZXh0cmEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQgKyAnX2V4dHJhJyk7XHJcbiAgICAgICAgaWYgKCFleHRyYSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoZWxlbWVudC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGV4dHJhLmlubmVySFRNTCA9IHRoaXMua3ljQWZmaWxpYXRlZE9yQ29udHJvbGxlZC5yZW5kZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5reWNBZmZpbGlhdGVkT3JDb250cm9sbGVkLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBleHRyYS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkUGVwKGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnRJZCA9PSAnaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkJykge1xyXG4gICAgICAgICAgICB0aGlzLnVuY2hlY2soJ2lzX3BvbGl0aWNhbGx5X2V4cG9zZWQnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5jaGVjaygnaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGxldCBleHRyYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCArICdfZXh0cmEnKTtcclxuICAgICAgICBpZiAoIWV4dHJhKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgZXh0cmEuaW5uZXJIVE1MID0gdGhpcy5reWNJbW1lZGlhdGVGYW1pbHkucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMua3ljSW1tZWRpYXRlRmFtaWx5LmJpbmRFdmVudHMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBleHRyYS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1bmNoZWNrKGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGV4dHJhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkICsgJ19leHRyYScpITtcclxuICAgICAgICBleHRyYS5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlRmllbGRzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZVJlcXVpcmVkRmllbGRzKCcua3ljRGlzY2xvc3VyZXMnKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5reWNJbW1lZGlhdGVGYW1pbHkudmFsaWRhdGUoKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5reWNBZmZpbGlhdGVkT3JDb250cm9sbGVkLnZhbGlkYXRlKCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGlzX2FmZmlsaWF0ZWRfZXhjaGFuZ2Vfb3JfZmlucmEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXNfYWZmaWxpYXRlZF9leGNoYW5nZV9vcl9maW5yYScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGlzX2NvbnRyb2xfcGVyc29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lzX2NvbnRyb2xfcGVyc29uJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBsZXQgaXNfcG9saXRpY2FsbHlfZXhwb3NlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpc19wb2xpdGljYWxseV9leHBvc2VkJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBsZXQgaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltbWVkaWF0ZV9mYW1pbHlfZXhwb3NlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IG5vbmVfYWJvdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9uZV9hYm92ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmICghbm9uZV9hYm92ZS5jaGVja2VkICYmICFpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhLmNoZWNrZWQgJiYgIWlzX2NvbnRyb2xfcGVyc29uLmNoZWNrZWRcclxuICAgICAgICAgICAgJiYgIWlzX3BvbGl0aWNhbGx5X2V4cG9zZWQuY2hlY2tlZCAmJiAhaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkLmNoZWNrZWRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRNaXNzaW5nSW5mbygnbm9uZV9hYm92ZV9lcnJvcicsICdZb3UgbXVzdCBzZWxlY3QsIFwiTm9uZSBvZiB0aGUgYWJvdmUgYXBwbHkgdG8gbWUgb3IgbXkgZmFtaWx5LlwiIGlmIG5vdGhpbmcgaXMgc2VsZWN0ZWQnLCAnbm9uZV9hYm92ZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobm9uZV9hYm92ZS5jaGVja2VkICYmIChpc19hZmZpbGlhdGVkX2V4Y2hhbmdlX29yX2ZpbnJhLmNoZWNrZWQgfHwgaXNfY29udHJvbF9wZXJzb24uY2hlY2tlZFxyXG4gICAgICAgICAgICB8fCBpc19wb2xpdGljYWxseV9leHBvc2VkLmNoZWNrZWQgfHwgaW1tZWRpYXRlX2ZhbWlseV9leHBvc2VkLmNoZWNrZWRcclxuICAgICAgICApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWlzc2luZ0luZm8oJ25vbmVfYWJvdmVfZXJyb3InLCAnWW91IGNhbm5vdCBoYXZlIFwiTm9uZSBvZiB0aGUgYWJvdmUgYXBwbHkgdG8gbWUgb3IgbXkgZmFtaWx5LlwiIHNlbGVjdGVkIGFuZCBvdGhlciBvcHRpb25zIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IG9ubHkgb25lJywgJ25vbmVfYWJvdmUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgY2xhc3M9XFxcImt5Y0FjY291bnRBZ3JlZW1lbnQgaGlkZGVuXFxcIiBkYXRhLWZvcm09XFxcIjFcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJreWNBY2NvdW50QWdyZWVtZW50R3JpZFxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGlkPVxcXCJhY2NvdW50X2FncmVlbWVudF9lcnJvclxcXCIgY2xhc3M9XFxcImlucHV0X2Vycm9yXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImFjY291bnRfYWdyZWVtZW50XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiYWNjb3VudF9hZ3JlZW1lbnRcXFwiIGlkPVxcXCJhY2NvdW50X2FncmVlbWVudFxcXCIgdmFsdWU9XFxcIjFcXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJhY2NvdW50X2FncmVlbWVudFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBJIGFncmVlIHRvIDxhIGhyZWY9XFxcImh0dHBzOi8vZmlsZXMuYWxwYWNhLm1hcmtldHMvZGlzY2xvc3VyZXMvbGlicmFyeS9BY2N0QXBwTWFyZ2luQW5kQ3VzdEFnbXQucGRmXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+QWxwYWNhIEN1c3RvbWVyIEFncmVlbWVudDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBpZD1cXFwiY3VzdG9tZXJfYWdyZWVtZW50X2Vycm9yXFxcIiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiY3VzdG9tZXJfYWdyZWVtZW50XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZCB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiY3VzdG9tZXJfYWdyZWVtZW50XFxcIiBpZD1cXFwiY3VzdG9tZXJfYWdyZWVtZW50XFxcIiB2YWx1ZT1cXFwiMVxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImN1c3RvbWVyX2FncmVlbWVudFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBDdXN0b21lciBBZ3JlZW1lbnQgQWNrbm93bGVkZ2VtZW50PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZXhwbGFpblxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBJIGhhdmUgcmVhZCwgdW5kZXJzdG9vZCwgYW5kIGFncmVlIHRvIGJlIGJvdW5kIGJ5IEFscGFjYSBTZWN1cml0aWVzIExMQyBhbmQgTGltaW5hbC5tYXJrZXQgSW5jLlxcclxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGVybXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICBhbmQgYWxsIG90aGVyIHRlcm1zLCBkaXNjbG9zdXJlcyBhbmQgZGlzY2xhaW1lcnMgYXBwbGljYWJsZSB0byBtZSwgYXMgcmVmZXJlbmNlZCBpbiB0aGUgQWxwYWNhXFxyXFxuICAgICAgICAgICAgICAgICAgICBDdXN0b21lclxcclxcbiAgICAgICAgICAgICAgICAgICAgQWdyZWVtZW50LlxcclxcbiAgICAgICAgICAgICAgICAgICAgSSBhbHNvIGFja25vd2xlZGdlIHRoYXQgdGhlIEFscGFjYSBDdXN0b21lciBBZ3JlZW1lbnQgY29udGFpbnMgYSBwcmUtZGlzcHV0ZSBhcmJpdHJhdGlvbiBjbGF1c2VcXHJcXG4gICAgICAgICAgICAgICAgICAgIGluXFxyXFxuICAgICAgICAgICAgICAgICAgICBTZWN0aW9uXFxyXFxuICAgICAgICAgICAgICAgICAgICA0My5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgaWQ9XFxcImRpZ2l0YWxfc2lnbmF0dXJlX2Vycm9yXFxcIiBjbGFzcz1cXFwiaW5wdXRfZXJyb3JcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiZGlnaXRhbF9zaWduYXR1cmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHJlcXVpcmVkIHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJkaWdpdGFsX3NpZ25hdHVyZVxcXCIgaWQ9XFxcImRpZ2l0YWxfc2lnbmF0dXJlXFxcIiB2YWx1ZT1cXFwiMVxcXCIvPlxcclxcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImRpZ2l0YWxfc2lnbmF0dXJlXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIERpZ2l0YWwgU2lnbmF0dXJlIEFja25vd2xlZGdlbWVudDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImV4cGxhaW5cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgSSB1bmRlcnN0YW5kIEkgYW0gc2lnbmluZyB0aGlzIGFncmVlbWVudCBlbGVjdHJvbmljYWxseSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGFuZCB0aGF0IG15IGVsZWN0cm9uaWMgc2lnbmF0dXJlIHdpbGwgaGF2ZSB0aGUgc2FtZSBlZmZlY3QgYXMgcGh5c2ljYWxseSBzaWduaW5nIGFuZCByZXR1cm5pbmdcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoZVxcclxcbiAgICAgICAgICAgICAgICAgICAgQXBwbGljYXRpb24gQWdyZWVtZW50LlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3JpZCBoaWRkZW5cXFwiIGlkPVxcXCJ3OGRpc2Nsb3N1cmVfZGl2XFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJ3OGRpc2Nsb3N1cmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHJlcXVpcmVkIHR5cGU9XFxcImNoZWNrYm94XFxcIiBuYW1lPVxcXCJ3OGRpc2Nsb3N1cmVcXFwiIGlkPVxcXCJ3OGRpc2Nsb3N1cmVcXFwiIHZhbHVlPVxcXCIxXFxcIi8+XFxyXFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdj48bGFiZWwgZm9yPVxcXCJ3OGRpc2Nsb3N1cmVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICBJIGNlcnRpZnkgdGhhdCBJIGFtIG5vdCBhIFVTIGNpdGl6ZW4sIFVTIHJlc2lkZW50IGFsaWVuIG9yIG90aGVyIFVTIHBlcnNvbiBmb3IgVVMgdGF4IHB1cnBvc2VzLFxcclxcbiAgICAgICAgICAgICAgICBhbmQgSSBhbSBzdWJtaXR0aW5nIHRoZSBhcHBsaWNhYmxlIEZvcm0gVy04IEJFTiB3aXRoIHRoaXMgZm9ybSB0byBjZXJ0aWZ5IG15IGZvcmVpZ24gc3RhdHVzIGFuZCxcXHJcXG4gICAgICAgICAgICAgICAgaWYgYXBwbGljYWJsZSwgY2xhaW0gdGF4IHRyZWF0eSBiZW5lZml0cy4gPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3JpZCBidXR0b25zXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBpZD1cXFwiYWNjb3VudF9hZ3JlZW1lbnRfcHJldlxcXCI+UHJldmlvdXM6IFVwbG9hZCBkb2N1bWVudHM8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxidXR0b24gdHlwZT1cXFwic3VibWl0XFxcIiBpZD1cXFwic3VibWl0S1lDXFxcIj5Db25maXJtIGlkZW50aXR5PC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1kYW5nZXJcXFwiIGlkPVxcXCJreWNFcnJvclxcXCIgcm9sZT1cXFwiYWxlcnRcXFwiPjwvZGl2PlxcclxcbjwvZmllbGRzZXQ+XFxyXFxuXCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBLeWNCYXNlIGZyb20gXCIuL0t5Y0Jhc2VcIjtcclxuaW1wb3J0IEtZQ0Zvcm0gZnJvbSBcIi4uL0tZQ0Zvcm1cIjtcclxuaW1wb3J0IEt5Y0FjY291bnRBZ3JlZW1lbnRIdG1sIGZyb20gXCIuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNBY2NvdW50QWdyZWVtZW50Lmh0bWxcIjtcclxuaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvTG9hZGluZ0hlbHBlclwiO1xyXG5pbXBvcnQgTmV0d29ya0luZm8gZnJvbSBcIi4uLy4uLy4uL25ldHdvcmtzL05ldHdvcmtJbmZvXCI7XHJcbmltcG9ydCBLWUNTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0tZQ1NlcnZpY2VcIjtcclxuaW1wb3J0IEt5Y1ZhbGlkYXRvckVycm9yIGZyb20gXCIuLi8uLi8uLi9lcnJvcnMvY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuaW1wb3J0IEZvcm1IZWxwZXIgZnJvbSBcIi4uLy4uLy4uL3V0aWwvRm9ybUhlbHBlclwiO1xyXG5pbXBvcnQgRXhlY3V0ZVRyYWRlQnV0dG9uIGZyb20gXCIuLi8uLi9lbGVtZW50cy90cmFkZXBhbmVsL0V4ZWN1dGVUcmFkZUJ1dHRvblwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljQWNjb3VudEFncmVlbWVudCBleHRlbmRzIEt5Y0Jhc2Uge1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihreWNGb3JtOiBLWUNGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIoa3ljRm9ybSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKGVkaXQgPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShLeWNBY2NvdW50QWdyZWVtZW50SHRtbCk7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlKHtlZGl0OiBlZGl0fSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RmllbGRzZXQoJy5reWNBY2NvdW50QWdyZWVtZW50JywgJ0FncmVlbWVudHMnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMua3ljRm9ybS5zdGVwcyA9PSA1KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NvdW50X2FncmVlbWVudF9wcmV2JykhLmlubmVyVGV4dCA9ICdQcmV2aW91czogRGlzY2xvc3VyZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnRfYWdyZWVtZW50X3ByZXYnKSEuaW5uZXJUZXh0ID0gJ1ByZXZpb3VzOiBVcGxvYWQgZG9jdW1lbnRzJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMua3ljRm9ybS5reWNDb250YWN0LnVzVGF4UmVzaWRlbmNlKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3OGRpc2Nsb3N1cmVfZGl2Jyk/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3c4ZGlzY2xvc3VyZV9kaXYnKT8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcblxyXG4gICAgICAgIGxldCBhY2NvdW50X2FncmVlbWVudF9wcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY291bnRfYWdyZWVtZW50X3ByZXYnKVxyXG4gICAgICAgIGFjY291bnRfYWdyZWVtZW50X3ByZXY/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5reWNGb3JtLnN0ZXBzID09IDUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMua3ljRm9ybS5reWNEaXNjbG9zdXJlcy5zaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmt5Y0Zvcm0ua3ljVXBsb2FkLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuYmluZFN1Ym1pdEt5YygpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYmluZFN1Ym1pdEt5YyhlZGl0ID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgc3VibWl0S1lDID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdEtZQycpO1xyXG4gICAgICAgIGlmICghc3VibWl0S1lDKSByZXR1cm47XHJcblxyXG4gICAgICAgIHN1Ym1pdEtZQy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWVkaXQgJiYgIXRoaXMudmFsaWRhdGUoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFjY291bnRfYWdyZWVtZW50X3ByZXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudF9hZ3JlZW1lbnRfcHJldicpO1xyXG4gICAgICAgICAgICAvL2lmIChhY2NvdW50X2FncmVlbWVudF9wcmV2KSBhY2NvdW50X2FncmVlbWVudF9wcmV2LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxpbWluYWxfbWFya2V0X21vZGFsX2Nsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X21vZGFsX2Nsb3NlJyk7XHJcbiAgICAgICAgICAgIC8vIGlmIChsaW1pbmFsX21hcmtldF9tb2RhbF9jbG9zZSkgbGltaW5hbF9tYXJrZXRfbW9kYWxfY2xvc2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIGxldCBzdWJtaXRCdG4gPSAoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgICAgIExvYWRpbmdIZWxwZXIuc2V0TG9hZGluZyhzdWJtaXRCdG4pO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IEZvcm1IZWxwZXIuZ2V0UGFyYW1zKCcja3ljX3dpemFyZF9mb3JtJyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICBwYXJhbXMuY2hhaW5JZCA9IG5ldHdvcmtJbmZvLkNoYWluSWQ7XHJcblxyXG4gICAgICAgICAgICBsZXQga3ljU2VydmljZSA9IG5ldyBLWUNTZXJ2aWNlKE1vcmFsaXMpO1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQga3ljU2VydmljZS5zYXZlS1lDSW5mbyhwYXJhbXMpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnRfYWdyZWVtZW50X3ByZXYpIGFjY291bnRfYWdyZWVtZW50X3ByZXYuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5yZW1vdmVMb2FkaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWFzb24ubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga3ljRXJyb3IgPSBuZXcgS3ljVmFsaWRhdG9yRXJyb3IocmVhc29uLm1lc3NhZ2UsIHRoaXMua3ljRm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGt5Y0Vycm9yLmhhbmRsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmt5Y0Zvcm0ua3ljV2FpdGluZy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBFeGVjdXRlVHJhZGVCdXR0b24uSW5zdGFuY2UucmVuZGVyQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudF9hZ3JlZW1lbnRfcHJldikgYWNjb3VudF9hZ3JlZW1lbnRfcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIExvYWRpbmdIZWxwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZSgpIHtcclxuICAgICAgICBsZXQgYWNjb3VudF9hZ3JlZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3VudF9hZ3JlZW1lbnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmICghYWNjb3VudF9hZ3JlZW1lbnQ/LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRNaXNzaW5nSW5mbygnYWNjb3VudF9hZ3JlZW1lbnRfZXJyb3InLCAnWW91IG5lZWQgdG8gYWdyZWUgdG8gYWdyZWVtZW50cycsICdhY2NvdW50X2FncmVlbWVudCcpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZU1pc3NpbmdJbmZvKCdhY2NvdW50X2FncmVlbWVudF9lcnJvcicsICdhY2NvdW50X2FncmVlbWVudCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGN1c3RvbWVyX2FncmVlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21lcl9hZ3JlZW1lbnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmICghY3VzdG9tZXJfYWdyZWVtZW50Py5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWlzc2luZ0luZm8oJ2N1c3RvbWVyX2FncmVlbWVudF9lcnJvcicsICdZb3UgbmVlZCB0byBhZ3JlZSB0byBjdXN0b21lciBhZ3JlbWVudCcsICdjdXN0b21lcl9hZ3JlZW1lbnQnKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVNaXNzaW5nSW5mbygnY3VzdG9tZXJfYWdyZWVtZW50X2Vycm9yJywgJ2N1c3RvbWVyX2FncmVlbWVudCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGlnaXRhbF9zaWduYXR1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlnaXRhbF9zaWduYXR1cmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmICghZGlnaXRhbF9zaWduYXR1cmU/LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRNaXNzaW5nSW5mbygnZGlnaXRhbF9zaWduYXR1cmVfZXJyb3InLCAnWW91IG5lZWQgdG8gc2lnbicsICdkaWdpdGFsX3NpZ25hdHVyZScpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZU1pc3NpbmdJbmZvKCdkaWdpdGFsX3NpZ25hdHVyZV9lcnJvcicsICdkaWdpdGFsX3NpZ25hdHVyZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICB9XHJcblxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGZpZWxkc2V0IGNsYXNzPVxcXCJreWNUcnVzdGVkQ29udGFjdCBoaWRkZW5cXFwiIGRhdGEtZm9ybT1cXFwiMVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImV4cGxhaW5cXFwiPlxcclxcbiAgICAgICAgQSB0cnVzdGVkIGNvbnRhY3QgaXMgYSBwZXJzb24geW91IGF1dGhvcml6ZSB5b3VyIGZpbmFuY2lhbCBmaXJtIHRvIGNvbnRhY3QgaW4gbGltaXRlZCBjaXJjdW1zdGFuY2VzLFxcclxcbiAgICAgICAgc3VjaCBhcyBpZiB0aGVyZSBpcyBhIGNvbmNlcm4gYWJvdXQgYWN0aXZpdHkgaW4geW91ciBhY2NvdW50IGFuZCB0aGV5IGhhdmUgYmVlbiB1bmFibGUgdG8gZ2V0IGluIHRvdWNoIHdpdGggeW91LlxcclxcbiAgICAgICAgPGJyLz48YnIvPlxcclxcbiAgICAgICAgQSB0cnVzdGVkIGNvbnRhY3QgbWF5IGJlIGEgZmFtaWx5IG1lbWJlciwgYXR0b3JuZXksIGFjY291bnRhbnQgb3IgYW5vdGhlciB0aGlyZC1wYXJ0eSB3aG8geW91IGJlbGlldmUgd291bGRcXHJcXG4gICAgICAgIHJlc3BlY3QgeW91ciBwcml2YWN5IGFuZCBrbm93IGhvdyB0byBoYW5kbGUgdGhlIHJlc3BvbnNpYmlsaXR5LlxcclxcbiAgICAgICAgVGhlIHRydXN0ZWQgcGVyc29uIHNob3VsZCBiZSAxOCB5ZWFycyBvbGQgb3Igb2xkZXIuXFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwidHJ1c3RlZF9maXJzdF9uYW1lXFxcIj5MZWdhbCBmaXJzdCBuYW1lIG9mIHRydXN0ZWQgY29udGFjdDwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgaWQ9XFxcInRydXN0ZWRfZmlyc3RfbmFtZVxcXCIgbmFtZT1cXFwidHJ1c3RlZF9maXJzdF9uYW1lXFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwidHJ1c3RlZF9sYXN0X25hbWVcXFwiPkxlZ2FsIGxhc3QgbmFtZSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IGlkPVxcXCJ0cnVzdGVkX2xhc3RfbmFtZVxcXCIgbmFtZT1cXFwidHJ1c3RlZF9sYXN0X25hbWVcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICBJZiB5b3UgZmlsbCBpbiBuYW1lLCB5b3UgYXJlIHJlcXVpcmVkIHRvIGZpbGwgaW4gb25lIG9mIHRoZSBmb2xsb3dpbmcsIGVtYWlsLCBwaG9uZSBvciBhZGRyZXNzXFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJpbnB1dF9lcnJvclxcXCIgaWQ9XFxcInRydXN0ZWRfY29udGFjdF9taXNzaW5nX2luZm9cXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwidHJ1c3RlZF9lbWFpbFxcXCI+RW1haWwgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBpZD1cXFwidHJ1c3RlZF9lbWFpbFxcXCIgdHlwZT1cXFwiZW1haWxcXFwiIG5hbWU9XFxcInRydXN0ZWRfZW1haWxcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJ0cnVzdGVkX3Bob25lXFxcIj5QaG9uZSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IGlkPVxcXCJ0cnVzdGVkX3Bob25lXFxcIiB0eXBlPVxcXCJ0ZWxcXFwiIG5hbWU9XFxcInRydXN0ZWRfcGhvbmVcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJ0cnVzdGVkX3N0cmVldF9hZGRyZXNzXFxcIj5BZGRyZXNzIG9mIHRydXN0ZWQgY29udGFjdDwvbGFiZWw+XFxyXFxuICAgICAgICA8aW5wdXQgaWQ9XFxcInRydXN0ZWRfc3RyZWV0X2FkZHJlc3NcXFwiIG5hbWU9XFxcInRydXN0ZWRfc3RyZWV0X2FkZHJlc3NcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJ0cnVzdGVkX2NpdHlcXFwiPkNpdHkgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBpZD1cXFwidHJ1c3RlZF9jaXR5XFxcIiBuYW1lPVxcXCJ0cnVzdGVkX2NpdHlcXFwiLz5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXY+XFxyXFxuICAgICAgICA8bGFiZWwgZm9yPVxcXCJ0cnVzdGVkX3N0YXRlXFxcIj5TdGF0ZSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgPGlucHV0IGlkPVxcXCJ0cnVzdGVkX3N0YXRlXFxcIiBuYW1lPVxcXCJ0cnVzdGVkX3N0YXRlXFxcIi8+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2PlxcclxcbiAgICAgICAgPGxhYmVsIGZvcj1cXFwidHJ1c3RlZF9wb3N0YWxfY29kZVxcXCI+UG9zdGFsIGNvZGUgb2YgdHJ1c3RlZCBjb250YWN0PC9sYWJlbD5cXHJcXG4gICAgICAgIDxpbnB1dCBpZD1cXFwidHJ1c3RlZF9wb3N0YWxfY29kZVxcXCIgbmFtZT1cXFwidHJ1c3RlZF9wb3N0YWxfY29kZVxcXCIvPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdj5cXHJcXG4gICAgICAgIDxsYWJlbCBmb3I9XFxcInRydXN0ZWRfY291bnRyeVxcXCI+Q291bnRyeSBvZiB0cnVzdGVkIGNvbnRhY3Q8L2xhYmVsPlxcclxcbiAgICAgICAgPHNlbGVjdCByZXF1aXJlZCBpZD1cXFwidHJ1c3RlZF9jb3VudHJ5XFxcIiByZXF1aXJlZCBuYW1lPVxcXCJ0cnVzdGVkX2NvdW50cnlcXFwiPlxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIlxcXCI+PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAge3sjZWFjaCBjb3VudHJpZXN9fVxcclxcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcInt7Y29kZX19XFxcIj57e25hbWV9fTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgIHt7L2VhY2h9fVxcclxcbiAgICAgICAgPC9zZWxlY3Q+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICB7eyN1bmxlc3MgZWRpdH19XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWQgYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcInRydXN0ZWRDb250YWN0X3ByZXZcXFwiPlByZXZpb3VzOiBJZGVudGl0eTwvYnV0dG9uPlxcclxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGlkPVxcXCJ0cnVzdGVkQ29udGFjdF9uZXh0XFxcIj5OZXh0OiBEaXNjbG9zdXJlczwvYnV0dG9uPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAge3svdW5sZXNzfX1cXHJcXG4gICAge3sjaWYgZWRpdH19XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWQgYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcInRydXN0ZWRDb250YWN0X3ByZXZcXFwiPlByZXZpb3VzOiBJZGVudGl0eTwvYnV0dG9uPlxcclxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJzdWJtaXRcXFwiIGlkPVxcXCJzdWJtaXRLWUNcXFwiPlVwZGF0ZSBhY2NvdW50PC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGVydCBhbGVydC1kYW5nZXJcXFwiIGlkPVxcXCJreWNFcnJvclxcXCIgcm9sZT1cXFwiYWxlcnRcXFwiPjwvZGl2PlxcclxcbiAgICB7ey9pZn19XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IEt5Y0Jhc2UgZnJvbSBcIi4vS3ljQmFzZVwiO1xyXG5pbXBvcnQgS1lDRm9ybSBmcm9tIFwiLi4vS1lDRm9ybVwiO1xyXG5pbXBvcnQgS3ljVHJ1c3RlZENvbnRhY3RIdG1sIGZyb20gJy4uLy4uLy4uL2h0bWwvbW9kYWwvS3ljL0t5Y1RydXN0ZWRDb250YWN0Lmh0bWwnO1xyXG5pbXBvcnQgU3RyaW5nSGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL1N0cmluZ0hlbHBlclwiO1xyXG5pbXBvcnQgQ291bnRyeUhlbHBlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9Db3VudHJ5SGVscGVyXCI7XHJcblxyXG5pbXBvcnQgS3ljQWNjb3VudEFncmVlbWVudCBmcm9tIFwiLi9LeWNBY2NvdW50QWdyZWVtZW50XCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljVHJ1c3RlZENvbnRhY3QgZXh0ZW5kcyBLeWNCYXNlIHtcclxuICAgIGVkaXQgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihreWNGb3JtOiBLWUNGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIoa3ljRm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihlZGl0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmVkaXQgPSBlZGl0O1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoS3ljVHJ1c3RlZENvbnRhY3RIdG1sKTtcclxuICAgICAgICByZXR1cm4gdGVtcGxhdGUoe2VkaXQ6IGVkaXQsIGNvdW50cmllczogQ291bnRyeUhlbHBlci5Db3VudHJpZXN9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvdygpIHtcclxuICAgICAgICB0aGlzLnNob3dGaWVsZHNldCgnLmt5Y1RydXN0ZWRDb250YWN0JywgJ1RydXN0ZWQgY29udGFjdCcpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgbGV0IHNob3dQcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRDb250YWN0X3ByZXYnKTtcclxuICAgICAgICBzaG93UHJldj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMua3ljRm9ybS5reWNJZGVudGl0eS5zaG93KCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IHNob3dOZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRDb250YWN0X25leHQnKTtcclxuICAgICAgICBzaG93TmV4dD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy52YWxpZGF0ZSgpKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMua3ljRm9ybS5reWNEaXNjbG9zdXJlcy5zaG93KCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdCkge1xyXG4gICAgICAgICAgICBsZXQga3ljQWNjb3VudCA9IG5ldyBLeWNBY2NvdW50QWdyZWVtZW50KHRoaXMua3ljRm9ybSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy52YWxpZGF0ZSgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBreWNBY2NvdW50LmJpbmRTdWJtaXRLeWModGhpcy5lZGl0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLnNldE1pc3NpbmdJbmZvKCd0cnVzdGVkX2NvbnRhY3RfbWlzc2luZ19pbmZvJywgJycpO1xyXG5cclxuICAgICAgICBsZXQgdHJ1c3RlZF9maXJzdF9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRfZmlyc3RfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRydXN0ZWRfZmlyc3RfbmFtZSAmJiAhU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9maXJzdF9uYW1lLnZhbHVlKSkge1xyXG4gICAgICAgICAgICBsZXQgdHJ1c3RlZF9lbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cnVzdGVkX2VtYWlsJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHRydXN0ZWRfcGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJ1c3RlZF9waG9uZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCB0cnVzdGVkX3N0cmVldF9hZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRfc3RyZWV0X2FkZHJlc3MnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgdHJ1c3RlZF9jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRfY2l0eScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCB0cnVzdGVkX3Bvc3RhbF9jb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRfcG9zdGFsX2NvZGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgdHJ1c3RlZF9jb3VudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0ZWRfY291bnRyeScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9lbWFpbC52YWx1ZSkgJiYgU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9waG9uZS52YWx1ZSlcclxuICAgICAgICAgICAgICAgICYmIFN0cmluZ0hlbHBlci5pc051bGxPckVtcHR5KHRydXN0ZWRfc3RyZWV0X2FkZHJlc3MudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1pc3NpbmdJbmZvKCd0cnVzdGVkX2NvbnRhY3RfbWlzc2luZ19pbmZvJywgJ1lvdSBuZWVkIHRvIGZpbGwgaW4gZWl0aGVyIGVtYWlsLCBwaG9uZSBvciBhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9lbWFpbC52YWx1ZSkgJiYgdHJ1c3RlZF9lbWFpbC52YWx1ZS5pbmRleE9mKCdAJykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWlzc2luZ0luZm8oJ3RydXN0ZWRfY29udGFjdF9taXNzaW5nX2luZm8nLCAnRW1haWwgaXMgbm90IHZhbGlkLiBJdCBtdXN0IGNvbnRhaW4gQCBzaWduJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9zdHJlZXRfYWRkcmVzcy52YWx1ZSkgJiZcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eSh0cnVzdGVkX2NpdHkudmFsdWUpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgU3RyaW5nSGVscGVyLmlzTnVsbE9yRW1wdHkodHJ1c3RlZF9wb3N0YWxfY29kZS52YWx1ZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICBTdHJpbmdIZWxwZXIuaXNOdWxsT3JFbXB0eSh0cnVzdGVkX2NvdW50cnkudmFsdWUpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNaXNzaW5nSW5mbygndHJ1c3RlZF9jb250YWN0X21pc3NpbmdfaW5mbycsICdZb3UgbmVlZCBmaWxsIGlubiBpbnRvIENpdHksIFBvc3RhbCBjb2RlIGFuZCBDb3VudHJ5IHdoZW4gZmlsbGluZyB0aGUgc3RyZWV0IGFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZmllbGRzZXQgY2xhc3M9XFxcImt5Y1VwbG9hZCBoaWRkZW5cXFwiIGRhdGEtZm9ybT1cXFwiMVxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAge3t7ZmlsZVVwbG9hZCBcXFwiaWRlbnRpdHlfdmVyaWZpY2F0aW9uXFxcIiBcXFwiUGhvdG8gSUQgRnJvbnQgKEZyb250IG9mIHBhc3Nwb3J0KVxcXCJ9fX1cXHJcXG4gICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWRcXFwiPlxcclxcbiAgICAgICAge3t7ZmlsZVVwbG9hZCBcXFwiaWRlbnRpdHlfdmVyaWZpY2F0aW9uXzJcXFwiIFxcXCJQaG90byBJRCBCYWNrIChQYXNzcG9ydCBwaWN0dXJlIG9mIElEKSBcXFwifX19XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkXFxcIj5cXHJcXG4gICAgICAgIHt7e2ZpbGVVcGxvYWQgXFxcImFkZHJlc3NfdmVyaWZpY2F0aW9uXFxcIiBcXFwiUGljdHVyZSBvZiBhZGRyZXNzIHZlcmlmaWNhdGlvblxcXCJ9fX1cXHJcXG4gICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdyaWQgYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcInVwbG9hZF9wcmV2XFxcIj5QcmV2aW91czogRGlzY2xvc3VyZXM8L2J1dHRvbj5cXHJcXG4gICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBpZD1cXFwidXBsb2FkX25leHRcXFwiPk5leHQ6IEFncmVlbWVudHM8L2J1dHRvbj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9maWVsZHNldD5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IEt5Y0Jhc2UgZnJvbSBcIi4vS3ljQmFzZVwiO1xyXG5pbXBvcnQgS3ljVXBsb2FkSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL21vZGFsL0t5Yy9LeWNVcGxvYWQuaHRtbCc7XHJcbmltcG9ydCBLWUNGb3JtIGZyb20gXCIuLi9LWUNGb3JtXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS3ljVXBsb2FkIGV4dGVuZHMgS3ljQmFzZSB7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGt5Y0Zvcm06IEtZQ0Zvcm0pIHtcclxuICAgICAgICBzdXBlcihreWNGb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShLeWNVcGxvYWRIdG1sKTtcclxuICAgICAgICByZXR1cm4gdGVtcGxhdGUoe30pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpZWxkc2V0KCcua3ljVXBsb2FkJywgJ1VwbG9hZCBkb2N1bWVudHMnKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuYmluZEZpbGVVcGxvYWRzKCk7XHJcblxyXG4gICAgICAgIGxldCB1cGxvYWRfcHJldiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRfcHJldicpO1xyXG4gICAgICAgIHVwbG9hZF9wcmV2Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5reWNGb3JtLmt5Y0Rpc2Nsb3N1cmVzLnNob3coKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCB1cGxvYWRfbmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRfbmV4dCcpO1xyXG4gICAgICAgIHVwbG9hZF9uZXh0Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUmVxdWlyZWRGaWVsZHMoJy5reWNVcGxvYWQnKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5reWNGb3JtLmt5Y0FjY291bnRBZ3JlZW1lbnQuc2hvdygpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQgS3ljQmFzZSBmcm9tIFwiLi9LeWNCYXNlXCI7XHJcbmltcG9ydCBLWUNGb3JtIGZyb20gXCIuLi9LWUNGb3JtXCI7XHJcbmltcG9ydCBLWUNTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0tZQ1NlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEt5Y1dhaXRpbmcgZXh0ZW5kcyBLeWNCYXNlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihreWNGb3JtOiBLWUNGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIoa3ljRm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3coKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19yZWcnKT8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FpdGluZ19mb3Jfa3ljX3JlZycpPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGltaW5hbF9tYXJrZXRfbW9kYWxfZGl2ID4gYXJ0aWNsZSA+IGhlYWRlciA+IHNwYW4nKSEuaW5uZXJIVE1MID0gJ1dhaXRpbmcgZm9yIEtZQyB0byBiZSBhcHByb3ZlZCdcclxuICAgICAgICB0aGlzLmt5Y0Zvcm0udGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrS3ljU3RhdHVzKClcclxuICAgICAgICB9LCA1ICogMTAwMClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY2hlY2tLeWNTdGF0dXMoKSB7XHJcbiAgICAgICAgbGV0IGt5Y1NlcnZpY2UgPSBuZXcgS1lDU2VydmljZShNb3JhbGlzKTtcclxuICAgICAgICBsZXQga3ljUmVzcG9uc2UgPSBhd2FpdCBreWNTZXJ2aWNlLmhhc1ZhbGlkS1lDKClcclxuXHJcbiAgICAgICAgaWYgKGt5Y1Jlc3BvbnNlLmlzVmFsaWRLeWMpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua3ljRm9ybS50aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMua3ljRm9ybS5tb2RhbC5oaWRlTW9kYWwoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmt5Y0Zvcm0udGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0t5Y1N0YXR1cygpXHJcbiAgICAgICAgICAgIH0sIDUgKiAxMDAwKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgS1lDRm9ybUh0bWwgZnJvbSAnLi4vLi4vaHRtbC9tb2RhbC9LWUNNb2RhbC5odG1sJztcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsXCI7XHJcbmltcG9ydCBLeWNDb250YWN0IGZyb20gXCIuL0tZQy9LeWNDb250YWN0XCI7XHJcbmltcG9ydCBLeWNJZGVudGl0eSBmcm9tIFwiLi9LWUMvS3ljSWRlbnRpdHlcIjtcclxuaW1wb3J0IEt5Y0Rpc2Nsb3N1cmVzIGZyb20gXCIuL0tZQy9LeWNEaXNjbG9zdXJlc1wiO1xyXG5pbXBvcnQgS3ljQWNjb3VudEFncmVlbWVudCBmcm9tIFwiLi9LWUMvS3ljQWNjb3VudEFncmVlbWVudFwiO1xyXG5pbXBvcnQgS3ljVHJ1c3RlZENvbnRhY3QgZnJvbSBcIi4vS1lDL0t5Y1RydXN0ZWRDb250YWN0XCI7XHJcbmltcG9ydCBLeWNVcGxvYWQgZnJvbSBcIi4vS1lDL0t5Y1VwbG9hZFwiO1xyXG5pbXBvcnQgS3ljV2FpdGluZyBmcm9tIFwiLi9LWUMvS3ljV2FpdGluZ1wiO1xyXG5pbXBvcnQgRXhlY3V0ZVRyYWRlQnV0dG9uIGZyb20gXCIuLi9lbGVtZW50cy90cmFkZXBhbmVsL0V4ZWN1dGVUcmFkZUJ1dHRvblwiO1xyXG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLWUNGb3JtIHtcclxuICAgIHN0ZXBzID0gNTtcclxuICAgIG1vZGFsOiBNb2RhbDtcclxuICAgIHRpbWVvdXQ/OiBhbnkgPSB1bmRlZmluZWQ7XHJcbiAgICBvbkhpZGU6ICgpID0+IHZvaWQ7XHJcbiAgICBhY3RpdmVGaWVsZHNldFNlbGVjdG9yID0gJy5reWNDb250YWN0JztcclxuXHJcbiAgICBreWNDb250YWN0OiBLeWNDb250YWN0O1xyXG4gICAga3ljSWRlbnRpdHk6IEt5Y0lkZW50aXR5O1xyXG4gICAga3ljRGlzY2xvc3VyZXM6IEt5Y0Rpc2Nsb3N1cmVzXHJcbiAgICBreWNBY2NvdW50QWdyZWVtZW50OiBLeWNBY2NvdW50QWdyZWVtZW50O1xyXG4gICAga3ljVHJ1c3RlZENvbnRhY3Q6IEt5Y1RydXN0ZWRDb250YWN0O1xyXG4gICAga3ljVXBsb2FkOiBLeWNVcGxvYWQ7XHJcbiAgICBreWNXYWl0aW5nOiBLeWNXYWl0aW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9uSGlkZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICB0aGlzLm9uSGlkZSA9IG9uSGlkZTtcclxuXHJcbiAgICAgICAgdGhpcy5reWNDb250YWN0ID0gbmV3IEt5Y0NvbnRhY3QodGhpcyk7XHJcbiAgICAgICAgdGhpcy5reWNJZGVudGl0eSA9IG5ldyBLeWNJZGVudGl0eSh0aGlzKTtcclxuICAgICAgICB0aGlzLmt5Y1RydXN0ZWRDb250YWN0ID0gbmV3IEt5Y1RydXN0ZWRDb250YWN0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMua3ljRGlzY2xvc3VyZXMgPSBuZXcgS3ljRGlzY2xvc3VyZXModGhpcyk7XHJcbiAgICAgICAgdGhpcy5reWNBY2NvdW50QWdyZWVtZW50ID0gbmV3IEt5Y0FjY291bnRBZ3JlZW1lbnQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5reWNVcGxvYWQgPSBuZXcgS3ljVXBsb2FkKHRoaXMpO1xyXG4gICAgICAgIHRoaXMua3ljV2FpdGluZyA9IG5ldyBLeWNXYWl0aW5nKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KGNsYXNzTmFtZTogc3RyaW5nKSB7XHJcblxyXG4gICAgICAgIGxldCBreWNGb3JtID0gbmV3IEtZQ0Zvcm0oKCkgPT4ge1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHR5cGUgT2JqZWN0S2V5ID0ga2V5b2YgdHlwZW9mIGt5Y0Zvcm07XHJcbiAgICAgICAgY29uc3QgYmxlID0gY2xhc3NOYW1lIGFzIE9iamVjdEtleTtcclxuICAgICAgICAodGhpc1tibGVdIGFzIGFueSkuc2hvdygpO1xyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZUZpZWxkc2V0U2VsZWN0b3IgPSBjbGFzc05hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dLWUNGb3JtKGVkaXQgPSBmYWxzZSkge1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoS1lDRm9ybUh0bWwpO1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIEt5Y0NvbnRhY3RIdG1sOiB0aGlzLmt5Y0NvbnRhY3QucmVuZGVyKCksXHJcbiAgICAgICAgICAgIEt5Y0lkZW50aXR5SHRtbDogdGhpcy5reWNJZGVudGl0eS5yZW5kZXIoKSxcclxuICAgICAgICAgICAgS3ljRGlzY2xvc3VyZUh0bWw6IHRoaXMua3ljRGlzY2xvc3VyZXMucmVuZGVyKCksXHJcbiAgICAgICAgICAgIEt5Y1RydXN0ZWRDb250YWN0SHRtbDogdGhpcy5reWNUcnVzdGVkQ29udGFjdC5yZW5kZXIoKSxcclxuICAgICAgICAgICAgS3ljQWNjb3VudEFncmVlbWVudEh0bWw6IHRoaXMua3ljQWNjb3VudEFncmVlbWVudC5yZW5kZXIoKSxcclxuICAgICAgICAgICAgS3ljVXBsb2FkSHRtbDogdGhpcy5reWNVcGxvYWQucmVuZGVyKClcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0ZW1wbGF0ZShvYmopO1xyXG4gICAgICAgIGxldCBuZXdNb2RhbCA9IHRoaXMubW9kYWwuc2hvd01vZGFsKCdLWUMgJiBBTUwnLCBjb250ZW50LCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub25IaWRlKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICBsZXQgdGF4UmVzaWRlbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50cnlfb2ZfdGF4X3Jlc2lkZW5jZScpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgICAgIGlmICh0YXhSZXNpZGVuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGVwcyA9ICh0YXhSZXNpZGVuY2UudmFsdWUgPT0gJ1VTQScpID8gNSA6IDY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3TW9kYWwpIHtcclxuICAgICAgICAgICAgdGhpcy5reWNDb250YWN0LmJpbmRFdmVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5reWNJZGVudGl0eS5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMua3ljVHJ1c3RlZENvbnRhY3QuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmt5Y0Rpc2Nsb3N1cmVzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5reWNVcGxvYWQuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmt5Y0FjY291bnRBZ3JlZW1lbnQuYmluZEV2ZW50cygpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y193aXphcmRfZm9ybScpIS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQua2V5ID09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMua3ljQ29udGFjdC5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFN0ZXBzKHN0ZXBzOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzID0gc3RlcHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyVGltZW91dCgpIHtcclxuICAgICAgICBpZiAodGhpcy50aW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgS3ljU3RhdHVzIGZyb20gXCIuLi8uLi8uLi9kdG8vS3ljU3RhdHVzXCI7XHJcbmltcG9ydCBLeWNBY3Rpb25SZXF1aXJlZCBmcm9tIFwiLi9LeWNBY3Rpb25SZXF1aXJlZFwiO1xyXG5pbXBvcnQgRXhlY3V0ZVRyYWRlQnV0dG9uIGZyb20gXCIuLi8uLi9lbGVtZW50cy90cmFkZXBhbmVsL0V4ZWN1dGVUcmFkZUJ1dHRvblwiO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uL01vZGFsXCI7XHJcbmltcG9ydCBLWUNGb3JtIGZyb20gXCIuLi9LWUNGb3JtXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLeWNTdGF0dXNIYW5kbGVyIHtcclxuXHJcbiAgICAvKlxyXG4gICAgU1VCTUlUVEVEXHQvZml4dHVyZXMvc3RhdHVzPVNVQk1JVFRFRC9maXh0dXJlcy9cclxuQUNUSU9OX1JFUVVJUkVEXHQvZml4dHVyZXMvc3RhdHVzPUFDVElPTl9SRVFVSVJFRC9maXh0dXJlcy9cclxuQVBQUk9WQUxfUEVORElOR1x0L2ZpeHR1cmVzL3N0YXR1cz1BUFBST1ZBTF9QRU5ESU5HL2ZpeHR1cmVzL1xyXG5BUFBST1ZFRFx0L2ZpeHR1cmVzL3N0YXR1cz1BUFBST1ZFRC9maXh0dXJlcy9cclxuUkVKRUNURURcdC9maXh0dXJlcy9zdGF0dXM9UkVKRUNURUQvZml4dHVyZXMvXHJcbkFDVElWRVx0L2ZpeHR1cmVzL3N0YXR1cz1BQ1RJVkUvZml4dHVyZXMvXHJcbkRJU0FCTEVEXHQvZml4dHVyZXMvc3RhdHVzPURJU0FCTEVEL2ZpeHR1cmVzL1xyXG5BQ0NPVU5UX0NMT1NFRFx0L2ZpeHR1cmVzL3N0YXR1cz1BQ0NPVU5UX0NMT1NFRC9maXh0dXJlcy9cclxuICAgICAqL1xyXG5cclxuICAgIGt5Y1Jlc3BvbnNlOiBLeWNTdGF0dXM7XHJcbiAgICBleGVjdXRlVHJhZGVCdXR0b246IEV4ZWN1dGVUcmFkZUJ1dHRvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihreWNSZXNwb25zZTogS3ljU3RhdHVzLCBleGVjdXRlVHJhZGVCdXR0b246IEV4ZWN1dGVUcmFkZUJ1dHRvbikge1xyXG4gICAgICAgIHRoaXMua3ljUmVzcG9uc2UgPSBreWNSZXNwb25zZTtcclxuICAgICAgICB0aGlzLmV4ZWN1dGVUcmFkZUJ1dHRvbiA9IGV4ZWN1dGVUcmFkZUJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QnV0dG9uVGV4dCgpIHtcclxuICAgICAgICBsZXQgdHh0ID0gJ0ZpbmlzaCBLWUMnO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5reWNSZXNwb25zZS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgY2FzZSAnU1VCTUlUVEVEJzpcclxuICAgICAgICAgICAgY2FzZSAnT05CT0FSRElORyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOQUNUSVZFJzpcclxuICAgICAgICAgICAgY2FzZSAnQVBQUk9WRUQnOlxyXG4gICAgICAgICAgICBjYXNlICdFRElURUQnOlxyXG4gICAgICAgICAgICBjYXNlICdBUFBST1ZBTF9QRU5ESU5HJzpcclxuICAgICAgICAgICAgICAgIHR4dCA9ICdTdWJtaXR0ZWQgdG8gS1lDIHByb2Nlc3Nvcic7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQUNUSU9OX1JFUVVJUkVEJzpcclxuICAgICAgICAgICAgICAgIHR4dCA9ICdBY3Rpb24gcmVxdWlyZWQuIENsaWNrIHRvIGNvbnRpbnVlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdSRUpFQ1RFRCc6XHJcbiAgICAgICAgICAgICAgICB0eHQgPSAnWW91ciBhcHBsaWNhdGlvbiB3YXMgcmVqZWN0ZWQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0RJU0FCTEVEJzpcclxuICAgICAgICAgICAgICAgIHR4dCA9ICdZb3VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FDVElWRSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0FDQ09VTlRfVVBEQVRFRCc6XHJcbiAgICAgICAgICAgICAgICB0eHQgPSAnWW91IGFyZSBhcHByb3ZlZC4gS1lDIGlzIGJlaW5nIHNlbnQgdG8gYmxvY2tjaGFpbi4gR2l2ZSBpdCBmZXcgbWludXRlcyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQUNDT1VOVF9DTE9TRUQnOlxyXG4gICAgICAgICAgICAgICAgdHh0ID0gJ1lvdXIgYWNjb3VudCBoYXMgYmVlbiBjbG9zZWQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0eHQgKyAnPHNtYWxsPkNsaWNrIGZvciBtb3JlIGluZm88L3NtYWxsPic7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJ1dHRvbkNsaWNrRXZlbnQoZXhlY3V0ZVRyYWRlQnV0dG9uOiBFeGVjdXRlVHJhZGVCdXR0b24pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMua3ljUmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1NVQk1JVFRFRCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ09OQk9BUkRJTkcnOlxyXG4gICAgICAgICAgICBjYXNlICdJTkFDVElWRSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ0FQUFJPVkVEJzpcclxuICAgICAgICAgICAgY2FzZSAnRURJVEVEJzpcclxuICAgICAgICAgICAgY2FzZSAnQVBQUk9WQUxfUEVORElORyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93TW9kYWwoJ0FwcGxpY2F0aW9uIGlzIGJlaW5nIHByb2Nlc3NlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJZb3UgbmVlZCB0byB3YWl0IGZvciBLWUMgdG8gYmUgYXBwcm92ZWQuIFRoZW4geW91J2xsIGJlIGFibGUgdG8gZG8gdHJhZGVzLiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJUaGlzIHVzdWFsbHkgdGFrZXMgZmV3IG1pbnV0ZXMuIFdlIHdpbGwgZW1haWwgeW91IHdoZW4geW91IGFyZSBhcHByb3ZlZCBvciBpZiB0aGVyZSBhcmUgcHJvYmxlbXM8YnIgLz48YnIgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJJZiB0aGlzIHN0YXR1cyBoYXMgYmVlbiBmb3IgbW9yZSB0aGFuIDEgZGF5LCBhbmQgeW91IGhhdmVuJ3QgZ290dGVuIGFueSBlbWFpbCBmcm9tIHVzLiBQbGVhc2UgZW1haWwgdXMgYXQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J21haWx0bzppbmZvQGxpbWluYWwubWFya2V0P3N1YmplY3Q9TXkgYXBwbGljYXRpb24gaXMgYmVpbmcgcHJvY2Vzc2VkIGZvciB0byBsb25nJmJvZHk9SGksIGNhbiB5b3UgaGVscCBtZSB0byBmaW5kIG91dCB3aGF0IHRoZSBwcm9ibGVtIGlzLCB0aGUgS1lDIHByb2Nlc3MgaGFzIG5vdCBjaGFuZ2VkIGZvciBzb21lIHRpbWU/IE15IG5hbWUgaXMgX19fX19fXyBhbmQgSSB1c2VkIHRoZSBlbWFpbCBfX19fX19fIHRvIHJlZ2lzdGVyIGF0IGxpbWluYWwubWFya2V0Jz5pbmZvQGxpbWluYWwubWFya2V0PC9hPlwiKTtcclxuICAgICAgICAgICAgY2FzZSAnQUNUSU9OX1JFUVVJUkVEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGt5Y0FjdGlvblJlcXVpcmVkID0gbmV3IEt5Y0FjdGlvblJlcXVpcmVkKGV4ZWN1dGVUcmFkZUJ1dHRvbilcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBreWNBY3Rpb25SZXF1aXJlZC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjYXNlICdSRUpFQ1RFRCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93TW9kYWwoJ0FwcGxpY2F0aW9uIHdhcyByZWplY3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJZb3VyIGFwcGxpY2F0aW9uIGhhcyBiZWVuIHJlamVjdGVkIGR1cmluZyBLWUMgcHJvY2Vzcy48YnIgLz48YnIgLz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJXZSBkb24ndCBoYXZlIHRoZSBpbmZvcm1hdGlvbiBvbiB3aHkgdGhhdCBoYXBwZW5lZCwgYnV0IHlvdSBjYW4gZW1haWwgdXMgYXQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9J21haWx0bzppbmZvQGxpbWluYWwubWFya2V0P3N1YmplY3Q9TXkgYXBwbGljYXRpb24gd2FzIHJlamVjdGVkJmJvZHk9SGksIGNhbiB5b3UgaGVscCBtZSB0byBmaW5kIG91dCB3aGF0IHRoZSBwcm9ibGVtIGlzPyBNeSBuYW1lIGlzIF9fX19fX18gYW5kIEkgdXNlZCB0aGUgZW1haWwgX19fX19fXyB0byByZWdpc3RlciBhdCBsaW1pbmFsLm1hcmtldCc+aW5mb0BsaW1pbmFsLm1hcmtldDwvYT5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCIgYW5kIHdlIGNhbiBmaW5kIG91dCwgYW5kIHdlIHNob3VsZCBiZSBhYmxlIHRvIHNvbHZlIGl0IHRvZ2V0aGVyLlwiKTtcclxuICAgICAgICAgICAgY2FzZSAnRElTQUJMRUQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd01vZGFsKCdBcHBsaWNhdGlvbiB3YXMgZGlzYWJsZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiWW91ciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkLjxiciAvPjxiciAvPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIldlIGRvbid0IGhhdmUgdGhlIGluZm9ybWF0aW9uIG9uIHdoeSB0aGF0IGhhcHBlbmVkLCBidXQgeW91IGNhbiBlbWFpbCB1cyBhdCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0nbWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXQ/c3ViamVjdD1NeSBhcHBsaWNhdGlvbiB3YXMgZGlzYWJsZWQmYm9keT1IaSwgY2FuIHlvdSBoZWxwIG1lIHRvIGZpbmQgb3V0IHdoYXQgdGhlIHByb2JsZW0gaXM/IE15IG5hbWUgaXMgX19fX19fXyBhbmQgSSB1c2VkIHRoZSBlbWFpbCBfX19fX19fIHRvIHJlZ2lzdGVyIGF0IGxpbWluYWwubWFya2V0Jz5pbmZvQGxpbWluYWwubWFya2V0PC9hPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiBhbmQgd2UgY2FuIGZpbmQgb3V0LCBhbmQgd2Ugc2hvdWxkIGJlIGFibGUgdG8gc29sdmUgaXQgdG9nZXRoZXIuXCIpO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnQUNDT1VOVF9DTE9TRUQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd01vZGFsKCdBcHBsaWNhdGlvbiB3YXMgY2xvc2VkJyxcclxuICAgICAgICAgICAgICAgICAgICBcIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjbG9zZWQuPGJyIC8+PGJyIC8+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiV2UgZG9uJ3QgaGF2ZSB0aGUgaW5mb3JtYXRpb24gb24gd2h5IHRoYXQgaGFwcGVuZWQsIGJ1dCB5b3UgY2FuIGVtYWlsIHVzIGF0IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSdtYWlsdG86aW5mb0BsaW1pbmFsLm1hcmtldD9zdWJqZWN0PU15IGFwcGxpY2F0aW9uIHdhcyBjbG9zZWQmYm9keT1IaSwgY2FuIHlvdSBoZWxwIG1lIHRvIGZpbmQgb3V0IHdoYXQgdGhlIHByb2JsZW0gaXM/IE15IG5hbWUgaXMgX19fX19fXyBhbmQgSSB1c2VkIHRoZSBlbWFpbCBfX19fX19fIHRvIHJlZ2lzdGVyIGF0IGxpbWluYWwubWFya2V0Jz5pbmZvQGxpbWluYWwubWFya2V0PC9hPlwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIiBhbmQgd2UgY2FuIGZpbmQgb3V0LCBhbmQgd2Ugc2hvdWxkIGJlIGFibGUgdG8gc29sdmUgaXQgdG9nZXRoZXIuXCIpO1xyXG4gICAgICAgICAgICBjYXNlICdBQ0NPVU5UX1VQREFURUQnOlxyXG4gICAgICAgICAgICBjYXNlICdBQ1RJVkUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd01vZGFsKCdBY2NvdW50IHNvb24gcmVhZHknLCAnWW91ciBhY2NvdW50IGhhcyBiZWVuIGFwcHJvdmVkLi4uPGJyIC8+PGJyLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnLi5idXQsIGFmdGVyIHdlIGFwcHJvdmUgeW91ciBhY2NvdW50LCB3ZSB3cml0ZSB0aGUgaW5mb3JtYXRpb24gdG8gdGhlIGJsb2NrY2hhaW4uJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyBUaGlzIHVzdWFsbHkgdGFrZXMganVzdCBmZXcoMi0zKSBtaW51dGVzLjxiciAvPjxici8+IElmIHRoaXMgaXMgdGFraW5nIGxvbmdlciwgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BsZWFzZSBlbWFpbCB1cyBhdCA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwibWFpbHRvOmluZm9AbGltaW5hbC5tYXJrZXQ/c3ViamVjdD1LWUMgaXMgYmVpbmcgd3JpdHRlbiB0byBibG9ja2NoYWluJmJvZHk9SGksIGNhbiB5b3UgaGVscCBtZSB0byBmaW5kIG91dCB3aGF0IHRoZSBwcm9ibGVtIGlzPyBNeSBuYW1lIGlzIF9fX19fX18gYW5kIEkgdXNlZCB0aGUgZW1haWwgX19fX19fXyB0byByZWdpc3RlciBhdCBsaW1pbmFsLm1hcmtldFwiPmluZm9AbGltaW5hbC5tYXJrZXQ8L2E+Jyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGt5Y0Zvcm0gPSBuZXcgS1lDRm9ybShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVUcmFkZUJ1dHRvbi5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGt5Y0Zvcm0uc2hvd0tZQ0Zvcm0oKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93TW9kYWwodGl0bGU6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgICAgIG1vZGFsLnNob3dNb2RhbCh0aXRsZSwgY29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGgyPllvdSBhcmUgYWNjb3VudCBoYXMgYmVlbiBhcHByb3ZlZDwvaDI+XFxyXFxuPHA+V2UgaGF2ZSBhcHByb3ZlZCB5b3VyIGFjY291bnQuIFlvdSBjYW4gbm93IGZ1bmQgeW91ciBhY2NvdW50IGFuZCBzdGFydCB0byB0cmFkZS5cXHJcXG5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwia3ljQXBwcm92ZWRGdW5kXFxcIj5GdW5kIGFjY291bnQ8L2J1dHRvbj5cXHJcXG48L3A+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBNb3JhbGlzIGZyb20gXCJNb3JhbGlzXCI7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL1VzZXJTZXJ2aWNlXCI7XHJcbmltcG9ydCBBdXRoZW50aWNhdGVTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL0F1dGhlbnRpY2F0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IENvbm5lY3RXYWxsZXQgZnJvbSBcIi4uLy4uL21vZGFscy9Db25uZWN0V2FsbGV0XCI7XHJcbmltcG9ydCBLWUNTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0tZQ1NlcnZpY2VcIjtcclxuaW1wb3J0IEFVU0RTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0FVU0RTZXJ2aWNlXCI7XHJcbmltcG9ydCBGYWtlQVVTREZ1bmQgZnJvbSBcIi4uLy4uL21vZGFscy9GdW5kaW5nL0Zha2VBVVNERnVuZFwiO1xyXG5pbXBvcnQgU2VjdXJpdHlUb2tlblNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2Jsb2NrY2hhaW4vU2VjdXJpdHlUb2tlblNlcnZpY2VcIjtcclxuaW1wb3J0IExpbWluYWxNYXJrZXRTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0xpbWluYWxNYXJrZXRTZXJ2aWNlXCI7XHJcbmltcG9ydCB7QWRkcmVzc1plcm8sIHJvdW5kQmlnTnVtYmVyRGVjaW1hbCwgcm91bmROdW1iZXJEZWNpbWFsLCBzaG9ydEV0aH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBTdWJzY3JpcHRpb24gZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvU3Vic2NyaXB0aW9uXCI7XHJcbmltcG9ydCB7VHJhZGVUeXBlfSBmcm9tICcuLi8uLi8uLi9lbnVtcy9UcmFkZVR5cGUnO1xyXG5pbXBvcnQgVHJhZGVQYW5lbElucHV0IGZyb20gXCIuL1RyYWRlUGFuZWxJbnB1dFwiO1xyXG5pbXBvcnQgRXhlY3V0ZVRyYWRlQnV0dG9uSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvRXhlY3V0ZVRyYWRlQnV0dG9uLmh0bWwnO1xyXG5pbXBvcnQgUHJvdmlkZXJJbmZvIGZyb20gXCIuLi8uLi8uLi93YWxsZXQvUHJvdmlkZXJJbmZvXCI7XHJcbmltcG9ydCBUcmFkZUV4ZWN1dGVkSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVFeGVjdXRlZC5odG1sJ1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uLy4uL21vZGFscy9Nb2RhbFwiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgQmxvY2tjaGFpbkVycm9yIGZyb20gXCIuLi8uLi8uLi9lcnJvcnMvQmxvY2tjaGFpbkVycm9yXCI7XHJcbmltcG9ydCBOYXRpdmVUb2tlbk5lZWRlZCBmcm9tIFwiLi4vLi4vbW9kYWxzL05hdGl2ZVRva2VuTmVlZGVkXCI7XHJcbmltcG9ydCBCaWdOdW1iZXIgZnJvbSBcImJpZ251bWJlci5qc1wiO1xyXG5pbXBvcnQgS3ljU3RhdHVzSGFuZGxlciBmcm9tIFwiLi4vLi4vbW9kYWxzL0tZQy9LeWNTdGF0dXNIYW5kbGVyXCI7XHJcbmltcG9ydCBLeWNBcHByb3ZlZEh0bWwgZnJvbSAnLi4vLi4vLi4vaHRtbC9tb2RhbC9LeWMvS3ljQXBwcm92ZWQuaHRtbCc7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhlY3V0ZVRyYWRlQnV0dG9uIHtcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgYXV0aGVudGljYXRlU2VydmljZTogQXV0aGVudGljYXRlU2VydmljZTtcclxuICAgIHNlbGxUcmFkZUlucHV0OiBUcmFkZVBhbmVsSW5wdXQ7XHJcbiAgICBidXlUcmFkZUlucHV0OiBUcmFkZVBhbmVsSW5wdXQ7XHJcbiAgICB0ZW1wbGF0ZTogYW55O1xyXG4gICAgYnV0dG9uOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIHN0YXRpYyBJbnN0YW5jZTogRXhlY3V0ZVRyYWRlQnV0dG9uO1xyXG4gICAgY29uc3RydWN0b3IobW9yYWxpczogdHlwZW9mIE1vcmFsaXMsIHNlbGxUcmFkZUlucHV0OiBUcmFkZVBhbmVsSW5wdXQsIGJ1eVRyYWRlSW5wdXQ6IFRyYWRlUGFuZWxJbnB1dCkge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICAgICAgdGhpcy5zZWxsVHJhZGVJbnB1dCA9IHNlbGxUcmFkZUlucHV0O1xyXG4gICAgICAgIHRoaXMuYnV5VHJhZGVJbnB1dCA9IGJ1eVRyYWRlSW5wdXQ7XHJcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGVTZXJ2aWNlID0gbmV3IEF1dGhlbnRpY2F0ZVNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEV4ZWN1dGVUcmFkZUJ1dHRvbkh0bWwpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X2V4ZWN1dGVfdHJhZGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICBFeGVjdXRlVHJhZGVCdXR0b24uSW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZW5kZXJCdXR0b24oKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbWluYWxfbWFya2V0X2V4ZWN1dGVfdHJhZGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICB0aGlzLmxvYWRpbmdCdXR0b24odGhpcy5idXR0b24pO1xyXG5cclxuICAgICAgICAvL3dhbGxldCBjb25uZWN0ZWRcclxuICAgICAgICBpZiAoIXRoaXMud2FsbGV0SXNDb25uZWN0ZWQodGhpcy5idXR0b24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy91c2VyIGxvZ2dlZCBpblxyXG4gICAgICAgIGlmICghdGhpcy51c2VySXNMb2dnZWRJbih0aGlzLmJ1dHRvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NoYWluIGlkIGNvcnJlY3RcclxuICAgICAgICBpZiAoIXRoaXMuY2hhaW5JZElzQ29ycmVjdCh0aGlzLmJ1dHRvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL25hdGl2ZSB0b2tlbiBpcyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIWF3YWl0IHRoaXMudXNlckhhc05hdGl2ZVRva2VuKHRoaXMuYnV0dG9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8va3ljIGlzIGRvbmVcclxuICAgICAgICBpZiAoIWF3YWl0IHRoaXMua3ljSXNEb25lKHRoaXMuYnV0dG9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vYXVzZCBpcyBzZXR1cFxyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy51c2VySGFzQVVTRCh0aGlzLmJ1dHRvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9hdXNkID4gYnV5IGFtb3VudFxyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy51c2VySGFzRW5vdWdoUXR5KHRoaXMuYnV0dG9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaGFzUXVhbnRpdHlBbmRTeW1ib2wodGhpcy5idXR0b24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy5pc01hcmtldE9wZW4odGhpcy5idXR0b24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZW5hYmxlRXhlY3V0ZVRyYWRlKHRoaXMuYnV0dG9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZUV4ZWN1dGVUcmFkZShidXR0b246IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy9pZiAodGhpcy5zZWxsVHJhZGVJbnB1dC5xdWFudGl0eS5lcSgwKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvL2V4ZWN1dGUgdHJhZGUgY2FuIGJlIGRvbmVcclxuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ0V4ZWN1dGUgdHJhZGUnO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVwbGFjZSgnZGlzYWJsZWQnLCAnZW5hYmxlZCcpO1xyXG4gICAgICAgIHRoaXMuc3RvcExvYWRpbmdCdXR0b24oYnV0dG9uKTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICAgICAgbGV0IHByb3ZpZGVySW5mbyA9IFByb3ZpZGVySW5mby5JbnN0YW5jZTtcclxuICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb25maXJtIHRyYW5zYWN0aW9uIGluIHlvdXIgJyArIHByb3ZpZGVySW5mby5XYWxsZXROYW1lICsgJyB3YWxsZXQnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsbFRyYWRlSW5wdXQuc3ltYm9sID09ICdhVVNEJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbWluYWxNYXJrZXRTZXJ2aWNlID0gbmV3IExpbWluYWxNYXJrZXRTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ltYm9sQWRkcmVzcyA9IGF3YWl0IGxpbWluYWxNYXJrZXRTZXJ2aWNlLmdldFN5bWJvbENvbnRyYWN0QWRkcmVzcyh0aGlzLmJ1eVRyYWRlSW5wdXQuc3ltYm9sKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sQWRkcmVzcyA9PT0gQWRkcmVzc1plcm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbGltaW5hbE1hcmtldFNlcnZpY2UuY3JlYXRlVG9rZW4odGhpcy5idXlUcmFkZUlucHV0LnN5bWJvbCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ0NyZWF0aW5nIHRva2VuLiBHaXZlIGl0IGZldyBzZWNvbmRzJztcclxuICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wTG9hZGluZ0J1dHRvbihidXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ0V4ZWN1dGUgdHJhZGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBCbG9ja2NoYWluRXJyb3IpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBzeW1ib2xBZGRyZXNzID0gcmVzdWx0IGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmV4ZWN1dGVUcmFuc2ZlcihzeW1ib2xBZGRyZXNzLCBidXR0b24pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbWluYWxNYXJrZXRTZXJ2aWNlID0gbmV3IExpbWluYWxNYXJrZXRTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ltYm9sQWRkcmVzcyA9IGF3YWl0IGxpbWluYWxNYXJrZXRTZXJ2aWNlLmdldFN5bWJvbENvbnRyYWN0QWRkcmVzcyh0aGlzLnNlbGxUcmFkZUlucHV0LnN5bWJvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHNlY3VyaXR5VG9rZW5TZXJ2aWNlID0gbmV3IFNlY3VyaXR5VG9rZW5TZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWN1cml0eVRva2VuU2VydmljZS50cmFuc2ZlcihzeW1ib2xBZGRyZXNzLCB0aGlzLnNlbGxUcmFkZUlucHV0LnF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ0FUQ0ggLSBzZWN1cml0eVRva2VuU2VydmljZS50cmFuc2ZlcicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbih0cmFuc2FjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUSEVOIC0gc2VjdXJpdHlUb2tlblNlcnZpY2UudHJhbnNmZXInLCB0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9uaXRvckV4ZWN1dGVUcmFkZSh0cmFuc2FjdGlvbiBhcyBNb3JhbGlzLkV4ZWN1dGVGdW5jdGlvblJlc3VsdCwgVHJhZGVUeXBlLlNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnRXhlY3V0ZSB0cmFkZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVRyYW5zZmVyKHN5bWJvbEFkZHJlc3M6IHN0cmluZywgYnV0dG9uOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGxldCBhVXNkU2VydmljZSA9IG5ldyBBVVNEU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgIGF3YWl0IGFVc2RTZXJ2aWNlLnRyYW5zZmVyKHN5bWJvbEFkZHJlc3MsIHRoaXMuc2VsbFRyYWRlSW5wdXQucXVhbnRpdHkpXHJcbiAgICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NBVENIIC0gYVVzZFNlcnZpY2UudHJhbnNmZXInLCByZWFzb24pO1xyXG4gICAgICAgICAgICB9KS50aGVuKHRyYW5zYWN0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdHJhbnNhY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vbml0b3JFeGVjdXRlVHJhZGUodHJhbnNhY3Rpb24gYXMgTW9yYWxpcy5FeGVjdXRlRnVuY3Rpb25SZXN1bHQsIFRyYWRlVHlwZS5CdXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9ncmVzc1RleHQoJ1NlbmRpbmcgdG8gYmxvY2tjaGFpbicsIHRyYW5zYWN0aW9uLmhhc2gpXHJcblxyXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcExvYWRpbmdCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnRXhlY3V0ZSB0cmFkZSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCdXlpbmdTaGFyZXNPYmoob2JqZWN0OiBhbnkpOiBhbnkge1xyXG4gICAgICAgIGxldCBldGhBZGRyZXNzID0gb2JqZWN0LnVzZXJBZGRyZXNzO1xyXG4gICAgICAgIGxldCB0b2tlbkFkZHJlc3MgPSBvYmplY3QudG9rZW5BZGRyZXNzO1xyXG4gICAgICAgIGxldCBidXlpbmdRdWFudGl0eSA9IG9iamVjdC5maWxsZWRfcXR5O1xyXG4gICAgICAgIGxldCBzZWxsaW5nQW1vdW50ID0gJyQnICsgbmV3IEJpZ051bWJlcihvYmplY3QuYW1vdW50KS5kaXYoMTAgKiogMTgpLnRvRml4ZWQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VsbGluZ0xvZ286ICcvaW1nL2xvZ29zL2FVU0QucG5nJyxcclxuICAgICAgICAgICAgc2VsbGluZ1N5bWJvbDogJ2FVU0QnLFxyXG4gICAgICAgICAgICBzZWxsaW5nQW1vdW50OiBzZWxsaW5nQW1vdW50LFxyXG4gICAgICAgICAgICBidXlpbmdMb2dvOiAnL2ltZy9sb2dvcy8nICsgb2JqZWN0LnN5bWJvbCArICcucG5nJyxcclxuICAgICAgICAgICAgYnV5aW5nU3ltYm9sOiBvYmplY3Quc3ltYm9sLFxyXG4gICAgICAgICAgICBidXlpbmdRdWFudGl0eTogYnV5aW5nUXVhbnRpdHksXHJcbiAgICAgICAgICAgIGJ1eWluZ1JvdW5kUXVhbnRpdHk6IHJvdW5kTnVtYmVyRGVjaW1hbChidXlpbmdRdWFudGl0eSwgNikgKyAnIHNoYXJlcycsXHJcbiAgICAgICAgICAgIHNob3J0RXRoQWRkcmVzczogc2hvcnRFdGgoZXRoQWRkcmVzcyksXHJcbiAgICAgICAgICAgIHRva2VuQWRkcmVzczogdG9rZW5BZGRyZXNzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTZWxsU2hhcmVzT2JqKG9iamVjdDogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgZXRoQWRkcmVzcyA9IG9iamVjdC5zZW5kZXI7XHJcbiAgICAgICAgbGV0IHRva2VuQWRkcmVzcyA9IG9iamVjdC5yZWNpcGllbnQ7XHJcbiAgICAgICAgbGV0IGJ1eWluZ1F1YW50aXR5ID0gbmV3IEJpZ051bWJlcihvYmplY3QuZmlsbGVkX2F2Z19wcmljZSkubXVsdGlwbGllZEJ5KG5ldyBCaWdOdW1iZXIob2JqZWN0LmZpbGxlZF9xdHkpKVxyXG4gICAgICAgIGxldCBzZWxsaW5nQW1vdW50ID0gb2JqZWN0LmZpbGxlZF9xdHk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlbGxpbmdMb2dvOiAnL2ltZy9sb2dvcy8nICsgb2JqZWN0LnN5bWJvbCArICcucG5nJyxcclxuICAgICAgICAgICAgc2VsbGluZ1N5bWJvbDogb2JqZWN0LnN5bWJvbCxcclxuICAgICAgICAgICAgc2VsbGluZ0Ftb3VudDogc2VsbGluZ0Ftb3VudCArICcgc2hhcmVzJyxcclxuICAgICAgICAgICAgYnV5aW5nTG9nbzogJy9pbWcvbG9nb3MvYVVTRC5wbmcnLFxyXG4gICAgICAgICAgICBidXlpbmdTeW1ib2w6ICdhVVNEJyxcclxuICAgICAgICAgICAgYnV5aW5nUXVhbnRpdHk6IGJ1eWluZ1F1YW50aXR5LnRvRml4ZWQoKSxcclxuICAgICAgICAgICAgYnV5aW5nUm91bmRRdWFudGl0eTogJyQnICsgcm91bmRCaWdOdW1iZXJEZWNpbWFsKGJ1eWluZ1F1YW50aXR5LCA2KS50b0ZpeGVkKCksXHJcbiAgICAgICAgICAgIHNob3J0RXRoQWRkcmVzczogc2hvcnRFdGgoZXRoQWRkcmVzcyksXHJcbiAgICAgICAgICAgIHRva2VuQWRkcmVzczogdG9rZW5BZGRyZXNzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93VHJhZGVFeGVjdXRlZChvYmplY3Q6IGFueSkge1xyXG4gICAgICAgIGxldCBwcm92aWRlckluZm8gPSBQcm92aWRlckluZm8uSW5zdGFuY2U7XHJcbiAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBsZXQgaXNCdXkgPSAob2JqZWN0LnNpZGUgPT0gJ2J1eScpO1xyXG5cclxuICAgICAgICBsZXQgb2JqID0gKGlzQnV5KSA/IHRoaXMuZ2V0QnV5aW5nU2hhcmVzT2JqKG9iamVjdCkgOiB0aGlzLmdldFNlbGxTaGFyZXNPYmoob2JqZWN0KTtcclxuICAgICAgICBvYmoud2FsbGV0TmFtZSA9IHByb3ZpZGVySW5mby5XYWxsZXROYW1lO1xyXG4gICAgICAgIG9iai5ibG9ja0V4cGxvcmVyTGluayA9IG5ldHdvcmtJbmZvLkJsb2NrRXhwbG9yZXIgKyAnL3R4LycgKyBvYmplY3QudHJhbnNhY3Rpb25faGFzaDtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFRyYWRlRXhlY3V0ZWRIdG1sKTtcclxuICAgICAgICBsZXQgY29udGVudCA9IHRlbXBsYXRlKG9iaik7XHJcbiAgICAgICAgbGV0IG1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdUcmFkZSBleGVjdXRlZCcsIGNvbnRlbnQpO1xyXG5cclxuICAgICAgICBsZXQgYWRkVG9rZW5Ub1dhbGxldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2tlblRvV2FsbGV0Jyk7XHJcbiAgICAgICAgaWYgKCFhZGRUb2tlblRvV2FsbGV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGFkZFRva2VuVG9XYWxsZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgYWRkcmVzcyA9IChldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmFkZHJlc3MgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICB3YWxsZXRIZWxwZXIuYWRkVG9rZW5Ub1dhbGxldChhZGRyZXNzLCB0aGlzLmJ1eVRyYWRlSW5wdXQuc3ltYm9sLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWRkVG9rZW5Ub1dhbGxldEZhaWxlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2tlblRvV2FsbGV0RmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFkZFRva2VuVG9XYWxsZXRGYWlsZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBhZGRUb2tlblRvV2FsbGV0RmFpbGVkLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG1vbml0b3JFeGVjdXRlVHJhZGUodHJhbnNhY3Rpb246IE1vcmFsaXMuRXhlY3V0ZUZ1bmN0aW9uUmVzdWx0LCB0cmFkZVR5cGU6IFRyYWRlVHlwZSkge1xyXG4gICAgICAgIGxldCBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMubW9yYWxpcyk7XHJcblxyXG4gICAgICAgIGF3YWl0IHN1YnNjcmlwdGlvbi5zdWJzY3JpYmVUb1RhYmxlKHRyYWRlVHlwZSwgKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdXNlciA9IHRoaXMubW9yYWxpcy5Vc2VyLmN1cnJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKCF1c2VyKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QudXNlckFkZHJlc3MgIT0gdXNlci5nZXQoJ2V0aEFkZHJlc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29iai51c2VyQWRkcmVzczonICsgb2JqZWN0LnVzZXJBZGRyZXNzICsgJyB1c2VyOicgKyB1c2VyLmdldCgnZXRoQWRkcmVzcycpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iamVjdC5zdGF0dXMgPT0gJ29yZGVyX2ZpbGxlZCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RyYWRlRXhlY3V0ZWQob2JqZWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZXhlY3V0aW5nVHJhZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhlY3V0aW5nLXRyYWRlLXByb2dyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4ZWN1dGluZ1RyYWRlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZXhlY3V0aW5nVHJhZGUuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqZWN0LnN0YXR1cyA9PSAnb3JkZXJfZmFpbGVkJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICBtb2RhbC5zaG93TW9kYWwoJ09yZGVyIGZhaWxlZCcsICdXZSBjb3VsZCBub3QgZmluaXNoIHlvdXIgb3JkZXIuJylcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghb2JqZWN0LnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9ncmVzc1RleHQoJ1JlY2VpdmVkIG9yZGVyIHNlbmRpbmcgdG8gc3RvY2sgZXhjaGFuZ2UnLCBvYmplY3QudHJhbnNhY3Rpb25faGFzaClcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmplY3Quc3RhdHVzID09ICdvcmRlcl9yZXF1ZXN0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb2dyZXNzVGV4dCgnU2VudCB0byBzdG9jayBleGNoYW5nZScsIG9iamVjdC50cmFuc2FjdGlvbl9oYXNoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBleGVjdXRpbmdUcmFkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGVjdXRpbmctdHJhZGUtcHJvZ3Jlc3MnKTtcclxuICAgICAgICBpZiAoIWV4ZWN1dGluZ1RyYWRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGV4ZWN1dGluZ1RyYWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZGluZ0J1dHRvbihidXR0b246IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWJ1c3knKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHdhbGxldElzQ29ubmVjdGVkKGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgd2FsbGV0Q29ubmVjdGVkID0gdGhpcy5hdXRoZW50aWNhdGVTZXJ2aWNlLmlzV2FsbGV0Q29ubmVjdGVkKCk7XHJcbiAgICAgICAgaWYgKHdhbGxldENvbm5lY3RlZCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDbGlja0V2ZW50KGJ1dHRvbik7XHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdDb25uZWN0IHdhbGxldCc7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29ubmVjdFdhbGxldCA9IG5ldyBDb25uZWN0V2FsbGV0KHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGNvbm5lY3RXYWxsZXQuY2hvb3NlV2FsbGV0UHJvdmlkZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXNlcklzTG9nZ2VkSW4oYnV0dG9uOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGxldCB1c2VyTG9nZ2VkSW4gPSB0aGlzLmF1dGhlbnRpY2F0ZVNlcnZpY2UuaXNVc2VyTG9nZ2VkSW4oKTtcclxuICAgICAgICBpZiAodXNlckxvZ2dlZEluKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9ICdMb2dpbic7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmF1dGhlbnRpY2F0ZVNlcnZpY2UuYXV0aGVudGljYXRlVXNlcihDb25uZWN0V2FsbGV0LlByb3ZpZGVyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hhaW5JZElzQ29ycmVjdChidXR0b246IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGNoYWluSWQgPSB0aGlzLmF1dGhlbnRpY2F0ZVNlcnZpY2UuZ2V0Q2hhaW5JZCgpO1xyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKGNoYWluSWQgPT09IG5ldHdvcmtJbmZvLkNoYWluSWQpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBsZXQgdXNlcnNXYWxsZXROZXR3b3JrID0gTmV0d29ya0luZm8uZ2V0TmV0d29ya0luZm9CeUNoYWluSWQoY2hhaW5JZCk7XHJcbiAgICAgICAgaWYgKHVzZXJzV2FsbGV0TmV0d29yaykge1xyXG4gICAgICAgICAgICBOZXR3b3JrSW5mby5zZXROZXR3b3JrQnlDaGFpbklkKGNoYWluSWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnU3dpdGNoIE5ldHdvcmsnO1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgbmV0d29ya0luZm8uYWRkTmV0d29ya1RvV2FsbGV0KHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVzZXJIYXNOYXRpdmVUb2tlbihidXR0b246IEhUTUxFbGVtZW50KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICBsZXQgaGFzRW5vdWdoTmF0aXZlVG9rZW5zID0gYXdhaXQgbmV0d29ya0luZm8uaGFzRW5vdWdoTmF0aXZlVG9rZW5zKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgaWYgKGhhc0Vub3VnaE5hdGl2ZVRva2VucykgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVwbGFjZSgnZW5hYmxlZCcsICdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ1lvdSBuZWVkICcgKyBuZXR3b3JrSW5mby5OYXRpdmVDdXJyZW5jeU5hbWUgKyAnIHRva2Vucy4gQ2xpY2sgbWUgZm9yIHNvbWUgdG9rZW5zJztcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuYXRpdmVUb2tlbk5lZWRlZE1vZGFsID0gbmV3IE5hdGl2ZVRva2VuTmVlZGVkKHRoaXMubW9yYWxpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5hdGl2ZVRva2VuTmVlZGVkTW9kYWwuc2hvdygpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcExvYWRpbmdCdXR0b24oYnV0dG9uKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGt5Y0lkRG9uZVRpbWVvdXQ6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGt5Y0lzRG9uZShidXR0b246IEhUTUxFbGVtZW50LCBpbnRlcnZhbENoZWNrID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQga3ljU2VydmljZSA9IG5ldyBLWUNTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGV0aEFkZHJlc3MgPSB0aGlzLmF1dGhlbnRpY2F0ZVNlcnZpY2UuZ2V0RXRoQWRkcmVzcygpO1xyXG4gICAgICAgIGlmIChldGhBZGRyZXNzID09PSAnJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm8gRVRIIGFkZHJlc3MsIGt5YyBjaGVjayBmYWlsZWQnKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQga3ljUmVzcG9uc2UgPSBhd2FpdCBreWNTZXJ2aWNlLmhhc1ZhbGlkS1lDKCk7XHJcbiAgICAgICAgaWYgKCFreWNSZXNwb25zZS5pc1ZhbGlkS3ljICYmIGt5Y1Jlc3BvbnNlLnN0YXR1cyA9PSAnQUNUSVZFJykge1xyXG4gICAgICAgICAgICB0aGlzLmt5Y0lkRG9uZVRpbWVvdXQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBreWNSZXNwb25zZSA9IGF3YWl0IGt5Y1NlcnZpY2UuaGFzVmFsaWRLWUMoKTtcclxuICAgICAgICAgICAgICAgIGlmIChreWNSZXNwb25zZS5pc1ZhbGlkS3ljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmt5Y0lkRG9uZVRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQnV0dG9uKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAgKiAxMDAwKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGt5Y1Jlc3BvbnNlLmlzVmFsaWRLeWMpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbENoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMua3ljSWREb25lVGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKEt5Y0FwcHJvdmVkSHRtbCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsLnNob3dNb2RhbCgnQWNjb3VudCBhcHByb3ZlZCcsIHRlbXBsYXRlKHt9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZ1bmRBY2NvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y0FwcHJvdmVkRnVuZCcpO1xyXG4gICAgICAgICAgICAgICAgZnVuZEFjY291bnQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmhpZGVNb2RhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXVzZEZ1bmQgPSBuZXcgRmFrZUFVU0RGdW5kKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVzZEZ1bmQuc2hvd0FVU0RGYWtlRnVuZCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQga3ljU3RhdHVzSGFuZGxlciA9IG5ldyBLeWNTdGF0dXNIYW5kbGVyKGt5Y1Jlc3BvbnNlLCB0aGlzKTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGt5Y1N0YXR1c0hhbmRsZXIuZ2V0QnV0dG9uVGV4dCgpO1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGt5Y1N0YXR1c0hhbmRsZXIuZ2V0QnV0dG9uQ2xpY2tFdmVudCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5zdG9wTG9hZGluZ0J1dHRvbihidXR0b24pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoZWNrS3ljSXNEb25lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmt5Y0lkRG9uZVRpbWVvdXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5reWNJZERvbmVUaW1lb3V0ID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmt5Y0lzRG9uZSh0aGlzLmJ1dHRvbiwgdHJ1ZSk7XHJcbiAgICAgICAgfSwgMTAgKiAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVzZXJIYXNBVVNEKGJ1dHRvbjogSFRNTEVsZW1lbnQpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBsZXQgYXVzZFNlcnZpY2UgPSBuZXcgQVVTRFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgYmFsYW5jZSA9IGF3YWl0IGF1c2RTZXJ2aWNlLmdldEFVU0RCYWxhbmNlT2YodGhpcy5hdXRoZW50aWNhdGVTZXJ2aWNlLmdldEV0aEFkZHJlc3MoKSk7XHJcbiAgICAgICAgaWYgKGJhbGFuY2UuaXNHcmVhdGVyVGhhbigwKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKG5ldHdvcmtJbmZvLlRlc3ROZXR3b3JrKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnWW91IG5lZWQgYVVTRC4gQ2xpY2sgaGVyZSB0byBnZXQgc29tZSc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhdXNkRnVuZCA9IG5ldyBGYWtlQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGF1c2RGdW5kLnNob3dBVVNERmFrZUZ1bmQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ1lvdSBuZWVkIGFVU0QuIENsaWNrIGhlcmUgZm9yIGluc3RydWN0aW9ucyc7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBhdXNkRnVuZCA9IG5ldyBGYWtlQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGF1c2RGdW5kLnNob3dBVVNERnVuZCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdG9wTG9hZGluZ0J1dHRvbihidXR0b24pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyB1c2VySGFzRW5vdWdoUXR5KGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgbGV0IGF1c2RTZXJ2aWNlID0gbmV3IEFVU0RTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsbFRyYWRlSW5wdXQuc3ltYm9sID09ICdhVVNEJykge1xyXG4gICAgICAgICAgICBsZXQgYmFsYW5jZSA9IGF3YWl0IGF1c2RTZXJ2aWNlLmdldEFVU0RCYWxhbmNlT2YodGhpcy5hdXRoZW50aWNhdGVTZXJ2aWNlLmdldEV0aEFkZHJlc3MoKSk7XHJcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLmlzR3JlYXRlclRoYW5PckVxdWFsVG8odGhpcy5zZWxsVHJhZGVJbnB1dC5xdWFudGl0eSkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IFwiWW91IGRvbid0IGhhdmUgZW5vdWdoIGFVU0QuIENsaWNrIGZvciBtb3JlIGZ1bmRpbmdcIjtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5ldHdvcmtJbmZvID0gTmV0d29ya0luZm8uZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgIGxldCBhdXNkRnVuZCA9IG5ldyBGYWtlQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXR3b3JrSW5mby5UZXN0TmV0d29yaykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhdXNkRnVuZC5zaG93QVVTREZha2VGdW5kKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVzZEZ1bmQuc2hvd0FVU0RGdW5kKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBzZWN1cml0eVRva2VuU2VydmljZSA9IG5ldyBTZWN1cml0eVRva2VuU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBsZXQgYXV0aGVudGljYXRlU2VydmljZSA9IG5ldyBBdXRoZW50aWNhdGVTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGxldCBldGhBZGRyZXNzID0gYXV0aGVudGljYXRlU2VydmljZS5nZXRFdGhBZGRyZXNzKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdXNlclF1YW50aXR5ID0gYXdhaXQgc2VjdXJpdHlUb2tlblNlcnZpY2UuZ2V0UXVhbnRpdHlCeUFkZHJlc3ModGhpcy5zZWxsVHJhZGVJbnB1dC5zeW1ib2wsIGV0aEFkZHJlc3MpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxsVHJhZGVJbnB1dC5xdWFudGl0eSA8PSB1c2VyUXVhbnRpdHkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IFwiWW91IGRvbid0IGhhdmUgZW5vdWdoIFwiICsgdGhpcy5zZWxsVHJhZGVJbnB1dC5zeW1ib2w7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVwbGFjZSgnZGlzYWJsZScsICdlbmFibGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdG9wTG9hZGluZ0J1dHRvbihidXR0b24pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGlzTWFya2V0T3BlbihidXR0b246IEhUTUxFbGVtZW50KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGlzTWFya2V0T3BlbiA9IGF3YWl0IHVzZXJTZXJ2aWNlLmlzTWFya2V0T3Blbk9yVXNlck9mZkhvdXJzKCk7XHJcbiAgICAgICAgaWYgKGlzTWFya2V0T3BlbikgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAnTWFya2V0IGlzIGNsb3NlZCdcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlcGxhY2UoJ2VuYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9wTG9hZGluZ0J1dHRvbihidXR0b24pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVDbGlja0V2ZW50KGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgZiA9IChldmVudDogYW55KSA9PiBidXR0b24ub25jbGljayA/IChldmVudCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmIChmKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhc1F1YW50aXR5QW5kU3ltYm9sKGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxsVHJhZGVJbnB1dC5xdWFudGl0eS5lcSgwKSkge1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ1R5cGUgaW4gcXVhbnRpdHknO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJ1eVRyYWRlSW5wdXQubmFtZSA9PSAnJykge1xyXG4gICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gJ1NlbGVjdCBzdG9jayB0byBidXknO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BMb2FkaW5nQnV0dG9uKGJ1dHRvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRQcm9ncmVzc1RleHQodGV4dDogc3RyaW5nLCBoYXNoOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLXRleHQnKTtcclxuICAgICAgICBpZiAocHJvZ3Jlc3NUZXh0KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzVGV4dC5pbm5lckhUTUwgPSB0ZXh0ICsgJzxiciAvPjxhIGhyZWY9XCInICsgbmV0d29ya0luZm8uQmxvY2tFeHBsb3JlciArICcvdHgvJyArIGhhc2ggKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgc3R5bGU9XCJmb250LXNpemU6MTBweFwiPlZpZXc8L2E+JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGFydGljbGUgY2xhc3M9XFxcInt7dHJhZGVUeXBlfX1JbnB1dHMgdHJhZGVJbnB1dEFydGljbGVcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJncmlkIHRyYWRlSW5wdXRcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwic2VsZWN0X3Rva2VuXFxcIj5cXHJcXG4gICAgICAgICAgICA8YSBpZD1cXFwie3t0cmFkZVR5cGV9fVNlbGVjdFN0b2NrXFxcIiBocmVmPVxcXCIjXFxcIiByb2xlPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cXFwie3tsb2dvfX1cXFwiLz5cXHJcXG4gICAgICAgICAgICAgICAge3tzeW1ib2x9fVxcclxcbiAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidHJhZGVfaW5wdXRcXFwiPjxpbnB1dCBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgYXV0b2NvcnJlY3Q9XFxcIm9mZlxcXCIgdHlwZT1cXFwidGVsXFxcIiBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XFxcInt7c3RyUXVhbnRpdHl9fVxcXCIgcGxhY2Vob2xkZXI9XFxcIjAuMFxcXCIvPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmFsYW5jZVxcXCI+QmFsYW5jZSA6IDxhYmJyIHRpdGxlPVxcXCJ7e2JhbGFuY2V9fVxcXCIgZGF0YS10b29sdGlwPVxcXCJ7e2JhbGFuY2V9fVxcXCIgY2xhc3M9XFxcImJhbGFuY2VfdmFsdWVcXFwiPnt7YWJickJhbGFuY2V9fTwvYWJicj5cXHJcXG4gICAgICAgICAgICA8YSBocmVmPVxcXCJcXFwiIGNsYXNzPVxcXCJiYWxhbmNlX21heFxcXCI+TWF4PC9hPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicHJpY2VfcGVyX3NoYXJlXFxcIj48L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxwcm9ncmVzcyBjbGFzcz1cXFwicHJvZ3Jlc3MgZC1ub25lXFxcIiB2YWx1ZT1cXFwiMFxcXCIgbWF4PVxcXCIxXFxcIj48L3Byb2dyZXNzPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJleGNlZWRzX3dhbGxldF9iYWxhbmNlIGQtbm9uZVxcXCI+RXhjZWVkcyB3YWxsZXQgYmFsYW5jZTwvZGl2PlxcclxcbjwvYXJ0aWNsZT5cXHJcXG5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsXCI7XHJcbmltcG9ydCBTZWN1cml0aWVzTGlzdCBmcm9tIFwiLi4vZWxlbWVudHMvU2VjdXJpdGllc0xpc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3VyaXRpZXNMaXN0TW9kYWwge1xyXG4gICAgcGFnZTogbnVtYmVyO1xyXG4gICAgdGJvZHlJZCA9ICdsaW1pbmFsX21hcmtldF9zZWN1cml0aWVzX2xpc3QnO1xyXG4gICAgbG9hZG1vcmU6IGJvb2xlYW47XHJcbiAgICBtb2RhbDogTW9kYWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gMDtcclxuICAgICAgICB0aGlzLmxvYWRtb3JlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1vZGFsID0gbmV3IE1vZGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNob3dNb2RhbChvblNlbGVjdFN5bWJvbDogKHN5bWJvbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGxvZ286IHN0cmluZykgPT4gdm9pZCkge1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzTGlzdCA9IG5ldyBTZWN1cml0aWVzTGlzdCgpO1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgc2VjdXJpdGllc0xpc3QucmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGxldCBuZXdJbnN0YW5jZSA9IHRoaXMubW9kYWwuc2hvd01vZGFsKCdTZWxlY3Qgc3RvY2sgdG8gYnV5JywgY29udGVudCxcclxuICAgICAgICAgICAgdHJ1ZSk7XHJcbiAgICAgICAgLy9pZiAobmV3SW5zdGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBzZWN1cml0aWVzTGlzdC5iaW5kRXZlbnRzKG9uU2VsZWN0U3ltYm9sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZU1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMubW9kYWwuaGlkZU1vZGFsKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFkZUluZm8ge1xyXG4gICAgcHJpY2UgOiBudW1iZXI7XHJcbiAgICBsYXN0VHJhZGUgOiBEYXRlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaWNlIDogbnVtYmVyLCBsYXN0VHJhZGUgOiBEYXRlKSB7XHJcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRyYWRlID0gbGFzdFRyYWRlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IElDbG91ZEVycm9yIGZyb20gXCIuL0lDbG91ZEVycm9yXCI7XHJcbmltcG9ydCBFcnJvckluZm8gZnJvbSBcIi4uL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuLi9HZW5lcmFsRXJyb3JcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0dHBFcnJvciBpbXBsZW1lbnRzIElDbG91ZEVycm9yIHtcclxuICAgIG1ldGhvZCA6IHN0cmluZztcclxuICAgIHVybCA6IHN0cmluZztcclxuICAgIGJvZHkgOiBzdHJpbmc7XHJcbiAgICBzZXJ2ZXJFcnJvciA6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiBhbnkpIHtcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG9iai5tZXRob2Q7XHJcbiAgICAgICAgdGhpcy51cmwgPSBvYmoudXJsO1xyXG4gICAgICAgIHRoaXMuYm9keSA9IG9iai5ib2R5O1xyXG4gICAgICAgIHRoaXMuc2VydmVyRXJyb3IgPSBvYmouc2VydmVyRXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xyXG4gICAgICAgIEVycm9ySW5mby5yZXBvcnQobmV3IEdlbmVyYWxFcnJvcignRXJyb3IgZG9pbmcgcmVxdWVzdC4gU2VydmVyIHJlc3BvbnNlIHdhczonICsgdGhpcy5zZXJ2ZXJFcnJvci5kYXRhLm1lc3NhZ2UpKVxyXG5cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuL0dlbmVyYWxFcnJvclwiO1xyXG5pbXBvcnQgRXJyb3JJbmZvIGZyb20gXCIuL0Vycm9ySW5mb1wiO1xyXG5pbXBvcnQgS3ljVmFsaWRhdG9yRXJyb3IgZnJvbSBcIi4vY2xvdWQvS3ljVmFsaWRhdG9yRXJyb3JcIjtcclxuaW1wb3J0IElDbG91ZEVycm9yIGZyb20gXCIuL2Nsb3VkL0lDbG91ZEVycm9yXCI7XHJcbmltcG9ydCBIdHRwRXJyb3IgZnJvbSBcIi4vY2xvdWQvSHR0cEVycm9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDbG91ZEVycm9yIGV4dGVuZHMgR2VuZXJhbEVycm9yIHtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoZTogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoZSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IG9iaiA9IEpTT04ucGFyc2UoZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgaWYgKG9iai5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JIYW5kbGVyID0gQ2xvdWRFcnJvci5nZXRBY3Rpb25JbnN0YW5jZShvYmoubmFtZSwgb2JqKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIuaGFuZGxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFcnJvckluZm8uZXJyb3Iob2JqKTtcclxuICAgICAgICB9IGNhdGNoIChqc29uRXJyb3IpIHtcclxuICAgICAgICAgICAgRXJyb3JJbmZvLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFjdGlvbkluc3RhbmNlKGFjdGlvbjogc3RyaW5nLCBvYmo6IGFueSk6IElDbG91ZEVycm9yIHtcclxuICAgICAgICBsZXQgdG1wOiBhbnkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgZm9yIChsZXQgaT0wO2k8Q2xvdWRFcnJvci5FcnJvcnMubGVuZ3RoO2krKykge1xyXG4gICAgICAgICAgICBpZiAoQ2xvdWRFcnJvci5FcnJvcnNbaV0ubmFtZSA9PT0gYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JIYW5kbGVyID0gQ2xvdWRFcnJvci5FcnJvcnNbaV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVycm9ySGFuZGxlcihvYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG1wO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBFcnJvcnMgPSBbXHJcbiAgICAgICAgSHR0cEVycm9yXHJcbiAgICBdXHJcbn0iLCJpbXBvcnQgVHJhZGVJbmZvIGZyb20gXCIuL1RyYWRlSW5mb1wiO1xyXG5pbXBvcnQgQ2xvdWRFcnJvciBmcm9tIFwiLi4vLi4vZXJyb3JzL0Nsb3VkRXJyb3JcIjtcclxuaW1wb3J0IHtUcmFkZVR5cGV9IGZyb20gXCIuLi8uLi9lbnVtcy9UcmFkZVR5cGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b2NrUHJpY2VTZXJ2aWNlIHtcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgdGhpcy5tb3JhbGlzID0gbW9yYWxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U3ltYm9sUHJpY2Uoc3ltYm9sOiBzdHJpbmcsIHRyYWRlVHlwZTogVHJhZGVUeXBlKTogUHJvbWlzZTxUcmFkZUluZm8+IHtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bihcImdldFN5bWJvbFByaWNlXCIsIHBhcmFtcylcclxuICAgICAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBDbG91ZEVycm9yKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcXVvdGUgPSByZXN1bHQucXVvdGU7XHJcbiAgICAgICAgbGV0IHByaWNlID0gKHRyYWRlVHlwZSA9PSBUcmFkZVR5cGUuU2VsbCkgPyBxdW90ZS5hcCA6IHF1b3RlLmJwO1xyXG4gICAgICAgIGxldCB0cmFkZUluZm8gPSBuZXcgVHJhZGVJbmZvKHByaWNlLCBxdW90ZS50KTtcclxuICAgICAgICByZXR1cm4gdHJhZGVJbmZvO1xyXG5cclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxhYmJyIHRpdGxlPVxcXCJMYXN0IHRyYWRlIHdhcyB7e2xhc3RUcmFkZWR9fVxcXCIgZGF0YS10b29sdGlwPVxcXCJMYXN0IHRyYWRlIHdhcyB7e2xhc3RUcmFkZWR9fVxcXCI+e3t0ZXh0fX08L2FiYnI+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBUcmFkZUlucHV0SHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVJbnB1dC5odG1sJztcclxuaW1wb3J0IHtUcmFkZVR5cGV9IGZyb20gXCIuLi8uLi8uLi9lbnVtcy9UcmFkZVR5cGVcIjtcclxuaW1wb3J0IFNlY3VyaXRpZXNMaXN0TW9kYWwgZnJvbSBcIi4uLy4uL21vZGFscy9TZWN1cml0aWVzTGlzdE1vZGFsXCI7XHJcbmltcG9ydCBMaW1pbmFsTWFya2V0U2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9MaW1pbmFsTWFya2V0U2VydmljZVwiO1xyXG5pbXBvcnQgU2VjdXJpdHlUb2tlblNlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2Jsb2NrY2hhaW4vU2VjdXJpdHlUb2tlblNlcnZpY2VcIjtcclxuaW1wb3J0IEFVU0RTZXJ2aWNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0FVU0RTZXJ2aWNlXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmFja2VuZC9Vc2VyU2VydmljZVwiO1xyXG5pbXBvcnQge3JvdW5kQmlnTnVtYmVyLCByb3VuZEJpZ051bWJlckRlY2ltYWwsIHJvdW5kTnVtYmVyRGVjaW1hbH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvSGVscGVyXCI7XHJcbmltcG9ydCBTdG9ja1ByaWNlU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvYmFja2VuZC9TdG9ja1ByaWNlU2VydmljZVwiO1xyXG5pbXBvcnQgQmlnTnVtYmVyIGZyb20gXCJiaWdudW1iZXIuanNcIjtcclxuaW1wb3J0IFByaWNlUGVyU2hhcmVIdG1sIGZyb20gJy4uLy4uLy4uL2h0bWwvZWxlbWVudHMvdHJhZGVwYW5lbC9QcmljZVBlclNoYXJlLmh0bWwnXHJcbmltcG9ydCBNb3JhbGlzIGZyb20gXCJtb3JhbGlzXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhZGVQYW5lbElucHV0IHtcclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgc3ltYm9sOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBsb2dvOiBzdHJpbmc7XHJcbiAgICBhZGRyZXNzOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSB0cmFkZVR5cGU6IFRyYWRlVHlwZTtcclxuICAgIHF1YW50aXR5OiBCaWdOdW1iZXI7XHJcbiAgICBzdHJRdWFudGl0eSA6IHN0cmluZztcclxuICAgIGJhbGFuY2U6IEJpZ051bWJlcjtcclxuICAgIGxhc3RQcmljZTogbnVtYmVyO1xyXG4gICAgbGFzdFRyYWRlZDogc3RyaW5nO1xyXG4gICAgcXR5UGVyRG9sbGFyOiBudW1iZXI7XHJcbiAgICB0ZW1wbGF0ZTogYW55O1xyXG4gICAgcHJpY2VQZXJTaGFyZVRlbXBsYXRlOiBhbnk7XHJcbiAgICBvdGhlclRyYWRlUGFuZWxJbnB1dDogVHJhZGVQYW5lbElucHV0IHwgdW5kZWZpbmVkO1xyXG4gICAgb25VcGRhdGUgOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XHJcbiAgICBpc0RpcnR5IDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzLCBzeW1ib2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCBsb2dvOiBzdHJpbmcsIGFkZHJlc3M6IHN0cmluZywgdHJhZGVUeXBlOiBUcmFkZVR5cGUpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgICAgIHRoaXMuc3ltYm9sID0gc3ltYm9sO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5sb2dvID0gbG9nbztcclxuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xyXG4gICAgICAgIHRoaXMudHJhZGVUeXBlID0gdHJhZGVUeXBlO1xyXG4gICAgICAgIHRoaXMucXVhbnRpdHkgPSBuZXcgQmlnTnVtYmVyKDApO1xyXG4gICAgICAgIHRoaXMuc3RyUXVhbnRpdHkgPSAnJztcclxuICAgICAgICB0aGlzLmJhbGFuY2UgPSBuZXcgQmlnTnVtYmVyKDApO1xyXG4gICAgICAgIHRoaXMubGFzdFByaWNlID0gMDtcclxuICAgICAgICB0aGlzLnF0eVBlckRvbGxhciA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0VHJhZGVkID0gJyc7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShUcmFkZUlucHV0SHRtbCk7XHJcbiAgICAgICAgdGhpcy5wcmljZVBlclNoYXJlVGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoUHJpY2VQZXJTaGFyZUh0bWwpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0T3RoZXJUcmFkZVBhbmVsSW5wdXQodHJhZGVQYW5lbElucHV0OiBUcmFkZVBhbmVsSW5wdXQpIHtcclxuICAgICAgICB0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0ID0gdHJhZGVQYW5lbElucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJUb1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoYmluZEV2ZW50cyA6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMudHJhZGVUeXBlICsgJ0lucHV0cycpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGVsZW1lbnQub3V0ZXJIVE1MID0gdGhpcy5yZW5kZXJUb1N0cmluZygpO1xyXG4gICAgICAgIGlmIChiaW5kRXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmluZEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLmJpbmRRdWFudGl0eUxpc3RlbmVyKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kU2VsZWN0U3RvY2tCdXR0b24oKTtcclxuICAgICAgICB0aGlzLmJpbmRNYXhMaW5rKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFN5bWJvbChzeW1ib2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCBsb2dvOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnN5bWJvbCA9IHN5bWJvbDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMubG9nbyA9IGxvZ287XHJcblxyXG4gICAgICAgIHRoaXMuaXNEaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kU2VsZWN0U3RvY2tCdXR0b24oKSB7XHJcbiAgICAgICAgbGV0IHNlbGVjdFN0b2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyB0aGlzLnRyYWRlVHlwZSArICdTZWxlY3RTdG9jaycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RTdG9jaykgcmV0dXJuO1xyXG5cclxuICAgICAgICBzZWxlY3RTdG9jay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2VjdXJpdHlMaXN0ID0gbmV3IFNlY3VyaXRpZXNMaXN0TW9kYWwoKTtcclxuICAgICAgICAgICAgYXdhaXQgc2VjdXJpdHlMaXN0LnNob3dNb2RhbChhc3luYyAoc3ltYm9sOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbG9nbzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWN1cml0eUxpc3QuaGlkZU1vZGFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQgJiYgdGhpcy5zeW1ib2wgPT0gJ2FVU0QnICYmIHN5bWJvbCAhPSB0aGlzLnN5bWJvbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQuc2V0U3ltYm9sKHRoaXMuc3ltYm9sLCB0aGlzLm5hbWUsIHRoaXMubG9nbylcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN5bWJvbCA9IHN5bWJvbDtcclxuICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ28gPSBsb2dvO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsaW1pbmFsTWFya2V0U2VydmljZSA9IG5ldyBMaW1pbmFsTWFya2V0U2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gYXdhaXQgbGltaW5hbE1hcmtldFNlcnZpY2UuZ2V0U3ltYm9sQ29udHJhY3RBZGRyZXNzKHN5bWJvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZEJhbGFuY2UoKS50aGVuKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRMYXN0VHJhZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vblVwZGF0ZSkgdGhpcy5vblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBiaW5kUXVhbnRpdHlMaXN0ZW5lcigpIHtcclxuICAgICAgICBsZXQgcXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMudHJhZGVUeXBlICsgJ0lucHV0cyAudHJhZGVfaW5wdXQgaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGlmICghcXR5SW5wdXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGlucHV0VGltZXIgOiBhbnk7XHJcbiAgICAgICAgcXR5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFRpbWVyKSBjbGVhclRpbWVvdXQoaW5wdXRUaW1lcik7XHJcblxyXG4gICAgICAgICAgICBpbnB1dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZSA9IChldnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRRdWFudGl0eShpbnB1dFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFByb2dyZXNzYmFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQpIHRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQudXBkYXRlUXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uVXBkYXRlKSB0aGlzLm9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRNYXhMaW5rKCkge1xyXG4gICAgICAgIGxldCBtYXhCYWxhbmNlRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnRyYWRlVHlwZSArICdJbnB1dHMgLmJhbGFuY2VfbWF4JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFtYXhCYWxhbmNlRG9tKSByZXR1cm47XHJcblxyXG4gICAgICAgIG1heEJhbGFuY2VEb20uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHF0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnRyYWRlVHlwZSArICdJbnB1dHMgLnRyYWRlX2lucHV0IGlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCFxdHlJbnB1dCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgcXR5SW5wdXQudmFsdWUgPSB0aGlzLmJhbGFuY2UudG9GaXhlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFF1YW50aXR5KHF0eUlucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkUHJvZ3Jlc3NiYXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0KSB0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0LnVwZGF0ZVF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uVXBkYXRlKSB0aGlzLm9uVXBkYXRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZEJhbGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlID0gbmV3IEJpZ051bWJlcigwKTtcclxuXHJcbiAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IGV0aEFkZHJlc3MgPSB1c2VyU2VydmljZS5nZXRFdGhBZGRyZXNzKCk7XHJcblxyXG4gICAgICAgIGxldCBiYWxhbmNlRG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnRyYWRlVHlwZSArICdJbnB1dHMgLmJhbGFuY2VfdmFsdWUnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoIWJhbGFuY2VEb20pIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3ltYm9sID09PSAnYVVTRCcpIHtcclxuICAgICAgICAgICAgaWYgKGV0aEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhVXNkU2VydmljZSA9IG5ldyBBVVNEU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlID0gYXdhaXQgYVVzZFNlcnZpY2UuZ2V0QVVTREJhbGFuY2VPZihldGhBZGRyZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiYWxhbmNlRG9tLmlubmVySFRNTCA9ICckJyArIHJvdW5kQmlnTnVtYmVyKHRoaXMuYmFsYW5jZSkudG9TdHJpbmcoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlID0gbmV3IEJpZ051bWJlcigwKTtcclxuICAgICAgICAgICAgaWYgKGV0aEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWN1cml0eVRva2VuU2VydmljZSA9IG5ldyBTZWN1cml0eVRva2VuU2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlID0gYXdhaXQgc2VjdXJpdHlUb2tlblNlcnZpY2UuZ2V0UXVhbnRpdHlCeUFkZHJlc3ModGhpcy5zeW1ib2wsIGV0aEFkZHJlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhbGFuY2VEb20uaW5uZXJIVE1MID0gcm91bmRCaWdOdW1iZXJEZWNpbWFsKHRoaXMuYmFsYW5jZSwgNikudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFsYW5jZURvbS5kYXRhc2V0LnRvb2x0aXAgPSB0aGlzLmJhbGFuY2UudG9TdHJpbmcoKTtcclxuICAgICAgICBiYWxhbmNlRG9tLnRpdGxlID0gdGhpcy5iYWxhbmNlLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZFByb2dyZXNzYmFyKCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVNYXhCYWxhbmNlTGluaygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkTGFzdFRyYWRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN5bWJvbCA9PT0gJ2FVU0QnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFByaWNlID0gMTtcclxuICAgICAgICAgICAgdGhpcy5xdHlQZXJEb2xsYXIgPSAxO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5vdGhlclRyYWRlUGFuZWxJbnB1dCB8fCB0aGlzLm5hbWUgPT0gJycpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGFVc2RQcmljZVBlclNoYXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0LnRyYWRlVHlwZSArICdJbnB1dHMgLnByaWNlX3Blcl9zaGFyZScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghYVVzZFByaWNlUGVyU2hhcmUpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHByaWNlUGVyU2hhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMudHJhZGVUeXBlICsgJ0lucHV0cyAucHJpY2VfcGVyX3NoYXJlJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFwcmljZVBlclNoYXJlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGFVc2RQcmljZVBlclNoYXJlLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgJ3RydWUnKTtcclxuICAgICAgICBwcmljZVBlclNoYXJlLnNldEF0dHJpYnV0ZSgnYXJpYS1idXN5JywgJ3RydWUnKTtcclxuXHJcbiAgICAgICAgbGV0IHN0b2NrUHJpY2VTZXJ2aWNlID0gbmV3IFN0b2NrUHJpY2VTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgbGV0IHRyYWRlSW5mbyA9IGF3YWl0IHN0b2NrUHJpY2VTZXJ2aWNlLmdldFN5bWJvbFByaWNlKHRoaXMuc3ltYm9sLCB0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0LnRyYWRlVHlwZSk7XHJcblxyXG4gICAgICAgIHRoaXMubGFzdFByaWNlID0gdHJhZGVJbmZvLnByaWNlO1xyXG4gICAgICAgIHRoaXMubGFzdFRyYWRlZCA9IHRyYWRlSW5mby5sYXN0VHJhZGUudG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLnF0eVBlckRvbGxhciA9IDEgLyB0aGlzLmxhc3RQcmljZTtcclxuXHJcbiAgICAgICAgbGV0IHByaWNlUGVyU2hhcmVIdG1sOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIGxhc3RUcmFkZWQ6IHRoaXMubGFzdFRyYWRlZCxcclxuICAgICAgICAgICAgdGV4dDogJ+KJiCAkJyArIHRoaXMubGFzdFByaWNlICsgJyBwZXIgc2hhcmUnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcmljZVBlclNoYXJlLmlubmVySFRNTCA9IHRoaXMucHJpY2VQZXJTaGFyZVRlbXBsYXRlKHByaWNlUGVyU2hhcmVIdG1sKTtcclxuXHJcbiAgICAgICAgbGV0IHByaWNlUGVyQVVzZEh0bWw6IGFueSA9IHtcclxuICAgICAgICAgICAgbGFzdFRyYWRlZDogdGhpcy5sYXN0VHJhZGVkLFxyXG4gICAgICAgICAgICB0ZXh0OiAnMSBhVVNEIOKJiCAnICsgcm91bmROdW1iZXJEZWNpbWFsKHRoaXMucXR5UGVyRG9sbGFyLCA2KSArICcgJyArIHRoaXMuc3ltYm9sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhVXNkUHJpY2VQZXJTaGFyZS5pbm5lckhUTUwgPSB0aGlzLnByaWNlUGVyU2hhcmVUZW1wbGF0ZShwcmljZVBlckFVc2RIdG1sKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVF1YW50aXR5KCk7XHJcblxyXG4gICAgICAgIGFVc2RQcmljZVBlclNoYXJlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1idXN5Jyk7XHJcbiAgICAgICAgcHJpY2VQZXJTaGFyZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVRdWFudGl0eSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHF0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnRyYWRlVHlwZSArICdJbnB1dHMgLnRyYWRlX2lucHV0IGlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBpZiAoIXF0eUlucHV0KSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuc3ltYm9sID09PSAnYVVTRCcpIHtcclxuICAgICAgICAgICAgcXR5SW5wdXQudmFsdWUgPSB0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0LnF1YW50aXR5LmRpdih0aGlzLm90aGVyVHJhZGVQYW5lbElucHV0LnF0eVBlckRvbGxhcikudG9TdHJpbmcoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBxdHlJbnB1dC52YWx1ZSA9IHRoaXMub3RoZXJUcmFkZVBhbmVsSW5wdXQucXVhbnRpdHkubXVsdGlwbGllZEJ5KHRoaXMucXR5UGVyRG9sbGFyKS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFF1YW50aXR5KHF0eUlucHV0LnZhbHVlKTtcclxuICAgICAgICB0aGlzLmxvYWRQcm9ncmVzc2JhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFByb2dyZXNzYmFyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnF1YW50aXR5LmVxKDApIHx8IHRoaXMuYmFsYW5jZS5lcSgwKSB8fCB0aGlzLnRyYWRlVHlwZSA9PSBUcmFkZVR5cGUuQnV5KSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBwcm9ncmVzc0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy50cmFkZVR5cGUgKyAnSW5wdXRzIC5wcm9ncmVzcycpIGFzIEhUTUxQcm9ncmVzc0VsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFwcm9ncmVzc0RvbSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgcGVyY2VudGFnZSA9IHRoaXMucXVhbnRpdHkuZGl2KHRoaXMuYmFsYW5jZSkudG9OdW1iZXIoKTtcclxuICAgICAgICBwcm9ncmVzc0RvbS52YWx1ZSA9IHBlcmNlbnRhZ2U7XHJcbiAgICAgICAgcHJvZ3Jlc3NEb20uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcblxyXG4gICAgICAgIGxldCBleGNlZWRzQmFsYW5jZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy50cmFkZVR5cGUgKyAnSW5wdXRzIC5leGNlZWRzX3dhbGxldF9iYWxhbmNlJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxKSB7XHJcbiAgICAgICAgICAgIGV4Y2VlZHNCYWxhbmNlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICBwcm9ncmVzc0RvbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXhjZWVkc0JhbGFuY2UuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc3dpdGNoUGFuZWxzKHNlbGxUcmFkZVBhbmVsSW5wdXQ6IFRyYWRlUGFuZWxJbnB1dCwgYnV5VHJhZGVQYW5lbElucHV0OiBUcmFkZVBhbmVsSW5wdXQpOiBQcm9taXNlPFtUcmFkZVBhbmVsSW5wdXQsIFRyYWRlUGFuZWxJbnB1dF0+IHtcclxuICAgICAgICBsZXQgc2VsbFN5bWJvbCA9IHNlbGxUcmFkZVBhbmVsSW5wdXQuc3ltYm9sO1xyXG4gICAgICAgIGxldCBzZWxsTmFtZSA9IHNlbGxUcmFkZVBhbmVsSW5wdXQubmFtZTtcclxuICAgICAgICBsZXQgc2VsbExvZ28gPSBzZWxsVHJhZGVQYW5lbElucHV0LmxvZ287XHJcbiAgICAgICAgbGV0IHNlbGxRdWFudGl0eSA9IHNlbGxUcmFkZVBhbmVsSW5wdXQucXVhbnRpdHk7XHJcbiAgICAgICAgc2VsbFRyYWRlUGFuZWxJbnB1dC5zZXRTeW1ib2woYnV5VHJhZGVQYW5lbElucHV0LnN5bWJvbCwgYnV5VHJhZGVQYW5lbElucHV0Lm5hbWUsIGJ1eVRyYWRlUGFuZWxJbnB1dC5sb2dvKVxyXG4gICAgICAgIHNlbGxUcmFkZVBhbmVsSW5wdXQucXVhbnRpdHkgPSBidXlUcmFkZVBhbmVsSW5wdXQucXVhbnRpdHk7XHJcbiAgICAgICAgYnV5VHJhZGVQYW5lbElucHV0LnNldFN5bWJvbChzZWxsU3ltYm9sLCBzZWxsTmFtZSwgc2VsbExvZ28pXHJcbiAgICAgICAgYnV5VHJhZGVQYW5lbElucHV0LnF1YW50aXR5ID0gc2VsbFF1YW50aXR5O1xyXG5cclxuICAgICAgICBhd2FpdCBzZWxsVHJhZGVQYW5lbElucHV0LnVwZGF0ZVBhbmVsKCk7XHJcbiAgICAgICAgYXdhaXQgYnV5VHJhZGVQYW5lbElucHV0LnVwZGF0ZVBhbmVsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBbc2VsbFRyYWRlUGFuZWxJbnB1dCwgYnV5VHJhZGVQYW5lbElucHV0XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UXVhbnRpdHkodmFsdWUgOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT0gJycgfHwgdmFsdWUgPT0gJzAnKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IG5ldyBCaWdOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc3RyUXVhbnRpdHkgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBxdWFudGl0eUZvcm1hdHRlZCgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc3ltYm9sID09PSAnYVVTRCcpID8gJyQnICsgdGhpcy5xdWFudGl0eSA6IHRoaXMucXVhbnRpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZVBhbmVsKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUXVhbnRpdHkoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcih0cnVlKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQmFsYW5jZSgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZExhc3RUcmFkZSgpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVNYXhCYWxhbmNlTGluaygpIHtcclxuICAgICAgICBsZXQgbWF4QmFsYW5jZURvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy50cmFkZVR5cGUgKyAnSW5wdXRzIC5iYWxhbmNlX21heCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghbWF4QmFsYW5jZURvbSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5iYWxhbmNlLmVxKDApKSB7XHJcbiAgICAgICAgICAgIG1heEJhbGFuY2VEb20uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWF4QmFsYW5jZURvbS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8ZGl2IGNsYXNzPVxcXCJncmlkIHRyYWRlU3dpdGNoXFxcIj5cXHJcXG4gICAgPGEgdGl0bGU9XFxcIlN3aXRjaCB0aGUgdHJhZGVcXFwiIGhyZWY9XFxcIlxcXCIgY2xhc3M9XFxcInN3aXRjaEJ0blxcXCIgY2xhc3M9XFxcIm91dGxpbmVcXFwiPjwvYT5cXHJcXG48L2Rpdj5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IFRyYWRlU3dpdGNoSHRtbCBmcm9tICcuLi8uLi8uLi9odG1sL2VsZW1lbnRzL3RyYWRlcGFuZWwvVHJhZGVTd2l0Y2guaHRtbCc7XHJcbmltcG9ydCBUcmFkZVBhbmVsSW5wdXQgZnJvbSBcIi4vVHJhZGVQYW5lbElucHV0XCI7XHJcbmltcG9ydCBFeGVjdXRlVHJhZGVCdXR0b24gZnJvbSBcIi4vRXhlY3V0ZVRyYWRlQnV0dG9uXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFkZVN3aXRjaCB7XHJcblxyXG4gICAgdGVtcGxhdGUgOiBhbnkgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShUcmFkZVN3aXRjaEh0bWwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyVG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBkb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJhZGVTd2l0Y2gnKTtcclxuICAgICAgICBpZiAoIWRvbSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBkb20ub3V0ZXJIVE1MID0gdGhpcy5yZW5kZXJUb1N0cmluZygpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJpbmRFdmVudHMoc2VsbFRyYWRlUGFuZWxJbnB1dCA6IFRyYWRlUGFuZWxJbnB1dCwgYnV5VHJhZGVQYW5lbElucHV0IDogVHJhZGVQYW5lbElucHV0LCBleGVjdXRlVHJhZGVCdXR0b24gOiBFeGVjdXRlVHJhZGVCdXR0b24pIHtcclxuICAgICAgICBsZXQgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN3aXRjaEJ0bicpO1xyXG4gICAgICAgIGlmICghZG9tKSByZXR1cm47XHJcblxyXG4gICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBbc2VsbFRyYWRlUGFuZWxJbnB1dCwgYnV5VHJhZGVQYW5lbElucHV0XSA9IGF3YWl0IFRyYWRlUGFuZWxJbnB1dC5zd2l0Y2hQYW5lbHMoc2VsbFRyYWRlUGFuZWxJbnB1dCwgYnV5VHJhZGVQYW5lbElucHV0KTtcclxuXHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgRXhlY3V0ZVRyYWRlQnV0dG9uIGZyb20gXCIuL3RyYWRlcGFuZWwvRXhlY3V0ZVRyYWRlQnV0dG9uXCI7XHJcbmltcG9ydCBTdG9ja1ByaWNlU2VydmljZSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYmFja2VuZC9TdG9ja1ByaWNlU2VydmljZVwiO1xyXG5pbXBvcnQge1RyYWRlVHlwZX0gZnJvbSBcIi4uLy4uL2VudW1zL1RyYWRlVHlwZVwiO1xyXG5pbXBvcnQgVHJhZGVQYW5lbElucHV0IGZyb20gXCIuL3RyYWRlcGFuZWwvVHJhZGVQYW5lbElucHV0XCI7XHJcbmltcG9ydCBDb250cmFjdEluZm8gZnJvbSBcIi4uLy4uL2NvbnRyYWN0cy9Db250cmFjdEluZm9cIjtcclxuaW1wb3J0IFRyYWRlU3dpdGNoIGZyb20gXCIuL3RyYWRlcGFuZWwvVHJhZGVTd2l0Y2hcIjtcclxuaW1wb3J0IFNlY3VyaXRpZXNMaXN0TW9kYWwgZnJvbSBcIi4uL21vZGFscy9TZWN1cml0aWVzTGlzdE1vZGFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFkZVBhbmVsIHtcclxuICAgIG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcztcclxuICAgIHF1YW50aXR5IDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICAgICAgdGhpcy5xdWFudGl0eSA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlbmRlcihlbGVtZW50SWQgOiBzdHJpbmcsIHN5bWJvbD8gOiBzdHJpbmcsIG5hbWU/IDogc3RyaW5nLCBsb2dvPyA6IHN0cmluZywgYWRkcmVzcz8gOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XHJcbiAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBjb250cmFjdEluZm8gPSBDb250cmFjdEluZm8uZ2V0Q29udHJhY3RJbmZvKCk7XHJcblxyXG4gICAgICAgIGxldCBzZWxsVHJhZGVJbnB1dCA9IG5ldyBUcmFkZVBhbmVsSW5wdXQodGhpcy5tb3JhbGlzLCBcImFVU0RcIiwgXCJhVVNEIGF0IEJyb2tlclwiLCBcIi9pbWcvYXVzZC5wbmdcIiwgY29udHJhY3RJbmZvLkFVU0RfQUREUkVTUywgVHJhZGVUeXBlLlNlbGwpO1xyXG4gICAgICAgIGxldCBidXlUcmFkZUlucHV0IDogVHJhZGVQYW5lbElucHV0O1xyXG4gICAgICAgIGlmICghc3ltYm9sKSB7XHJcbiAgICAgICAgICAgIGJ1eVRyYWRlSW5wdXQgPSBuZXcgVHJhZGVQYW5lbElucHV0KHRoaXMubW9yYWxpcywgXCJTZWxlY3Qgc3RvY2tcIiwgXCJcIiwgXCJcIiwgXCJcIiwgVHJhZGVUeXBlLkJ1eSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnV5VHJhZGVJbnB1dCA9IG5ldyBUcmFkZVBhbmVsSW5wdXQodGhpcy5tb3JhbGlzLCBzeW1ib2wgYXMgc3RyaW5nLCBuYW1lIGFzIHN0cmluZyxsb2dvIGFzIHN0cmluZyxhZGRyZXNzIGFzIHN0cmluZywgVHJhZGVUeXBlLkJ1eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxsVHJhZGVJbnB1dC5zZXRPdGhlclRyYWRlUGFuZWxJbnB1dChidXlUcmFkZUlucHV0KTtcclxuICAgICAgICBidXlUcmFkZUlucHV0LnNldE90aGVyVHJhZGVQYW5lbElucHV0KHNlbGxUcmFkZUlucHV0KTtcclxuXHJcblxyXG4gICAgICAgIGxldCB0cmFkZVN3aXRjaCA9IG5ldyBUcmFkZVN3aXRjaCgpO1xyXG5cclxuICAgICAgICBsZXQgc2VsbElucHV0ID0gc2VsbFRyYWRlSW5wdXQucmVuZGVyVG9TdHJpbmcoKTtcclxuICAgICAgICBsZXQgYnV5SW5wdXQgPSBidXlUcmFkZUlucHV0LnJlbmRlclRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHN3aXRjaEh0bWwgPSB0cmFkZVN3aXRjaC5yZW5kZXJUb1N0cmluZygpO1xyXG5cclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHNlbGxJbnB1dCArIHN3aXRjaEh0bWwgKyBidXlJbnB1dDtcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsbFRyYWRlSW5wdXQubG9hZEJhbGFuY2UoKTtcclxuICAgICAgICBhd2FpdCBidXlUcmFkZUlucHV0LmxvYWRCYWxhbmNlKCk7XHJcbiAgICAgICAgaWYgKHN5bWJvbCkge1xyXG4gICAgICAgICAgICBhd2FpdCBidXlUcmFkZUlucHV0LmxvYWRMYXN0VHJhZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsbFRyYWRlSW5wdXQuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIGJ1eVRyYWRlSW5wdXQuYmluZEV2ZW50cygpO1xyXG5cclxuICAgICAgICBsZXQgZXhlY3V0ZVRyYWRlQnV0dG9uID0gbmV3IEV4ZWN1dGVUcmFkZUJ1dHRvbih0aGlzLm1vcmFsaXMsIHNlbGxUcmFkZUlucHV0LCBidXlUcmFkZUlucHV0KTtcclxuICAgICAgICBhd2FpdCBleGVjdXRlVHJhZGVCdXR0b24ucmVuZGVyQnV0dG9uKCk7XHJcblxyXG4gICAgICAgIHRyYWRlU3dpdGNoLmJpbmRFdmVudHMoc2VsbFRyYWRlSW5wdXQsIGJ1eVRyYWRlSW5wdXQsIGV4ZWN1dGVUcmFkZUJ1dHRvbik7XHJcbiAgICAgICAgc2VsbFRyYWRlSW5wdXQub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChidXlUcmFkZUlucHV0LmlzRGlydHkpIGJ1eVRyYWRlSW5wdXQudXBkYXRlUGFuZWwoKTtcclxuICAgICAgICAgICAgZXhlY3V0ZVRyYWRlQnV0dG9uLnJlbmRlckJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXlUcmFkZUlucHV0Lm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VsbFRyYWRlSW5wdXQuaXNEaXJ0eSkgc2VsbFRyYWRlSW5wdXQudXBkYXRlUGFuZWwoKTtcclxuICAgICAgICAgICAgZXhlY3V0ZVRyYWRlQnV0dG9uLnJlbmRlckJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG4gICAgcHVibGljIGZvcm1hdEJ1eVBhbmVsKHN5bWJvbCA6IHN0cmluZywgbmFtZSA6IHN0cmluZywgbG9nbyA6IHN0cmluZywgdHJhZGVUeXBlIDogVHJhZGVUeXBlLCBjb250cmFjdEFkZHJlc3MgOiBzdHJpbmcpIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGltaW5hbF9tYXJrZXRfc2VsZWN0X3N5bWJvbCcpIS5pbm5lckhUTUwgPSBzeW1ib2w7XHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxkaXYgaWQ9XFxcInRyYWRpbmdQYW5lbFxcXCI+XFxyXFxuICAgIDxhIGhyZWY9XFxcIiN1c2Vfd2FsbGV0X2Zvcl9vcmRlcnNcXFwiIGlkPVxcXCJ1c2Vfd2FsbGV0X2Zvcl9vcmRlcnNfbGlua1xcXCIgY2xhc3M9XFxcIm5vdF92aXNpYmxlXFxcIj5UcmFkZSBpbiB5b3VyIHdhbGxldCBpbnN0ZWFkIG9mXFxyXFxuICAgICAgICBoZXJlPC9hPlxcclxcbiAgICA8YXJ0aWNsZSBpZD1cXFwibGltaW5hbF9tYXJrZXRfdHJhZGVfcGFuZWxcXFwiPjwvYXJ0aWNsZT5cXHJcXG4gICAgPGRpdiBpZD1cXFwiZXhlY3V0aW5nLXRyYWRlLXByb2dyZXNzXFxcIiBjbGFzcz1cXFwiZC1ub25lXFxcIj5cXHJcXG4gICAgICAgIDxkaXYgaWQ9XFxcInByb2dyZXNzLXRleHRcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPHByb2dyZXNzPjwvcHJvZ3Jlc3M+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJsaW1pbmFsX21hcmtldF9leGVjdXRlX3RyYWRlXFxcIj48L2J1dHRvbj5cXHJcXG5cXHJcXG4gICAgPGFydGljbGUgaWQ9XFxcInVzZV93YWxsZXRfZm9yX29yZGVyc1xcXCI+XFxyXFxuXFxyXFxuICAgICAgICA8aDM+SG93IHRvIGJ1eSBpbiB3YWxsZXQ8L2gzPlxcclxcbiAgICAgICAgPHVsPlxcclxcbiAgICAgICAgICAgIDxsaT5JZiB5b3UgaGF2ZW4ndCBhZGRlZCBhVVNEIHRvIHlvdXIgd2FsbGV0LCBub3cgaXMgdGhlIHRpbWUgLSA8c21hbGw+PGEgaHJlZj1cXFwiXFxcIiBpZD1cXFwiYWRkQVVTRFRvV2FsbGV0XFxcIj5DbGlja1xcclxcbiAgICAgICAgICAgICAgICBoZXJlIHRvIGFkZCBhVVNEIHRvIHdhbGxldDwvYT48L3NtYWxsPjwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPjxhIGhyZWY9XFxcIlxcXCIgY2xhc3M9XFxcImZpbmRTeW1ib2xcXFwiPkZpbmQgc3ltYm9sPC9hPiB5b3Ugd2FudCB0byBidXkgJiBjbGljayBcXFwiR2V0IGFkZHJlc3NcXFwiPC9saT5cXHJcXG4gICAgICAgICAgICA8bGk+R28gdG8geW91ciB3YWxsZXQgYW5kIGZpbmQgdGhlIGFVU0QgdG9rZW4sIGNsaWNrIFxcXCJTZW5kXFxcIjwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPlBhc3RlIGluIHRoZSBhZGRyZXNzIHlvdSBqdXN0IGNvcGllZCBmb3IgdGhlIFJlY2VpdmVyLlxcclxcbiAgICAgICAgICAgICAgICA8dWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGk+PGVtPk5vdGU6IElmIHlvdSBjYW4sIHNhdmUgdGhlIGFkZHJlc3MgdG8geW91ciBjb250YWN0IGxpc3QgZm9yIGVhc3kgYWNjZXNzIG5leHQgdGltZTwvZW0+PC9saT5cXHJcXG4gICAgICAgICAgICAgICAgPC91bD5cXHJcXG4gICAgICAgICAgICA8L2xpPlxcclxcblxcclxcbiAgICAgICAgICAgIDxsaT5UeXBlIGluIHRoZSBhbW91bnQgJiBjbGljayBDb25maXJtPC9saT5cXHJcXG4gICAgICAgICAgICA8bGk+WW91IGhhdmUgbm93IGJvdWdodCB0aGUgc2hhcmVzLCBkb24ndCBmb3JnZXQgdG8gPGEgaHJlZj1cXFwiXFxcIiBjbGFzcz1cXFwiZmluZFN5bWJvbFxcXCI+YWRkIHRoZSB0b2tlbiB0byB3YWxsZXQ8L2E+LiAmIzEyNzg4MTs8L2xpPlxcclxcbiAgICAgICAgPC91bD5cXHJcXG4gICAgICAgIDxkaXYgc3R5bGU9XFxcInRleHQtYWxpZ246IGNlbnRlcjtcXFwiPlxcclxcbiAgICAgICAgICAgIDwhLS1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHdpZHRoPVxcXCIzODBcXFwiIGhlaWdodD1cXFwiNTAwXFxcIiBzcmM9XFxcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkL20xaU5vdGdhaWM0P2F1dG9wbGF5PTEmY2NfbG9hZF9wb2xpY3k9MSZwbGF5bGlzdD1tMWlOb3RnYWljNCZsb29wPTFcXFwiIHRpdGxlPVxcXCJZb3VUdWJlIHZpZGVvIHBsYXllclxcXCIgZnJhbWVib3JkZXI9XFxcIjBcXFwiIGFsbG93PVxcXCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgY2xpcGJvYXJkLXdyaXRlOyBlbmNyeXB0ZWQtbWVkaWE7IGd5cm9zY29wZTsgcGljdHVyZS1pbi1waWN0dXJlXFxcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+XFxyXFxuICAgICAgICAgICAgLS0+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG5cXHJcXG4gICAgICAgIDxoMz5TZWxsIHlvdXIgc2VjdXJpdGllczwvaDM+XFxyXFxuXFxyXFxuICAgICAgICA8dWw+XFxyXFxuICAgICAgICAgICAgPGxpPkZpbmQgdGhlIHRva2VuIHlvdSB3YW50IHNvIHNlbGwgaW4geW91IHdhbGxldCBhbmQgY2xpY2sgU2VuZDwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPlB1dCB0aGUgaW4gdGhlIGFVU0QgYWRkcmVzczxici8+PGlucHV0IGlkPVxcXCJhVXNkQWRkcmVzc1xcXCIgdmFsdWU9XFxcInt7QVVTREFkZHJlc3N9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDx1bD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsaT48ZW0+Tm90ZTogSWYgeW91IGNhbiwgc2F2ZSB0aGUgYWRkcmVzcyB0byB5b3VyIGNvbnRhY3QgbGlzdCBmb3IgZWFzeSBhY2Nlc3MgbmV4dCB0aW1lPC9lbT48L2xpPlxcclxcbiAgICAgICAgICAgICAgICA8L3VsPlxcclxcbiAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPlR5cGUgaW4gdGhlIHF1YW50aXR5IG9mIHNoYXJlcyB5b3Ugd2FudCB0byBzZWxsICYgY2xpY2sgQ29uZmlybTwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpPllvdSBoYXZlIG5vdyBzb2xkIHRoZSBzaGFyZXMgJiMxMjc4ODE7PC9saT5cXHJcXG4gICAgICAgIDwvdWw+XFxyXFxuXFxyXFxuICAgIDwvYXJ0aWNsZT5cXHJcXG48L2Rpdj5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiXFxyXFxuXFxyXFxuICAgIFlvdSBjYW4gY29weSB0aGUgYWRkcmVzcyBvZiB7e3N5bWJvbH19IGFuZCBpbXBvcnQgaXQgaW50byB5b3VyIHdhbGxldFxcclxcbiAgICA8aW5wdXQgaWQ9XFxcInRva2VuQWRkcmVzc1xcXCIgdmFsdWU9XFxcInt7dG9rZW5BZGRyZXNzfX1cXFwiIC8+XFxyXFxuXFxyXFxuXCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBUcmFkZVBhbmVsIGZyb20gXCIuLi9lbGVtZW50cy9UcmFkZVBhbmVsXCI7XHJcbmltcG9ydCBUcmFkZVBhZ2VIdG1sIGZyb20gXCIuLi8uLi9odG1sL3BhZ2VzL3RyYWRlLmh0bWxcIjtcclxuaW1wb3J0IENvbnRyYWN0SW5mbyBmcm9tIFwiLi4vLi4vY29udHJhY3RzL0NvbnRyYWN0SW5mb1wiO1xyXG5pbXBvcnQgU2VjdXJpdGllc0xpc3RNb2RhbCBmcm9tIFwiLi4vbW9kYWxzL1NlY3VyaXRpZXNMaXN0TW9kYWxcIjtcclxuaW1wb3J0IEFVU0RTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0FVU0RTZXJ2aWNlXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYmFja2VuZC9Vc2VyU2VydmljZVwiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uL21vZGFscy9Nb2RhbFwiO1xyXG5pbXBvcnQgQ29weVRva2VuQWRkcmVzc1RvQWRkVG9XYWxsZXQgZnJvbSAnLi4vLi4vaHRtbC9tb2RhbC9Db3B5VG9rZW5BZGRyZXNzVG9BZGRUb1dhbGxldC5odG1sJztcclxuaW1wb3J0IEJpZ051bWJlciBmcm9tIFwiYmlnbnVtYmVyLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFkZVBhZ2Uge1xyXG5cclxuICAgIG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXM6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgdGhpcy5tb3JhbGlzID0gbW9yYWxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZChzeW1ib2w/OiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcsIGxvZ28/OiBzdHJpbmcsIGFkZHJlc3M/OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluX2NvbnRhaW5lcicpO1xyXG4gICAgICAgIGlmICghbWFpbkNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgY29udHJhY3RJbmZvID0gQ29udHJhY3RJbmZvLmdldENvbnRyYWN0SW5mbygpO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFRyYWRlUGFnZUh0bWwpO1xyXG4gICAgICAgIG1haW5Db250YWluZXIuaW5uZXJIVE1MID0gdGVtcGxhdGUoe0FVU0RBZGRyZXNzOiBjb250cmFjdEluZm8uQVVTRF9BRERSRVNTfSk7XHJcblxyXG4gICAgICAgIGxldCB0cmFkZVBhbmVsID0gbmV3IFRyYWRlUGFuZWwodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBhd2FpdCB0cmFkZVBhbmVsLnJlbmRlcignbGltaW5hbF9tYXJrZXRfdHJhZGVfcGFuZWwnKTtcclxuXHJcbiAgICAgICAgaWYgKHN5bWJvbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdFN5bWJvbChzeW1ib2wsIG5hbWUhLCBsb2dvISwgYWRkcmVzcyEpXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHVzZXIgPSBuZXcgVXNlclNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgZXRoQWRkcmVzcyA9IHVzZXIuZ2V0RXRoQWRkcmVzcygpO1xyXG5cclxuICAgICAgICBsZXQgYVVTRFNlcnZpY2UgPSBuZXcgQVVTRFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgYXVzZEFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMCk7XHJcbiAgICAgICAgaWYgKGV0aEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgYXVzZEFtb3VudCA9IGF3YWl0IGFVU0RTZXJ2aWNlLmdldEFVU0RCYWxhbmNlT2YoZXRoQWRkcmVzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdXNlcldhbGxldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2Vfd2FsbGV0X2Zvcl9vcmRlcnMnKTtcclxuICAgICAgICBsZXQgdXNlcldhbGxldExpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlX3dhbGxldF9mb3Jfb3JkZXJzX2xpbmsnKTtcclxuICAgICAgICBpZiAoYXVzZEFtb3VudC5lcSgwKSkge1xyXG4gICAgICAgICAgICB1c2VyV2FsbGV0Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdXNlcldhbGxldExpbms/LmNsYXNzTGlzdC5hZGQoJ25vdF92aXNpYmxlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXNlcldhbGxldD8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHVzZXJXYWxsZXRMaW5rPy5jbGFzc0xpc3QucmVtb3ZlKCdub3RfdmlzaWJsZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpbmRTeW1ib2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpbmRTeW1ib2wnKTtcclxuICAgICAgICBmaW5kU3ltYm9scz8uZm9yRWFjaChmaW5kU3ltYm9sID0+IHtcclxuICAgICAgICAgICAgZmluZFN5bWJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzZWN1cml0aWVzTW9kYWwgPSBuZXcgU2VjdXJpdGllc0xpc3RNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgc2VjdXJpdGllc01vZGFsLnNob3dNb2RhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdXJpdGllc01vZGFsLmhpZGVNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBhZGRBVVNEVG9XYWxsZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQVVTRFRvV2FsbGV0Jyk7XHJcbiAgICAgICAgYWRkQVVTRFRvV2FsbGV0Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICB3YWxsZXRIZWxwZXIuYWRkVG9rZW5Ub1dhbGxldChjb250cmFjdEluZm8uQVVTRF9BRERSRVNTLCAnYVVTRCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBtb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKENvcHlUb2tlbkFkZHJlc3NUb0FkZFRvV2FsbGV0KTtcclxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGUoe3N5bWJvbDogJ2FVU0QnLCB0b2tlbkFkZHJlc3M6IGNvbnRyYWN0SW5mby5BVVNEX0FERFJFU1N9KTtcclxuICAgICAgICAgICAgICAgIG1vZGFsLnNob3dNb2RhbCgnQWRkIGFVU0QgdG8gd2FsbGV0JywgY29udGVudCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNlbGVjdFN5bWJvbChzeW1ib2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCBsb2dvOiBzdHJpbmcsIGFkZHJlc3M6IHN0cmluZykge1xyXG4gICAgICAgIGxldCB0cmFkZVBhbmVsID0gbmV3IFRyYWRlUGFuZWwodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBhd2FpdCB0cmFkZVBhbmVsLnJlbmRlcignbGltaW5hbF9tYXJrZXRfdHJhZGVfcGFuZWwnLCBzeW1ib2wsIG5hbWUsIGxvZ28sIGFkZHJlc3MpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbiIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIlxcclxcbjxhcnRpY2xlIGlkPVxcXCJzdG9ja0xpc3RcXFwiPlxcclxcbiA8ZGl2IGlkPVxcXCJ1YVxcXCI+PC9kaXY+XFxyXFxuIDxkaXYgaWQ9XFxcImxpc3Rfb2Zfc2VjdXJpdGllc1xcXCI+e3t7c2VjdXJpdGllc319fTwvZGl2PlxcclxcblxcclxcbjwvYXJ0aWNsZT5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiaW1wb3J0IExpbWluYWxNYXJrZXRTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0xpbWluYWxNYXJrZXRTZXJ2aWNlXCI7XHJcbmltcG9ydCBTZWN1cml0aWVzTGlzdCBmcm9tIFwiLi4vLi4vdWkvZWxlbWVudHMvU2VjdXJpdGllc0xpc3RcIjtcclxuaW1wb3J0IFRyYWRlUGFnZSBmcm9tIFwiLi4vcGFnZXMvVHJhZGVQYWdlXCI7XHJcbmltcG9ydCBTdG9ja3NQYWdlSHRtbCBmcm9tICcuLi8uLi9odG1sL3BhZ2VzL3N0b2Nrc3BhZ2UuaHRtbCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9ja3NQYWdlIHtcclxuXHRtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXM7XHJcblx0Y29uc3RydWN0b3IobW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzKSB7XHJcblx0XHR0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIGxvYWQoKSB7XHJcblx0XHRsZXQgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluX2NvbnRhaW5lcicpO1xyXG5cdFx0aWYgKCFtYWluQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cdFx0bGV0IHNlY3VyaXRpZXNMaXN0ID0gbmV3IFNlY3VyaXRpZXNMaXN0KCk7XHJcblx0XHRsZXQgc2VjdXJpdGllcyA9IGF3YWl0IHNlY3VyaXRpZXNMaXN0LnJlbmRlcigpO1xyXG5cclxuXHRcdGxldCB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShTdG9ja3NQYWdlSHRtbCk7XHJcblx0XHRtYWluQ29udGFpbmVyLmlubmVySFRNTCA9IHRlbXBsYXRlKHtzZWN1cml0aWVzOnNlY3VyaXRpZXN9KTtcclxuXHJcblx0XHRhd2FpdCBzZWN1cml0aWVzTGlzdC5sb2FkTW9yZSgpO1xyXG5cclxuXHRcdGF3YWl0IHNlY3VyaXRpZXNMaXN0LmJpbmRFdmVudHMoYXN5bmMgKHN5bWJvbCwgbmFtZSwgbG9nbykgPT4ge1xyXG5cdFx0XHRsZXQgbGltaW5hbE1hcmtldFNlcnZpY2UgPSBuZXcgTGltaW5hbE1hcmtldFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuXHRcdFx0bGV0IGFkZHJlc3MgPSBhd2FpdCBsaW1pbmFsTWFya2V0U2VydmljZS5nZXRTeW1ib2xDb250cmFjdEFkZHJlc3Moc3ltYm9sKTtcclxuXHJcblx0XHRcdGxldCB0cmFkZVBhZ2UgPSBuZXcgVHJhZGVQYWdlKHRoaXMubW9yYWxpcyk7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJ0J1eSBzdG9ja3MnLCAnIy90cmFkZScpO1xyXG5cdFx0XHRhd2FpdCB0cmFkZVBhZ2UubG9hZChzeW1ib2wsIG5hbWUsIGxvZ28sIGFkZHJlc3MpO1xyXG5cdFx0fSlcclxuXHR9O1xyXG5cclxufVxyXG4iLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8aDM+RG9jdW1lbnRzPC9oMz5cXHJcXG48cD5UaGVzZSBhcmUgeW91ciBkb2N1bWVudHMgZm9yIHlvdXIgdHJhZGVzLCBnZW5lcmF0ZWQgYnkgdGhlIGJyb2tlci4gVGhlc2UgZG9jdW1lbnRzIGFyZSB0cmFkZSBjb25maXJtYXRpb24gJiBtb250aGx5IHN0YXRlbWVudHMuXFxyXFxuXFx0VGhleSBhcmUgZ2VuZXJhdGVkIGF0IHRoZSBlbmQgb2YgdGhlIGRheSwgYmV0d2VlbiAwNjozMFBNLTA3OjMwUE0gRVNULlxcclxcbjwvcD5cXHJcXG57eyNpZiByZXN1bHR9fVxcclxcbjx0YWJsZSBjbGFzcz1cXFwidGFibGUgdGFibGUtaG92ZXJcXFwiPlxcclxcblxcdDx0aGVhZD5cXHJcXG5cXHRcXHQ8dHI+XFxyXFxuXFx0XFx0XFx0PHRoPlR5cGU8L3RoPlxcclxcblxcdFxcdFxcdDx0aD5EYXRlPC90aD5cXHJcXG5cXHRcXHRcXHQ8dGg+RG93bmxvYWQ8L3RoPlxcclxcblxcdFxcdDwvdHI+XFxyXFxuXFx0PC90aGVhZD5cXHJcXG5cXHQ8dGJvZHk+XFxyXFxuXFx0XFx0e3sjZWFjaCByZXN1bHR9fVxcclxcblxcdFxcdDx0cj5cXHJcXG5cXHRcXHRcXHQ8dGQgdGl0bGU9XFxcInt7aWR9fVxcXCI+e3t0eXBlfX08L2E+PC90ZD5cXHJcXG5cXHRcXHRcXHQ8dGQ+e3tkYXRlfX08L3RkPlxcclxcblxcdFxcdFxcdDx0ZD48YSBocmVmPVxcXCJcXFwiIGNsYXNzPVxcXCJkb3dubG9hZERvY1xcXCIgZGF0YS1kb2NpZD1cXFwie3tpZH19XFxcIj5Eb3dubG9hZDwvYT48L3RkPlxcclxcblxcdFxcdDwvdHI+XFxyXFxuXFx0XFx0e3svZWFjaH19XFxyXFxuXFx0PC90Ym9keT5cXHJcXG48L3RhYmxlPlxcclxcbnt7L2lmfX1cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb2N1bWVudFNlcnZpY2Uge1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldERvY3VtZW50cygpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3JhbGlzLkNsb3VkLnJ1bignZG9jdW1lbnRzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldERvY3VtZW50KGRvY3VtZW50SWQgOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50SWQ6IGRvY3VtZW50SWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKFwiZG93bmxvYWRcIiwgcGFyYW1zKTtcclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIlRva2VuIGZvciB7e3N5bWJvbH19IGRvZXMgbm90IGV4aXN0LiBZb3UgY2FuIGNsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gY3JlYXRlIHRoZSB0b2tlbi4gVGhpcyB3aWxsIGNvc3QgYSBiaXQgb2YgZ2FzLlxcclxcbjxiciAvPjxiciAvPlxcclxcbkFmdGVyIHRoZSB0b2tlbiBoYXMgYmVlbiBjcmVhdGVkIHdlIHdpbGwgdHJ5IHRvIGFkZCBpdCB0byB5b3VyIHdhbGxldC5cXHJcXG48YnIgLz48YnIgLz5cXHJcXG48YnV0dG9uIGlkPVxcXCJjcmVhdGVUb2tlbkJ0blxcXCI+Q3JlYXRlIHRva2VuPC9idXR0b24+XFxyXFxuXFxyXFxuPGRpdiBjbGFzcz1cXFwiZC1ub25lXFxcIiBpZD1cXFwiY29weUFkZHJlc3NJbmZvXFxcIj5cXHJcXG4gICAgWW91IGNhbiBjb3B5IHRoZSBhZGRyZXNzIG9mIHRoZSB0b2tlbiBhbmQgaW1wb3J0IGl0IGludG8geW91ciB3YWxsZXRcXHJcXG4gICAgPGlucHV0IGlkPVxcXCJ0b2tlbkFkZHJlc3NcXFwiIC8+XFxyXFxuXFxyXFxuPC9kaXY+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbFwiO1xyXG5pbXBvcnQgQ3JlYXRlVG9rZW5IdG1sIGZyb20gJy4uLy4uL2h0bWwvbW9kYWwvQ3JlYXRlVG9rZW4uaHRtbCc7XHJcbmltcG9ydCBMaW1pbmFsTWFya2V0U2VydmljZSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYmxvY2tjaGFpbi9MaW1pbmFsTWFya2V0U2VydmljZVwiO1xyXG5pbXBvcnQgV2FsbGV0SGVscGVyIGZyb20gXCIuLi8uLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQge0FkZHJlc3NaZXJvfSBmcm9tIFwiLi4vLi4vdXRpbC9IZWxwZXJcIjtcclxuaW1wb3J0IExvYWRpbmdIZWxwZXIgZnJvbSBcIi4uLy4uL3V0aWwvTG9hZGluZ0hlbHBlclwiO1xyXG5pbXBvcnQgQmxvY2tjaGFpbkVycm9yIGZyb20gXCIuLi8uLi9lcnJvcnMvQmxvY2tjaGFpbkVycm9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVhdGVUb2tlbiB7XHJcbiAgICBtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXM7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXMpIHtcclxuICAgICAgICB0aGlzLm1vcmFsaXMgPSBtb3JhbGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KHN5bWJvbCA6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBtb2RhbCA9IG5ldyBNb2RhbCgpO1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoQ3JlYXRlVG9rZW5IdG1sKTtcclxuXHJcblxyXG4gICAgICAgIG1vZGFsLnNob3dNb2RhbChcIlRva2VuIFwiICsgc3ltYm9sICsgXCIgZG9lc24ndCBleGlzdFwiLCB0ZW1wbGF0ZSh7c3ltYm9sOnN5bWJvbH0pKTtcclxuXHJcbiAgICAgICAgbGV0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVUb2tlbkJ0bicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghYnRuKSByZXR1cm47XHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgTG9hZGluZ0hlbHBlci5zZXRMb2FkaW5nKGJ0biEpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxpbWluYWxNYXJrZXRTZXJ2aWNlID0gbmV3IExpbWluYWxNYXJrZXRTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGxldCBhZGRyZXNzID0gYXdhaXQgbGltaW5hbE1hcmtldFNlcnZpY2UuZ2V0U3ltYm9sQ29udHJhY3RBZGRyZXNzKHN5bWJvbCk7XHJcbiAgICAgICAgICAgIGlmIChhZGRyZXNzID09PSBBZGRyZXNzWmVybykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGxpbWluYWxNYXJrZXRTZXJ2aWNlLmNyZWF0ZVRva2VuKHN5bWJvbCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bi5pbm5lckhUTUwgPSAnQ3JlYXRpbmcgdG9rZW4uIEdpdmUgaXQgZmV3IHNlY29uZHMnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEJsb2NrY2hhaW5FcnJvciAmJiByZXN1bHQuY29kZSA9PSBCbG9ja2NoYWluRXJyb3IuVXNlckNhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIExvYWRpbmdIZWxwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFkZHJlc3MgPSByZXN1bHQgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExvYWRpbmdIZWxwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICBidG4uaW5uZXJIVE1MID0gJ0FkZCB0b2tlbiB0byB3YWxsZXQnO1xyXG4gICAgICAgICAgICBsZXQgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICBhd2FpdCB3YWxsZXRIZWxwZXIuYWRkVG9rZW5Ub1dhbGxldChhZGRyZXNzLCBzeW1ib2wsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0b2tlbkFkZHJlc3NJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2tlbkFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5BZGRyZXNzSW5wdXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB0b2tlbkFkZHJlc3NJbnB1dC5pbm5lckhUTUwgPSBhZGRyZXNzO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHlBZGRyZXNzSW5mbycpIS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxhcnRpY2xlIGNsYXNzPVxcXCJsb2FkZWQtY29udGVudDJcXFwiPlxcclxcblxcdDxoMz5Qb3NpdGlvbnM8IS0tIDxhIGhyZWY9XFxcIlxcXCIgcm9sZT1cXFwiYnV0dG9uXFxcIiBpZD1cXFwic3luY1dhbGxldFxcXCI+U3luYyB3YWxsZXQ8L2E+LS0+PC9oMz5cXHJcXG5cXHQ8cD5UaGVzZSBhcmUgeW91ciBwb3NpdGlvbnMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBicm9rZXIuIFRoZXNlIHdvdWxkIGJlIHJlZ2lzdGVyZWQgdG8geW91IG9uIHRoZSBzdG9jayBleGNoYW5nZSBpZiB3ZSB3ZXJlbid0IHJ1bm5pbmcgb25cXHJcXG5cXHRcXHRhIHNhbmRib3ggYXQgdGhlIGJyb2tlci4gV2FudCB0byBrbm93IHdoZW4gd2Ugb3BlbiBmb3IgbGl2ZSB0cmFkaW5nPyA8YSBocmVmPVxcXCJodHRwczovL2xpbWluYWwubWFya2V0XFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+UmVnaXN0ZXIgeW91ciBlbWFpbCB3aXRoIHVzPC9hPlxcclxcblxcclxcblxcdDwvcD5cXHJcXG5cXHQ8ZmlndXJlPlxcclxcblxcdDx0YWJsZT5cXHJcXG5cXHRcXHQ8dGhlYWQ+XFxyXFxuXFx0XFx0XFx0PHRyPlxcclxcblxcdFxcdFxcdFxcdDx0aD48L3RoPlxcclxcblxcdFxcdFxcdFxcdDx0aD5TeW1ib2w8L3RoPlxcclxcblxcdFxcdFxcdFxcdDx0aD5DdXJyZW50IHByaWNlPC90aD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGg+QXZnLiBlbnRyeSB2YWx1ZTwvdGg+XFxyXFxuXFx0XFx0XFx0XFx0PHRoPlF1YW50aXR5PC90aD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGg+TWFya2V0IHZhbHVlPC90aD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGg+VW5yZWFsaXplIFBMPC90aD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGg+VHJhZGU8L3RoPlxcclxcblxcdFxcdFxcdFxcdDx0aD5BZGQgdG8gd2FsbGV0PC90aD5cXHJcXG5cXHRcXHRcXHQ8L3RyPlxcclxcblxcdFxcdDwvdGhlYWQ+XFxyXFxuXFx0XFx0PHRib2R5PlxcclxcblxcdFxcdFxcdHt7I2lmIHJlc3VsdH19XFxyXFxuXFx0XFx0XFx0e3sjZWFjaCByZXN1bHR9fVxcclxcblxcdFxcdFxcdDx0cj5cXHJcXG5cXHRcXHRcXHRcXHQ8dGQgY2xhc3M9XFxcInN5bWJvbF9sb2dvXFxcIj48aW1nIGlkPVxcXCJzeW1ib2xfbG9nb197e3N5bWJvbH19XFxcIiBzcmM9XFxcIi9pbWcvbG9nb3MvZGVmYXVsdF9sb2dvLnBuZ1xcXCIgLz48L3RkPlxcclxcblxcdFxcdFxcdFxcdDx0ZD48YSBocmVmPVxcXCJodHRwczovL3N0cmlrZS5tYXJrZXQvc3RvY2tzL3t7c3ltYm9sfX1cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj57e3N5bWJvbH19PC9hPjwvdGQ+XFxyXFxuXFx0XFx0XFx0XFx0PHRkPnt7Y3VycmVudF9wcmljZX19PC90ZD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGQ+e3tyb3VuZDIgYXZnX2VudHJ5X3ByaWNlfX08L3RkPlxcclxcblxcdFxcdFxcdFxcdDx0ZD57e3JvdW5kMiBxdHl9fTwvdGQ+XFxyXFxuXFx0XFx0XFx0XFx0PHRkPiR7e3JvdW5kIG1hcmtldF92YWx1ZX19PC90ZD5cXHJcXG5cXHRcXHRcXHRcXHQ8dGQgY2xhc3M9XFxcInt7Y2xhc3NDb2xvciB1bnJlYWxpemVkX3BsfX1cXFwiPiR7e3JvdW5kIHVucmVhbGl6ZWRfcGx9fSAoe3twZXJjIHVucmVhbGl6ZWRfcGxwY319KTwvdGQ+XFxyXFxuXFx0XFx0XFx0XFx0PHRkPjxhIGhyZWY9XFxcIiNcXFwiIGNsYXNzPVxcXCJ0cmFkZVNlY3VyaXR5XFxcIiBkYXRhLXN5bWJvbD1cXFwie3tzeW1ib2x9fVxcXCIgZGF0YS1xdHk9e3txdHl9fT5UcmFkZTwvYT48L3RkPlxcclxcblxcdFxcdFxcdFxcdDx0ZD48YSBocmVmPVxcXCJcXFwiIGNsYXNzPVxcXCJhZGRUb1dhbGxldFxcXCIgZGF0YS1zeW1ib2w9XFxcInt7c3ltYm9sfX1cXFwiPkFkZDwvYT48L3RkPlxcclxcblxcdFxcdFxcdDwvdHI+XFxyXFxuXFx0XFx0XFx0e3svZWFjaH19XFxyXFxuXFx0XFx0XFx0e3svaWZ9fVxcclxcblxcdFxcdDwvdGJvZHk+XFxyXFxuXFx0PC90YWJsZT5cXHJcXG5cXHQ8L2ZpZ3VyZT5cXHJcXG5cXHQ8ZGl2IGlkPVxcXCJkb2N1bWVudHNcXFwiPjwvZGl2PlxcclxcblxcclxcbjwvYXJ0aWNsZT5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGFydGljbGU+XFxyXFxuICAgIElmIHlvdXIgd2FsbGV0IGlzIG91dCBvZiBzeW5jIHdpdGggeW91ciBwb3NpdGlvbiB5b3UgY2FuIHN5bmMgaXQgaGVyZS4gVGhpcyBoYXBwZW5zIHdoZW4geW91IG1vdmUgZnJvbVxcclxcbiAgICBvbmUgY2hhaW4gdG8gYW5vdGhlci4gSWYgeW91IGxpa2UgdG8gc3dpdGNoIHRvIG5ldyBjaGFpbiBjbGljayB0aGUgYnV0dG9uIGJlbG93LlxcclxcbiAgICA8YnIvPjxici8+XFxyXFxuICAgIFlvdSB3aWxsIGJlIGFza2VkIHRvIGNvbmZpcm0gYSB0cmFuc2FjdGlvbiBvZiB7e3RvdGFsQ29zdH19IHt7TmF0aXZlU3ltYm9sfX0gKCR7e3ByaWNlSW5OYXRpdmVUb2tlbn19KS5cXHJcXG4gICAgRWFjaCBzdG9jayBjb3N0cyB7e2Nvc3RQZXJTaGFyZX19IHt7TmF0aXZlU3ltYm9sfX0gdG8gc3luYy4gWW91IGhhdmUgdG90YWwgb2Yge3tzaGFyZUNvdW50fX0gc2hhcmUuXFxyXFxuICAgIDxici8+PGJyLz5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwic3luY0FsbFBvc2l0aW9uc1xcXCI+U3luYyBzdG9jayB0byBteSB3YWxsZXQ8L2J1dHRvbj5cXHJcXG48L2FydGljbGU+XCI7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBjb2RlOyIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9zaXRpb25zU2VydmljZSB7XHJcbiAgICBtb3JhbGlzIDogdHlwZW9mIE1vcmFsaXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IobW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzKSB7XHJcbiAgICAgICAgdGhpcy5tb3JhbGlzID0gbW9yYWxpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0UG9zaXRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdwb3NpdGlvbnMnKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QWRkcmVzc1plcm99IGZyb20gJy4uLy4uL3V0aWwvSGVscGVyJztcclxuaW1wb3J0IExpbWluYWxNYXJrZXRTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9ibG9ja2NoYWluL0xpbWluYWxNYXJrZXRTZXJ2aWNlXCI7XHJcbmltcG9ydCBTZWN1cml0aWVzU2VydmljZSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYnJva2VyL1NlY3VyaXRpZXNTZXJ2aWNlXCI7XHJcbmltcG9ydCBXYWxsZXRIZWxwZXIgZnJvbSBcIi4uLy4uL3V0aWwvV2FsbGV0SGVscGVyXCI7XHJcbmltcG9ydCBEb2N1bWVudHNIdG1sIGZyb20gJy4uLy4uL2h0bWwvZWxlbWVudHMvZG9jdW1lbnRzLmh0bWwnO1xyXG5pbXBvcnQgRG9jdW1lbnRTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9iYWNrZW5kL0RvY3VtZW50U2VydmljZVwiO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uLy4uL3VpL21vZGFscy9Nb2RhbFwiO1xyXG5pbXBvcnQgQ3JlYXRlVG9rZW4gZnJvbSBcIi4uLy4uL3VpL21vZGFscy9DcmVhdGVUb2tlblwiO1xyXG5pbXBvcnQgQWRkcmVzc0luZm9IdG1sIGZyb20gJy4uLy4uL2h0bWwvZWxlbWVudHMvQWRkcmVzc0luZm8uaHRtbCc7XHJcbmltcG9ydCBQb3NpdGlvblBhZ2VIdG1sIGZyb20gJy4uLy4uL2h0bWwvcGFnZXMvcG9zaXRpb25zLmh0bWwnO1xyXG5pbXBvcnQgU3luY1N0b2NrSHRtbCBmcm9tICcuLi8uLi9odG1sL21vZGFsL1N5bmNTdG9jay5odG1sJztcclxuaW1wb3J0IFBvc2l0aW9uc1NlcnZpY2UgZnJvbSBcIi4uLy4uL3NlcnZpY2VzL2JhY2tlbmQvUG9zaXRpb25zU2VydmljZVwiO1xyXG5pbXBvcnQgSGFuZGxlYmFySGVscGVycyBmcm9tIFwiLi4vLi4vdXRpbC9IYW5kbGViYXJIZWxwZXJzXCI7XHJcbmltcG9ydCBUcmFkZVBhZ2UgZnJvbSBcIi4vVHJhZGVQYWdlXCI7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc2l0aW9uc1BhZ2Uge1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG4gICAgZG9jdW1lbnRTZXJ2aWNlIDogRG9jdW1lbnRTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFNlcnZpY2UgPSBuZXcgRG9jdW1lbnRTZXJ2aWNlKHRoaXMubW9yYWxpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoKSB7XHJcblxyXG4gICAgICAgIGxldCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5fY29udGFpbmVyJyk7XHJcbiAgICAgICAgaWYgKCFtYWluQ29udGFpbmVyKSByZXR1cm47XHJcblxyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb25TZXJ2aWNlID0gbmV3IFBvc2l0aW9uc1NlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgcG9zaXRpb25zID0gYXdhaXQgcG9zaXRpb25TZXJ2aWNlLmdldFBvc2l0aW9ucygpO1xyXG5cclxuICAgICAgICBIYW5kbGViYXJIZWxwZXJzLnJlZ2lzdGVySGVscGVycygpO1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoUG9zaXRpb25QYWdlSHRtbCk7XHJcbiAgICAgICAgbWFpbkNvbnRhaW5lci5pbm5lckhUTUwgPSB0ZW1wbGF0ZSh7cmVzdWx0OnBvc2l0aW9uc30pO1xyXG5cclxuICAgICAgICBsZXQgc3luY1dhbGxldEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeW5jV2FsbGV0Jyk7XHJcbiAgICAgICAgaWYgKHN5bmNXYWxsZXRCdG4pIHtcclxuICAgICAgICAgICAgc3luY1dhbGxldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5jQWxsVG9rZW5zKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IHN5bWJvbHMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG4gICAgICAgIGNvbnN0IHNlbGxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RyYWRlU2VjdXJpdHknKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGxMaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IHNlbGxMaW5rc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHN5bWJvbCA9IGVsZW1lbnQuZGF0YXNldC5zeW1ib2w7XHJcbiAgICAgICAgICAgIGlmICghc3ltYm9sKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIHN5bWJvbHMucHVzaChzeW1ib2wpO1xyXG5cclxuICAgICAgICAgICAgc2VsbExpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IHN5bWJvbCA9IGVsZW1lbnQuZGF0YXNldC5zeW1ib2w7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN5bWJvbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsaW1pbmFsTWFya2V0U2VydmljZSA9IG5ldyBMaW1pbmFsTWFya2V0U2VydmljZSh0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRyYWN0QWRkcmVzcyA9IGF3YWl0IGxpbWluYWxNYXJrZXRTZXJ2aWNlLmdldFN5bWJvbENvbnRyYWN0QWRkcmVzcyhzeW1ib2wpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzZWN1cml0aWVzU2VydmljZSA9IGF3YWl0IFNlY3VyaXRpZXNTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjdXJpdHkgPSBhd2FpdCBzZWN1cml0aWVzU2VydmljZS5nZXRTZWN1cml0eUJ5U3ltYm9sKHN5bWJvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRyYWRlUGFnZSA9IG5ldyBUcmFkZVBhZ2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRyYWRlUGFnZS5sb2FkKHN5bWJvbCwgc2VjdXJpdHkuTmFtZSwgc2VjdXJpdHkuTG9nb1BhdGggKyBzZWN1cml0eS5Mb2dvLCBjb250cmFjdEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZFRvV2FsbGV0TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhZGRUb1dhbGxldCcpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkVG9XYWxsZXRMaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhZGRUb1dhbGxldExpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gYWRkVG9XYWxsZXRMaW5rc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGxldCBzeW1ib2wgPSBlbGVtZW50LmRhdGFzZXQuc3ltYm9sITtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbGltaW5hbE1hcmtldFNlcnZpY2UgPSBuZXcgTGltaW5hbE1hcmtldFNlcnZpY2UodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb250cmFjdEFkZHJlc3MgPSBhd2FpdCBsaW1pbmFsTWFya2V0U2VydmljZS5nZXRTeW1ib2xDb250cmFjdEFkZHJlc3Moc3ltYm9sKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb250cmFjdEFkZHJlc3MudG9TdHJpbmcoKSA9PSBBZGRyZXNzWmVybykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjcmVhdGVUb2tlbiA9IG5ldyBDcmVhdGVUb2tlbih0aGlzLm1vcmFsaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRva2VuLnNob3coc3ltYm9sKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdhbGxldEhlbHBlci5hZGRUb2tlblRvV2FsbGV0KGNvbnRyYWN0QWRkcmVzcy50b1N0cmluZygpLCBzeW1ib2wsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoQWRkcmVzc0luZm9IdG1sKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IHRlbXBsYXRlKHtzeW1ib2w6IHN5bWJvbCwgYWRkcmVzczogY29udHJhY3RBZGRyZXNzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuc2hvd01vZGFsKCdJbXBvcnQgdG9rZW4gdG8gd2FsbGV0JywgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyU3ltYm9sTG9nb3Moc3ltYm9scyk7XHJcblxyXG4gICAgICAgIGxldCBkb2NUZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShEb2N1bWVudHNIdG1sKTtcclxuICAgICAgICBsZXQgZG9jdW1lbnRzID0gYXdhaXQgdGhpcy5kb2N1bWVudFNlcnZpY2UuZ2V0RG9jdW1lbnRzKCk7XHJcbiAgICAgICAgbGV0IGRvY3VtZW50RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvY3VtZW50cycpO1xyXG4gICAgICAgIGlmICghZG9jdW1lbnREb20pIHJldHVybjtcclxuXHJcbiAgICAgICAgZG9jdW1lbnREb20uaW5uZXJIVE1MID0gZG9jVGVtcGxhdGUoe3Jlc3VsdDogZG9jdW1lbnRzfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdERvY3VtZW50cygpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVuZGVyU3ltYm9sTG9nb3Moc3ltYm9sczogQXJyYXk8c3RyaW5nPikge1xyXG4gICAgICAgIGxldCBzZWN1cml0aWVzU2VydmljZSA9IGF3YWl0IFNlY3VyaXRpZXNTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgY29uc3QgYXNzZXRzID0gYXdhaXQgc2VjdXJpdGllc1NlcnZpY2UuZ2V0U2VjdXJpdGllcygpO1xyXG4gICAgICAgIGxldCBhc3NldDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYXNzZXQgPSBhc3NldHMuZ2V0KHN5bWJvbHNbaV0pO1xyXG4gICAgICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeW1ib2xfbG9nb18nICsgc3ltYm9sc1tpXSkhLnNldEF0dHJpYnV0ZSgnc3JjJywgJy9pbWcvbG9nb3MvJyArIGFzc2V0LkxvZ28pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzeW5jQWxsVG9rZW5zKCkge1xyXG4gICAgICAgIGxldCBuZXR3b3JrSW5mbyA9IE5ldHdvcmtJbmZvLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgbGV0IGNvc3RPZlN5bmMgPSBhd2FpdCB0aGlzLm1vcmFsaXMuQ2xvdWQucnVuKCdjb3N0T2ZTeW5jJyk7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKFN5bmNTdG9ja0h0bWwpO1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGUoe1xyXG4gICAgICAgICAgICBzaGFyZUNvdW50OiBjb3N0T2ZTeW5jLnNoYXJlQ291bnQsXHJcbiAgICAgICAgICAgIGNvc3RQZXJTaGFyZTogTW9yYWxpcy5Vbml0cy5Gcm9tV2VpKGNvc3RPZlN5bmMuY29zdFBlclNoYXJlLCAxOCksXHJcbiAgICAgICAgICAgIHByaWNlSW5OYXRpdmVUb2tlbjogY29zdE9mU3luYy5wcmljZUluTmF0aXZlVG9rZW4sXHJcbiAgICAgICAgICAgIHRvdGFsQ29zdDogTW9yYWxpcy5Vbml0cy5Gcm9tV2VpKGNvc3RPZlN5bmMuY29zdCwgMTgpLFxyXG4gICAgICAgICAgICBOYXRpdmVTeW1ib2w6IG5ldHdvcmtJbmZvLk5hdGl2ZVN5bWJvbFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgbW9kYWwgPSBuZXcgTW9kYWwoKTtcclxuICAgICAgICBtb2RhbC5zaG93TW9kYWwoJ1N5bmMgYWxsIHN0b2NrIHRvIHdhbGxldCcsIGNvbnRlbnQpXHJcblxyXG4gICAgICAgIGxldCBzeW5jQWxsUG9zaXRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bmNBbGxQb3NpdGlvbnMnKTtcclxuICAgICAgICBpZiAoc3luY0FsbFBvc2l0aW9ucykge1xyXG4gICAgICAgICAgICBzeW5jQWxsUG9zaXRpb25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdERvY3VtZW50cygpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkb3dubG9hZERvYycpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLm1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZG9jdW1lbnRJZCA9IChsaW5rc1tpXSBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5kb2NpZDtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnRJZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsb2NhdGlvblVybCA9IGF3YWl0IHRoaXMuZG9jdW1lbnRTZXJ2aWNlLmdldERvY3VtZW50KGRvY3VtZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uVXJsID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NvdWxkIG5vdCBmaW5kIGRvY3VtZW50LiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3Ugc2hvdWxkIGhhdmUgZ290dGVuIGEgZG9jdW1lbnQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IGxvY2F0aW9uVXJsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgU3RvY2tzUGFnZSBmcm9tIFwiLi4vdWkvcGFnZXMvU3RvY2tzUGFnZVwiO1xyXG5pbXBvcnQgVHJhZGVQYWdlIGZyb20gXCIuLi91aS9wYWdlcy9UcmFkZVBhZ2VcIjtcclxuaW1wb3J0IFBvc2l0aW9uc1BhZ2UgZnJvbSBcIi4uL3VpL3BhZ2VzL1Bvc2l0aW9uc1BhZ2VcIjtcclxuaW1wb3J0IEZha2VBVVNERnVuZCBmcm9tIFwiLi4vdWkvbW9kYWxzL0Z1bmRpbmcvRmFrZUFVU0RGdW5kXCI7XHJcbmltcG9ydCBOZXR3b3JrSW5mbyBmcm9tIFwiLi4vbmV0d29ya3MvTmV0d29ya0luZm9cIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb3V0aW5nIHtcclxuXHJcbiAgICBzZXR0aW5nczogYW55ID0ge1xyXG4gICAgICAgIHNob3dfdHJhZGU6IHRoaXMuc2hvd1RyYWRlLFxyXG4gICAgICAgIHNob3dfcG9zaXRpb25zOiB0aGlzLnNob3dQb3NpdGlvbnMsXHJcbiAgICAgICAgc2hvd19zdG9ja3M6IHRoaXMuc2hvd1N0b2NrcyxcclxuICAgICAgICBzaG93X2t5Y19hY3Rpb25fcmVxdWlyZWQ6IHRoaXMuc2hvd0t5Y0FjdGlvblJlcXVpcmVkLFxyXG4gICAgICAgIHNob3dfZnVuZGluZzogdGhpcy5zaG93RnVuZGluZyxcclxuICAgICAgICBzaG93X2t5YzogdGhpcy5zaG93S3ljXHJcbiAgICB9O1xyXG4gICAgbW9yYWxpcyA6IHR5cGVvZiBNb3JhbGlzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vcmFsaXMgOiB0eXBlb2YgTW9yYWxpcykge1xyXG4gICAgICAgIHRoaXMubW9yYWxpcyA9IG1vcmFsaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRSb3V0ZXMoKSB7XHJcbiAgICAgICAgbGV0IHBhdGggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKCcjJywgJycpLnJlcGxhY2UoJy8nLCAnJyk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09ICcnKSBwYXRoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5yZXBsYWNlKCc/JywgJycpO1xyXG4gICAgICAgIGlmIChwYXRoID09PSAnJykgcGF0aCA9ICdzdG9ja3MnO1xyXG5cclxuICAgICAgICB0aGlzLmF0dGFjaE5hdkxpbmtzKCk7XHJcblxyXG4gICAgICAgIGxldCBmbiA9IHRoaXMuc2V0dGluZ3NbJ3Nob3dfJyArIHBhdGhdID8/IHRoaXMuc2V0dGluZ3NbJ3Nob3dfc3RvY2tzJ107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgYXdhaXQgZm4odGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93S3ljQWN0aW9uUmVxdWlyZWQocm91dGluZzogUm91dGluZywgZXZ0OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2dCkgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCBwYWdlID0gbmV3IFRyYWRlUGFnZShyb3V0aW5nLm1vcmFsaXMpO1xyXG4gICAgICAgIGF3YWl0IHBhZ2UubG9hZCgpO1xyXG5cclxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnQnV5IHN0b2NrcycsICcjL2t5Y19hY3Rpb25fcmVxdWlyZWQnKTtcclxuXHJcbiAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW1pbmFsX21hcmtldF9leGVjdXRlX3RyYWRlJylcclxuICAgICAgICBidXR0b24/LmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93S3ljKHJvdXRpbmc6IFJvdXRpbmcsIGV2dDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmIChldnQpIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBsZXQgcGFnZSA9IG5ldyBUcmFkZVBhZ2Uocm91dGluZy5tb3JhbGlzKTtcclxuICAgICAgICBhd2FpdCBwYWdlLmxvYWQoKTtcclxuXHJcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJ0J1eSBzdG9ja3MnLCAnIy9reWMnKTtcclxuXHJcbiAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW1pbmFsX21hcmtldF9leGVjdXRlX3RyYWRlJylcclxuICAgICAgICBidXR0b24/LmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93RnVuZGluZyhyb3V0aW5nOiBSb3V0aW5nLCBldnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZ0KSBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2UgPSBuZXcgVHJhZGVQYWdlKHJvdXRpbmcubW9yYWxpcyk7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5sb2FkKCk7XHJcblxyXG4gICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICdCdXkgc3RvY2tzJywgJyMvZnVuZGluZycpO1xyXG5cclxuICAgICAgICBsZXQgYVVTREZ1bmRpbmdNb2RhbCA9IG5ldyBGYWtlQVVTREZ1bmQodGhpcy5tb3JhbGlzKTtcclxuICAgICAgICBsZXQgbmV0d29ya0luZm8gPSBOZXR3b3JrSW5mby5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmIChuZXR3b3JrSW5mby5UZXN0TmV0d29yaykge1xyXG4gICAgICAgICAgICBhVVNERnVuZGluZ01vZGFsLnNob3dBVVNERmFrZUZ1bmQoKCkgPT4ge1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFVU0RGdW5kaW5nTW9kYWwuc2hvd0FVU0RGdW5kKCgpID0+IHtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzaG93VHJhZGUocm91dGluZzogUm91dGluZywgZXZ0OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2dCkgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCBwYWdlID0gbmV3IFRyYWRlUGFnZShyb3V0aW5nLm1vcmFsaXMpO1xyXG4gICAgICAgIGF3YWl0IHBhZ2UubG9hZCgpO1xyXG5cclxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnQnV5IHN0b2NrcycsICcjL3RyYWRlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNob3dTdG9ja3Mocm91dGluZyA6IFJvdXRpbmcsZXZ0IDogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmIChldnQpIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBsZXQgcGFnZSA9IG5ldyBTdG9ja3NQYWdlKHJvdXRpbmcubW9yYWxpcyk7XHJcbiAgICAgICAgYXdhaXQgcGFnZS5sb2FkKCk7XHJcblxyXG4gICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsICdTdG9ja3MnLCAnIy9zdG9ja3MnKTtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2hvd1Bvc2l0aW9ucyhyb3V0aW5nIDogUm91dGluZyxldnQgOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2dCkgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGxldCBwYWdlID0gbmV3IFBvc2l0aW9uc1BhZ2Uocm91dGluZy5tb3JhbGlzKTtcclxuICAgICAgICBhd2FpdCBwYWdlLmxvYWQoKTtcclxuXHJcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgJ1Bvc2l0aW9ucycsICcjL3Bvc2l0aW9ucycpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHRhY2hOYXZMaW5rcygpIHtcclxuICAgICAgICBsZXQgcm91dGVyID0gdGhpcztcclxuXHJcblxyXG4gICAgICAgIGxldCB0cmFkZU5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRyYWRlTmF2TGluaycpO1xyXG4gICAgICAgIHRyYWRlTmF2TGlua3MuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgKGxpbmsgYXMgSFRNTEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKGV2dCA6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlci5zaG93VHJhZGUocm91dGVyLCBldnQpO1xyXG4gICAgICAgICAgICAgICAgbGluay5wYXJlbnRFbGVtZW50IS5wYXJlbnRFbGVtZW50IS5wYXJlbnRFbGVtZW50IS5yZW1vdmVBdHRyaWJ1dGUoJ29wZW4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IGludmVzdExpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmludmVzdE5hdkxpbmsnKTtcclxuICAgICAgICBpbnZlc3RMaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICAobGluayBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZXIuc2hvd1N0b2Nrcyhyb3V0ZXIsIGV2dCk7XHJcbiAgICAgICAgICAgICAgICBsaW5rLnBhcmVudEVsZW1lbnQhLnBhcmVudEVsZW1lbnQhLnBhcmVudEVsZW1lbnQhLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9zaXRpb25OYXZMaW5rJyk7XHJcbiAgICAgICAgcG9zaXRpb25MaW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICAobGluayBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZXIuc2hvd1Bvc2l0aW9ucyhyb3V0ZXIsIGV2dCk7XHJcbiAgICAgICAgICAgICAgICBsaW5rLnBhcmVudEVsZW1lbnQhLnBhcmVudEVsZW1lbnQhLnBhcmVudEVsZW1lbnQhLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFkZXIge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9hZEltYWdlKCkge1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5ID4gaGVhZGVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFoZWFkZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuXHJcbiAgICAgICAgaGVhZGVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC9pbWcvaGVhZGVyL1wiICsgcmFuZG9tICsgXCIuanBnKVwiO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENvbm5lY3Rpb25TZXJ2aWNlIGZyb20gXCIuL3NlcnZpY2VzL2JhY2tlbmQvQ29ubmVjdGlvblNlcnZpY2VcIjtcclxuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuL3NlcnZpY2VzL2JhY2tlbmQvVXNlclNlcnZpY2VcIjtcclxuaW1wb3J0IFJvdXRpbmcgZnJvbSBcIi4vcm91dGluZy9Sb3V0aW5nXCI7XHJcbmltcG9ydCBDb25uZWN0V2FsbGV0IGZyb20gXCIuL3VpL21vZGFscy9Db25uZWN0V2FsbGV0XCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi91aS9lbGVtZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgRXJyb3JJbmZvIGZyb20gXCIuL2Vycm9ycy9FcnJvckluZm9cIjtcclxuaW1wb3J0IFdhbGxldEhlbHBlciBmcm9tIFwiLi91dGlsL1dhbGxldEhlbHBlclwiO1xyXG5pbXBvcnQgR2VuZXJhbEVycm9yIGZyb20gXCIuL2Vycm9ycy9HZW5lcmFsRXJyb3JcIjtcclxuaW1wb3J0IEhlYWRlciBmcm9tIFwiLi91aS9lbGVtZW50cy9IZWFkZXJcIjtcclxuaW1wb3J0IEFVc2RCYWxhbmNlIGZyb20gXCIuL3VpL2VsZW1lbnRzL0FVc2RCYWxhbmNlXCI7XHJcblxyXG5jb25zdCBzdGFydCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBzbG93U2VydmVyVGltZXIgPSBzZXRUaW1lb3V0KHNsb3dTZXJ2ZXIsIDUgKiAxMDAwKTtcclxuXHJcbiAgICBsZXQgY29ubmVjdGlvblNlcnZpY2UgPSBuZXcgQ29ubmVjdGlvblNlcnZpY2UoKTtcclxuICAgIGNvbm5lY3Rpb25TZXJ2aWNlLnN0YXJ0KCkudGhlbihhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNsb3dTZXJ2ZXJUaW1lcik7XHJcblxyXG4gICAgICAgIGxldCBsb2FkaW5nTWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKE1vcmFsaXMpO1xyXG4gICAgICAgIGxldCBsb2dnZWRJblVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5pc0xvZ2dlZEluKGxvYWRpbmdNZXNzYWdlKTtcclxuY29uc29sZS5sb2coJ2xvZ2dlZEluVXNlcicsIGxvZ2dlZEluVXNlcik7XHJcbiAgICAgICAgaWYgKGxvZ2dlZEluVXNlcikge1xyXG4gICAgICAgICAgICBsZXQgdXNlckluZm8gPSBuZXcgVXNlckluZm8oTW9yYWxpcywgKGxvZ2dlZEluVXNlciBhcyBhbnkpLnByb3ZpZGVySW5mbywgbG9nZ2VkSW5Vc2VyKTtcclxuICAgICAgICAgICAgYXdhaXQgdXNlckluZm8ucmVuZGVyKCd1c2VyX2hlYWRlcl9pbmZvJyk7XHJcblxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3Nob3cgQ29ubmVjdCBXYWxsZXQgYnV0dG9uXHJcbiAgICAgICAgICAgIGxldCBjb25uZWN0V2FsbGV0ID0gbmV3IENvbm5lY3RXYWxsZXQoTW9yYWxpcyk7XHJcbiAgICAgICAgICAgIGNvbm5lY3RXYWxsZXQucmVuZGVyQnV0dG9uKCd1c2VyX2hlYWRlcl9pbmZvJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcm91dGluZyA9IG5ldyBSb3V0aW5nKE1vcmFsaXMpO1xyXG4gICAgICAgIGF3YWl0IHJvdXRpbmcubG9hZFJvdXRlcygpO1xyXG5cclxuXHJcbiAgICB9KS5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgRXJyb3JJbmZvLnJlcG9ydChuZXcgR2VuZXJhbEVycm9yKFwiU2VydmVyIGlzIGRvd24uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPGJyIC8+PGJyIC8+XCIgKyByZWFzb24pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgbGV0IHVzZXJJbmZvRHJvcGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckluZm9Ecm9wZG93bicpO1xyXG4gICAgICAgIGlmICh1c2VySW5mb0Ryb3Bkb3duICYmICF1c2VySW5mb0Ryb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucygnZC1ub25lJykpIHtcclxuICAgICAgICAgICAgdXNlckluZm9Ecm9wZG93bi5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTtcclxuICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGxldCB3YWxsZXRIZWxwZXIgPSBuZXcgV2FsbGV0SGVscGVyKE1vcmFsaXMpO1xyXG4gICAgaWYgKHdhbGxldEhlbHBlci5pc1dlYnZpZXcod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKVxyXG4gICAge1xyXG4gICAgICAgIC8vY29uc29sZSA9IEVycm9ySW5mbyBhcyBhbnk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNsb3dTZXJ2ZXIoKSB7XHJcbiAgICAgICAgbGV0IGxvYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGluZycpO1xyXG4gICAgICAgIGlmICghbG9hZGluZykge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoc2xvd1NlcnZlclRpbWVyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9hZGluZy5pbm5lckhUTUwgPSAnSG1tbS4uLi4gb3VyIHNlcnZlcnMgYXJlIHNsb3cgYW5kIG1pZ2h0IGJlIGRvd24uIEdpdmUgaXQgZmV3IG1pbnV0ZXMuJ1xyXG5cclxuICAgIH1cclxuICAgIEhlYWRlci5sb2FkSW1hZ2UoKTtcclxuXHJcbn1cclxuXHJcbnN0YXJ0KCkudGhlbigpO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n");

            /***/
        })

        /******/
    });
    /************************************************************************/
    /******/ 	// The require scope
    /******/
    var __webpack_require__ = {};
    /******/
    /************************************************************************/
    /******/ 	/* webpack/runtime/make namespace object */
    /******/
    (() => {
        /******/ 		// define __esModule on exports
        /******/
        __webpack_require__.r = (exports) => {
            /******/
            if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
                /******/
                Object.defineProperty(exports, Symbol.toStringTag, {value: 'Module'});
                /******/
            }
            /******/
            Object.defineProperty(exports, '__esModule', {value: true});
            /******/
        };
        /******/
    })();
    /******/
    /************************************************************************/
    /******/
    /******/ 	// startup
    /******/ 	// Load entry module and return exports
    /******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
    /******/
    var __webpack_exports__ = {};
    /******/
    __webpack_modules__["./src/main.ts"](0, __webpack_exports__, __webpack_require__);
    /******/
    /******/
})()
;