"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkliminal_app"] = self["webpackChunkliminal_app"] || []).push([["vendors-node_modules_web3auth_wallet-connect-v1-adapter_dist_walletConnectV1Adapter_esm_js"],{

/***/ "./node_modules/@web3auth/wallet-connect-v1-adapter/dist/walletConnectV1Adapter.esm.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@web3auth/wallet-connect-v1-adapter/dist/walletConnectV1Adapter.esm.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WalletConnectV1Adapter\": () => (/* binding */ WalletConnectV1Adapter)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _walletconnect_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/client */ \"./node_modules/@walletconnect/client/dist/esm/index.js\");\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @web3auth/base */ \"./node_modules/@web3auth/base/dist/base.esm.js\");\n/* harmony import */ var _web3auth_ethereum_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @web3auth/ethereum-provider */ \"./node_modules/@web3auth/ethereum-provider/dist/ethereumProvider.esm.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! loglevel */ \"./node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nclass WalletConnectV1Adapter extends _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.BaseAdapter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"name\", _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"adapterNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_NAMESPACES.EIP155);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"currentChainNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.CHAIN_NAMESPACES.EIP155);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"type\", _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_CATEGORY.EXTERNAL);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"adapterOptions\", void 0);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.NOT_READY);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"adapterData\", {\n      uri: \"\"\n    });\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"connector\", null);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"wcProvider\", null);\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"rehydrated\", false);\n\n    this.adapterOptions = _objectSpread({}, options);\n    this.chainConfig = options.chainConfig || null;\n  }\n\n  get connected() {\n    var _this$connector;\n\n    return !!((_this$connector = this.connector) !== null && _this$connector !== void 0 && _this$connector.connected);\n  }\n\n  get provider() {\n    var _this$wcProvider;\n\n    return ((_this$wcProvider = this.wcProvider) === null || _this$wcProvider === void 0 ? void 0 : _this$wcProvider.provider) || null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init() {\n    super.checkInitializationRequirements();\n\n    if (!this.chainConfig) {\n      this.chainConfig = (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.getChainConfig)(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.CHAIN_NAMESPACES.EIP155, 1);\n    } // Create a connector\n\n\n    this.connector = this.getWalletConnectInstance();\n    this.wcProvider = new _web3auth_ethereum_provider__WEBPACK_IMPORTED_MODULE_3__.WalletConnectProvider({\n      config: {\n        chainConfig: this.chainConfig\n      }\n    });\n    this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WALLET_ADAPTERS.WALLET_CONNECT_V1);\n    this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.READY;\n\n    if (this.connector.connected) {\n      this.rehydrated = true;\n      await this.onConnectHandler({\n        accounts: this.connector.accounts,\n        chainId: this.connector.chainId.toString()\n      });\n    }\n  }\n\n  async connect() {\n    super.checkConnectionRequirements();\n    if (!this.connector) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n    if (this.connected) {\n      await this.onConnectHandler({\n        accounts: this.connector.accounts,\n        chainId: this.connector.chainId.toString()\n      });\n      return this.provider;\n    }\n\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.CONNECTING) {\n      var _this$adapterOptions$;\n\n      // for wallet connect qr code modal we have to create a new connector, coz wallet connect internally does not open\n      // modal again on existing instance if connection is pending.\n      if ((_this$adapterOptions$ = this.adapterOptions.adapterSettings) !== null && _this$adapterOptions$ !== void 0 && _this$adapterOptions$.qrcodeModal) {\n        this.connector = this.getWalletConnectInstance();\n      }\n\n      await this.createNewSession();\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.CONNECTING;\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.CONNECTING, {\n        adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WALLET_ADAPTERS.WALLET_CONNECT_V1\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      if (!this.connector) return reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.notReady(\"Wallet adapter is not ready yet\")); // for wallet connect default modal.\n\n      this.connector.on(\"modal_closed\", async () => {\n        this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.READY;\n        this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WALLET_ADAPTERS.WALLET_CONNECT_V1);\n        return reject(new Error(\"User closed modal\"));\n      });\n\n      try {\n        // Subscribe to session connection\n        this.connector.on(\"connect\", async (error, payload) => {\n          if (error) {\n            this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, error);\n          }\n\n          await this.onConnectHandler(payload.params[0]);\n          return resolve(this.provider);\n        });\n      } catch (error) {\n        loglevel__WEBPACK_IMPORTED_MODULE_4___default().error(\"Wallet connect v1 adapter error while connecting\", error); // ready again to be connected\n\n        this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.READY;\n        this.rehydrated = true;\n        this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, error);\n        reject(error instanceof _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.Web3AuthError ? error : _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletLoginError.connectionError(\"Failed to login with wallet connect: \".concat((error === null || error === void 0 ? void 0 : error.message) || \"\")));\n      }\n    });\n  }\n\n  async getUserInfo() {\n    if (!this.connected) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n    return {};\n  }\n\n  async disconnect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    const {\n      cleanup\n    } = options;\n    if (!this.connector || !this.connected) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    await this.connector.killSession();\n    this.rehydrated = false;\n\n    if (cleanup) {\n      this.connector = null;\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.NOT_READY;\n      this.wcProvider = null;\n    } else {\n      // ready to connect again\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.READY;\n    }\n\n    this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async createNewSession() {\n    var _this$adapterOptions, _this$adapterOptions$2;\n\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      forceNewSession: false\n    };\n    if (!this.connector) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n    if (opts.forceNewSession && this.connector.pending) {\n      await this.connector.killSession();\n    } // for wallet connect qr modal\n\n\n    if ((_this$adapterOptions = this.adapterOptions) !== null && _this$adapterOptions !== void 0 && (_this$adapterOptions$2 = _this$adapterOptions.adapterSettings) !== null && _this$adapterOptions$2 !== void 0 && _this$adapterOptions$2.qrcodeModal) {\n      var _this$chainConfig;\n\n      await this.connector.createSession({\n        chainId: parseInt(((_this$chainConfig = this.chainConfig) === null || _this$chainConfig === void 0 ? void 0 : _this$chainConfig.chainId) || \"0x1\", 16)\n      });\n      return;\n    } // for web3auth qr code modal\n\n\n    return new Promise((resolve, reject) => {\n      var _this$chainConfig2;\n\n      if (!this.connector) return reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.notReady(\"Wallet adapter is not ready yet\"));\n      loglevel__WEBPACK_IMPORTED_MODULE_4___default().debug(\"creating new session for web3auth wallet connect\");\n      this.connector.on(\"display_uri\", async (err, payload) => {\n        var _this$connector2;\n\n        if (err) {\n          this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletLoginError.connectionError(\"Failed to display wallet connect qr code\"));\n          return reject(err);\n        }\n\n        const uri = payload.params[0];\n        this.updateAdapterData({\n          uri\n        });\n        (_this$connector2 = this.connector) === null || _this$connector2 === void 0 ? void 0 : _this$connector2.off(\"display_uri\");\n        return resolve();\n      });\n      this.connector.createSession({\n        chainId: parseInt(((_this$chainConfig2 = this.chainConfig) === null || _this$chainConfig2 === void 0 ? void 0 : _this$chainConfig2.chainId) || \"0x1\", 16)\n      }).catch(error => {\n        loglevel__WEBPACK_IMPORTED_MODULE_4___default().error(\"error while creating new wallet connect session\", error);\n        this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, error);\n        return reject(error);\n      });\n    });\n  }\n\n  async onConnectHandler(params) {\n    if (!this.connector || !this.wcProvider) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n    if (!this.chainConfig) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.invalidParams(\"Chain config is not set\");\n    const {\n      chainId\n    } = params;\n    loglevel__WEBPACK_IMPORTED_MODULE_4___default().debug(\"connected chainId\", chainId);\n    const connectedChainId = parseInt(chainId, (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.isHexStrict)(chainId) ? 16 : 10);\n\n    if (connectedChainId !== parseInt(this.chainConfig.chainId, 16)) {\n      // we need to create a new session since old session is already used and\n      // user needs to login again with correct chain with new qr code.\n      await this.createNewSession({\n        forceNewSession: true\n      });\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WalletInitializationError.fromCode(5000, \"Not connected to correct chainId. Expected: \".concat(this.chainConfig.chainId, \", Current: \").concat(connectedChainId, \", Please switch to correct chain from wallet\")));\n      return;\n    }\n\n    await this.wcProvider.setupProvider(this.connector);\n    this.subscribeEvents(this.connector);\n    this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_STATUS.CONNECTED;\n    this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.CONNECTED, {\n      adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_2__.WALLET_ADAPTERS.WALLET_CONNECT_V1,\n      reconnected: this.rehydrated\n    });\n  }\n\n  subscribeEvents(connector) {\n    connector.on(\"session_update\", async error => {\n      if (error) {\n        this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_2__.ADAPTER_EVENTS.ERRORED, error);\n      }\n    });\n  }\n\n  getWalletConnectInstance() {\n    const walletConnectOptions = this.adapterOptions.adapterSettings || {};\n    walletConnectOptions.bridge = walletConnectOptions.bridge || \"https://bridge.walletconnect.org\"; // Create a connector\n\n    return new _walletconnect_client__WEBPACK_IMPORTED_MODULE_1__[\"default\"](walletConnectOptions);\n  }\n\n}\n\n\n//# sourceMappingURL=walletConnectV1Adapter.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL3dhbGxldC1jb25uZWN0LXYxLWFkYXB0ZXIvZGlzdC93YWxsZXRDb25uZWN0VjFBZGFwdGVyLmVzbS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9FO0FBQ2xCO0FBQzZMO0FBQzNLO0FBQ3pDOztBQUUzQiwyQ0FBMkMsZ0NBQWdDLG9DQUFvQyxvREFBb0QsNkRBQTZELGlFQUFpRSxzQ0FBc0M7O0FBRXZVLGlDQUFpQyxnQkFBZ0Isc0JBQXNCLE9BQU8sdURBQXVELDZEQUE2RCxpRkFBZSw2QkFBNkIsb0tBQW9LLG1GQUFtRixLQUFLOztBQUUxZSxxQ0FBcUMsdURBQVc7QUFDaEQ7QUFDQTtBQUNBOztBQUVBLElBQUksaUZBQWUsZUFBZSw2RUFBaUM7O0FBRW5FLElBQUksaUZBQWUsMkJBQTJCLHFFQUF5Qjs7QUFFdkUsSUFBSSxpRkFBZSxnQ0FBZ0MsbUVBQXVCOztBQUUxRSxJQUFJLGlGQUFlLGVBQWUscUVBQXlCOztBQUUzRCxJQUFJLGlGQUFlOztBQUVuQixJQUFJLGlGQUFlLGlCQUFpQixvRUFBd0I7O0FBRTVELElBQUksaUZBQWU7QUFDbkI7QUFDQSxLQUFLOztBQUVMLElBQUksaUZBQWU7O0FBRW5CLElBQUksaUZBQWU7O0FBRW5CLElBQUksaUZBQWU7O0FBRW5CLDBDQUEwQztBQUMxQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsOERBQWMsQ0FBQyxtRUFBdUI7QUFDL0QsTUFBTTs7O0FBR047QUFDQSwwQkFBMEIsOEVBQXFCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjLGdFQUFvQixFQUFFLDZFQUFpQztBQUNyRSxrQkFBa0IsZ0VBQW9COztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQiw4RUFBa0M7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUEsd0JBQXdCLHFFQUF5QjtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHFFQUF5QjtBQUM3QyxnQkFBZ0IscUVBQXlCO0FBQ3pDLGlCQUFpQiw2RUFBaUM7QUFDbEQsT0FBTztBQUNQOztBQUVBO0FBQ0EseUNBQXlDLDhFQUFrQyxzQ0FBc0M7O0FBRWpIO0FBQ0Esc0JBQXNCLGdFQUFvQjtBQUMxQyxrQkFBa0IsZ0VBQW9CLEVBQUUsNkVBQWlDO0FBQ3pFO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrRUFBc0I7QUFDNUM7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1IsUUFBUSxxREFBUyw2REFBNkQ7O0FBRTlFLHNCQUFzQixnRUFBb0I7QUFDMUM7QUFDQSxrQkFBa0Isa0VBQXNCO0FBQ3hDLGdDQUFnQyx5REFBYSxXQUFXLDRFQUFnQztBQUN4RjtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLCtCQUErQiw4RUFBa0M7QUFDakU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0RBQWtELDhFQUFrQztBQUNwRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0Isb0VBQXdCO0FBQzVDO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esb0JBQW9CLGdFQUFvQjtBQUN4Qzs7QUFFQSxjQUFjLHVFQUEyQjtBQUN6Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4RUFBa0M7O0FBRWpFO0FBQ0E7QUFDQSxNQUFNOzs7QUFHTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNOzs7QUFHTjtBQUNBOztBQUVBLHlDQUF5Qyw4RUFBa0M7QUFDM0UsTUFBTSxxREFBUztBQUNmO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0Isa0VBQXNCLEVBQUUsNEVBQWdDO0FBQzVFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxRQUFRLHFEQUFTO0FBQ2pCLGtCQUFrQixrRUFBc0I7QUFDeEM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0EsbURBQW1ELDhFQUFrQztBQUNyRixpQ0FBaUMsbUZBQXVDO0FBQ3hFO0FBQ0E7QUFDQSxNQUFNO0FBQ04sSUFBSSxxREFBUztBQUNiLCtDQUErQywyREFBVzs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxnQkFBZ0Isa0VBQXNCLEVBQUUsOEVBQWtDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixvRUFBd0I7QUFDMUMsY0FBYyxvRUFBd0I7QUFDdEMsZUFBZSw2RUFBaUM7QUFDaEQ7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtFQUFzQjtBQUN4QztBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EscUdBQXFHOztBQUVyRyxlQUFlLDZEQUFhO0FBQzVCOztBQUVBOztBQUVrQztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpbWluYWwtYXBwLy4vbm9kZV9tb2R1bGVzL0B3ZWIzYXV0aC93YWxsZXQtY29ubmVjdC12MS1hZGFwdGVyL2Rpc3Qvd2FsbGV0Q29ubmVjdFYxQWRhcHRlci5lc20uanM/YWU4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknO1xuaW1wb3J0IFdhbGxldENvbm5lY3QgZnJvbSAnQHdhbGxldGNvbm5lY3QvY2xpZW50JztcbmltcG9ydCB7IEJhc2VBZGFwdGVyLCBXQUxMRVRfQURBUFRFUlMsIEFEQVBURVJfTkFNRVNQQUNFUywgQ0hBSU5fTkFNRVNQQUNFUywgQURBUFRFUl9DQVRFR09SWSwgQURBUFRFUl9TVEFUVVMsIGdldENoYWluQ29uZmlnLCBBREFQVEVSX0VWRU5UUywgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvciwgV2ViM0F1dGhFcnJvciwgV2FsbGV0TG9naW5FcnJvciwgaXNIZXhTdHJpY3QgfSBmcm9tICdAd2ViM2F1dGgvYmFzZSc7XG5pbXBvcnQgeyBXYWxsZXRDb25uZWN0UHJvdmlkZXIgfSBmcm9tICdAd2ViM2F1dGgvZXRoZXJldW0tcHJvdmlkZXInO1xuaW1wb3J0IGxvZyBmcm9tICdsb2dsZXZlbCc7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmNsYXNzIFdhbGxldENvbm5lY3RWMUFkYXB0ZXIgZXh0ZW5kcyBCYXNlQWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBzdXBlcigpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCBXQUxMRVRfQURBUFRFUlMuV0FMTEVUX0NPTk5FQ1RfVjEpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRhcHRlck5hbWVzcGFjZVwiLCBBREFQVEVSX05BTUVTUEFDRVMuRUlQMTU1KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnRDaGFpbk5hbWVzcGFjZVwiLCBDSEFJTl9OQU1FU1BBQ0VTLkVJUDE1NSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0eXBlXCIsIEFEQVBURVJfQ0FURUdPUlkuRVhURVJOQUwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRhcHRlck9wdGlvbnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCBBREFQVEVSX1NUQVRVUy5OT1RfUkVBRFkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRhcHRlckRhdGFcIiwge1xuICAgICAgdXJpOiBcIlwiXG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25uZWN0b3JcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3Y1Byb3ZpZGVyXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVoeWRyYXRlZFwiLCBmYWxzZSk7XG5cbiAgICB0aGlzLmFkYXB0ZXJPcHRpb25zID0gX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucyk7XG4gICAgdGhpcy5jaGFpbkNvbmZpZyA9IG9wdGlvbnMuY2hhaW5Db25maWcgfHwgbnVsbDtcbiAgfVxuXG4gIGdldCBjb25uZWN0ZWQoKSB7XG4gICAgdmFyIF90aGlzJGNvbm5lY3RvcjtcblxuICAgIHJldHVybiAhISgoX3RoaXMkY29ubmVjdG9yID0gdGhpcy5jb25uZWN0b3IpICE9PSBudWxsICYmIF90aGlzJGNvbm5lY3RvciAhPT0gdm9pZCAwICYmIF90aGlzJGNvbm5lY3Rvci5jb25uZWN0ZWQpO1xuICB9XG5cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHZhciBfdGhpcyR3Y1Byb3ZpZGVyO1xuXG4gICAgcmV0dXJuICgoX3RoaXMkd2NQcm92aWRlciA9IHRoaXMud2NQcm92aWRlcikgPT09IG51bGwgfHwgX3RoaXMkd2NQcm92aWRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2NQcm92aWRlci5wcm92aWRlcikgfHwgbnVsbDtcbiAgfVxuXG4gIHNldCBwcm92aWRlcihfKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBzdXBlci5jaGVja0luaXRpYWxpemF0aW9uUmVxdWlyZW1lbnRzKCk7XG5cbiAgICBpZiAoIXRoaXMuY2hhaW5Db25maWcpIHtcbiAgICAgIHRoaXMuY2hhaW5Db25maWcgPSBnZXRDaGFpbkNvbmZpZyhDSEFJTl9OQU1FU1BBQ0VTLkVJUDE1NSwgMSk7XG4gICAgfSAvLyBDcmVhdGUgYSBjb25uZWN0b3JcblxuXG4gICAgdGhpcy5jb25uZWN0b3IgPSB0aGlzLmdldFdhbGxldENvbm5lY3RJbnN0YW5jZSgpO1xuICAgIHRoaXMud2NQcm92aWRlciA9IG5ldyBXYWxsZXRDb25uZWN0UHJvdmlkZXIoe1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIGNoYWluQ29uZmlnOiB0aGlzLmNoYWluQ29uZmlnXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLlJFQURZLCBXQUxMRVRfQURBUFRFUlMuV0FMTEVUX0NPTk5FQ1RfVjEpO1xuICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuUkVBRFk7XG5cbiAgICBpZiAodGhpcy5jb25uZWN0b3IuY29ubmVjdGVkKSB7XG4gICAgICB0aGlzLnJlaHlkcmF0ZWQgPSB0cnVlO1xuICAgICAgYXdhaXQgdGhpcy5vbkNvbm5lY3RIYW5kbGVyKHtcbiAgICAgICAgYWNjb3VudHM6IHRoaXMuY29ubmVjdG9yLmFjY291bnRzLFxuICAgICAgICBjaGFpbklkOiB0aGlzLmNvbm5lY3Rvci5jaGFpbklkLnRvU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgc3VwZXIuY2hlY2tDb25uZWN0aW9uUmVxdWlyZW1lbnRzKCk7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RvcikgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIldhbGxldCBhZGFwdGVyIGlzIG5vdCByZWFkeSB5ZXRcIik7XG5cbiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMub25Db25uZWN0SGFuZGxlcih7XG4gICAgICAgIGFjY291bnRzOiB0aGlzLmNvbm5lY3Rvci5hY2NvdW50cyxcbiAgICAgICAgY2hhaW5JZDogdGhpcy5jb25uZWN0b3IuY2hhaW5JZC50b1N0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVElORykge1xuICAgICAgdmFyIF90aGlzJGFkYXB0ZXJPcHRpb25zJDtcblxuICAgICAgLy8gZm9yIHdhbGxldCBjb25uZWN0IHFyIGNvZGUgbW9kYWwgd2UgaGF2ZSB0byBjcmVhdGUgYSBuZXcgY29ubmVjdG9yLCBjb3ogd2FsbGV0IGNvbm5lY3QgaW50ZXJuYWxseSBkb2VzIG5vdCBvcGVuXG4gICAgICAvLyBtb2RhbCBhZ2FpbiBvbiBleGlzdGluZyBpbnN0YW5jZSBpZiBjb25uZWN0aW9uIGlzIHBlbmRpbmcuXG4gICAgICBpZiAoKF90aGlzJGFkYXB0ZXJPcHRpb25zJCA9IHRoaXMuYWRhcHRlck9wdGlvbnMuYWRhcHRlclNldHRpbmdzKSAhPT0gbnVsbCAmJiBfdGhpcyRhZGFwdGVyT3B0aW9ucyQgIT09IHZvaWQgMCAmJiBfdGhpcyRhZGFwdGVyT3B0aW9ucyQucXJjb2RlTW9kYWwpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0b3IgPSB0aGlzLmdldFdhbGxldENvbm5lY3RJbnN0YW5jZSgpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5ld1Nlc3Npb24oKTtcbiAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVElORztcbiAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5DT05ORUNUSU5HLCB7XG4gICAgICAgIGFkYXB0ZXI6IFdBTExFVF9BREFQVEVSUy5XQUxMRVRfQ09OTkVDVF9WMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICghdGhpcy5jb25uZWN0b3IpIHJldHVybiByZWplY3QoV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIldhbGxldCBhZGFwdGVyIGlzIG5vdCByZWFkeSB5ZXRcIikpOyAvLyBmb3Igd2FsbGV0IGNvbm5lY3QgZGVmYXVsdCBtb2RhbC5cblxuICAgICAgdGhpcy5jb25uZWN0b3Iub24oXCJtb2RhbF9jbG9zZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLlJFQURZO1xuICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuUkVBRFksIFdBTExFVF9BREFQVEVSUy5XQUxMRVRfQ09OTkVDVF9WMSk7XG4gICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKFwiVXNlciBjbG9zZWQgbW9kYWxcIikpO1xuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFN1YnNjcmliZSB0byBzZXNzaW9uIGNvbm5lY3Rpb25cbiAgICAgICAgdGhpcy5jb25uZWN0b3Iub24oXCJjb25uZWN0XCIsIGFzeW5jIChlcnJvciwgcGF5bG9hZCkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkVSUk9SRUQsIGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLm9uQ29ubmVjdEhhbmRsZXIocGF5bG9hZC5wYXJhbXNbMF0pO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKHRoaXMucHJvdmlkZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZy5lcnJvcihcIldhbGxldCBjb25uZWN0IHYxIGFkYXB0ZXIgZXJyb3Igd2hpbGUgY29ubmVjdGluZ1wiLCBlcnJvcik7IC8vIHJlYWR5IGFnYWluIHRvIGJlIGNvbm5lY3RlZFxuXG4gICAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuUkVBRFk7XG4gICAgICAgIHRoaXMucmVoeWRyYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5FUlJPUkVELCBlcnJvcik7XG4gICAgICAgIHJlamVjdChlcnJvciBpbnN0YW5jZW9mIFdlYjNBdXRoRXJyb3IgPyBlcnJvciA6IFdhbGxldExvZ2luRXJyb3IuY29ubmVjdGlvbkVycm9yKFwiRmFpbGVkIHRvIGxvZ2luIHdpdGggd2FsbGV0IGNvbm5lY3Q6IFwiLmNvbmNhdCgoZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLm1lc3NhZ2UpIHx8IFwiXCIpKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2VySW5mbygpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkKSB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKFwiTm90IGNvbm5lY3RlZCB3aXRoIHdhbGxldCwgUGxlYXNlIGxvZ2luL2Nvbm5lY3QgZmlyc3RcIik7XG4gICAgcmV0dXJuIHt9O1xuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdCgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge1xuICAgICAgY2xlYW51cDogZmFsc2VcbiAgICB9O1xuICAgIGNvbnN0IHtcbiAgICAgIGNsZWFudXBcbiAgICB9ID0gb3B0aW9ucztcbiAgICBpZiAoIXRoaXMuY29ubmVjdG9yIHx8ICF0aGlzLmNvbm5lY3RlZCkgdGhyb3cgV2FsbGV0TG9naW5FcnJvci5ub3RDb25uZWN0ZWRFcnJvcihcIk5vdCBjb25uZWN0ZWQgd2l0aCB3YWxsZXRcIik7XG4gICAgYXdhaXQgdGhpcy5jb25uZWN0b3Iua2lsbFNlc3Npb24oKTtcbiAgICB0aGlzLnJlaHlkcmF0ZWQgPSBmYWxzZTtcblxuICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICB0aGlzLmNvbm5lY3RvciA9IG51bGw7XG4gICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLk5PVF9SRUFEWTtcbiAgICAgIHRoaXMud2NQcm92aWRlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlYWR5IHRvIGNvbm5lY3QgYWdhaW5cbiAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuUkVBRFk7XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkRJU0NPTk5FQ1RFRCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVOZXdTZXNzaW9uKCkge1xuICAgIHZhciBfdGhpcyRhZGFwdGVyT3B0aW9ucywgX3RoaXMkYWRhcHRlck9wdGlvbnMkMjtcblxuICAgIGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7XG4gICAgICBmb3JjZU5ld1Nlc3Npb246IGZhbHNlXG4gICAgfTtcbiAgICBpZiAoIXRoaXMuY29ubmVjdG9yKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdFJlYWR5KFwiV2FsbGV0IGFkYXB0ZXIgaXMgbm90IHJlYWR5IHlldFwiKTtcblxuICAgIGlmIChvcHRzLmZvcmNlTmV3U2Vzc2lvbiAmJiB0aGlzLmNvbm5lY3Rvci5wZW5kaW5nKSB7XG4gICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rvci5raWxsU2Vzc2lvbigpO1xuICAgIH0gLy8gZm9yIHdhbGxldCBjb25uZWN0IHFyIG1vZGFsXG5cblxuICAgIGlmICgoX3RoaXMkYWRhcHRlck9wdGlvbnMgPSB0aGlzLmFkYXB0ZXJPcHRpb25zKSAhPT0gbnVsbCAmJiBfdGhpcyRhZGFwdGVyT3B0aW9ucyAhPT0gdm9pZCAwICYmIChfdGhpcyRhZGFwdGVyT3B0aW9ucyQyID0gX3RoaXMkYWRhcHRlck9wdGlvbnMuYWRhcHRlclNldHRpbmdzKSAhPT0gbnVsbCAmJiBfdGhpcyRhZGFwdGVyT3B0aW9ucyQyICE9PSB2b2lkIDAgJiYgX3RoaXMkYWRhcHRlck9wdGlvbnMkMi5xcmNvZGVNb2RhbCkge1xuICAgICAgdmFyIF90aGlzJGNoYWluQ29uZmlnO1xuXG4gICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rvci5jcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgY2hhaW5JZDogcGFyc2VJbnQoKChfdGhpcyRjaGFpbkNvbmZpZyA9IHRoaXMuY2hhaW5Db25maWcpID09PSBudWxsIHx8IF90aGlzJGNoYWluQ29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjaGFpbkNvbmZpZy5jaGFpbklkKSB8fCBcIjB4MVwiLCAxNilcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gZm9yIHdlYjNhdXRoIHFyIGNvZGUgbW9kYWxcblxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHZhciBfdGhpcyRjaGFpbkNvbmZpZzI7XG5cbiAgICAgIGlmICghdGhpcy5jb25uZWN0b3IpIHJldHVybiByZWplY3QoV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIldhbGxldCBhZGFwdGVyIGlzIG5vdCByZWFkeSB5ZXRcIikpO1xuICAgICAgbG9nLmRlYnVnKFwiY3JlYXRpbmcgbmV3IHNlc3Npb24gZm9yIHdlYjNhdXRoIHdhbGxldCBjb25uZWN0XCIpO1xuICAgICAgdGhpcy5jb25uZWN0b3Iub24oXCJkaXNwbGF5X3VyaVwiLCBhc3luYyAoZXJyLCBwYXlsb2FkKSA9PiB7XG4gICAgICAgIHZhciBfdGhpcyRjb25uZWN0b3IyO1xuXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuRVJST1JFRCwgV2FsbGV0TG9naW5FcnJvci5jb25uZWN0aW9uRXJyb3IoXCJGYWlsZWQgdG8gZGlzcGxheSB3YWxsZXQgY29ubmVjdCBxciBjb2RlXCIpKTtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cmkgPSBwYXlsb2FkLnBhcmFtc1swXTtcbiAgICAgICAgdGhpcy51cGRhdGVBZGFwdGVyRGF0YSh7XG4gICAgICAgICAgdXJpXG4gICAgICAgIH0pO1xuICAgICAgICAoX3RoaXMkY29ubmVjdG9yMiA9IHRoaXMuY29ubmVjdG9yKSA9PT0gbnVsbCB8fCBfdGhpcyRjb25uZWN0b3IyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb25uZWN0b3IyLm9mZihcImRpc3BsYXlfdXJpXCIpO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbm5lY3Rvci5jcmVhdGVTZXNzaW9uKHtcbiAgICAgICAgY2hhaW5JZDogcGFyc2VJbnQoKChfdGhpcyRjaGFpbkNvbmZpZzIgPSB0aGlzLmNoYWluQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRjaGFpbkNvbmZpZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNoYWluQ29uZmlnMi5jaGFpbklkKSB8fCBcIjB4MVwiLCAxNilcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgbG9nLmVycm9yKFwiZXJyb3Igd2hpbGUgY3JlYXRpbmcgbmV3IHdhbGxldCBjb25uZWN0IHNlc3Npb25cIiwgZXJyb3IpO1xuICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuRVJST1JFRCwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgb25Db25uZWN0SGFuZGxlcihwYXJhbXMpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdG9yIHx8ICF0aGlzLndjUHJvdmlkZXIpIHRocm93IFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3Iubm90UmVhZHkoXCJXYWxsZXQgYWRhcHRlciBpcyBub3QgcmVhZHkgeWV0XCIpO1xuICAgIGlmICghdGhpcy5jaGFpbkNvbmZpZykgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbnZhbGlkUGFyYW1zKFwiQ2hhaW4gY29uZmlnIGlzIG5vdCBzZXRcIik7XG4gICAgY29uc3Qge1xuICAgICAgY2hhaW5JZFxuICAgIH0gPSBwYXJhbXM7XG4gICAgbG9nLmRlYnVnKFwiY29ubmVjdGVkIGNoYWluSWRcIiwgY2hhaW5JZCk7XG4gICAgY29uc3QgY29ubmVjdGVkQ2hhaW5JZCA9IHBhcnNlSW50KGNoYWluSWQsIGlzSGV4U3RyaWN0KGNoYWluSWQpID8gMTYgOiAxMCk7XG5cbiAgICBpZiAoY29ubmVjdGVkQ2hhaW5JZCAhPT0gcGFyc2VJbnQodGhpcy5jaGFpbkNvbmZpZy5jaGFpbklkLCAxNikpIHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gY3JlYXRlIGEgbmV3IHNlc3Npb24gc2luY2Ugb2xkIHNlc3Npb24gaXMgYWxyZWFkeSB1c2VkIGFuZFxuICAgICAgLy8gdXNlciBuZWVkcyB0byBsb2dpbiBhZ2FpbiB3aXRoIGNvcnJlY3QgY2hhaW4gd2l0aCBuZXcgcXIgY29kZS5cbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTmV3U2Vzc2lvbih7XG4gICAgICAgIGZvcmNlTmV3U2Vzc2lvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuRVJST1JFRCwgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5mcm9tQ29kZSg1MDAwLCBcIk5vdCBjb25uZWN0ZWQgdG8gY29ycmVjdCBjaGFpbklkLiBFeHBlY3RlZDogXCIuY29uY2F0KHRoaXMuY2hhaW5Db25maWcuY2hhaW5JZCwgXCIsIEN1cnJlbnQ6IFwiKS5jb25jYXQoY29ubmVjdGVkQ2hhaW5JZCwgXCIsIFBsZWFzZSBzd2l0Y2ggdG8gY29ycmVjdCBjaGFpbiBmcm9tIHdhbGxldFwiKSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMud2NQcm92aWRlci5zZXR1cFByb3ZpZGVyKHRoaXMuY29ubmVjdG9yKTtcbiAgICB0aGlzLnN1YnNjcmliZUV2ZW50cyh0aGlzLmNvbm5lY3Rvcik7XG4gICAgdGhpcy5zdGF0dXMgPSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQ7XG4gICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkNPTk5FQ1RFRCwge1xuICAgICAgYWRhcHRlcjogV0FMTEVUX0FEQVBURVJTLldBTExFVF9DT05ORUNUX1YxLFxuICAgICAgcmVjb25uZWN0ZWQ6IHRoaXMucmVoeWRyYXRlZFxuICAgIH0pO1xuICB9XG5cbiAgc3Vic2NyaWJlRXZlbnRzKGNvbm5lY3Rvcikge1xuICAgIGNvbm5lY3Rvci5vbihcInNlc3Npb25fdXBkYXRlXCIsIGFzeW5jIGVycm9yID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuRVJST1JFRCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0V2FsbGV0Q29ubmVjdEluc3RhbmNlKCkge1xuICAgIGNvbnN0IHdhbGxldENvbm5lY3RPcHRpb25zID0gdGhpcy5hZGFwdGVyT3B0aW9ucy5hZGFwdGVyU2V0dGluZ3MgfHwge307XG4gICAgd2FsbGV0Q29ubmVjdE9wdGlvbnMuYnJpZGdlID0gd2FsbGV0Q29ubmVjdE9wdGlvbnMuYnJpZGdlIHx8IFwiaHR0cHM6Ly9icmlkZ2Uud2FsbGV0Y29ubmVjdC5vcmdcIjsgLy8gQ3JlYXRlIGEgY29ubmVjdG9yXG5cbiAgICByZXR1cm4gbmV3IFdhbGxldENvbm5lY3Qod2FsbGV0Q29ubmVjdE9wdGlvbnMpO1xuICB9XG5cbn1cblxuZXhwb3J0IHsgV2FsbGV0Q29ubmVjdFYxQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FsbGV0Q29ubmVjdFYxQWRhcHRlci5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@web3auth/wallet-connect-v1-adapter/dist/walletConnectV1Adapter.esm.js\n");

/***/ })

}]);