"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateliminal_app"]("main",{

/***/ "./src/modules/kyc.ts":
/*!****************************!*\
  !*** ./src/modules/kyc.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AlpacaId\": () => (/* binding */ AlpacaId),\n/* harmony export */   \"IsValidKYC\": () => (/* binding */ IsValidKYC),\n/* harmony export */   \"KYCUserIsValid\": () => (/* binding */ KYCUserIsValid),\n/* harmony export */   \"KYCUserToSmartContract\": () => (/* binding */ KYCUserToSmartContract),\n/* harmony export */   \"initKYC\": () => (/* binding */ initKYC)\n/* harmony export */ });\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../main */ \"./src/main.ts\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./render */ \"./src/modules/render.ts\");\n/* harmony import */ var _buy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buy */ \"./src/modules/buy.ts\");\n/* harmony import */ var moralis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moralis */ \"./node_modules/moralis/index.js\");\n/* harmony import */ var moralis__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moralis__WEBPACK_IMPORTED_MODULE_3__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\nlet AlpacaId;\r\nlet KYCInfo;\r\nconst initKYC = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        AlpacaId = (yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().fetch()).get('alpacaId');\r\n        AlpacaId = undefined;\r\n        console.log('alpacaId:', AlpacaId);\r\n        KYCInfo = getKYCInfo();\r\n        if (!AlpacaId) {\r\n            document.getElementById('kyc_reg').style.display = 'block';\r\n            document.getElementById('writeToBlockcahin').style.display = 'none';\r\n            document.getElementById('submitKYC').onclick = submitKYC;\r\n            loadName();\r\n        }\r\n        else {\r\n            showWriteToBlockchain();\r\n        }\r\n    });\r\n};\r\nconst loadName = function () {\r\n    var characters = [\r\n        { given_name: 'Leslie', family_name: 'Knope', email_address: 'leslie.knope' },\r\n        { given_name: 'April', family_name: 'Ludgate', email_address: 'april.ludgate' },\r\n        { given_name: 'Jerry', family_name: 'Gergich', email_address: 'jerry.gergich' },\r\n        { given_name: 'Tom', family_name: 'Haverford', email_address: 'tom.haverford' },\r\n        { given_name: 'Donna', family_name: 'Meagle', email_address: 'donna.meagle' },\r\n        { given_name: 'Andy', family_name: 'Dwyer', email_address: 'andy.dwyer' },\r\n        { given_name: 'Ann', family_name: 'Perkins', email_address: 'ann.perkins' },\r\n        { given_name: 'Ben', family_name: 'Wyatt', email_address: 'ben.wyatt' },\r\n        { given_name: 'Chris', family_name: 'Traeger', email_address: 'chris.traeger' },\r\n        { given_name: 'Jean-Ralphio', family_name: 'Saperstein', email_address: 'jean-ralphio.saperstein' },\r\n        { given_name: 'Councilman', family_name: 'Jamm', email_address: 'jamm' }\r\n    ];\r\n    let idx = Math.floor(Math.random() * characters.length) % characters.length;\r\n    var character = characters[idx];\r\n    document.getElementById('given_name').value = character.given_name;\r\n    document.getElementById('family_name').value = character.family_name;\r\n    document.getElementById('email_address').value = character.email_address + '.' + (new Date().getTime()) + '@parks-and-rec-example.com';\r\n};\r\nconst submitKYC = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        showProgressStep('Register KYC with broker', 33);\r\n        const form = document.getElementById('kyc_wizard_form');\r\n        let data = new FormData(form);\r\n        let params = serialize(data);\r\n        AlpacaId = yield moralis__WEBPACK_IMPORTED_MODULE_3___default().Cloud.run(\"kycRegistration\", params);\r\n        let user = moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n        user.set('alpacaId', AlpacaId);\r\n        user.save();\r\n        KYCUserToSmartContract(AlpacaId);\r\n        return false;\r\n    });\r\n};\r\nconst showProgressStep = function (text, perc, warning) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        document.getElementById('btnWriteToBlockchain').style.display = \"none\";\r\n        document.getElementById('submitKYC').style.display = \"none\";\r\n        document.getElementById('kyc_progress').style.display = \"block\";\r\n        var element = document.getElementById('kyc_steps');\r\n        element.innerHTML = '<div class=\"progress_text\">' + text + '</div>';\r\n        element.style.width = perc + '%';\r\n        element.classList.toggle('progress-bar-striped', (perc != 100));\r\n        element.classList.toggle('progress-bar-animated', (perc != 100));\r\n        if (warning) {\r\n            element.classList.add('bg-warning');\r\n            element.classList.add('progress_text_attn');\r\n        }\r\n        else {\r\n            element.classList.remove('bg-warning');\r\n            element.classList.remove('progress_text_attn');\r\n        }\r\n    });\r\n};\r\nconst isValidAccountId = function (str) {\r\n    const regex = new RegExp('^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$');\r\n    return regex.test(str);\r\n};\r\nconst KYCUserToSmartContract = function (accountId) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (!isValidAccountId(accountId)) {\r\n            showProgressStep('Your account id was invalid. This should not happen, <a href=\"https://discord.gg/ePs5cRceNB\" target=\"_blank\">ping us on Discord</a>', 100, true);\r\n            return;\r\n        }\r\n        const str = 'Writing to blockchain, you must confirm transaction in your wallet';\r\n        KYCInfo = getKYCInfo();\r\n        showProgressStep(str, 66);\r\n        setTimeout(function () { checkToShowMetamaskIcon(str); }, 10 * 1000);\r\n        const kycOptions = {\r\n            contractAddress: _main__WEBPACK_IMPORTED_MODULE_0__.Main.ContractAddressesInfo.KYC_ADDRESS,\r\n            functionName: \"validateAccount\",\r\n            abi: KYCInfo.abi,\r\n            params: {\r\n                accountId: accountId\r\n            },\r\n        };\r\n        yield moralis__WEBPACK_IMPORTED_MODULE_3___default().executeFunction(kycOptions).then((result) => __awaiter(this, void 0, void 0, function* () {\r\n            console.log('KYCUserToSmartContract result', result);\r\n            IsValidKYC = true;\r\n            showProgressStep('Done, loading buy page...', 100);\r\n            (0,_render__WEBPACK_IMPORTED_MODULE_1__.render)('buy', null, _buy__WEBPACK_IMPORTED_MODULE_2__.buyPageInit);\r\n        })).catch(function (err) {\r\n            console.log(err);\r\n            showWriteToBlockchain();\r\n        });\r\n        console.log('writing to blockcahin', kycOptions);\r\n    });\r\n};\r\nconst checkToShowMetamaskIcon = function (txt) {\r\n    //Waiting on approval to execute\r\n    if (document.getElementById('kyc_progress') && document.getElementById('kyc_progress').style.display != \"none\" && document.getElementById('kyc_steps').innerText.indexOf(txt) != -1) {\r\n        showProgressStep('Hey Ho! Is Metamask be waiting for you?<br />Check top right corner of your browser <img src=\"/img/metamask-pending.png\"/>', 99, true);\r\n        setTimeout(function () { blockshainSlowMessage(); }, 8 * 1000);\r\n    }\r\n};\r\nconst blockshainSlowMessage = function () {\r\n    if (document.getElementById('kyc_progress') && document.getElementById('kyc_progress').style.display != \"none\" && document.getElementById('kyc_steps').innerText.indexOf('Hey Ho!') != -1) {\r\n        showProgressStep('If you have already approved, maybe blockchain is slow. Lets give it a bit. Just double check for <img src=\"/img/metamask-pending.png\"/>', 99, true);\r\n    }\r\n};\r\nconst showWriteToBlockchain = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const user = yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n        document.getElementById('need_native_token').style.display = 'block';\r\n        document.getElementById('native_token_address').value = yield user.get('ethAddress');\r\n        document.getElementById('btnWriteToBlockchain').style.display = \"block\";\r\n        document.getElementById('submitKYC').style.display = \"block\";\r\n        document.getElementById('kyc_progress').style.display = 'none';\r\n        document.getElementById('kyc_reg').style.display = 'none';\r\n        document.getElementById('writeToBlockcahin').style.display = 'block';\r\n        document.getElementById('btnWriteToBlockchain').addEventListener('click', function (evt) {\r\n            evt.preventDefault();\r\n            KYCUserToSmartContract(AlpacaId);\r\n        });\r\n    });\r\n};\r\nfunction serialize(data) {\r\n    let obj = {};\r\n    for (let [key, value] of data) {\r\n        if (obj[key] !== undefined) {\r\n            if (!Array.isArray(obj[key])) {\r\n                obj[key] = [obj[key]];\r\n            }\r\n            obj[key].push(value);\r\n        }\r\n        else {\r\n            obj[key] = value;\r\n        }\r\n    }\r\n    return obj;\r\n}\r\nlet IsValidKYC = false;\r\nconst KYCUserIsValid = function () {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (IsValidKYC)\r\n            return true;\r\n        const kycOptions = {\r\n            contractAddress: _main__WEBPACK_IMPORTED_MODULE_0__.Main.ContractAddressesInfo.KYC_ADDRESS,\r\n            functionName: \"isValid\",\r\n            abi: KYCInfo.abi,\r\n            params: {\r\n                userAddress: moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().get('ethAddress')\r\n            }\r\n        };\r\n        yield moralis__WEBPACK_IMPORTED_MODULE_3___default().executeFunction(kycOptions).then((result) => __awaiter(this, void 0, void 0, function* () {\r\n            console.log('kyc result:', result);\r\n            //todo: make sure result.value is correct\r\n            if (isValidAccountId(result.value)) {\r\n                IsValidKYC = true;\r\n                var user = moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current();\r\n                if (!user.get('alpacaId')) {\r\n                    user.save({ alpacaId: result });\r\n                    yield moralis__WEBPACK_IMPORTED_MODULE_3___default().User.current().fetch();\r\n                }\r\n                return;\r\n            }\r\n        })).catch(function (err) {\r\n            console.log('Not KYC valid', err);\r\n        });\r\n    });\r\n};\r\nfunction getKYCInfo() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (KYCInfo != null)\r\n            return KYCInfo;\r\n        const response = yield fetch(\"../abi/KYC.json\");\r\n        KYCInfo = yield response.json();\r\n        return KYCInfo;\r\n    });\r\n}\r\ninitKYC();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQyxPQUFPLE9BQU8sQ0FBQztJQUNoQixDQUFDO0NBQUE7QUFFRCxPQUFPLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xpbWluYWwtYXBwLy4vc3JjL21vZHVsZXMva3ljLnRzPzc3NTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWFpbiB9ICBmcm9tICcuLi9tYWluJztcclxuXHJcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuL3JlbmRlclwiO1xyXG5pbXBvcnQge2J1eVBhZ2VJbml0fSBmcm9tICcuL2J1eSc7XHJcbmltcG9ydCBNb3JhbGlzIGZyb20gJ21vcmFsaXMnO1xyXG5cclxuZXhwb3J0IGxldCBBbHBhY2FJZDtcclxubGV0IEtZQ0luZm8gOiBhbnk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdEtZQyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuXHRBbHBhY2FJZCA9IChhd2FpdCBNb3JhbGlzLlVzZXIuY3VycmVudCgpLmZldGNoKCkpLmdldCgnYWxwYWNhSWQnKTtcclxuXHRBbHBhY2FJZCA9IHVuZGVmaW5lZDtcclxuXHRjb25zb2xlLmxvZygnYWxwYWNhSWQ6JywgQWxwYWNhSWQpO1xyXG5cdEtZQ0luZm8gPSBnZXRLWUNJbmZvKCk7XHJcblxyXG5cdGlmICghQWxwYWNhSWQpIHtcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcmVnJykuc3R5bGUuZGlzcGxheT0nYmxvY2snO1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyaXRlVG9CbG9ja2NhaGluJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0S1lDJykub25jbGljayA9IHN1Ym1pdEtZQztcclxuXHJcblx0XHRsb2FkTmFtZSgpO1xyXG5cclxuXHR9IGVsc2Uge1xyXG5cdFx0c2hvd1dyaXRlVG9CbG9ja2NoYWluKCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuXHJcbmNvbnN0IGxvYWROYW1lID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNoYXJhY3RlcnMgPSBbXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdMZXNsaWUnLCBmYW1pbHlfbmFtZSA6ICdLbm9wZScsIGVtYWlsX2FkZHJlc3M6J2xlc2xpZS5rbm9wZScgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0FwcmlsJywgZmFtaWx5X25hbWUgOiAnTHVkZ2F0ZScsIGVtYWlsX2FkZHJlc3M6J2FwcmlsLmx1ZGdhdGUnIH0sXHJcblx0XHR7Z2l2ZW5fbmFtZSA6ICdKZXJyeScsIGZhbWlseV9uYW1lIDogJ0dlcmdpY2gnLCBlbWFpbF9hZGRyZXNzOidqZXJyeS5nZXJnaWNoJyB9LFxyXG5cdFx0e2dpdmVuX25hbWUgOiAnVG9tJywgZmFtaWx5X25hbWUgOiAnSGF2ZXJmb3JkJywgZW1haWxfYWRkcmVzczondG9tLmhhdmVyZm9yZCcgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0Rvbm5hJywgZmFtaWx5X25hbWUgOiAnTWVhZ2xlJywgZW1haWxfYWRkcmVzczonZG9ubmEubWVhZ2xlJyB9LFxyXG5cdFx0e2dpdmVuX25hbWUgOiAnQW5keScsIGZhbWlseV9uYW1lIDogJ0R3eWVyJywgZW1haWxfYWRkcmVzczonYW5keS5kd3llcicgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0FubicsIGZhbWlseV9uYW1lIDogJ1BlcmtpbnMnLCBlbWFpbF9hZGRyZXNzOidhbm4ucGVya2lucycgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0JlbicsIGZhbWlseV9uYW1lIDogJ1d5YXR0JywgZW1haWxfYWRkcmVzczonYmVuLnd5YXR0JyB9LFxyXG5cdFx0e2dpdmVuX25hbWUgOiAnQ2hyaXMnLCBmYW1pbHlfbmFtZSA6ICdUcmFlZ2VyJywgZW1haWxfYWRkcmVzczonY2hyaXMudHJhZWdlcicgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0plYW4tUmFscGhpbycsIGZhbWlseV9uYW1lIDogJ1NhcGVyc3RlaW4nLCBlbWFpbF9hZGRyZXNzOidqZWFuLXJhbHBoaW8uc2FwZXJzdGVpbicgfSxcclxuXHRcdHtnaXZlbl9uYW1lIDogJ0NvdW5jaWxtYW4nLCBmYW1pbHlfbmFtZSA6ICdKYW1tJywgZW1haWxfYWRkcmVzczonamFtbScgfVxyXG5cdF1cclxuXHJcblx0bGV0IGlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnMubGVuZ3RoKSAlIGNoYXJhY3RlcnMubGVuZ3RoO1xyXG5cdHZhciBjaGFyYWN0ZXIgPSBjaGFyYWN0ZXJzW2lkeF07XHJcblx0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnaXZlbl9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBjaGFyYWN0ZXIuZ2l2ZW5fbmFtZTtcclxuXHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZhbWlseV9uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBjaGFyYWN0ZXIuZmFtaWx5X25hbWU7XHJcblx0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbF9hZGRyZXNzJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBjaGFyYWN0ZXIuZW1haWxfYWRkcmVzcyArICcuJyArIChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgKyAnQHBhcmtzLWFuZC1yZWMtZXhhbXBsZS5jb20nO1xyXG5cclxufVxyXG5cclxuXHJcbmNvbnN0IHN1Ym1pdEtZQyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuXHRzaG93UHJvZ3Jlc3NTdGVwKCdSZWdpc3RlciBLWUMgd2l0aCBicm9rZXInLCAzMyk7XHJcblx0Y29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfd2l6YXJkX2Zvcm0nKSBhcyBIVE1MRm9ybUVsZW1lbnQ7XHJcblx0bGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcblxyXG5cdGxldCBwYXJhbXMgPSBzZXJpYWxpemUoZGF0YSk7XHJcblxyXG5cdEFscGFjYUlkID0gYXdhaXQgTW9yYWxpcy5DbG91ZC5ydW4oXCJreWNSZWdpc3RyYXRpb25cIiwgcGFyYW1zKTtcclxuXHJcblx0bGV0IHVzZXIgPSBNb3JhbGlzLlVzZXIuY3VycmVudCgpO1xyXG5cdHVzZXIuc2V0KCdhbHBhY2FJZCcsIEFscGFjYUlkKTtcclxuXHR1c2VyLnNhdmUoKTtcclxuXHJcblx0S1lDVXNlclRvU21hcnRDb250cmFjdChBbHBhY2FJZCk7XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcbmNvbnN0IHNob3dQcm9ncmVzc1N0ZXAgPSBhc3luYyBmdW5jdGlvbiAodGV4dCA6IHN0cmluZywgcGVyYyA6IG51bWJlciwgd2FybmluZz8gOiBib29sZWFuKSB7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bldyaXRlVG9CbG9ja2NoYWluJykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXRLWUMnKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19wcm9ncmVzcycpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3N0ZXBzJyk7XHJcblx0ZWxlbWVudC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInByb2dyZXNzX3RleHRcIj4nICsgdGV4dCArICc8L2Rpdj4nO1xyXG5cdGVsZW1lbnQuc3R5bGUud2lkdGggPSBwZXJjICsgJyUnO1xyXG5cclxuXHRlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3Byb2dyZXNzLWJhci1zdHJpcGVkJywgKHBlcmMgIT0gMTAwKSk7XHJcblx0ZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdwcm9ncmVzcy1iYXItYW5pbWF0ZWQnLCAocGVyYyAhPSAxMDApKTtcclxuXHRpZiAod2FybmluZykge1xyXG5cdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdiZy13YXJuaW5nJyk7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Byb2dyZXNzX3RleHRfYXR0bicpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXdhcm5pbmcnKTtcclxuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncHJvZ3Jlc3NfdGV4dF9hdHRuJyk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuY29uc3QgaXNWYWxpZEFjY291bnRJZCA9IGZ1bmN0aW9uKHN0ciA6IHN0cmluZykge1xyXG5cdGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVswLTVdWzAtOWEtZl17M30tWzA4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQnKTtcclxuXHRyZXR1cm4gcmVnZXgudGVzdChzdHIpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEtZQ1VzZXJUb1NtYXJ0Q29udHJhY3QgPSBhc3luYyBmdW5jdGlvbiAoYWNjb3VudElkIDogc3RyaW5nKSB7XHJcblx0aWYgKCFpc1ZhbGlkQWNjb3VudElkKGFjY291bnRJZCkpIHtcclxuXHRcdHNob3dQcm9ncmVzc1N0ZXAoJ1lvdXIgYWNjb3VudCBpZCB3YXMgaW52YWxpZC4gVGhpcyBzaG91bGQgbm90IGhhcHBlbiwgPGEgaHJlZj1cImh0dHBzOi8vZGlzY29yZC5nZy9lUHM1Y1JjZU5CXCIgdGFyZ2V0PVwiX2JsYW5rXCI+cGluZyB1cyBvbiBEaXNjb3JkPC9hPicsIDEwMCwgdHJ1ZSk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCBzdHIgPSAnV3JpdGluZyB0byBibG9ja2NoYWluLCB5b3UgbXVzdCBjb25maXJtIHRyYW5zYWN0aW9uIGluIHlvdXIgd2FsbGV0JztcclxuXHJcblx0S1lDSW5mbyA9IGdldEtZQ0luZm8oKTtcclxuXHJcblx0c2hvd1Byb2dyZXNzU3RlcChzdHIsIDY2KTtcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgY2hlY2tUb1Nob3dNZXRhbWFza0ljb24oc3RyKSB9LCAxMCAqIDEwMDApXHJcblx0Y29uc3Qga3ljT3B0aW9ucyA9IHtcclxuXHRcdGNvbnRyYWN0QWRkcmVzczogTWFpbi5Db250cmFjdEFkZHJlc3Nlc0luZm8uS1lDX0FERFJFU1MsXHJcblx0XHRmdW5jdGlvbk5hbWU6IFwidmFsaWRhdGVBY2NvdW50XCIsXHJcblx0XHRhYmk6IEtZQ0luZm8uYWJpLFxyXG5cdFx0cGFyYW1zOiB7XHJcblx0XHRcdGFjY291bnRJZDogYWNjb3VudElkXHJcblx0XHR9LFxyXG5cdH07XHJcblxyXG5cdGF3YWl0IE1vcmFsaXMuZXhlY3V0ZUZ1bmN0aW9uKGt5Y09wdGlvbnMpLnRoZW4oYXN5bmMgKHJlc3VsdCkgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coJ0tZQ1VzZXJUb1NtYXJ0Q29udHJhY3QgcmVzdWx0JywgcmVzdWx0KTtcclxuXHRcdElzVmFsaWRLWUMgPSB0cnVlO1xyXG5cdFx0c2hvd1Byb2dyZXNzU3RlcCgnRG9uZSwgbG9hZGluZyBidXkgcGFnZS4uLicsIDEwMCk7XHJcblxyXG5cdFx0cmVuZGVyKCdidXknLCBudWxsLCBidXlQYWdlSW5pdCk7XHJcblx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0c2hvd1dyaXRlVG9CbG9ja2NoYWluKCk7XHJcblx0fSk7XHJcblxyXG5cdGNvbnNvbGUubG9nKCd3cml0aW5nIHRvIGJsb2NrY2FoaW4nLCBreWNPcHRpb25zKTtcclxufVxyXG5cclxuXHJcbmNvbnN0IGNoZWNrVG9TaG93TWV0YW1hc2tJY29uID0gZnVuY3Rpb24odHh0KSB7XHJcblx0Ly9XYWl0aW5nIG9uIGFwcHJvdmFsIHRvIGV4ZWN1dGVcclxuXHRpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19wcm9ncmVzcycpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcHJvZ3Jlc3MnKS5zdHlsZS5kaXNwbGF5ICE9IFwibm9uZVwiICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfc3RlcHMnKS5pbm5lclRleHQuaW5kZXhPZih0eHQpICE9IC0xKSB7XHJcblx0XHRzaG93UHJvZ3Jlc3NTdGVwKCdIZXkgSG8hIElzIE1ldGFtYXNrIGJlIHdhaXRpbmcgZm9yIHlvdT88YnIgLz5DaGVjayB0b3AgcmlnaHQgY29ybmVyIG9mIHlvdXIgYnJvd3NlciA8aW1nIHNyYz1cIi9pbWcvbWV0YW1hc2stcGVuZGluZy5wbmdcIi8+JywgOTksIHRydWUpO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGJsb2Nrc2hhaW5TbG93TWVzc2FnZSgpOyB9LCA4ICogMTAwMCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgYmxvY2tzaGFpblNsb3dNZXNzYWdlID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3ljX3Byb2dyZXNzJykgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19wcm9ncmVzcycpLnN0eWxlLmRpc3BsYXkgIT0gXCJub25lXCIgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2t5Y19zdGVwcycpLmlubmVyVGV4dC5pbmRleE9mKCdIZXkgSG8hJykgIT0gLTEpIHtcclxuXHRcdHNob3dQcm9ncmVzc1N0ZXAoJ0lmIHlvdSBoYXZlIGFscmVhZHkgYXBwcm92ZWQsIG1heWJlIGJsb2NrY2hhaW4gaXMgc2xvdy4gTGV0cyBnaXZlIGl0IGEgYml0LiBKdXN0IGRvdWJsZSBjaGVjayBmb3IgPGltZyBzcmM9XCIvaW1nL21ldGFtYXNrLXBlbmRpbmcucG5nXCIvPicsIDk5LCB0cnVlKTtcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IHNob3dXcml0ZVRvQmxvY2tjaGFpbiA9IGFzeW5jIGZ1bmN0aW9uKCkge1xyXG5cdGNvbnN0IHVzZXIgPSBhd2FpdCBNb3JhbGlzLlVzZXIuY3VycmVudCgpO1xyXG5cclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVlZF9uYXRpdmVfdG9rZW4nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdGl2ZV90b2tlbl9hZGRyZXNzJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBhd2FpdCB1c2VyLmdldCgnZXRoQWRkcmVzcycpO1xyXG5cclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuV3JpdGVUb0Jsb2NrY2hhaW4nKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXRLWUMnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcHJvZ3Jlc3MnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdreWNfcmVnJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7XHJcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyaXRlVG9CbG9ja2NhaGluJykuc3R5bGUuZGlzcGxheT0nYmxvY2snO1xyXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5Xcml0ZVRvQmxvY2tjaGFpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcblx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRLWUNVc2VyVG9TbWFydENvbnRyYWN0KEFscGFjYUlkKTtcclxuXHR9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VyaWFsaXplKGRhdGEpIHtcclxuXHRsZXQgb2JqID0ge307XHJcblx0Zm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIGRhdGEpIHtcclxuXHRcdGlmIChvYmpba2V5XSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheShvYmpba2V5XSkpIHtcclxuXHRcdFx0XHRvYmpba2V5XSA9IFtvYmpba2V5XV07XHJcblx0XHRcdH1cclxuXHRcdFx0b2JqW2tleV0ucHVzaCh2YWx1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRvYmpba2V5XSA9IHZhbHVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gb2JqO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGxldCBJc1ZhbGlkS1lDID0gZmFsc2U7XHJcblxyXG5leHBvcnQgY29uc3QgS1lDVXNlcklzVmFsaWQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcblx0aWYgKElzVmFsaWRLWUMpIHJldHVybiB0cnVlO1xyXG5cclxuXHRjb25zdCBreWNPcHRpb25zID0ge1xyXG5cdFx0Y29udHJhY3RBZGRyZXNzOiBNYWluLkNvbnRyYWN0QWRkcmVzc2VzSW5mby5LWUNfQUREUkVTUyxcclxuXHRcdGZ1bmN0aW9uTmFtZTogXCJpc1ZhbGlkXCIsXHJcblx0XHRhYmk6IEtZQ0luZm8uYWJpLFxyXG5cdFx0cGFyYW1zOiB7XHJcblx0XHRcdHVzZXJBZGRyZXNzOiBNb3JhbGlzLlVzZXIuY3VycmVudCgpLmdldCgnZXRoQWRkcmVzcycpXHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0YXdhaXQgTW9yYWxpcy5leGVjdXRlRnVuY3Rpb24oa3ljT3B0aW9ucykudGhlbihhc3luYyAocmVzdWx0KSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygna3ljIHJlc3VsdDonLCByZXN1bHQpO1xyXG5cdFx0Ly90b2RvOiBtYWtlIHN1cmUgcmVzdWx0LnZhbHVlIGlzIGNvcnJlY3RcclxuXHRcdGlmIChpc1ZhbGlkQWNjb3VudElkKHJlc3VsdC52YWx1ZSkpIHtcclxuXHRcdFx0SXNWYWxpZEtZQyA9IHRydWU7XHJcblxyXG5cdFx0XHR2YXIgdXNlciA9IE1vcmFsaXMuVXNlci5jdXJyZW50KCk7XHJcblx0XHRcdGlmICghdXNlci5nZXQoJ2FscGFjYUlkJykpIHtcclxuXHRcdFx0XHR1c2VyLnNhdmUoe2FscGFjYUlkIDogcmVzdWx0fSk7XHJcblx0XHRcdFx0YXdhaXQgTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKS5mZXRjaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRjb25zb2xlLmxvZygnTm90IEtZQyB2YWxpZCcsIGVycik7XHJcblx0fSk7XHJcblxyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0S1lDSW5mbygpOiBQcm9taXNlPGFueT4ge1xyXG5cdGlmIChLWUNJbmZvICE9IG51bGwpIHJldHVybiBLWUNJbmZvO1xyXG5cclxuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiLi4vYWJpL0tZQy5qc29uXCIpO1xyXG5cdEtZQ0luZm8gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblx0cmV0dXJuIEtZQ0luZm87XHJcbn1cclxuXHJcbmluaXRLWUMoKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/modules/kyc.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("219167a433184a55ccb2")
/******/ })();
/******/ 
/******/ }
);